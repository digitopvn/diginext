(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3945],{34187:function(e,t,n){"use strict";n.d(t,{H1:function(){return useAppEnvVarsUpdateApi},JR:function(){return useAppDeployEnvironmentAddVolume},KU:function(){return useAppDeployEnvironmentRemoveVolume},Lw:function(){return useAppDeployEnvironmentSlugApi},TW:function(){return useAppCreateApi},UV:function(){return useAppUpdateApi},VD:function(){return useAppListApi},WK:function(){return useAppArchiveApi},_M:function(){return useAppDeleteApi},i6:function(){return useAppDeployEnvironmentUpdateApi},im:function(){return useAppSlugApi},kK:function(){return useAppDeployEnvironmentDownApi},md:function(){return useAppUnarchiveApi},mv:function(){return useAppAddDomainApi},rg:function(){return useAppDeployEnvironmentDeleteApi},u4:function(){return useAppImportGitApi},un:function(){return useAppDeployEnvironmentLogsApi},wt:function(){return useAppDeployEnvironmentAwakeApi},yq:function(){return useAppDeployEnvironmentSleepApi}});var r=n(11778),useAppListApi=function(e){return(0,r.wz)(["apps","list"],"/api/v1/app",e)},useAppSlugApi=function(e,t){return(0,r.AQ)(["apps",e],"/api/v1/app",e,t)},useAppCreateApi=function(){return(0,r.FF)(["apps"],"/api/v1/app")},useAppImportGitApi=function(e){return(0,r.FF)(["apps"],"/api/v1/app/import-git",e)},useAppUpdateApi=function(e){return(0,r.yt)(["apps","update"],"/api/v1/app",e)},useAppDeleteApi=function(){return(0,r.TV)(["apps","delete"],"/api/v1/app")},useAppUnarchiveApi=function(e){return(0,r.yt)(["apps","unarchive"],"/api/v1/app/unarchive",e)},useAppArchiveApi=function(){return(0,r.TV)(["apps","archive"],"/api/v1/app/archive")},useAppEnvVarsUpdateApi=function(e){return(0,r.yt)(["env_vars","update"],"/api/v1/app/environment/variables",e)},useAppAddDomainApi=function(e){return(0,r.FF)(["env_vars"],"/api/v1/app/environment/domains",e)},useAppDeployEnvironmentSlugApi=function(e,t){return(0,r.AQ)(["deploy_environment",e],"/api/v1/app/deploy_environment",e,t)},useAppDeployEnvironmentUpdateApi=function(e){return(0,r.yt)(["deploy_environment","update"],"/api/v1/app/deploy_environment",e)},useAppDeployEnvironmentDeleteApi=function(){return(0,r.TV)(["deploy_environment","delete"],"/api/v1/app/deploy_environment")},useAppDeployEnvironmentDownApi=function(){return(0,r.TV)(["deploy_environment","down"],"/api/v1/app/deploy_environment/down")},useAppDeployEnvironmentSleepApi=function(){return(0,r.TV)(["deploy_environment","sleep"],"/api/v1/app/deploy_environment/sleep")},useAppDeployEnvironmentAwakeApi=function(){return(0,r.yt)(["deploy_environment","awake"],"/api/v1/app/deploy_environment/awake")},useAppDeployEnvironmentLogsApi=function(e,t){return(0,r.AQ)(["app_logs",e],"/api/v1/app/environment/logs",e,t)},useAppDeployEnvironmentAddVolume=function(e){return(0,r.FF)(["volume"],"/api/v1/app/deploy_environment/volume",e)},useAppDeployEnvironmentRemoveVolume=function(){return(0,r.TV)(["volume"],"/api/v1/app/deploy_environment/volume")}},22598:function(e,t,n){"use strict";n.d(t,{MB:function(){return useAuthApi},Wk:function(){return AuthPage},aC:function(){return useAuth},x4:function(){return login}});var r=n(50029),i=n(16835),o=n(87794),a=n.n(o),s=n(79090),l=n(67848),u=n(85945),c=n(73318),d=n(87066),p=n(47041),m=n(96486),f=n(11163),v=n(67294),g=n(54846),h=n(56832),b=n(55611),y=n(85893),login=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=null!==(e=t.redirectURL)&&void 0!==e?e:b.De.NEXT_PUBLIC_API_BASE_URL,r="".concat(b.De.NEXT_PUBLIC_API_BASE_URL,"/auth/google?redirect_url=").concat(n);window.location.href=r},useAuthApi=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var e,t,n,o=(0,f.useRouter)(),s=(0,h.o)(),u=(0,i.Z)(s,1)[0],c=(null===(t=u.access_token)||void 0===t?void 0:t.toString())||(0,p.getCookie)("x-auth-cookie"),v=(null===(n=u.refresh_token)||void 0===n?void 0:n.toString())||(0,p.getCookie)("refresh_token");return(0,l.a)({queryKey:["auth"],enabled:void 0!==c&&void 0!==v,queryFn:(e=(0,r.Z)(a().mark(function _callee(){var e,t,n,r,i,s,l,u,f,g,h,y,j,x;return a().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return n=Object.fromEntries(new URLSearchParams(o.asPath.indexOf("?")>-1?o.asPath.split("?")[1]:{})),r=(c=c&&(0,m.endsWith)(c,"%23")?c.substring(0,c.length-3):c)?{Authorization:"Bearer ".concat(c)}:{},v=(null===(e=n.refresh_token)||void 0===e?void 0:e.toString())||(null===(t=(0,p.getCookie)("refresh_token"))||void 0===t?void 0:t.toString()),a.prev=4,j="".concat(b.De.NEXT_PUBLIC_API_BASE_URL,"/auth/profile"),a.next=8,d.Z.get(j,{headers:r,params:{access_token:c,refresh_token:v}});case 8:return null!=(x=a.sent.data)&&null!==(i=x.data)&&void 0!==i&&null!==(s=i.token)&&void 0!==s&&s.access_token&&(0,p.setCookie)("x-auth-cookie",null==x?void 0:null===(l=x.data)||void 0===l?void 0:null===(u=l.token)||void 0===u?void 0:u.access_token),null!=x&&null!==(f=x.data)&&void 0!==f&&null!==(g=f.token)&&void 0!==g&&g.refresh_token&&(0,p.setCookie)("refresh_token",null==x?void 0:null===(h=x.data)||void 0===h?void 0:null===(y=h.token)||void 0===y?void 0:y.refresh_token),a.abrupt("return",x);case 15:return a.prev=15,a.t0=a.catch(4),console.error("[HOOK] useAuthApi >",a.t0),a.abrupt("return",void 0);case 19:case"end":return a.stop()}},_callee,null,[[4,15]])})),function(){return e.apply(this,arguments)})})},useAuth=function(){var e=(0,f.useRouter)(),t=(0,h.o)(),n=(0,i.Z)(t,1)[0],r=useAuthApi(),o=r.data,a=r.status,s=r.error,l=(r.refetch,r.isStale,r.isRefetching),c=(o||{}).status,d=null==o?void 0:o.data;(0,u.NL)();var g=n.access_token||(0,p.getCookie)("x-auth-cookie"),b=n.refresh_token||(0,p.getCookie)("refresh_token");return(0,v.useEffect)(function(){console.log("error :>> ",s);var t,n=null===(t=window)||void 0===t?void 0:t.location.href;if(s||!g||!b){e.push(n?"/login?redirect_url=".concat(n):"/login");return}if(!l&&void 0!==c&&"loading"!==a){if(!c&&!d){e.push(n?"/login?redirect_url=".concat(n):"/login");return}((0,m.isEmpty)(null==d?void 0:d.activeWorkspace)||(0,m.isEmpty)(null==d?void 0:d.activeRole))&&e.push("/workspace/select",{query:{access_token:g,refresh_token:b}})}},[a,g,b]),[d,r]},AuthPage=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.children,n=(0,f.useRouter)().query.access_token||(0,p.getCookie)("x-auth-cookie"),r=useAuth(),o=(0,i.Z)(r,2),a=o[0],l=o[1],u=(l.status,l.isLoading),d=l.isFetched;return u?(0,y.jsxs)(g.Z,{children:[(0,y.jsx)(s.Z,{}),(0,y.jsx)("span",{className:"ml-2",children:"Loading..."})]}):d&&!n&&(0,m.isEmpty)(a)?(0,y.jsxs)(g.Z,{children:[(0,y.jsx)("p",{className:"ml-2",children:"Unauthenticated."}),(0,y.jsx)(c.ZP,{href:"/login",children:"Login"})]}):d&&n&&(0,m.isEmpty)(a)?(0,y.jsxs)(g.Z,{children:[(0,y.jsx)(s.Z,{}),(0,y.jsx)("span",{className:"ml-2",children:"Loading..."})]}):d&&((0,m.isEmpty)(null==a?void 0:a.activeWorkspace)||(0,m.isEmpty)(null==a?void 0:a.activeRole))?(0,y.jsxs)(g.Z,{className:"text-center",children:[(0,y.jsx)(s.Z,{}),(0,y.jsx)("span",{className:"ml-2",children:"Loading..."})]}):(0,y.jsx)(y.Fragment,{children:t})}},23907:function(e,t,n){"use strict";n.d(t,{BY:function(){return useBuildListApi},fg:function(){return useBuildStopApi},rA:function(){return useBuildStartApi},tx:function(){return useBuildSlugApi},vk:function(){return useBuildRerunApi}});var r=n(11778),useBuildListApi=function(e){return(0,r.wz)(["builds","list"],"/api/v1/build",e)},useBuildSlugApi=function(e,t){return(0,r.AQ)(["builds",e],"/api/v1/build",e,t)},useBuildStartApi=function(e){return(0,r.FF)(["builds","start"],"/api/v1/build/start",e)},useBuildStopApi=function(e){return(0,r.FF)(["builds","stop"],"/api/v1/build/stop",e)},useBuildRerunApi=function(e){return(0,r.FF)(["builds","rerun"],"/api/v1/build/rerun",e)}},91654:function(e,t,n){"use strict";n.d(t,{EF:function(){return useCloudDatabaseListApi},N2:function(){return useCloudDatabaseSlugApi},O2:function(){return useCloudDatabaseActionAutoBackupApi},OK:function(){return useCloudDatabaseBackupDeleteApi},QB:function(){return useCloudDatabaseDeleteApi},Tf:function(){return useCloudDatabaseActionBackupApi},_M:function(){return useCloudDatabaseUpdateApi},e6:function(){return useCloudDatabaseCreateApi},ij:function(){return useCloudDatabaseActionRestoreApi},sr:function(){return useCloudDatabaseBackupListApi}});var r=n(11778),useCloudDatabaseListApi=function(e){return(0,r.wz)(["databases","list"],"/api/v1/database",e)},useCloudDatabaseSlugApi=function(e,t){return(0,r.AQ)(["databases",e],"/api/v1/database",e,t)},useCloudDatabaseCreateApi=function(e){return(0,r.FF)(["databases"],"/api/v1/database",e)},useCloudDatabaseUpdateApi=function(e){return(0,r.yt)(["databases","update"],"/api/v1/database",e)},useCloudDatabaseDeleteApi=function(){return(0,r.TV)(["databases","delete"],"/api/v1/database")},useCloudDatabaseActionBackupApi=function(e){return(0,r.FF)(["database-action-backup"],"/api/v1/database/backup",e)},useCloudDatabaseActionRestoreApi=function(e){return(0,r.FF)(["database-action-restore"],"/api/v1/database/restore",e)},useCloudDatabaseActionAutoBackupApi=function(e){return(0,r.FF)(["database-action-autos-backup"],"/api/v1/database/auto-backup",e)},useCloudDatabaseBackupListApi=function(e){return(0,r.wz)(["database-backups","list"],"/api/v1/database-backup",e)},useCloudDatabaseBackupDeleteApi=function(){return(0,r.TV)(["database-backups","delete"],"/api/v1/database-backup")}},18418:function(e,t,n){"use strict";n.d(t,{nu:function(){return useCloudProviderListApi}});var r=n(11778),useCloudProviderListApi=function(e){return(0,r.wz)(["providers","list"],"/api/v1/provider",e)}},47859:function(e,t,n){"use strict";n.d(t,{An:function(){return useClusterDeleteApi},CN:function(){return useClusterCreateApi},Qq:function(){return useClusterListAllApi},pD:function(){return useClusterSlugApi},ve:function(){return useClusterUpdateApi},x7:function(){return useClusterListApi}});var r=n(11778),useClusterListApi=function(e){return(0,r.wz)(["clusters","list"],"/api/v1/cluster",e)},useClusterListAllApi=function(e){return(0,r.wz)(["clusters","list-all"],"/api/v1/cluster/all",e)},useClusterSlugApi=function(e,t){return(0,r.AQ)(["cluster",e],"/api/v1/cluster",e,t)},useClusterCreateApi=function(){return(0,r.FF)(["clusters","create"],"/api/v1/cluster")},useClusterUpdateApi=function(e){return(0,r.yt)(["clusters","update"],"/api/v1/cluster",e)},useClusterDeleteApi=function(){return(0,r.TV)(["clusters","delete"],"/api/v1/cluster")}},4400:function(e,t,n){"use strict";n.d(t,{GD:function(){return usePromoteDeployEnvironmentApi},_q:function(){return useDeployFromAppApi},du:function(){return useDeployFromSourceApi},pC:function(){return useDeployFromGitApi}});var r=n(11778),useDeployFromSourceApi=function(e){return(0,r.FF)(["deploy-source"],"/api/v1/deploy/from-source",e)},useDeployFromGitApi=function(e){return(0,r.FF)(["deploy-git"],"/api/v1/deploy/from-git",e)},useDeployFromAppApi=function(e){return(0,r.FF)(["deploy-app"],"/api/v1/deploy/from-app",e)},usePromoteDeployEnvironmentApi=function(e){return(0,r.FF)(["promote-deploy-env"],"/api/v1/deploy/promote",e)}},24998:function(e,t,n){"use strict";n.d(t,{D$:function(){return useFrameworkCreateApi},Dh:function(){return useFrameworkListApi},FX:function(){return useFrameworkSlugApi},fR:function(){return useFrameworkUpdateApi},mt:function(){return useFrameworkDeleteApi}});var r=n(11778),useFrameworkListApi=function(e){return(0,r.wz)(["frameworks","list"],"/api/v1/framework",e)},useFrameworkSlugApi=function(e,t){return(0,r.AQ)(["frameworks",e],"/api/v1/framework",e,t)},useFrameworkCreateApi=function(){return(0,r.FF)(["frameworks"],"/api/v1/framework")},useFrameworkUpdateApi=function(e){return(0,r.yt)(["frameworks"],"/api/v1/framework",e)},useFrameworkDeleteApi=function(){return(0,r.TV)(["frameworks","delete"],"/api/v1/framework")}},74040:function(e,t,n){"use strict";n.d(t,{CX:function(){return useGitProviderDeleteApi},Td:function(){return useGitRepoBranchListApi},Ve:function(){return useGitProviderUpdateApi},o0:function(){return useGitProviderSlugApi},oR:function(){return useGitOrgListApi},sc:function(){return useGitPublicKeyApi},xP:function(){return useGitProviderCreateApi},y3:function(){return useGitProviderListApi}});var r=n(59499),i=n(11778);function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var useGitProviderListApi=function(e){return(0,i.wz)(["gits","list"],"/api/v1/git",e)},useGitProviderSlugApi=function(e,t){return(0,i.AQ)(["gits",e],"/api/v1/git",e,t)},useGitProviderCreateApi=function(e){return(0,i.FF)(["gits"],"/api/v1/git",e)},useGitProviderUpdateApi=function(e){return(0,i.yt)(["gits"],"/api/v1/git",e)},useGitProviderDeleteApi=function(){return(0,i.TV)(["gits"],"/api/v1/git")},useGitPublicKeyApi=function(){return(0,i.h_)(["public-key"],"/api/v1/git/public-key")},useGitOrgListApi=function(e){return(0,i.wz)(["git-orgs","list"],"/api/v1/git/orgs",e)},useGitRepoBranchListApi=function(e,t){return(0,i.wz)(["git-repo-branches",e],"/api/v1/git/orgs/repos/branches",_objectSpread(_objectSpread({},t),{},{filter:_objectSpread(_objectSpread({},null==t?void 0:t.filter),{},{repo:e})}))}},61771:function(e,t,n){"use strict";n.d(t,{BT:function(){return useProjectListWithAppsApi},E_:function(){return useProjectDeleteApi},Zz:function(){return useProjectListApi}});var r=n(11778),useProjectListApi=function(e){return(0,r.wz)(["projects","list"],"/api/v1/project",e)},useProjectListWithAppsApi=function(e){return(0,r.wz)(["projects","list"],"/api/v1/project/with-apps",e)},useProjectDeleteApi=function(){return(0,r.TV)(["projects","delete"],"/api/v1/project")}},95259:function(e,t,n){"use strict";n.d(t,{Bl:function(){return useContainerRegistryCreateApi},EL:function(){return useContainerRegistrySlugApi},Xn:function(){return useContainerRegistryUpdateApi},Y4:function(){return useContainerRegistryDeleteApi},fy:function(){return useContainerRegistryListApi},qB:function(){return useContainerRegistryListAllApi}});var r=n(11778),useContainerRegistryListApi=function(e){return(0,r.wz)(["registries","list"],"/api/v1/registry",e)},useContainerRegistryListAllApi=function(e){return(0,r.wz)(["registries","list-all"],"/api/v1/registry/all",e)},useContainerRegistrySlugApi=function(e,t){return(0,r.AQ)(["registries",e],"/api/v1/registry",e,t)},useContainerRegistryCreateApi=function(e){return(0,r.FF)(["registries"],"/api/v1/registry",e)},useContainerRegistryUpdateApi=function(e){return(0,r.yt)(["registries"],"/api/v1/registry",e)},useContainerRegistryDeleteApi=function(){return(0,r.TV)(["registries"],"/api/v1/registry")}},35333:function(e,t,n){"use strict";n.d(t,{IX:function(){return useReleaseRollOutApi},Lb:function(){return useCreateReleaseFromBuildApi},bE:function(){return usePreviewPrereleaseApi},kW:function(){return useReleaseListApi}});var r=n(11778),useReleaseListApi=function(e){return(0,r.wz)(["releases","list"],"/api/v1/release",e)},useReleaseRollOutApi=function(e){return(0,r.yt)(["releases","rollout"],"/api/v1/release/rollout-v2",e)},useCreateReleaseFromBuildApi=function(e){return(0,r.FF)(["releases","create"],"/api/v1/release/from-build",e)},usePreviewPrereleaseApi=function(e){return(0,r.yt)(["releases","preview"],"/api/v1/release/preview",e)}},72550:function(e,t,n){"use strict";n.d(t,{CN:function(){return useRoleDeleteApi},aB:function(){return useRoleUpdateApi},bd:function(){return useRoleListApi},dZ:function(){return useRoleSlugApi},m1:function(){return useRoleCreateApi}});var r=n(11778),useRoleListApi=function(e){return(0,r.wz)(["roles","list"],"/api/v1/role",e)},useRoleSlugApi=function(e,t){return(0,r.AQ)(["roles",e],"/api/v1/role",e,t)},useRoleCreateApi=function(e){return(0,r.FF)(["roles"],"/api/v1/role",e)},useRoleUpdateApi=function(e){return(0,r.yt)(["roles"],"/api/v1/role",e)},useRoleDeleteApi=function(e){return(0,r.TV)(["roles"],"/api/v1/role")}},44167:function(e,t,n){"use strict";n.d(t,{$:function(){return useStatsApi},u:function(){return useStatsVersionApi}});var r=n(11778),useStatsVersionApi=function(){return(0,r.h_)(["stats","version"],"/api/v1/stats/version",{staleTime:18e5})},useStatsApi=function(){return(0,r.h_)(["stats","summary"],"/api/v1/stats/summary")}},95609:function(e,t,n){"use strict";n.d(t,{ND:function(){return useCloudStorageDeleteApi},Vz:function(){return useCloudStorageListApi},oA:function(){return useCloudStorageSlugApi},oJ:function(){return useCloudStorageCreateApi},xj:function(){return useCloudStorageUpdateApi}});var r=n(11778),useCloudStorageListApi=function(e){return(0,r.wz)(["storages","list"],"/api/v1/storage",e)},useCloudStorageSlugApi=function(e,t){return(0,r.AQ)(["storages",e],"/api/v1/storage",e,t)},useCloudStorageCreateApi=function(e){return(0,r.FF)(["storages"],"/api/v1/storage",e)},useCloudStorageUpdateApi=function(e){return(0,r.yt)(["storages"],"/api/v1/storage",e)},useCloudStorageDeleteApi=function(){return(0,r.TV)(["storages"],"/api/v1/storage")}},15832:function(e,t,n){"use strict";n.d(t,{En:function(){return useUserCreateApi},Hc:function(){return useUserJoinWorkspaceApi},Hm:function(){return useUserUpdatePermissionsApi},Rz:function(){return useUserAssignRoleApi},hz:function(){return useUserSlugApi},kZ:function(){return useUserDeleteApi},mO:function(){return useUserListApi},yl:function(){return useUserUpdateApi}});var r=n(11778),useUserListApi=function(e){return(0,r.wz)(["users","list"],"/api/v1/user",e)},useUserSlugApi=function(e,t){return(0,r.AQ)(["users",e],"/api/v1/user",e,t)},useUserCreateApi=function(e){return(0,r.FF)(["users"],"/api/v1/user",e)},useUserUpdateApi=function(e){return(0,r.yt)(["users"],"/api/v1/user",e)},useUserDeleteApi=function(){return(0,r.TV)(["users"],"/api/v1/user")},useUserJoinWorkspaceApi=function(e){return(0,r.yt)(["users"],"/api/v1/user/join-workspace",e)},useUserAssignRoleApi=function(e){return(0,r.yt)(["users"],"/api/v1/user/assign-role",e)},useUserUpdatePermissionsApi=function(e){return(0,r.yt)(["users"],"/api/v1/user/permissions",e)}},11778:function(e,t,n){"use strict";n.d(t,{AQ:function(){return useItemSlugApi},FF:function(){return useCreateApi},TV:function(){return useDeleteApi},h_:function(){return useApi},wz:function(){return useListApi},yt:function(){return useUpdateApi}});var r=n(4730),i=n(59499),o=n(50029),a=n(27812),s=n(87794),l=n.n(s),u=n(85945),c=n(67848),d=n(48228),p=n(14364),m=n(87066),f=n(47041),v=n(96486),g=n(11163),h=n(55611),b=["current_page","total_pages","total_items","page_size","next_page","prev_page"];function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){(0,i.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var y=p.Z.useApp,useListApi=function(e,t){var n,i,s,d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},p=y().notification,j=(0,g.useRouter)(),x=null!==(i=j.query.access_token)&&void 0!==i?i:(0,f.getCookie)("x-auth-cookie"),A=null!==(s=j.query.refresh_token)&&void 0!==s?s:(0,f.getCookie)("refresh_token"),w=x?{Authorization:"Bearer ".concat(x)}:{};w["Cache-Control"]="no-cache";var Z=d.pagination,S=void 0===Z?{page:1,size:20}:Z,k=d.populate,_=d.filter,P=d.sort,E=new URLSearchParams(S).toString(),C=k?"populate=".concat(k):"",O=_?new URLSearchParams(_).toString():"",N="sort=".concat(void 0===P?"-updatedAt,-createdAt":P),D=(0,u.NL)(),L=(0,a.Z)(e);return L.push((0,v.isEmpty)(_)?{}:_),(0,v.isEmpty)(S)||L.push(S),(0,c.a)({refetchOnWindowFocus:!1,queryKey:L,staleTime:null==d?void 0:d.staleTime,enabled:null==d?void 0:d.enabled,queryFn:(n=(0,o.Z)(l().mark(function _callee(){var n,i,o,a,s,u,c,g,y,j;return l().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,m.Z.get("".concat(h.De.NEXT_PUBLIC_API_BASE_URL).concat(t,"?").concat(O,"&").concat(N,"&").concat(C,"&").concat(E),_objectSpread(_objectSpread({},d),{},{headers:w,params:{refresh_token:A}}));case 2:return(a=l.sent.data).status||(0,v.isEmpty)(a.messages)||a.messages.forEach(function(e){e&&p.error({message:"Failed.",description:e})}),s=a.current_page,u=a.total_pages,c=a.total_items,g=a.page_size,y=a.next_page,j=a.prev_page,(0,r.Z)(a,b),null!==(n=a.token)&&void 0!==n&&n.access_token&&(0,f.setCookie)("x-auth-cookie",null===(i=a.token)||void 0===i?void 0:i.access_token),l.abrupt("return",{list:(null==a?void 0:null===(o=a.data)||void 0===o?void 0:o.map(function(t){return D.setQueryData([e[0],t._id],t),D.setQueryData([e[0],t.slug],t),D.setQueryData([e[0],{slug:t.slug}],t),_objectSpread(_objectSpread({},t),{},{key:t._id})}))||[],pagination:{current_page:s,total_pages:u,total_items:c,page_size:g,next_page:y,prev_page:j},messages:a.messages,status:a.status});case 8:case"end":return l.stop()}},_callee)})),function(){return n.apply(this,arguments)})})},useItemSlugApi=function(e,t,n){var r,i,a,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},u=y().notification,d=(0,g.useRouter)(),p=null!==(i=d.query.access_token)&&void 0!==i?i:(0,f.getCookie)("x-auth-cookie"),b=null!==(a=d.query.refresh_token)&&void 0!==a?a:(0,f.getCookie)("refresh_token"),j=p?{Authorization:"Bearer ".concat(p)}:{};j["Cache-Control"]="no-cache";var x=s.populate,A=s.filter,w=void 0===A?{}:A;w.slug=n;var Z=x?"populate=".concat(x):"",S=new URLSearchParams(w).toString();return(0,c.a)({enabled:null!=n,queryKey:e,staleTime:null==s?void 0:s.staleTime,queryFn:(r=(0,o.Z)(l().mark(function _callee2(){var e,n,r,i,o;return l().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return r="".concat(h.De.NEXT_PUBLIC_API_BASE_URL).concat(t,"?").concat(S,"&").concat(Z),a.next=3,m.Z.get(r,_objectSpread(_objectSpread({},s),{},{headers:j,params:{refresh_token:b}}));case 3:if((i=a.sent.data).status||(0,v.isEmpty)(i.messages)||i.messages.forEach(function(e){e&&u.error({message:"Failed.",description:e})}),null!==(e=i.token)&&void 0!==e&&e.access_token&&(0,f.setCookie)("x-auth-cookie",null===(n=i.token)||void 0===n?void 0:n.access_token),!(0,v.isArray)(i.data)){a.next=10;break}return o=i.data.map(function(e){return _objectSpread(_objectSpread({},e),{},{key:e._id})}),a.abrupt("return",o[0]);case 10:if(!(0,v.isString)(i.data)){a.next=12;break}return a.abrupt("return",{status:i.status,data:i.data,messages:i.messages});case 12:return a.abrupt("return",i.data);case 13:case"end":return a.stop()}},_callee2)})),function(){return r.apply(this,arguments)})})},useApi=function(e,t){var n,r,i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=y().notification,u=(0,g.useRouter)(),d=null!==(r=u.query.access_token)&&void 0!==r?r:(0,f.getCookie)("x-auth-cookie"),p=null!==(i=u.query.refresh_token)&&void 0!==i?i:(0,f.getCookie)("refresh_token"),b=d?{Authorization:"Bearer ".concat(d)}:{};return b["Cache-Control"]="no-cache",(0,c.a)({queryKey:e,staleTime:null==a?void 0:a.staleTime,enabled:null==a?void 0:a.enabled,queryFn:(n=(0,o.Z)(l().mark(function _callee3(){var e;return l().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,m.Z.get("".concat(h.De.NEXT_PUBLIC_API_BASE_URL).concat(t),_objectSpread(_objectSpread({},a),{},{headers:b,params:{refresh_token:p}}));case 2:return(e=n.sent.data).status||(0,v.isEmpty)(e.messages)||e.messages.forEach(function(e){e&&s.error({message:"Failed.",description:e})}),n.abrupt("return",e);case 6:case"end":return n.stop()}},_callee3)})),function(){return n.apply(this,arguments)})})},useCreateApi=function(e,t){var n,r,i,a,s,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},p=y().notification,b=(0,g.useRouter)(),j=(0,u.NL)(),x=null!==(a=b.query.access_token)&&void 0!==a?a:(0,f.getCookie)("x-auth-cookie"),A=null!==(s=b.query.refresh_token)&&void 0!==s?s:(0,f.getCookie)("refresh_token"),w=x?{Authorization:"Bearer ".concat(x)}:{};w["Cache-Control"]="no-cache";var Z=(0,d.D)({mutationFn:(n=(0,o.Z)(l().mark(function _callee6(e){var n,r,i,o,a,s,u,d;return l().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return n=c.populate,c.sort,c.pagination,i=void 0===(r=c.filter)?e._id?{_id:e._id}:void 0:r,e._id&&delete e._id,o=i?"".concat(new URLSearchParams(i).toString(),"&"):"",a=n?"populate=".concat(n):"",s="".concat(h.De.NEXT_PUBLIC_API_BASE_URL).concat(t,"?").concat(o).concat(a),console.log("options :>> ",c),l.next=8,m.Z.post(s,e,_objectSpread(_objectSpread({},c),{},{headers:w,params:{refresh_token:A}}));case 8:if(d=(u=l.sent).data,429!==u.status){l.next=13;break}throw Error("Too many requests.");case 13:return d.status||((0,v.isEmpty)(d.messages)?p.error({message:"Something is wrong..."}):d.messages.forEach(function(e){if(e)try{p.error({message:"Failed.",description:e})}catch(e){console.error(e)}})),l.abrupt("return",d);case 15:case"end":return l.stop()}},_callee6)})),function(e){return n.apply(this,arguments)}),onError:(r=(0,o.Z)(l().mark(function _callee7(e,t,n){return l().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:console.log("error :>> ",e);case 1:case"end":return t.stop()}},_callee7)})),function(e,t,n){return r.apply(this,arguments)}),onMutate:(i=(0,o.Z)(l().mark(function _callee8(t){return l().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,j.cancelQueries({queryKey:e});case 2:return n.abrupt("return",t);case 3:case"end":return n.stop()}},_callee8)})),function(e){return i.apply(this,arguments)}),onSuccess:function(t,n,r){j.invalidateQueries({queryKey:[e[0],"list"]}),j.invalidateQueries({queryKey:[e[0],null==t?void 0:t.slug]})}});return[Z.mutateAsync,Z.status]},useUpdateApi=function(e,t){var r,i,a,s,c,p,b,j=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},x=y().notification,A=(0,g.useRouter)(),w=(0,u.NL)(),Z=null!==(i=A.query.access_token)&&void 0!==i?i:(0,f.getCookie)("x-auth-cookie"),S=null!==(a=A.query.refresh_token)&&void 0!==a?a:(0,f.getCookie)("refresh_token"),k=Z?{Authorization:"Bearer ".concat(Z)}:{};k["Cache-Control"]="no-cache";var _=j.pagination,P=j.populate,E=j.sort,C=j.filter,O=C?"".concat(new URLSearchParams(C).toString(),"&"):"",N=P?"populate=".concat(P,"&"):"",D=new URLSearchParams(void 0===_?{page:1,size:20}:_).toString();null!==(s=null===(c=n.g)||void 0===c?void 0:null===(p=c.window)||void 0===p?void 0:null===(b=p.location)||void 0===b?void 0:b.origin)&&void 0!==s||h.De.NEXT_PUBLIC_BASE_URL;var L="".concat(h.De.NEXT_PUBLIC_API_BASE_URL).concat(t,"?").concat(O).concat("sort=".concat(void 0===E?"-createdAt":E,"&")).concat(N).concat(D),F=(0,d.D)({mutationFn:(r=(0,o.Z)(l().mark(function _callee10(e){var t;return l().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,m.Z.patch(L,e,_objectSpread(_objectSpread({},j),{},{headers:k,params:{refresh_token:S}}));case 2:return(t=n.sent.data).status||((0,v.isEmpty)(t.messages)?x.error({message:"Something is wrong..."}):(console.log("FAILLLLLLLLLLLLLLL :>> ",t.messages,x),t.messages.forEach(function(e){e&&x.error({message:"Failed.",description:e,style:{zIndex:100}})}))),n.abrupt("return",t);case 6:case"end":return n.stop()}},_callee10)})),function(e){return r.apply(this,arguments)}),onSuccess:function(t,n,r){w.invalidateQueries({queryKey:[e[0],"list"]}),null!=C&&C.slug&&w.invalidateQueries({queryKey:[e[0],C.slug]})}});return[F.mutateAsync,F.status]},useDeleteApi=function(e,t){var n,r,i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=y().notification,c=(0,g.useRouter)(),p=(0,u.NL)(),b=null!==(r=c.query.access_token)&&void 0!==r?r:(0,f.getCookie)("x-auth-cookie"),j=null!==(i=c.query.refresh_token)&&void 0!==i?i:(0,f.getCookie)("refresh_token"),x=b?{Authorization:"Bearer ".concat(b)}:{};x["Cache-Control"]="no-cache";var A=(0,d.D)({mutationFn:(n=(0,o.Z)(l().mark(function _callee11(e){var n,r,i;return l().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return n=e?"".concat(new URLSearchParams(e).toString()):"",r="".concat(h.De.NEXT_PUBLIC_API_BASE_URL).concat(t,"?").concat(n),o.next=4,m.Z.delete(r,_objectSpread(_objectSpread({},a),{},{headers:x,params:{refresh_token:j}}));case 4:return(i=o.sent.data).status||((0,v.isEmpty)(i.messages)?s.error({message:"Something is wrong..."}):i.messages.forEach(function(e){console.log("message :>> ",e),e&&s.error({message:"Failed.",description:e})})),o.abrupt("return",i);case 8:case"end":return o.stop()}},_callee11)})),function(e){return n.apply(this,arguments)}),onSuccess:function(t){return p.invalidateQueries({queryKey:[e[0],"list"]}),t}});return[A.mutateAsync,A.status]}},54846:function(e,t,n){"use strict";var r=n(85893);t.Z=function(e){return(0,r.jsx)("div",{className:"absolute left-1/2 top-1/2 w-full max-w-lg -translate-x-1/2 -translate-y-1/2 ".concat(e.className),children:e.children})}},95696:function(e,t,n){"use strict";var r=n(16835),i=n(85175),o=n(78957),a=n(39249),s=n(73318),l=n(71471),u=n(96486),c=n(79661),d=n(85893);t.Z=function(e){e.children;var t=e.className,n=e.value,p=e.mode,m=e.type,f=void 0===m?"text":m,v=(0,c.m9)(),g=(0,r.Z)(v,2),h=g[0],b=g[1];switch(void 0===p?"block":p){case"inline":return(0,d.jsxs)(o.Z.Compact,{className:t,children:[(0,d.jsx)(a.Z,{type:f,className:"flex-none",disabled:!0,value:n}),(0,d.jsx)(s.ZP,{type:"primary",danger:!(0,u.isEmpty)(h),size:"large",onClick:function(){return b(n)},icon:(0,d.jsx)(i.Z,{}),children:h?"Copied":"Copy"})]});case"hidden":return(0,d.jsxs)("div",{className:t,children:[(0,d.jsx)(a.Z,{type:f,className:"flex-none",disabled:!0,value:n,hidden:!0}),(0,d.jsx)(s.ZP,{type:"primary",danger:!(0,u.isEmpty)(h),size:"large",onClick:function(){return b(n)},icon:(0,d.jsx)(i.Z,{}),children:h?"Copied":"Copy"})]});default:return(0,d.jsxs)("div",{className:"text-center ".concat(t||""),children:[(0,d.jsx)(l.Z.Paragraph,{children:"text"===f?(0,d.jsx)("pre",{children:n}):(0,d.jsx)(a.Z,{type:"password",className:"flex-none",disabled:!0,value:n})}),(0,d.jsx)(s.ZP,{type:"primary",danger:!(0,u.isEmpty)(h),size:"large",onClick:function(){return b(n)},icon:(0,d.jsx)(i.Z,{}),children:h?"Copied":"Copy"})]})}}},61123:function(e,t,n){"use strict";n.d(t,{q:function(){return DateDisplay}});var r=n(83062),i=n(27484),o=n.n(i);n(67294);var a=n(85893),s=n(56176),l=n(84110);o().extend(l),o().extend(s);var DateDisplay=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.date;return(0,a.jsx)(r.Z,{title:o()(t).format("LLL"),children:(0,a.jsx)("span",{children:t?o()(t).fromNow():"-"})})}},90447:function(e,t,n){"use strict";n.d(t,{D:function(){return Title},V:function(){return PageTitle}});var r=n(27812),i=n(42952),o=n(3471),a=n(73403),s=n(9361),l=n(73318),u=n(85673),c=n(78957),d=n(11163),p=n(67294),m=n(79661),f=n(85893);function Title(e){s.Z.useToken().token.colorTextHeading;var t=(0,m.vs)().isDarkMode,n=e.color,r=e.value;return(0,f.jsx)("h1",{className:"my-0 grow py-0 pt-2 text-xl font-bold",style:{color:void 0===n?t?"white":"black":n},children:r})}var PageTitle=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,d.useRouter)(),n=e.children,m=e.breadcrumbs,v=e.title,g=e.actions,h=void 0===g?[(0,f.jsx)(l.ZP,{type:"default",icon:(0,f.jsx)(i.Z,{className:"align-middle"}),children:"Settings"},"workspace-setting-btn"),(0,f.jsx)(l.ZP,{type:"default",icon:(0,f.jsx)(o.Z,{className:"align-middle"})},"more-btn")]:g;s.Z.useToken().token.colorTextHeading;var b=(0,p.useState)(!1),y=b[0],j=b[1];return(0,p.useEffect)(function(){j(!0)},[]),y?(0,f.jsxs)("div",{className:"border-b border-gray-300 px-6 py-4",children:[(0,f.jsx)(u.Z,{items:[{key:"breadcrumb-home",href:"".concat(t.basePath,"/"),title:(0,f.jsx)(f.Fragment,{children:(0,f.jsx)(a.Z,{})})}].concat((0,r.Z)((void 0===m?[]:m).map(function(e,t){return{key:"breadcrumb-".concat(t),href:e.url,title:(0,f.jsxs)(f.Fragment,{children:[e.icon," ",e.name]})}})))}),(0,f.jsxs)("div",{className:" flex w-full flex-col md:flex-row",children:[(0,f.jsx)(Title,{value:void 0===v?"Page Title":v}),(0,f.jsx)("div",{children:(0,f.jsx)(c.Z,{wrap:!0,children:h})})]}),n]}):null}},15227:function(e,t,n){"use strict";n.d(t,{w:function(){return BuildList}});var r=n(59499),i=n(50029),o=n(16835),a=n(87794),s=n.n(a),l=n(24019),u=n(45605),c=n(79090),d=n(18429),p=n(8751),m=n(87784),f=n(89035),v=n(55287),g=n(67841),h=n(84213),b=n(14364),y=n(66309),j=n(78957),x=n(83062),A=n(73318),w=n(44973),Z=n(27484),S=n.n(Z),k=n(39860),_=n(96486),P=n(41664),E=n.n(P),C=n(11163),O=n(67294),N=n(22598),D=n(23907),L=n(4400),F=n(35333),B=n(61123),R=n(90447),I=n(56832),U=n(85893);function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var Q=n(56176),V=n(84110);S().extend(V),S().extend(Q);var T=new k.b,z=new k.f(T),K=b.Z.useApp,q=n(97869),BuildList=function(){(0,C.useRouter)();var e,t,n,r=K(),a=(0,N.aC)(),b=(0,o.Z)(a,1)[0],Z=(0,I.o)(),k=(0,o.Z)(Z,2),P=k[0],Q=k[1].setQuery,V=P.project,T=P.app,M=P.env,G=[{title:"Name",width:80,dataIndex:"name",key:"name",render:function(e,t){return(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)("p",{children:(0,U.jsx)(E(),{href:"/build/logs?build_slug=".concat(t.slug).concat(t.env?"&env=".concat(t.env):""),children:(0,U.jsx)("strong",{children:e})})}),(0,U.jsxs)("ul",{className:"ml-4 list-disc",children:[(0,U.jsxs)("li",{children:["Project: ",(0,U.jsx)(y.Z,{children:t.projectSlug})]}),(0,U.jsxs)("li",{children:["App: ",(0,U.jsx)(y.Z,{children:t.appSlug})]}),(0,U.jsxs)("li",{children:["Author: ",(0,U.jsx)(y.Z,{children:t.ownerSlug||"-"})]}),(0,U.jsxs)("li",{children:["CLI: ",(0,U.jsx)(y.Z,{children:t.cliVersion||"-"})]}),(0,U.jsxs)("li",{children:["Server: ",(0,U.jsx)(y.Z,{children:t.serverVersion||"-"})]}),(0,U.jsxs)("li",{children:["Location: ",(0,U.jsx)(y.Z,{children:t.serverLocation||"-"})]}),void 0!==t.duration?(0,U.jsxs)("li",{children:["Duration:"," ",(0,U.jsx)(y.Z,{color:"gold",icon:(0,U.jsx)(l.Z,{}),children:z.humanize(t.duration,{round:!0})},"duration")]}):(0,U.jsx)(U.Fragment,{})]})]})}},{title:"Created at",dataIndex:"createdAt",key:"createdAt",width:30,render:function(e){return(0,U.jsx)(B.q,{date:e})},sorter:function(e,t){return S()(e.createdAt).diff(S()(t.createdAt))}},{title:"Deploy Environment",dataIndex:"env",key:"env",width:35,filters:[{text:"dev",value:"dev"},{text:"demo",value:"demo"},{text:"beta",value:"beta"},{text:"alpha",value:"alpha"},{text:"staging",value:"staging"},{text:"prod",value:"prod"}],onFilter:function(e,t){return!!t.env&&t.env===e},render:function(e){return(0,U.jsx)(y.Z,{color:"pink",children:e||"-"})}},{title:"Build Status",dataIndex:"status",key:"status",width:30,filters:[{text:"building",value:"building"},{text:"error",value:"error"},{text:"success",value:"success"}],onFilter:function(e,t){return!!t.status&&t.status===e},render:function(e){var t="warning",n=(0,U.jsx)(u.Z,{});switch(e){case"building":t="processing",n=(0,U.jsx)(c.Z,{className:"align-middle"});break;case"failed":t="error",n=(0,U.jsx)(d.Z,{className:"align-middle"});break;case"success":t="success",n=(0,U.jsx)(p.Z,{className:"align-middle"});break;default:t="default",n=(0,U.jsx)(u.Z,{})}return(0,U.jsx)(y.Z,{color:t,icon:n,children:e})}},{title:"Deploy Status",dataIndex:"deployStatus",key:"deployStatus",width:30,filters:[{text:"pending",value:"pending"},{text:"in_progress",value:"in_progress"},{text:"failed",value:"failed"},{text:"success",value:"success"},{text:"cancelled",value:"cancelled"}],onFilter:function(e,t){return!!t.deployStatus&&t.deployStatus===e},render:function(e){var t="warning",n=(0,U.jsx)(u.Z,{});switch(e){case"in_progress":t="processing",n=(0,U.jsx)(c.Z,{className:"align-middle"});break;case"failed":t="error",n=(0,U.jsx)(d.Z,{className:"align-middle"});break;case"success":t="success",n=(0,U.jsx)(p.Z,{className:"align-middle"});break;case"cancelled":t="yellow",n=(0,U.jsx)(d.Z,{className:"align-middle"});break;default:t="default",n=(0,U.jsx)(u.Z,{})}return(0,U.jsx)(y.Z,{color:t,icon:n,children:e})}},{title:"Action",key:"action",width:30,dataIndex:"action"}],J={workspace:null===(n=b.activeWorkspace)||void 0===n?void 0:n._id};V&&(J.projectSlug=V),T&&(J.appSlug=T);var H=(0,O.useState)(1),Y=H[0],X=H[1],W=(0,L._q)(),$=(0,o.Z)(W,2);$[0],$[1];var ee=(0,L.pC)(),et=(0,o.Z)(ee,2);et[0],et[1];var en=(0,D.fg)(),er=(0,o.Z)(en,2),ei=er[0];er[1];var eo=(0,D.BY)({sort:"-createdAt",pagination:{page:Y,size:100},filter:J}),ea=eo.data,es=eo.status,el=ea||{},eu=el.list,ec=(el.pagination||{}).total_items,openBuildLogs=function(e,t){var n={build_slug:e};t&&(n.env=t),P.lv1?n.lv2="build_logs":n.lv1="build_logs",Q(n)},ed=(0,F.Lb)(),ep=(0,o.Z)(ed,1)[0],em=(e=(0,i.Z)(s().mark(function _callee(e,t){var n,i;return s().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(!(0,_.isEmpty)(e)){o.next=3;break}return r.notification.error({message:"Failed to release the build.",description:"Build not found: ".concat(e),placement:"top"}),o.abrupt("return");case 3:return o.prev=3,o.next=6,ep({build:e,env:null!=M?M:t});case 6:null!=(n=o.sent)&&n.status&&(i=null==n?void 0:n.data,r.notification.success({message:"Congrats, the release has been created successfully!",description:(0,U.jsxs)(U.Fragment,{children:["You can now preview it on ",(0,U.jsx)("a",{href:"https://".concat(null==i?void 0:i.prereleaseUrl),children:"PRE-RELEASE"})," endpoint."]}),placement:"top"})),o.next=14;break;case 10:o.prev=10,o.t0=o.catch(3),console.error("Could not process releasing this build:",o.t0),r.notification.error({message:"Failed to roll out.",description:"Could not process releasing this build: ".concat(o.t0),placement:"top"});case 14:case"end":return o.stop()}},_callee,null,[[3,10]])})),function(t,n){return e.apply(this,arguments)}),ef=(t=(0,i.Z)(s().mark(function _callee3(e){var t;return s().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,ei({slug:e});case 2:console.log("[BuildList] stopBuild :>> ",t=n.sent),null!=t&&t.status||r.notification.error({message:"Failed to proceed.",description:"Could not stop this build due to server issue. Please try again later.",placement:"top"});case 5:case"end":return n.stop()}},_callee3)})),function(e){return t.apply(this,arguments)}),ev=null==eu?void 0:eu.map(function(e){return _objectSpread(_objectSpread({id:e._id},e),{},{action:(0,U.jsxs)(j.Z.Compact,{children:["building"===e.status&&(0,U.jsx)(x.Z,{title:"Stop building",children:(0,U.jsx)(A.ZP,{danger:!0,icon:(0,U.jsx)(m.Z,{}),onClick:function(){return ef(null==e?void 0:e.slug)}})}),(0,U.jsx)(x.Z,{title:"View logs",children:(0,U.jsx)(A.ZP,{icon:(0,U.jsx)(f.Z,{}),onClick:function(){return openBuildLogs(e.slug,e.env)}})}),(0,U.jsx)(x.Z,{title:"Open image URL",children:(0,U.jsx)(A.ZP,{icon:(0,U.jsx)(v.Z,{}),href:"https://".concat(e.image),target:"_blank"})}),(0,U.jsx)(x.Z,{title:"Create a release from this build",children:(0,U.jsx)(A.ZP,{disabled:"success"!==e.status,icon:(0,U.jsx)(g.Z,{}),onClick:function(){var t;return em(null===(t=e._id)||void 0===t?void 0:t.toString(),e.env)}})})]})})}),eg=(0,O.useRef)(null),eh=(0,h.Z)(eg);return(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(R.V,{title:"Builds (".concat(ec?q(ec):"-",")"),breadcrumbs:[{name:"Workspace"}],actions:[]}),(0,U.jsx)("div",{className:"h-full flex-auto overflow-hidden",ref:eg,children:(0,U.jsx)(w.Z,{size:"small",loading:"loading"===es,columns:G,dataSource:ev,scroll:{x:550,y:void 0!==(null==eh?void 0:eh.height)?eh.height-140:void 0},sticky:{offsetHeader:0},pagination:{current:Y,pageSize:100,total:ec,position:["bottomCenter"]},onChange:function(e){var t=e.current;X(null!=t?t:1)}})})]})}},26686:function(e,t,n){"use strict";n.d(t,{O:function(){return BuildLogs}});var r=n(27812),i=n(16835),o=n(89035),a=n(13520),s=n(10524),l=n(24019),u=n(8751),c=n(79090),d=n(11475),p=n(20841),m=n(87547),f=n(50067),v=n(18429),g=n(87784),h=n(87740),b=n(77171),y=n(61716),j=n(84213),x=n(79880),A=n(9361),w=n(26855),Z=n(66309),S=n(78957),k=n(73318),_=n(27484),P=n.n(_),E=n(25935),C=n(39860),O=n(41664),N=n.n(O),D=n(11163),L=n(67294),F=n(91036),B=n.n(F),R=n(23907),I=n(4400),U=n(35333),Q=n(90447),V=n(56832);n(55611);var T=n(85893),z=new C.b,K=new C.f(z),q=n(57046),M=n(56176),G=n(84110);P().extend(G),P().extend(M);var stripAnsiCodes=function(e){return B()("".concat(e).replace(/[\u001b\u009b][[()#;?]*(?:[0-9]{1,4}(?:;[0-9]{0,4})*)?[0-9A-ORZcf-nqry=><]/g,""))},BuildLogs=function(e){e.slug;var t,n=(0,D.useRouter)(),_=(0,V.o)(),C=(0,i.Z)(_,1)[0],O=C.build_slug,F=C.env,B=(0,R.tx)(O),z=B.data,M=void 0===z?{}:z,G=B.refetch,J=(null==M?void 0:M.logs)||"",H=stripAnsiCodes(J),Y=(0,R.vk)(),X=(0,i.Z)(Y,2),W=X[0];X[1];var $=(0,I.du)(),ee=(0,i.Z)($,2);ee[0],ee[1];var et=(0,I._q)(),en=(0,i.Z)(et,2),er=en[0];en[1];var ei=(0,R.fg)(),eo=(0,i.Z)(ei,2),ea=eo[0];eo[1];var es=(M||{}).status,el=H.split("\n").map(function(e,t){return e.toString()}),eu=window.location.origin,ec=(0,L.useState)(["Connecting..."]),ed=ec[0],ep=ec[1],em=(0,L.useState)("building"),ef=em[0],ev=em[1],eg=(0,L.useState)("in_progress"),eh=eg[0],eb=eg[1],ey=(0,L.useState)(!1),ej=(ey[0],ey[1]),ex=(0,L.useState)(!1),eA=ex[0],ew=ex[1],eZ=(0,L.useState)("0"),eS=eZ[0],ek=eZ[1],e_=(0,U.kW)({filter:{build:null==M?void 0:M._id},enabled:void 0!==M&&"success"===ef}),eP=e_.data;e_.refetch;var eE=(eP||{}).list,eC=(void 0===eE?[]:eE)[0],eO=(0,L.useRef)(null),eN=(0,L.useRef)(null),eD=(0,y.Z)(eN),eL=(0,L.useRef)(null),eF=(0,j.Z)(eL),eB=((null==eD?void 0:eD.top)||0)>((null==eF?void 0:eF.height)||0)-((null===(t=window)||void 0===t?void 0:t.innerHeight)||0),eR=A.Z.useToken().token.colorText,scrollToBottom=function(){var e;eB||null==eO||null===(e=eO.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},rerunBuildAndDeploy=function(){if(!M.branch||!M.appSlug||void 0===F){w.ZP.error({message:"Unable to re-run the build & deploy process: invalid build."});return}er({appSlug:M.appSlug,gitBranch:M.branch,deployParams:{env:F.toString(),deployInBackground:!0}}).then(function(e){e.status?(w.ZP.success({message:"Build & deploy process have been re-ran, redirecting..."}),n.push(e.data.logURL)):w.ZP.error({message:e.messages.join(", ")})}).catch(function(e){return w.ZP.error({message:"Unable to re-run the build & deploy process: ".concat(e)})})},rerunBuild=function(){if(!M){w.ZP.error({message:"Build not found."});return}if(!M.branch||!M.appSlug){w.ZP.error({message:"Unable to re-run the build: invalid build (missing git branch)."});return}W({buildWatch:!1}).then(function(e){e.status?(w.ZP.success({message:"Build has been re-ran, redirecting..."}),n.push(e.data.logURL)):w.ZP.error({message:e.messages.join(", ")})}).catch(function(e){return w.ZP.error({message:"Unable to re-run the build: ".concat(e)})}),w.ZP.info({message:"This feature is under development."})};(0,x.Z)(function(){null!=M&&M.startTime&&ek(K.humanize(P()(M.startTime).diff(P()()),{round:!0})),null!=M&&M.duration&&ek(K.humanize((null==M?void 0:M.duration)||0,{round:!0}))},null!=M&&M.duration?void 0:1e3),(0,L.useEffect)(function(){null!=M&&M.duration&&ek(K.humanize((null==M?void 0:M.duration)||0,{round:!0}))},[null==M?void 0:M.duration]),(0,L.useEffect)(function(){J&&ep(el)},[el.length]),(0,L.useEffect)(function(){scrollToBottom()},[ed.length]),(0,L.useEffect)(function(){if(null==J||J.toString().toLowerCase(),ev((null==M?void 0:M.status)||"start"),F?(eb(M.deployStatus||"pending"),"pending"!==M.deployStatus&&"in_progress"!==M.deployStatus&&ej(!0)):((null==M?void 0:M.status)!=="building"&&ej(!0),eb("cancelled")),!O)return function(){return!1};var e=q(eu,{transports:["websocket"]});return e.on("connect",function(){e.emit("join",{room:O}),e.on("message",function(t){var n=t.action,i=t.message;i&&(ep(function(e){return[].concat((0,r.Z)(e),[stripAnsiCodes(i)])}),((null==i?void 0:i.toLowerCase().indexOf("command failed with exit code 1"))>-1||(null==i?void 0:i.toLowerCase().indexOf("[error]"))>-1)&&(ev("failed"),ej(!0),G())),"failed"===n&&(ev("failed"),ej(!0),G()),"end"===n&&(e.disconnect(),ej(!0),ev("success"),G())})}),e.on("disconnect",function(){console.log("[socket] disconnected !"),ep(function(e){return[].concat((0,r.Z)(e),["Disconnected with build server."])})}),function(){e.connected&&(console.log("[socket] disconnecting..."),e.disconnect(),G())}},[null==M?void 0:M.status,null==M?void 0:M.deployStatus,null==eC?void 0:eC.status,J,O]);var eI=(0,L.useState)(!1),eU=eI[0],eQ=eI[1];return(0,L.useEffect)(function(){eQ(!0)},[]),eU?(0,T.jsxs)("div",{style:{color:eR},className:"flex h-full flex-col",children:[(0,T.jsx)(Q.V,{title:"Build Logs: ".concat(O),breadcrumbs:[{name:"Builds",url:"/build"},{name:'Project "'.concat(null==M?void 0:M.projectSlug,'"')},{name:'App "'.concat(null==M?void 0:M.appSlug,'"')},null!=M&&M.env?{name:'Env "'.concat(null==M?void 0:M.env,'"')}:{}],actions:[(0,T.jsxs)(Z.Z,{color:"gold",icon:(0,T.jsx)(o.Z,{}),children:["CLI: ",(null==M?void 0:M.cliVersion)||"-"]},"cli-version"),(0,T.jsxs)(Z.Z,{color:"gold",icon:(0,T.jsx)(a.Z,{}),children:["Server: ",(null==M?void 0:M.serverVersion)||"-"]},"server-version"),(0,T.jsxs)(Z.Z,{color:"gold",icon:(0,T.jsx)(s.Z,{}),children:["Location: ",(null==M?void 0:M.serverLocation)||"-"]},"server-location"),(0,T.jsxs)(Z.Z,{color:"gold",icon:(0,T.jsx)(l.Z,{}),children:["Duration: ",eS]},"duration"),(0,T.jsxs)(Z.Z,{color:"success"===ef?"green":"building"===ef?"blue":"failed"===ef?"red":"default",icon:"success"===ef?(0,T.jsx)(u.Z,{}):"building"===ef?(0,T.jsx)(c.Z,{}):"failed"===ef?(0,T.jsx)(d.Z,{}):(0,T.jsx)(T.Fragment,{}),children:["Build: ",ef]},"status"),(0,T.jsxs)(Z.Z,{color:"success"===eh?"green":"in_progress"===eh?"blue":"failed"===eh?"red":"cancelled"===eh?"yellow":"default",icon:"success"===eh?(0,T.jsx)(u.Z,{}):"in_progress"===eh?(0,T.jsx)(c.Z,{}):"failed"===eh||"cancelled"===eh?(0,T.jsx)(d.Z,{}):(0,T.jsx)(T.Fragment,{}),children:["Deploy: ",eh||"N/A"]},"deployStatus")],children:(0,T.jsxs)(S.Z,{wrap:!0,className:"mt-2",children:[(0,T.jsx)(Z.Z,{color:"geekblue",icon:(0,T.jsx)(p.Z,{}),children:P()(null==M?void 0:M.createdAt).format("LLL")},"created-date"),(0,T.jsx)(Z.Z,{color:"magenta",icon:(0,T.jsx)(m.Z,{}),children:null==M?void 0:M.createdBy},"created-by"),(null==M?void 0:M.status)==="success"&&(0,T.jsx)(N(),{href:"https://".concat(null==M?void 0:M.image,":").concat(null==M?void 0:M.tag),target:"_blank",children:(0,T.jsx)(Z.Z,{color:"volcano",icon:(0,T.jsx)(f.Z,{}),children:"click to view image url"},"image-tag")})]})}),(0,T.jsx)("div",{className:"flex-auto overflow-x-auto overflow-y-scroll",ref:eN,children:(0,T.jsxs)("pre",{className:"no-scrollbar bg-black p-4 pt-6 text-neutral-200",ref:eL,style:{width:eA?"100%":"auto",whiteSpace:eA?"normal":"nowrap"},children:[ed.filter(function(e){return""!==e}).map(function(e,t){var n="".concat(e);if(n.toLowerCase().indexOf("error")>-1)return(0,T.jsxs)("p",{children:[(0,T.jsx)(v.Z,{className:"text-red-600"})," ",(0,T.jsx)("span",{className:"text-red-600",children:(0,E.ZP)("".concat(e))})]},"log-line-".concat(t));if(n.indexOf("http://")>-1||n.indexOf("https://")>-1){var r=n.split(" ").map(function(e){var t=e;return(e.indexOf("http://")>-1||e.indexOf("https://")>-1)&&(t='<a href="'.concat(e.replace(/"/gi,""),'" target="_blank" style="color: #008dff">').concat(e.replace(/"/gi,""),"</a>")),t}).join(" ");return(0,T.jsx)("p",{children:(0,E.ZP)(r)},"log-line-".concat(t))}return(0,T.jsx)("p",{children:(0,E.ZP)("".concat(e))},"log-line-".concat(t))}),(0,T.jsx)("p",{ref:eO})]})}),(0,T.jsxs)("div",{className:"flex-col px-4 py-2 md:flex",children:[(0,T.jsxs)("div",{className:"flex-auto",children:["building"===ef&&(0,T.jsxs)("h3",{className:"text-xl text-blue-600",children:[(0,T.jsx)(c.Z,{})," Build: In progress."]}),"failed"===ef&&(0,T.jsxs)("h2",{className:"text-xl text-red-600",children:[(0,T.jsx)(d.Z,{})," Build: Failed."]}),"success"===ef&&(0,T.jsxs)("h2",{className:"text-xl text-green-600",children:[(0,T.jsx)(u.Z,{})," Build: Success."]}),"cancelled"===eh?(0,T.jsxs)("h3",{className:"text-xl text-yellow-600",children:[(0,T.jsx)(l.Z,{})," Deploy: Cancelled."]}):"in_progress"===eh?(0,T.jsxs)("h3",{className:"text-xl text-blue-600",children:[(0,T.jsx)(c.Z,{})," Deploy: In progress."]}):"failed"===eh?(0,T.jsxs)("h3",{className:"text-xl text-red-600",children:[(0,T.jsx)(d.Z,{})," Deploy: Failed."]}):"success"===eh?(0,T.jsxs)("h3",{className:"text-xl text-green-600",children:[(0,T.jsx)(u.Z,{})," Deploy: Success."]}):"pending"===eh?(0,T.jsxs)("h3",{className:"text-xl",children:[(0,T.jsx)(l.Z,{})," Deploy: Wait for building."]}):(0,T.jsxs)("h3",{className:"text-xl",children:[(0,T.jsx)(l.Z,{})," Deploy: N/A."]})]}),(0,T.jsxs)("div",{className:"flex gap-2",children:["building"===es&&(0,T.jsx)(k.ZP,{icon:(0,T.jsx)(g.Z,{}),onClick:function(){return ea({slug:O})},children:"STOP"}),"building"!==es&&void 0!==F&&(0,T.jsx)(k.ZP,{icon:(0,T.jsx)(h.Z,{}),onClick:function(){return rerunBuildAndDeploy()},children:"RE-RUN"}),"building"!==es&&(0,T.jsx)(k.ZP,{icon:(0,T.jsx)(h.Z,{}),onClick:function(){return rerunBuild()},children:"RE-BUILD"}),(0,T.jsx)(k.ZP,{onClick:function(){return ew(!eA)},children:eA?"UNWRAP":"WRAP"}),(0,T.jsx)(k.ZP,{icon:(0,T.jsx)(b.Z,{}),onClick:function(){return scrollToBottom()}})]})]})]}):null}},53072:function(e,t,n){"use strict";var r=n(50029),i=n(16835),o=n(87794),a=n.n(o),s=n(88284),l=n(87603),u=n(14364),c=n(8232),d=n(78957),p=n(65217),m=n(39249),f=n(73318),v=n(67294),g=n(47859),h=n(4400),b=n(85893);t.Z=function(e){var t,n,o,y,j=e.app,x=e.fromEnv,A=e.toEnv,w=e.next,Z=u.Z.useApp().notification,S=A?null===(n=j.deployEnvironment)||void 0===n?void 0:n[A]:void 0,k=Object.keys(j.deployEnvironment||{}),_=(0,g.x7)({pagination:{size:50}}),P=_.data,E=_.status,C=(P||{}).list,O=(0,h.GD)(),N=(0,i.Z)(O,2),D=N[0],L=N[1],F=v.useState(null===(o=j.deployEnvironment)||void 0===o?void 0:null===(y=o[x])||void 0===y?void 0:y.cluster),B=(0,i.Z)(F,2),R=B[0],I=B[1],U=v.useState(A||""),Q=(0,i.Z)(U,2),V=Q[0],T=Q[1],z=v.useState(k),K=(0,i.Z)(z,2),q=K[0];K[1];var M=v.useState(!1),G=(0,i.Z)(M,2),J=G[0],H=G[1],Y=(t=(0,r.Z)(a().mark(function _callee(e){var t;return a().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return console.log("PromoteDeployEnvironmentModal > Submit:",e),H(!0),n.next=4,D({appSlug:j.slug,fromEnv:x,env:A||e.newEnv||e.toEnv,clusterSlug:e.cluster});case 4:console.log("PromoteDeployEnvironmentModal > Response :>> ",t=n.sent),H(!1),t.status&&Z.success({message:"Successfully!",description:"App has been promoted to ".concat(A," environment.")}),w&&w(t);case 9:case"end":return n.stop()}},_callee)})),function(e){return t.apply(this,arguments)});return(0,v.useEffect)(function(){if("success"===E){var e=null==C?void 0:C.find(function(e){return e.slug===(null==S?void 0:S.cluster)});I(null==e?void 0:e.slug)}},[E]),(0,v.useEffect)(function(){A&&(console.log("toEnv :>> ",A),T(A))},[A]),(0,b.jsxs)(c.Z,{name:"promote-deploy-environment",style:{width:"100%",maxWidth:600},layout:"vertical",onFinish:Y,onFinishFailed:function(e){console.log("Failed:",e),H(!1)},autoComplete:"off",preserve:!1,disabled:J,children:[!A&&(0,b.jsxs)(d.Z,{children:[(0,b.jsx)(c.Z.Item,{label:"Select a target deploy environment",name:"toEnv",initialValue:V,children:(0,b.jsx)(p.Z,{showSearch:!0,disabled:""!==V,value:V,size:"large",placeholder:"Select a target deploy environment",filterOption:function(e,t){var n;return(null!==(n=null==t?void 0:t.label)&&void 0!==n?n:"").toLowerCase().includes(e.toLowerCase())},onSelect:function(e){return console.log('Selected "'.concat(e,'"'))},options:(q||[]).map(function(e){return{label:e,value:e}})})}),(0,b.jsx)(c.Z.Item,{label:"New deploy environment",name:"newEnv",children:(0,b.jsx)(m.Z,{size:"large",onChange:function(e){T(e.currentTarget.value)}})})]}),(0,b.jsx)(c.Z.Item,{label:"Select target cluster",name:"cluster",rules:[{required:!0,message:"Please select your cluster."}],initialValue:R,required:!0,children:(0,b.jsx)(p.Z,{showSearch:!0,size:"large",placeholder:"Select target cluster",filterOption:function(e,t){var n;return(null!==(n=null==t?void 0:t.label)&&void 0!==n?n:"").toLowerCase().includes(e.toLowerCase())},defaultValue:R,options:null==C?void 0:C.map(function(e){return{label:"".concat(e.name," (").concat(e.slug,")"),value:e.slug}})})}),(0,b.jsx)(c.Z.Item,{noStyle:!0,children:(0,b.jsx)(f.ZP,{type:"primary",size:"large",htmlType:"submit",style:{width:"100%"},icon:"success"===L?(0,b.jsx)(s.Z,{}):(0,b.jsx)(l.Z,{}),loading:"loading"===L,children:"Submit"})})]})}},20100:function(e,t,n){"use strict";n.d(t,{Y:function(){return filterUniqueItems},z:function(){return filterDuplicatedItems}});var r=n(27812);function filterDuplicatedItems(e){return e.filter(function(e,t,n){return n.indexOf(e)===t})}function filterUniqueItems(e){return(0,r.Z)(new Set(e))}},91710:function(e,t,n){"use strict";n.d(t,{Su:function(){return r},gM:function(){return i}});var r=["50m","100m","200m","400m","600m","1000m","2000m","4000m","8000m","16000m"],i=["128Mi","256Mi","512Mi","1024Mi","2048Mi","4096Mi","8192Mi","16384Mi","32768Mi","65536Mi"]},56832:function(e,t,n){"use strict";n.d(t,{o:function(){return useRouterQuery}});var r=n(59499),i=n(11163),o=n(67294);function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var useRouterQuery=function(){var e=(0,i.useRouter)(),t=e.asPath,n=Object.fromEntries(new URLSearchParams(e.asPath.split("?")[1])),r=(0,o.useState)(n),a=r[0],s=r[1],deleteQuery=function(t){var n=_objectSpread({},a);return t.forEach(function(e){delete n[e]}),s(n),e.push(e.pathname,{query:n}),a},deleteAllQueryKeys=function(){return deleteQuery(Object.keys(a))};return(0,o.useEffect)(function(){if(e.isReady){if(-1===t.indexOf("?")){deleteAllQueryKeys();return}s(n)}},[e.asPath,e.isReady]),[a,{setQuery:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=_objectSpread(_objectSpread({},a),t);return s(n),e.push("".concat(e.pathname),{query:n}),n},deleteQuery:deleteQuery,deleteAllQueryKeys:deleteAllQueryKeys}]}},3669:function(e,t,n){"use strict";n.d(t,{Jl:function(){return useLayoutProvider}});var r=n(75355),i=n(67294),o=n(85893),a=(0,i.createContext)({sidebarCollapsed:!1}),useLayoutProvider=function(){return(0,i.useContext)(a)};t.ZP=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,r.Z)(),n=(0,i.useState)(!1),s=n[0],l=n[1];return(0,o.jsx)(a.Provider,{value:{sidebarCollapsed:s,toggleSidebar:function(e){return void 0!==e?l(e):l(function(e){return!e})},responsive:t},children:e.children})}},55240:function(e,t,n){"use strict";n.d(t,{f9:function(){return useModalProvider}});var r=n(16835),i=n(85576),o=n(67294),a=n(85893),s=(0,o.createContext)({}),useModalProvider=function(){return(0,o.useContext)(s)};t.ZP=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=i.Z.useModal(),n=(0,r.Z)(t,2),o=n[0],l=n[1];return(0,a.jsxs)(s.Provider,{value:{modal:o},children:[e.children,l]})}},6761:function(e,t,n){"use strict";n.d(t,{o:function(){return Main}});var r,i=n(28459),o=n(9361),a=n(14364),s=n(67294),l=n(79661),u=n(96486),c=n.n(u),d=n(4298),p=n.n(d),m=n(85893),measure_GtagScript=function(e){var t=e.gaIds;return(0,u.isEmpty)(t)?null:(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(p(),{src:"https://www.googletagmanager.com/gtag/js?id=".concat(t[0]),strategy:"afterInteractive"}),(0,m.jsx)(p(),{id:"google-analytics",strategy:"afterInteractive",children:"\n                window.dataLayer = window.dataLayer || [];\n                function gtag(){window.dataLayer.push(arguments);}\n                gtag('js', new Date());\n                ".concat(t.map(function(e){return"gtag('config', '".concat(e,"');\n")}),"\n                ")})]})},f=n(16835),v=n(26058),g=n(53971),h=n(52545),b=n(22844),y=n(50067),j=n(45350),x=n(65184),A=n(24019),w=n(4828),Z=n(13179),S=n(70125),k=n(40717),_=n(13520),P=n(139),E=n(238),C=n(26522),O=n(87547),N=n(55355),D=n(94149),L=n(42952),F=n(50136),B=n(87412),R=n(41664),I=n.n(R),U=n(11163),Q=n(22598),V=n(3669),T=[{key:"menu/",icon:(0,m.jsx)(g.Z,{}),label:(0,m.jsx)(I(),{href:"/",children:"Dashboard"})},{key:"menu/project",icon:(0,m.jsx)(h.Z,{}),label:(0,m.jsx)(I(),{href:"/project",children:"Projects & apps"})},{key:"menu/deploy-environment",icon:(0,m.jsx)(b.Z,{}),label:(0,m.jsx)(I(),{href:"/deploy-environment",children:"Deploy environments"})},{key:"menu/build",icon:(0,m.jsx)(y.Z,{}),label:(0,m.jsx)("a",{href:"/build",children:"Builds & deploys"})},{key:"menu/framework",icon:(0,m.jsx)(j.Z,{}),label:(0,m.jsx)(I(),{href:"/framework",children:"Frameworks"})},{key:"menu/git",icon:(0,m.jsx)(x.Z,{}),label:(0,m.jsx)(I(),{href:"/git",children:"Git Providers"})},{key:"menu/cronjob",icon:(0,m.jsx)(A.Z,{}),label:(0,m.jsx)(I(),{href:"/cronjob",children:"Cronjobs"})},{key:"menu/monitor",icon:(0,m.jsx)(w.Z,{}),label:(0,m.jsx)(m.Fragment,{children:"Monitoring"}),children:[{key:"menu/monitor/node",label:(0,m.jsx)(I(),{href:"/monitor/node",children:"Nodes"})},{key:"menu/monitor/namespace",label:(0,m.jsx)(I(),{href:"/monitor/namespace",children:"Namespaces"})},{key:"menu/monitor/service",label:(0,m.jsx)(I(),{href:"/monitor/service",children:"Services"})},{key:"menu/monitor/ingress",label:(0,m.jsx)(I(),{href:"/monitor/ingress",children:"Ingresses"})},{key:"menu/monitor/deployment",label:(0,m.jsx)(I(),{href:"/monitor/deployment",children:"Deployments"})},{key:"menu/monitor/pod",label:(0,m.jsx)(I(),{href:"/monitor/pod",children:"Pods"})},{key:"menu/monitor/secret",label:(0,m.jsx)(I(),{href:"/monitor/secret",children:"Secrets"}),disabled:!0},{key:"menu/monitor/configmap",label:(0,m.jsx)(I(),{href:"/monitor/configmap",children:"ConfigMaps"}),disabled:!0},{key:"menu/monitor/volume",label:(0,m.jsx)(I(),{href:"/monitor/volume",children:"Persistent Volumes"}),disabled:!0},{key:"menu/monitor/certmanager",label:(0,m.jsx)(I(),{href:"/monitor/certmanager",children:"Cert-Manager CRDs"}),disabled:!0}]},{key:"menu/infrastructure",icon:(0,m.jsx)(Z.Z,{}),label:"Infrastructure",children:[{key:"menu/infrastructure/cloud-provider",icon:(0,m.jsx)(S.Z,{}),label:(0,m.jsx)(I(),{href:"/infrastructure/cloud-provider",children:"Cloud Providers"})},{key:"menu/infrastructure/cluster",icon:(0,m.jsx)(k.Z,{}),label:(0,m.jsx)(I(),{href:"/infrastructure/cluster",children:"K8S Clusters"})},{key:"menu/infrastructure/database",icon:(0,m.jsx)(_.Z,{}),label:(0,m.jsx)(I(),{href:"/infrastructure/database",children:"Databases"})},{key:"menu/infrastructure/registry",icon:(0,m.jsx)(P.Z,{}),label:(0,m.jsx)(I(),{href:"/infrastructure/registry",children:"Container Registries"})},{key:"menu/infrastructure/storage",icon:(0,m.jsx)(E.Z,{}),label:(0,m.jsx)(I(),{href:"/infrastructure/storage",children:"Cloud Storages"})}]},{key:"menu/workspace",icon:(0,m.jsx)(C.Z,{}),label:(0,m.jsx)(m.Fragment,{children:"Workspace"}),children:[{key:"menu/workspace/users",icon:(0,m.jsx)(O.Z,{}),label:(0,m.jsx)(I(),{href:"/workspace/users",children:"Users"})},{key:"menu/workspace/teams",icon:(0,m.jsx)(N.Z,{}),label:(0,m.jsx)(I(),{href:"/workspace/teams",children:"Teams"})},{key:"menu/workspace/roles",icon:(0,m.jsx)(D.Z,{}),label:(0,m.jsx)(I(),{href:"/workspace/roles",children:"Roles"})}]},{key:"menu/settings",icon:(0,m.jsx)(L.Z,{}),label:(0,m.jsx)(I(),{href:"/settings",children:"Settings"})}],MenuSider=function(){var e,t,n=(0,U.useRouter)(),r=(0,V.Jl)(),i=r.sidebarCollapsed,o=r.toggleSidebar,a=r.responsive,c=(0,l.vs)().isDarkMode,d=(0,Q.aC)(),p=(0,f.Z)(d,1)[0];((null==p?void 0:p.roles)||[]).filter(function(e){var t;return e.workspace===(null===(t=p.activeWorkspace)||void 0===t?void 0:t._id)})[0];var v="menu/".concat((0,u.trimStart)(n.pathname,"/").split("/")[0]),g="menu".concat((0,u.trimEnd)(n.pathname,"/")),h=(0,s.useMemo)(function(){var e;return(null===(e=window)||void 0===e?void 0:e.innerWidth)>=728},[null===(e=window)||void 0===e?void 0:e.innerWidth]);(0,s.useEffect)(function(){var e;(null===(e=window)||void 0===e?void 0:e.innerWidth)<728&&!i&&o&&o(!0)},[null===(t=window)||void 0===t?void 0:t.innerWidth]);var b=(0,s.useState)("".concat(n.basePath,"/assets/images/diginext_logo_white.svg")),y=b[0],j=b[1],x=(0,s.useState)("".concat(n.basePath,"/assets/images/diginext-icon-white.svg")),A=x[0],w=x[1];(0,s.useEffect)(function(){j(c?"".concat(n.basePath,"/assets/images/diginext_logo_white.svg"):"".concat(n.basePath,"/assets/images/diginext_logo.svg")),w(c?"".concat(n.basePath,"/assets/images/diginext-icon-white.svg"):"".concat(n.basePath,"/assets/images/diginext-icon-black.svg"))},[c]);var Z=(0,s.useState)(!1),S=Z[0],k=Z[1];return(0,s.useEffect)(function(){k(!0)},[]),S?(0,m.jsxs)(B.ZP,{theme:"light",collapsible:h,collapsed:i,onCollapse:function(e){return o&&o(e)},breakpoint:"lg",width:250,style:{height:"100%"},collapsedWidth:null!=a&&a.md?"50":"0",children:[i?(0,m.jsx)("div",{className:"mx-auto my-5 w-[32px]",children:(0,m.jsx)(I(),{href:"/",legacyBehavior:!0,children:(0,m.jsx)("img",{src:A,alt:"DXUP Logo"})})}):(0,m.jsx)("div",{className:"mx-auto my-5 w-36",children:(0,m.jsx)(I(),{href:"/",legacyBehavior:!0,children:(0,m.jsx)("img",{src:y,alt:"DXUP Logo"})})}),(0,m.jsx)(F.Z,{mode:"inline",inlineCollapsed:i,defaultOpenKeys:[v],defaultSelectedKeys:[v,g],items:T})]}):null},z=n(45605),K=n(83062),q=n(18418),M=n(47859),G=n(59499),J=n(50029),H=n(87794),Y=n.n(H),X=n(51042),W=n(8232),$=n(48054),ee=n(40056),et=n(78957),en=n(73318),er=n(86738),ei=n(56832),eo=n(75355),ea=n(85265);function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){(0,G.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var es=(0,s.createContext)({drawerVisibility:{lv1:!1,lv2:!1},toggleDrawer:function(e,t){},showDrawer:function(e,t){},closeDrawer:function(e){}}),useDrawerProvider=function(){return(0,s.useContext)(es)},providers_DrawerProvider=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,s.useState)({lv1:!1,lv2:!1}),n=t[0],r=t[1],i=(0,s.useState)(),o=i[0],a=i[1],l=(0,s.useState)(),u=l[0],c=l[1],d=(0,ei.o)(),p=(0,f.Z)(d,2),v=(p[0],p[1]),g=(v.setQuery,v.deleteQuery),h=v.deleteAllQueryKeys,b=(0,eo.Z)(),toggleDrawer=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"lv1",t=arguments.length>1?arguments[1]:void 0;return void 0!==t?r(function(n){var r=_objectSpread({},n);return r[e]=t,r}):r(function(t){var n=_objectSpread({},t);return n[e]=!t[e],n})};return(0,m.jsxs)(es.Provider,{value:{drawerVisibility:n,toggleDrawer:toggleDrawer,showDrawer:function(e,t){switch(null==t?void 0:t.level){case 1:a(e),toggleDrawer("lv1",!0);break;case 2:c(e),toggleDrawer("lv2",!0)}},closeDrawer:function(e){e?(g([e]),toggleDrawer(e,!1)):(h(),r({lv1:!1,lv2:!1}))}},children:[e.children,(0,m.jsxs)(ea.Z,{title:null==o?void 0:o.title,placement:"right",onClose:function(){h(),r(function(e){return _objectSpread(_objectSpread({},e),{},{lv1:!1})})},open:n.lv1,width:null!=b&&b.md?"70%":"100%",styles:{body:{overflow:"auto",overflowX:"hidden",flex:"auto",padding:0}},destroyOnClose:!0,children:[null==o?void 0:o.content,(0,m.jsx)(ea.Z,{title:null==u?void 0:u.title,placement:"right",onClose:function(){g(["lv2"]),r(function(e){return _objectSpread(_objectSpread({},e),{},{lv2:!1})})},open:n.lv2,width:null!=b&&b.md?"70%":"100%",styles:{body:{overflow:"auto",overflowX:"hidden",flex:"auto",padding:0}},destroyOnClose:!0,children:null==u?void 0:u.content})]})]})},el=n(28508),eu=n(79090),ec=n(88284),ed=n(63764),ep=n(18429),em=n(8751),ef=n(52645),ev=n(71965),smart_form_ManualSaveController=function(e){var t,n=e.compact,r=void 0!==n&&n,i=e.name,o=e.setValue,a=e.initialValue,s=e.apiStatus,l=W.Z.useFormInstance(),reset=function(){l.setFieldValue(i,a),o(a)},clear=function(){l.setFieldValue(i,""),o(void 0)};return s&&"loading"===s&&(t=(0,m.jsx)(eu.Z,{})),s&&"error"===s&&(t=(0,m.jsx)(ep.Z,{})),s&&"success"===s&&(t=(0,m.jsx)(em.Z,{})),(0,m.jsxs)(et.Z,{size:r?4:8,children:[t,(0,m.jsx)(en.ZP,{type:"primary",icon:r&&(0,m.jsx)(ec.Z,{}),onClick:function(){return l.submit()},children:!r&&"Save"}),(0,m.jsx)(en.ZP,{icon:r&&(0,m.jsx)(ef.Z,{}),onClick:function(){return clear()},children:!r&&"Clear"}),(0,m.jsx)(en.ZP,{danger:!0,icon:r&&(0,m.jsx)(ev.Z,{}),onClick:function(){return reset()},children:!r&&"Reset"})]})};function SmartCodeEditor_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var smart_form_SmartCodeEditor=function(e){var t,n=e.label,r=e.postLabel,i=e.name,o=e.required,a=e.requiredMessage,u=e.defaultValue,c=e.initialValue,d=e.value,p=e.status,f=e.autoSave,v=void 0!==f&&f,g=e.isNew,h=e.lang,b=e.height,y=e.disabled,j=void 0!==y&&y,x=e.visible,A=e.wrapperStyle,w=W.Z.useFormInstance(),Z=(0,s.useState)(null!=d?d:u),S=Z[0],k=Z[1],_=(0,l.Nr)(S,500),P=(0,l.vs)().isDarkMode;return(0,s.useEffect)(function(){w.setFieldValue(i,d),k(d||"")},[d]),(0,s.useEffect)(function(){_!==d&&v&&!g&&w.submit()},[_]),p&&"error"===p[i]&&(t=(0,m.jsxs)("span",{className:"text-red-600",children:[(0,m.jsx)(el.Z,{}),"Failed"]})),p&&"loading"===p[i]&&(t=(0,m.jsx)(eu.Z,{})),p&&"success"===p[i]&&(t=(0,m.jsx)(ec.Z,{color:"green"})),(0,m.jsxs)(W.Z.Item,{label:(0,m.jsxs)(et.Z,{size:"small",children:[n,t]}),name:i,rules:[{required:void 0!==o&&o,message:void 0===a?"Please input your ".concat(n):a}],style:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?SmartCodeEditor_ownKeys(Object(n),!0).forEach(function(t){(0,G.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):SmartCodeEditor_ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({display:void 0===x||x?"block":"none"},A),children:[(0,m.jsx)(ed.ZP,{className:"w-full overflow-hidden rounded-md border border-gray-400",height:b||300,theme:P?"vs-dark":"vs-light",language:(void 0===h?[]:h)[0]||"javascript",value:S,onChange:function(e){e&&(w.setFieldValue(i,e),k(e))},options:{minimap:{enabled:!1},readOnly:j,scrollBeyondLastLine:!1}}),r,!j&&!v&&!g&&(0,m.jsx)(smart_form_ManualSaveController,{initialValue:c,name:i,setValue:k}),(0,m.jsx)("div",{className:"h-4"})]})},eg=n(39249);function SmartInput_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var smart_form_SmartInput=function(e){var t,n=e.label,r=e.postLabel,i=e.name,o=e.required,a=e.requiredMessage,u=e.defaultValue,c=e.initialValue,d=e.value,p=e.status,f=e.autoSave,v=void 0===f||f,g=e.isNew,h=e.placeholder,b=e.disabled,y=e.visible,j=void 0===y||y,x=e.wrapperStyle,A=W.Z.useFormInstance(),w=(0,s.useState)(null!=d?d:u),Z=w[0],S=w[1],k=(0,l.Nr)(Z,500);return(0,s.useEffect)(function(){A.setFieldValue(i,d),S(d)},[d]),(0,s.useEffect)(function(){k!==d&&v&&!g&&A.submit()},[k]),p&&"error"===p[i]&&(t=(0,m.jsxs)("span",{className:"text-red-600",children:[(0,m.jsx)(el.Z,{}),"Failed"]})),p&&"loading"===p[i]&&(t=(0,m.jsx)(eu.Z,{})),p&&"success"===p[i]&&(t=(0,m.jsx)(ec.Z,{color:"green"})),(0,m.jsx)(W.Z.Item,{label:(0,m.jsxs)(et.Z.Compact,{direction:"vertical",children:[(0,m.jsxs)(et.Z,{size:"small",children:[n,t]}),r]}),name:i,rules:[{required:void 0!==o&&o,message:void 0===a?"Please input your ".concat(n):a}],style:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?SmartInput_ownKeys(Object(n),!0).forEach(function(t){(0,G.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):SmartInput_ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({display:j?"block":"none"},x),children:(0,m.jsxs)(et.Z,{direction:"vertical",className:"w-full",children:[(0,m.jsxs)("div",{children:[(0,m.jsx)(eg.Z,{autoComplete:"off",placeholder:h,onChange:function(e){var t=e.currentTarget.value;A.setFieldValue(i,t),S(t)},value:Z,disabled:void 0!==b&&b,hidden:!1===j||void 0!==e.displayValue}),void 0!==e.displayValue?(0,m.jsx)(en.ZP,{disabled:!0,block:!0,children:e.displayValue}):null]}),!v&&!g&&(0,m.jsx)(smart_form_ManualSaveController,{initialValue:c,name:i,setValue:S})]})})},eh=n(52745);function SmartNumber_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var smart_form_SmartNumber=function(e){var t,n=e.label,r=e.postLabel,i=e.name,o=e.required,a=e.requiredMessage,c=e.defaultValue,d=e.initialValue,p=e.value,f=e.status,v=e.autoSave,g=void 0===v||v,h=e.isNew,b=e.placeholder,y=e.disabled,j=e.visible,x=e.wrapperStyle,A=W.Z.useFormInstance(),w=(0,s.useState)(null!=p?p:c),Z=w[0],S=w[1],k=(0,l.Nr)(Z,500),plus=function(e){var t=(null!=Z?Z:0)+e;A.setFieldValue(i,t),S(t)},minus=function(e){var t=(null!=Z?Z:0)-e;t<0&&(t=0),A.setFieldValue(i,t),S(t)};return(0,s.useEffect)(function(){A.setFieldValue(i,p),S(p)},[p]),(0,s.useEffect)(function(){k!==p&&g&&!h&&A.submit()},[k]),f&&"error"===f[i]&&(t=(0,m.jsxs)("span",{className:"text-red-600",children:[(0,m.jsx)(el.Z,{}),"Failed"]})),f&&"loading"===f[i]&&(t=(0,m.jsx)(eu.Z,{})),f&&"success"===f[i]&&(t=(0,m.jsx)(ec.Z,{color:"green"})),(0,m.jsx)(W.Z.Item,{label:(0,m.jsxs)(et.Z.Compact,{direction:"vertical",children:[(0,m.jsxs)(et.Z,{size:"small",children:[n,t]}),r]}),name:i,rules:[{required:void 0!==o&&o,message:void 0===a?"Please input your ".concat(n):a}],style:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?SmartNumber_ownKeys(Object(n),!0).forEach(function(t){(0,G.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):SmartNumber_ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({display:void 0===j||j?"block":"none"},x),children:(0,m.jsxs)(et.Z,{direction:"vertical",className:"w-full",children:[(0,m.jsx)(eg.Z,{size:"small",autoComplete:"off",placeholder:b,onChange:function(e){var t=(0,u.toNumber)(e.currentTarget.value);A.setFieldValue(i,t),S(t)},value:Z,disabled:void 0!==y&&y,prefix:(0,m.jsx)(en.ZP,{type:"link",icon:(0,m.jsx)(eh.Z,{}),onClick:function(){return minus(1)}}),suffix:(0,m.jsx)(en.ZP,{type:"link",icon:(0,m.jsx)(X.Z,{}),onClick:function(){return plus(1)}}),style:{textAlign:"center"}}),!g&&!h&&(0,m.jsx)(smart_form_ManualSaveController,{initialValue:d,name:i,setValue:S})]})})},eb=n(51444),ey=n(10038);function SmartPassword_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var smart_form_SmartPassword=function(e){var t,n=e.label,r=e.postLabel,i=e.name,o=e.required,a=e.requiredMessage,u=e.defaultValue,c=e.initialValue,d=e.value,p=e.status,f=e.autoSave,v=void 0===f||f,g=e.isNew,h=e.placeholder,b=e.disabled,y=e.visible,j=e.wrapperStyle,x=W.Z.useFormInstance(),A=(0,s.useState)(null!=d?d:u),w=A[0],Z=A[1],S=(0,l.Nr)(w,500);return(0,s.useEffect)(function(){x.setFieldValue(i,d),Z(d)},[d]),(0,s.useEffect)(function(){S!==d&&v&&!g&&x.submit()},[S]),p&&"error"===p[i]&&(t=(0,m.jsxs)("span",{className:"text-red-600",children:[(0,m.jsx)(el.Z,{}),"Failed"]})),p&&"loading"===p[i]&&(t=(0,m.jsx)(eu.Z,{})),p&&"success"===p[i]&&(t=(0,m.jsx)(ec.Z,{color:"green"})),(0,m.jsx)(W.Z.Item,{label:(0,m.jsxs)(et.Z.Compact,{direction:"vertical",children:[(0,m.jsxs)(et.Z,{size:"small",children:[n,t]}),r]}),name:i,rules:[{required:void 0!==o&&o,message:void 0===a?"Please input your ".concat(n):a}],style:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?SmartPassword_ownKeys(Object(n),!0).forEach(function(t){(0,G.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):SmartPassword_ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({display:void 0===y||y?"block":"none"},j),children:(0,m.jsxs)(et.Z,{direction:"vertical",className:"w-full",children:[(0,m.jsx)(eg.Z.Password,{autoComplete:"off",placeholder:h,onChange:function(e){var t=e.currentTarget.value;x.setFieldValue(i,t),Z(t)},value:w,disabled:void 0!==b&&b,iconRender:function(e){return e?(0,m.jsx)(eb.Z,{}):(0,m.jsx)(ey.Z,{})}}),!v&&!g&&(0,m.jsx)(smart_form_ManualSaveController,{initialValue:c,name:i,setValue:Z})]})})},ej=n(65217);function SmartSelect_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var smart_form_SmartSelect=function(e){var t,n=e.className,r=e.style,i=e.label,o=e.postLabel,a=e.name,u=e.required,c=e.requiredMessage,d=e.defaultValue,p=e.initialValue,f=e.value,v=e.status,g=e.autoSave,h=void 0===g||g,b=e.isNew,y=e.options,j=e.onChange,x=e.disabled,A=e.visible,w=e.wrapperStyle,Z=W.Z.useFormInstance(),S=(0,s.useState)(null!=f?f:d),k=S[0],_=S[1],P=(0,l.Nr)(k,500);return(0,s.useEffect)(function(){Z.setFieldValue(a,f),_(f),j&&j(f)},[f]),(0,s.useEffect)(function(){P!==f&&h&&!b&&Z.submit()},[P]),v&&"error"===v[a]&&(t=(0,m.jsxs)("span",{className:"text-red-600",children:[(0,m.jsx)(el.Z,{}),"Failed"]})),v&&"loading"===v[a]&&(t=(0,m.jsx)(eu.Z,{})),v&&"success"===v[a]&&(t=(0,m.jsx)(ec.Z,{color:"green"})),(0,m.jsx)(W.Z.Item,{label:(0,m.jsxs)(et.Z,{size:"small",children:[i,t]}),name:a,rules:[{required:void 0!==u&&u,message:void 0===c?"Please input your ".concat(i):c}],style:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?SmartSelect_ownKeys(Object(n),!0).forEach(function(t){(0,G.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):SmartSelect_ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({display:void 0===A||A?"block":"none"},w),children:(0,m.jsxs)(et.Z.Compact,{direction:"horizontal",className:"w-full",children:[(0,m.jsx)(ej.Z,{className:n,style:r,value:k,onChange:function(e){Z.setFieldValue(a,e),_(e),j&&j(e)},options:y,disabled:void 0!==x&&x}),o,!h&&!b&&(0,m.jsx)(smart_form_ManualSaveController,{initialValue:p,name:a,setValue:_})]})})},ex=n(27812),eA=n(48689),ew=n(2487),eZ=n(20100),smart_form_SmartStringList=function(e){e.className,e.style;var t,n,r=e.label,i=e.postLabel,o=e.name,a=e.required,c=e.requiredMessage,d=e.value,p=void 0===d?[]:d,v=e.defaultValue,g=e.initialValue,h=e.status,b=void 0===h?{}:h,y=e.autoSave,j=void 0===y||y,x=e.isNew,A=(e.options,e.onChange),w=(e.disabled,e.visible),Z=W.Z.useFormInstance(),S=(0,s.useState)(""),k=S[0],_=S[1],P=(0,s.useState)(null!==(t=null!=p?p:void 0===v?[]:v)&&void 0!==t?t:[]),E=P[0],C=P[1],O=(0,l.Nr)(E,500),addValue=function(e){var t=(0,eZ.z)(E||[]),n=t.indexOf(e)>-1?t:[].concat((0,ex.Z)(t),[e]);Z.setFieldValue(o,n),C(n),_(""),b[o]="loading",A&&A(e)},removeValueAtIndex=function(e){var t=E?E.filter(function(t,n){return n!==e}):[];C(t),Z.setFieldValue(o,t),A&&A(t)};return(0,s.useEffect)(function(){var e=null!=p?p:[];p&&!(0,u.isArray)(p)&&void 0!==p[0]&&(e=[],Object.entries(p).forEach(function(t){var n=(0,f.Z)(t,2)[1];console.log("val :>> ",n),"string"==typeof n&&e.push(n)})),Z.setFieldValue(o,e),C(e)},[p]),(0,s.useEffect)(function(){O!==p&&j&&!x&&Z.submit()},[O]),b&&"error"===b[o]&&(n=(0,m.jsxs)("span",{className:"text-red-600",children:[(0,m.jsx)(el.Z,{}),"Failed"]})),b&&"loading"===b[o]&&(n=(0,m.jsx)(eu.Z,{})),b&&"success"===b[o]&&(n=(0,m.jsx)(ec.Z,{color:"green"})),(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(W.Z.Item,{label:(0,m.jsxs)(et.Z,{size:"small",children:[r,n]}),name:o,rules:[{required:void 0!==a&&a,message:void 0===c?"Please input your ".concat(r):c}],style:{display:void 0===w||w?"block":"none"},children:(0,m.jsx)(ew.Z,{bordered:!0,size:"small",dataSource:null!=E?E:[],footer:(0,m.jsx)(et.Z.Compact,{style:{width:"100%"},children:(0,m.jsx)(eg.Z.Search,{value:k,onChange:function(e){return _(e.currentTarget.value)},loading:b&&"loading"===b[o],enterButton:(0,m.jsx)(en.ZP,{icon:(0,m.jsx)(X.Z,{}),onClick:function(){return addValue(k)},children:"Add"})})}),renderItem:function(e,t){return(0,m.jsx)(ew.Z.Item,{actions:[(0,m.jsx)(en.ZP,{icon:(0,m.jsx)(eA.Z,{}),onClick:function(){return removeValueAtIndex(t)}},"".concat(r,"-delete-btn"))],children:(0,m.jsx)(ew.Z.Item.Meta,{title:(0,m.jsx)("span",{children:e})})})}})}),i,!j&&!x&&(0,m.jsx)(smart_form_ManualSaveController,{initialValue:void 0===g?[]:g,name:o,setValue:C})]})},eS=eg.Z.TextArea,smart_form_SmartTextArea=function(e){var t,n=e.label,r=e.postLabel,i=e.name,o=e.required,a=e.requiredMessage,u=e.defaultValue,c=e.initialValue,d=e.value,p=e.status,f=e.autoSave,v=void 0===f||f,g=e.isNew,h=e.disabled,b=e.visible,y=W.Z.useFormInstance(),j=(0,s.useState)(null!=d?d:u),x=j[0],A=j[1],w=(0,l.Nr)(x,500);return(0,s.useEffect)(function(){y.setFieldValue(i,d),A(d)},[d]),(0,s.useEffect)(function(){w!==d&&v&&!g&&y.submit()},[w]),p&&"error"===p[i]&&(t=(0,m.jsxs)("span",{className:"text-red-600",children:[(0,m.jsx)(el.Z,{}),"Failed"]})),p&&"loading"===p[i]&&(t=(0,m.jsx)(eu.Z,{})),p&&"success"===p[i]&&(t=(0,m.jsx)(ec.Z,{color:"green"})),(0,m.jsx)(W.Z.Item,{label:(0,m.jsxs)(et.Z,{size:"small",children:[n,t]}),name:i,rules:[{required:void 0!==o&&o,message:void 0===a?"Please input your ".concat(n):a}],style:{display:void 0===b||b?"block":"none"},children:(0,m.jsxs)(et.Z,{direction:"vertical",className:"w-full",children:[(0,m.jsx)(eS,{rows:3,onChange:function(e){var t=e.currentTarget.value;y.setFieldValue(i,t),A(t)},value:x,disabled:void 0!==h&&h}),r,!v&&!g&&(0,m.jsx)(smart_form_ManualSaveController,{compact:!0,initialValue:c,name:i,setValue:A})]})})};function SmartForm_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function SmartForm_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?SmartForm_ownKeys(Object(n),!0).forEach(function(t){(0,G.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):SmartForm_ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var ek=a.Z.useApp,smart_form_SmartForm=function(e){var t,n=e.children,r=e.className,i=void 0===r?"":r,a=e.formType,l=e.name,d=e.configs,p=void 0===d?[]:d,v=ek(),g=e.api||{},h=g.useSlugApi,b=g.useCreateApi,y=g.useUpdateApi,j=h||{},x=j.data,A=j.status,w=(0,f.Z)(y||[],2),Z=w[0];w[1];var S=(0,f.Z)(b||[],2),k=S[0],_=S[1],P=(0,ei.o)(),E=(0,f.Z)(P,2),C=(E[0],E[1].deleteAllQueryKeys),O=W.Z.useForm(),N=(0,f.Z)(O,1)[0],D=(0,s.useState)(),L=D[0],F=D[1],B="new"===a,R=o.Z.useToken().token.colorBgContainer,I=useDrawerProvider().closeDrawer,U=(0,s.useState)(!1),Q=U[0],V=U[1];(0,s.useEffect)(function(){"success"===A&&V(!0)},[A]);var T=(t=(0,J.Z)(Y().mark(function _callee(e){var t,n,r,i;return Y().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(t=SmartForm_objectSpread({},e),!B){o.next=13;break}if(k){o.next=4;break}return o.abrupt("return");case 4:return Object.entries(t).forEach(function(e){var n=(0,f.Z)(e,2),r=n[0],i=n[1];r.indexOf(".")>-1&&(delete t[r],c().set(t,r,i))}),console.log("[NEW] Submit:",t),o.next=8,k(t);case 8:console.log("[NEW] result :>> ",n=o.sent),null!==(r=n)&&void 0!==r&&r.status&&(v.notification.success({message:"Congrats!",description:"Item has been created successfully."}),I()),o.next=31;break;case 13:if(Z){o.next=15;break}return o.abrupt("return");case 15:if(Q){o.next=17;break}return o.abrupt("return");case 17:if(i={},Object.entries(t).forEach(function(e){var n,r=(0,f.Z)(e,2),o=r[0],a=r[1];x&&a!==x[o]?i[o]="loading":(delete i[o],null!==(n=p.find(function(e){return e.name===o}))&&void 0!==n&&n.alwaysSend||delete t[o])}),console.log("[UPDATE] Submit:",t),(0,u.isEmpty)(i)){o.next=28;break}return o.next=23,Z(t);case 23:console.log("[UPDATE] result :>> ",n=o.sent),Object.entries(t).forEach(function(e){var t,r=(0,f.Z)(e,2),o=r[0];r[1],i[o]=(null===(t=n)||void 0===t?void 0:t.status)===0?"error":"success"}),o.next=29;break;case 28:console.log("[UPDATE] Skipped, nothing new to update.");case 29:console.log("statuses :>> ",i),F(i);case 31:case"end":return o.stop()}},_callee)})),function(e){return t.apply(this,arguments)});return(0,m.jsxs)("div",{className:"overflow-x-hidden p-6 pb-16 ".concat(i),children:["loading"===A&&!1===B&&(0,m.jsx)($.Z,{active:!0}),"loading"===_&&!0===B&&(0,m.jsx)($.Z,{active:!0}),("error"===A&&!1===B||"success"===A&&!1===B&&(!x||(0,u.isEmpty)(x.owner)&&(0,u.isEmpty)(x.lastUpdatedBy)))&&(0,m.jsx)(ee.Z,{message:"Unable to get data at the moment.",type:"error",showIcon:!0}),"error"===_&&!0===B&&(0,m.jsx)(ee.Z,{message:"Unable to submit data at the moment.",type:"error",showIcon:!0}),("success"===A&&(!(0,u.isEmpty)(x.owner)||!(0,u.isEmpty)(x.lastUpdatedBy))||!0===B&&"loading"!==_)&&(0,m.jsxs)(W.Z,{className:["h-full","overflow-x-hidden",i].join(" "),layout:"vertical",form:N,onFinish:T,onFinishFailed:function(e){console.log("Failed:",e)},autoComplete:"off",children:[p.map(function(e){var t,n,r,i,o,a,s;switch(e.type){case"input":return(0,m.jsx)(smart_form_SmartInput,SmartForm_objectSpread(SmartForm_objectSpread({},e),{},{value:null!==(t=e.value)&&void 0!==t?t:x?c().get(x,e.name):"",status:L,isNew:B}),"".concat(l,"-").concat(e.name));case"password":return(0,m.jsx)(smart_form_SmartPassword,SmartForm_objectSpread(SmartForm_objectSpread({},e),{},{value:null!==(n=e.value)&&void 0!==n?n:x?c().get(x,e.name):"",status:L,isNew:B}),"".concat(l,"-").concat(e.name));case"number":return(0,m.jsx)(smart_form_SmartNumber,SmartForm_objectSpread(SmartForm_objectSpread({},e),{},{value:null!==(r=e.value)&&void 0!==r?r:x?c().get(x,e.name):0,status:L,isNew:B}),"".concat(l,"-").concat(e.name));case"textarea":return(0,m.jsx)(smart_form_SmartTextArea,SmartForm_objectSpread(SmartForm_objectSpread({},e),{},{value:null!==(i=e.value)&&void 0!==i?i:x?c().get(x,e.name):"",status:L,isNew:B}),"".concat(l,"-").concat(e.name));case"code-editor":return console.log("field.value :>> ",e.value),console.log("_.get(item, field.name) :>> ",c().get(x,e.name)),(0,m.jsx)(smart_form_SmartCodeEditor,SmartForm_objectSpread(SmartForm_objectSpread({},e),{},{value:null!==(o=e.value)&&void 0!==o?o:x?c().get(x,e.name):"",status:L,isNew:B}),"".concat(l,"-").concat(e.name));case"select":var u=c().get(x,e.name);return(0,m.jsx)(smart_form_SmartSelect,SmartForm_objectSpread(SmartForm_objectSpread({},e),{},{style:SmartForm_objectSpread({flex:"auto"},null==e?void 0:e.style),value:u,status:L,isNew:B}),"".concat(l,"-").concat(e.name));case"list_string":var d=null!==(a=null!==(s=e.value)&&void 0!==s?s:x?c().get(x,e.name):[])&&void 0!==a?a:[];return(0,m.jsx)(smart_form_SmartStringList,SmartForm_objectSpread(SmartForm_objectSpread({},e),{},{value:d,status:L,isNew:B}),"".concat(l,"-").concat(e.name));default:return null}}),n,B&&(0,m.jsx)("div",{className:"absolute bottom-0 left-0 w-full px-6 py-3",style:{backgroundColor:R},children:(0,m.jsxs)(et.Z,{align:"center",children:[(0,m.jsx)(W.Z.Item,{style:{marginBottom:0},children:(0,m.jsx)(en.ZP,{type:"primary",htmlType:"submit",icon:(0,m.jsx)(X.Z,{}),children:"Submit"})}),(0,m.jsx)(er.Z,{title:"Are you sure?",onConfirm:function(){return C()},okText:"Yes",cancelText:"No",children:(0,m.jsx)(en.ZP,{type:"primary",danger:!0,children:"Discard"})})]})})]})]})},clusters_ClusterNewEdit=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,ei.o)(),n=(0,f.Z)(t,1)[0].cluster_slug,r=(0,M.pD)(n,{populate:"owner,provider"}),i=r.data,o=(0,M.ve)({filter:{id:null==i?void 0:i._id}}),a=(0,M.CN)(),l=(0,q.nu)().data,u=(l=void 0===l?{}:l).list,c=void 0===u?[]:u,d=(0,s.useState)(""),p=d[0],v=d[1],g=[{type:"input",label:"Name",name:"name",placeholder:"Cluster name"},{type:"input",label:(0,m.jsxs)(m.Fragment,{children:["Short name"," ",(0,m.jsx)(K.Z,{title:"Get this from your cloud provider console panel.",children:(0,m.jsx)(z.Z,{})})]}),name:"shortName",placeholder:"Short name",visible:"custom"!==p},{type:"select",label:"Cloud Provider",name:"provider",placeholder:"Cloud Provider",displayKey:"provider.name",options:c.map(function(e){return{label:e.name||"",value:e._id}}),onChange:function(e){var t;return v((null===(t=c.find(function(t){return t._id===e}))||void 0===t?void 0:t.shortName)||"")}},{type:"input",label:"Primary IP",name:"primaryIP",placeholder:"192.168.10.50"},{type:"input",label:"Primary domain",name:"primaryDomain",placeholder:"example.com"},{type:"input",label:"Project ID (Google)",name:"projectID",placeholder:"my-project-id",visible:"gcloud"===p},{type:"input",label:"Region (Google)",name:"region",placeholder:"asia-southeast1",visible:"gcloud"===p},{type:"input",label:"Zone (Google)",name:"zone",placeholder:"asia-southeast1-a",visible:"gcloud"===p},{type:"code-editor",lang:["json"],label:"Service Account (JSON)",name:"serviceAccount",visible:"gcloud"===p,height:"350px"},{type:"code-editor",lang:["yaml"],label:"KubeConfig (YAML)",name:"kubeConfig",visible:"custom"===p,height:"350px"},{type:"textarea",label:"API Access Token",name:"apiAccessToken",visible:"digitalocean"===p}];return(0,m.jsx)(smart_form_SmartForm,{name:"cluster",formType:e.isNew?"new":"edit",api:{useSlugApi:r,useUpdateApi:o,useCreateApi:a},configs:g})},e_=n(91654),eP=["gcloud","digitalocean","dockerhub"].map(function(e){switch(e){case"digitalocean":return{name:"Digital Ocean Registry",slug:"digitalocean"};case"gcloud":return{name:"Google Container Registry",slug:"gcloud"};case"dockerhub":return{name:"Docker Registry",slug:"dockerhub"};default:return}}),eE=["gcloud","do_space","aws_s3"].map(function(e){switch(e){case"aws_s3":return{name:"Amazon S3 Storage",slug:"aws_s3"};case"gcloud":return{name:"Google Cloud Storage",slug:"gcloud"};case"do_space":return{name:"DigitalOcean Space Storage",slug:"do_space"};default:return}}),eC=["mongodb","mysql","mariadb","postgresql"],eO=["bitbucket","github"].map(function(e){switch(e){case"bitbucket":return{name:"Bitbucket",slug:"bitbucket"};case"github":return{name:"Github",slug:"github"};default:return{name:"Unknown",slug:"unknown"}}}),eN=["letsencrypt","custom","none"],databases_DatabaseNewEdit=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,ei.o)(),n=(0,f.Z)(t,1)[0].database,r=(0,e_.N2)(n,{populate:"owner"}),i=r.data,o=(0,e_._M)({filter:{id:null==i?void 0:i._id}}),a=(0,e_.e6)(),l=(0,s.useState)(),u=l[0],c=l[1],d=[{type:"input",label:"Name",name:"name",placeholder:"Give your database a name"},{type:"select",label:"Database type",name:"type",displayKey:"type",options:eC.map(function(e){return{label:e||"",value:e}}),onChange:function(e){return c(e)}},{type:"input",label:"Connection URI",name:"url",placeholder:"mongodb"===u?"mongodb://...":"postgresql://...",visible:"mongodb"===u||"postgresql"===u},{type:"input",label:"Host",name:"host",placeholder:"10.10.10.10",visible:!(null!=i&&i.url)},{type:"input",label:"Port",name:"port",placeholder:"27017",visible:!(null!=i&&i.url)},{type:"input",label:"User",name:"user",placeholder:"root",visible:!(null!=i&&i.url)},{type:"password",label:"Pass",name:"pass",visible:!(null!=i&&i.url)},{type:"input",label:"Auth database",name:"authDb",placeholder:"admin",visible:!(null!=i&&i.url)}];return(0,m.jsx)(smart_form_SmartForm,{name:"database",formType:e.isNew?"new":"edit",api:{useSlugApi:r,useUpdateApi:o,useCreateApi:a},configs:d})},eD=n(24998),frameworks_FrameworkNewEdit=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,ei.o)(),n=(0,f.Z)(t,1)[0].framework_slug,r=(0,eD.FX)(n,{populate:"owner,git"}),i=r.data,o=(0,eD.fR)({filter:{id:null==i?void 0:i._id}}),a=(0,eD.D$)(),s=[{type:"input",label:"Name",name:"name",placeholder:"My Starter Template"},{type:"select",label:"Git Provider",name:"gitProvider",displayKey:"gitProvider",style:{width:250},options:eO.map(function(e){return{label:null==e?void 0:e.name,value:null==e?void 0:e.slug}})},{type:"input",label:"Repository HTTPS URL",name:"repoURL",placeholder:"https://github.com/user/repo.git"},{type:"input",label:"Repository SSH URL",name:"repoSSH",placeholder:"git@github.com:user/repo.git"},{type:"input",label:"Main branch",name:"mainBranch",placeholder:"main"}];return(0,m.jsx)(smart_form_SmartForm,{name:"framework",formType:e.isNew?"new":"edit",api:{useSlugApi:r,useUpdateApi:o,useCreateApi:a},configs:s})},eL=n(74040),gits_GitProviderNewEdit=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,ei.o)(),n=(0,f.Z)(t,1)[0].git_provider_slug,r=(0,eL.o0)(n,{populate:"owner"}),i=r.data,o=(0,eL.Ve)({filter:{id:null==i?void 0:i._id}}),a=(0,eL.xP)();return(0,m.jsx)(smart_form_SmartForm,{name:"gitProvider",formType:e.isNew?"new":"edit",api:{useSlugApi:r,useUpdateApi:o,useCreateApi:a},configs:[{type:"input",label:"Name",name:"name",placeholder:"Github"},{type:"input",label:"Host",name:"host",placeholder:"github.com"},{type:"input",label:"Workspace name",name:"gitWorkspace",placeholder:"my-organization"},{type:"input",label:"Workspace URL",name:"repo.url",placeholder:"https://github.com/my-organization"},{type:"input",label:"Workspace SSH Prefix",name:"repo.sshPrefix",placeholder:"git@github.com:my-organization"}]})},eF=n(34187),projects_AppNewEdit=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,ei.o)(),n=(0,f.Z)(t,1)[0].app,r=(0,eF.im)(n,{populate:"owner"}),i=r.data,o=(0,eF.UV)({filter:{id:null==i?void 0:i._id}}),a=(0,eL.y3)().data,l=(a=void 0===a?{}:a).list,u=void 0===l?[]:l,c=(0,s.useState)(),d=(c[0],c[1]),p=[{type:"input",label:"Name",name:"name",placeholder:"App name"},{type:"select",label:"Git Provider",name:"gitProvider",placeholder:"Git Provider",displayKey:"gitProvider",options:u.map(function(e){return{label:e.name||"",value:e._id}}),onChange:function(e){return d(u.find(function(t){return t._id===e}))}},{type:"input",label:"Repo URL",name:"git.repoURL",placeholder:"https://github.com/organization-name/example-repo"},{type:"input",label:"Repo SSH",name:"git.repoSSH",placeholder:"git@github.com:organization-name/example-repo.git"}];return(0,m.jsx)(smart_form_SmartForm,{name:"app",formType:e.isNew?"new":"edit",api:{useSlugApi:r,useUpdateApi:o},configs:p})},eB=n(95259),registries_ContainerRegistryNewEdit=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,ei.o)(),n=(0,f.Z)(t,1)[0],r=n.lv1,i=n.registry_slug,o=(0,eB.EL)(i,{populate:"owner",enabled:void 0!==i}),a=o.data,l=(0,eB.Xn)({filter:{id:null==a?void 0:a._id}}),u=(0,eB.Bl)(),c=(0,s.useState)(),d=c[0],p=c[1];console.log("providerShortName :>> ",d),(0,s.useEffect)(function(){null!=a&&a.provider&&p(a.provider)},[null==a?void 0:a.provider]);var v=[{type:"input",label:"Name",name:"name",placeholder:"My Container Registry",required:!0},{type:"select",alwaysSend:!0,label:"Provider",name:"provider",displayKey:"name",visible:"new"===r,options:eP.map(function(e){return{label:(null==e?void 0:e.name)||"",value:null==e?void 0:e.slug}}),onChange:function(e){var t;return p((null===(t=eP.find(function(t){return(null==t?void 0:t.slug)===e}))||void 0===t?void 0:t.slug)||void 0)}},{type:"code-editor",lang:["yaml","json"],label:"Google Service Account (JSON)",name:"serviceAccount",visible:"gcloud"===d,required:"gcloud"===d},{type:"input",label:"Registry Host",name:"host",visible:"gcloud"===d,placeholder:"gcloud"===d?"gcr.io":""},{type:"password",label:"DigitalOcean API access token",name:"apiAccessToken",visible:"digitalocean"===d,required:"digitalocean"===d},{type:"input",label:"Docker username",name:"dockerUsername",required:"dockerhub"===d,visible:"dockerhub"===d},{type:"password",label:"Docker password",name:"dockerPassword",required:"dockerhub"===d,visible:"dockerhub"===d},{type:"input",label:"Organization",name:"organization",visible:"dockerhub"===d}];return(0,m.jsx)(smart_form_SmartForm,{name:"registry",formType:e.isNew?"new":"edit",api:{useSlugApi:o,useUpdateApi:l,useCreateApi:u},configs:v})},eR=n(95609),storages_CloudStorageNewEdit=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,ei.o)(),n=(0,f.Z)(t,1)[0],r=n.lv1,i=n.registry_slug,o=(0,eR.oA)(i,{populate:"owner"}),a=o.data,l=(0,eR.xj)({filter:{id:null==a?void 0:a._id}}),u=(0,eR.oJ)(),c=(0,s.useState)(),d=c[0],p=c[1];(0,s.useEffect)(function(){null!=a&&a.provider&&p(a.provider)},[null==a?void 0:a.provider]);var v=[{type:"input",label:"Name",name:"name",placeholder:"My Cloud Storage Name",required:!0},{type:"select",label:"Cloud Storage Provider",name:"provider",displayKey:"name",visible:"new"===r,options:eE.map(function(e){return{label:(null==e?void 0:e.name)||"",value:null==e?void 0:e.slug}}),onChange:function(e){var t;return p((null===(t=eE.find(function(t){return(null==t?void 0:t.slug)===e}))||void 0===t?void 0:t.slug)||void 0)}},{type:"input",label:"Bucket",name:"bucket",placeholder:"Bucket name",required:!0},{type:"input",label:"Host (domain)",name:"host",placeholder:"example.com",required:!0},{type:"input",label:"Region",name:"region",placeholder:"us-west-2"},{type:"code-editor",lang:["yaml","json"],label:"Google Service Account (JSON)",name:"auth.service_account",visible:"gcloud"===d,required:"gcloud"===d},{type:"input",label:"Key ID",name:"auth.key_id",required:"do_space"===d||"aws_s3"===d,visible:"do_space"===d||"aws_s3"===d},{type:"password",label:"Key Secret",name:"auth.key_secret",required:"do_space"===d||"aws_s3"===d,visible:"do_space"===d||"aws_s3"===d}];return(0,m.jsx)(smart_form_SmartForm,{name:"registry",formType:e.isNew?"new":"edit",api:{useSlugApi:o,useUpdateApi:l,useCreateApi:u},configs:v})},eI=n(72550),workspaces_RoleNewEdit=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,ei.o)(),n=(0,f.Z)(t,1)[0].role,r=(0,eI.dZ)(n,{populate:"owner"}),i=(r||{}).data,o=(0,eI.aB)({filter:{id:null==i?void 0:i._id}}),a=(0,eI.m1)(),s=[{type:"input",label:"Name",name:"name",placeholder:"Role's name",disabled:void 0===i||void 0===i.type||["administrator","moderator","member"].includes(i.type)}];return(0,m.jsx)(smart_form_SmartForm,{name:"roles",formType:e.isNew?"new":"edit",api:{useSlugApi:r,useUpdateApi:o,useCreateApi:a},configs:s})},eU=n(15832),eQ=n(71471),eV=n(61771),workspaces_UserPermissionSettings=function(e){var t,n,r,i,o,s,l,u=(e||{}).user,c=a.Z.useApp().notification,d=(0,ei.o)(),p=(0,f.Z)(d,1)[0].user,v=((0,eV.Zz)({pagination:{page:1,size:1e3}}).data||{}).list,g=void 0===v?[]:v,h=((0,eF.VD)({pagination:{page:1,size:1e3}}).data||{}).list,b=void 0===h?[]:h,y=((0,eL.y3)({pagination:{page:1,size:1e3}}).data||{}).list,j=void 0===y?[]:y,x=((0,eD.Dh)({pagination:{page:1,size:1e3}}).data||{}).list,A=void 0===x?[]:x,w=((0,M.x7)({pagination:{page:1,size:1e3}}).data||{}).list,Z=void 0===w?[]:w,S=((0,e_.EF)({pagination:{page:1,size:1e3}}).data||{}).list,k=void 0===S?[]:S,_=((0,eB.fy)({pagination:{page:1,size:1e3}}).data||{}).list,P=void 0===_?[]:_,E=(0,eU.Hm)(),C=(0,f.Z)(E,2),O=C[0];return C[1],(0,m.jsxs)("div",{className:"px-6",children:[(0,m.jsx)(eQ.Z.Title,{level:4,children:"Access Permissions"}),(0,m.jsxs)(W.Z,{name:"access-permissions",layout:"vertical",onFinishFailed:function(e){console.error(e)},onFinish:function(e){if(p){var t,n={userSlug:p,resource:{}};Object.entries(e).forEach(function(e){var t=(0,f.Z)(e,2),r=t[0],i=t[1];i&&(n.resource[r]=i.join(","))}),console.log("updateData :>> ",n),null===(t=O(n))||void 0===t||t.then(function(){c.success({message:"User's access permissions have been updated."})})}},children:[(0,m.jsx)(W.Z.Item,{className:"mb-2",name:"projects",label:"Projects",initialValue:null==u?void 0:null===(t=u.allowAccess)||void 0===t?void 0:t.projects,shouldUpdate:!0,children:(0,m.jsx)(ej.Z,{mode:"multiple",placeholder:"Please select projects",options:null==g?void 0:g.map(function(e){return{label:"".concat(e.name," (").concat(e.slug,")"),value:e._id}})})}),(0,m.jsx)(W.Z.Item,{className:"mb-2",name:"apps",label:"Apps",initialValue:null==u?void 0:null===(n=u.allowAccess)||void 0===n?void 0:n.apps,shouldUpdate:!0,children:(0,m.jsx)(ej.Z,{mode:"multiple",placeholder:"Please select apps",options:null==b?void 0:b.map(function(e){return{label:"".concat(e.name," (").concat(e.slug,")"),value:e._id}})})}),(0,m.jsx)(W.Z.Item,{className:"mb-2",name:"gits",label:"Gits",initialValue:null==u?void 0:null===(r=u.allowAccess)||void 0===r?void 0:r.gits,shouldUpdate:!0,children:(0,m.jsx)(ej.Z,{mode:"multiple",placeholder:"Please select gits",options:null==j?void 0:j.map(function(e){return{label:"".concat(e.name," (").concat(e.slug,")"),value:e._id}})})}),(0,m.jsx)(W.Z.Item,{className:"mb-2",name:"frameworks",label:"Frameworks",initialValue:null==u?void 0:null===(i=u.allowAccess)||void 0===i?void 0:i.frameworks,shouldUpdate:!0,children:(0,m.jsx)(ej.Z,{mode:"multiple",placeholder:"Please select frameworks",options:null==A?void 0:A.map(function(e){return{label:"".concat(e.name," (").concat(e.slug,")"),value:e._id}})})}),(0,m.jsx)(W.Z.Item,{className:"mb-2",name:"clusters",label:"Clusters",initialValue:null==u?void 0:null===(o=u.allowAccess)||void 0===o?void 0:o.clusters,shouldUpdate:!0,children:(0,m.jsx)(ej.Z,{mode:"multiple",placeholder:"Please select clusters",options:null==Z?void 0:Z.map(function(e){return{label:"".concat(e.name," (").concat(e.slug,")"),value:e._id}})})}),(0,m.jsx)(W.Z.Item,{className:"mb-2",name:"databases",label:"Databases",initialValue:null==u?void 0:null===(s=u.allowAccess)||void 0===s?void 0:s.databases,shouldUpdate:!0,children:(0,m.jsx)(ej.Z,{mode:"multiple",placeholder:"Please select databases",options:null==k?void 0:k.map(function(e){return{label:"".concat(e.name," (").concat(e.slug,")"),value:e._id}})})}),(0,m.jsx)(W.Z.Item,{className:"mb-2",name:"container_registries",label:"Container Registries",initialValue:null==u?void 0:null===(l=u.allowAccess)||void 0===l?void 0:l.container_registries,shouldUpdate:!0,children:(0,m.jsx)(ej.Z,{mode:"multiple",placeholder:"Please select container registries",options:null==P?void 0:P.map(function(e){return{label:"".concat(e.name," (").concat(e.slug,")"),value:e._id}})})}),(0,m.jsxs)("div",{className:"flex gap-2",children:[(0,m.jsx)(W.Z.Item,{noStyle:!0,children:(0,m.jsx)(en.ZP,{htmlType:"submit",type:"primary",children:"Save"})}),(0,m.jsx)(en.ZP,{danger:!0,children:"Reset permissions"})]})]})]})},workspaces_UserNewEdit=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,ei.o)(),n=(0,f.Z)(t,1)[0].user,r=(0,eU.hz)(n,{populate:"roles"}),i=(r||{}).data,o=(0,eU.yl)({filter:{id:null==i?void 0:i._id},populate:"roles"}),a=(0,eU.En)({populate:"roles"}),l=(0,eU.Rz)(),u=(0,f.Z)(l,2);u[0],u[1];var c=(0,eI.bd)().data,d=(c=void 0===c?{}:c).list,p=void 0===d?[]:d,v=p[0],g=(0,s.useState)(v);g[0],g[1];var h=[{type:"input",label:"Name",name:"name",placeholder:"User's name"},{type:"select",label:"Role",name:"roles",style:{width:250},displayKey:"roles.0._id",options:p.map(function(e){return{label:e.name||"",value:e._id}})}];return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(smart_form_SmartForm,{name:"user",formType:e.isNew?"new":"edit",className:"pb-2",api:{useSlugApi:r,useUpdateApi:o,useCreateApi:a},configs:h}),(0,m.jsx)(workspaces_UserPermissionSettings,{user:i})]})},commons_NewEditPage=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{formType:"new"},n=(0,ei.o)();switch((0,f.Z)(n,1)[0].type){case"app":e=(0,m.jsx)(projects_AppNewEdit,{isNew:"new"===t.formType});break;case"cluster":e=(0,m.jsx)(clusters_ClusterNewEdit,{isNew:"new"===t.formType});break;case"framework":e=(0,m.jsx)(frameworks_FrameworkNewEdit,{isNew:"new"===t.formType});break;case"git-provider":e=(0,m.jsx)(gits_GitProviderNewEdit,{isNew:"new"===t.formType});break;case"registry":e=(0,m.jsx)(registries_ContainerRegistryNewEdit,{isNew:"new"===t.formType});break;case"storage":e=(0,m.jsx)(storages_CloudStorageNewEdit,{isNew:"new"===t.formType});break;case"database":e=(0,m.jsx)(databases_DatabaseNewEdit,{isNew:"new"===t.formType});break;case"user":e=(0,m.jsx)(workspaces_UserNewEdit,{isNew:"new"===t.formType});break;case"role":e=(0,m.jsx)(workspaces_RoleNewEdit,{isNew:"new"===t.formType})}return(0,m.jsx)("div",{className:"h-full",children:e})},eT=n(44167),ez=n(55611),PageFooter=function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=(0,eT.u)().data;return(0,m.jsxs)("div",{children:[n.children,(0,m.jsxs)("div",{className:"border-t border-gray-300 py-4 text-center text-xs",children:["Version ",(0,m.jsx)("strong",{className:"text-brand",children:null==r?void 0:null===(e=r.data)||void 0===e?void 0:e.version})," - Location:"," ",(0,m.jsx)("strong",{className:"text-brand",children:(null==r?void 0:null===(t=r.data)||void 0===t?void 0:t.location)||"unknown"}),(0,m.jsx)("br",{}),"Copyright ",new Date().getFullYear()," \xa9"," ",(0,m.jsx)(I(),{href:"https://dxup.dev/?ref=dxup-dashboard",target:"_blank",children:ez.XL.title.toUpperCase()}),". Powered by"," ",(0,m.jsx)("a",{href:"https://wearetopgroup.com/en?ref=dxup-dashboard",target:"_blank",rel:"noreferrer",children:"TOP GROUP"}),"."]})]})},eK=n(19944),eq=n(84477),eM=n(63783),eG=n(1210),eJ=n(75750),eH=n(34804),eY=n(55241),eX=n(7134),eW=n(66309),e$=v.Z.Header,SiteHeader=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.onSidebarChange,r=(0,l.vs)(),i=r.isDarkMode,a=r.toggle,u=(0,Q.aC)(),c=(0,f.Z)(u,1)[0],d=null==c?void 0:c.activeWorkspace,p=o.Z.useToken().token.colorBgContainer,v=(0,V.Jl)(),g=v.sidebarCollapsed,h=v.toggleSidebar;(0,s.useEffect)(function(){return n&&n(g)},[g]);var b=(0,s.useState)(!1),y=b[0],j=b[1];return(0,s.useEffect)(function(){j(!0)},[]),y?(0,m.jsx)(e$,{className:"w-full",style:{position:"sticky",top:0,paddingInline:24,lineHeight:"48px",height:48,zIndex:100,background:p},children:(0,m.jsxs)("div",{className:"flex ",children:[(0,m.jsx)("div",{className:"grow",children:(0,m.jsx)("div",{className:"hidden md:block",children:s.createElement(g?eK.Z:eq.Z,{className:"trigger",onClick:function(){return h&&h()}})})}),(0,m.jsxs)(et.Z,{size:4,children:[(0,m.jsx)(en.ZP,{type:"text",icon:(0,m.jsx)(eM.Z,{}),href:"https://docs.dxup.dev",target:"_blank"}),(0,m.jsx)(en.ZP,{type:"text",icon:(0,m.jsx)(eG.Z,{}),href:"https://github.com/digitopvn/diginext/",target:"_blank"}),(0,m.jsx)(en.ZP,{type:"text",style:{fontSize:18,verticalAlign:"middle",paddingTop:0},onClick:a,icon:i?(0,m.jsx)("i",{className:"ri-sun-line inline-block"}):(0,m.jsx)("i",{className:"ri-moon-line inline-block"})}),(0,m.jsx)(eY.Z,{placement:"bottomRight",trigger:"click",content:(0,m.jsxs)(et.Z,{direction:"vertical",children:[(0,m.jsxs)("div",{className:"text-center",children:[(0,m.jsx)("p",{className:"mb-0",children:(0,m.jsx)("strong",{children:null==c?void 0:c.name})}),(0,m.jsx)("p",{className:"mb-0",children:null==c?void 0:c.email})]}),(0,m.jsxs)(et.Z.Compact,{direction:"vertical",className:"w-full",children:[(0,m.jsx)(en.ZP,{href:"/profile",children:"Profile"}),(0,m.jsx)(en.ZP,{href:"/workspace/select",children:"Switch workspace"}),(0,m.jsx)(en.ZP,{href:"/logout",children:"Sign out"})]})]}),children:(0,m.jsxs)("div",{className:"cursor-pointer align-middle",children:[(0,m.jsx)(eX.C,{style:{lineHeight:"20px"},icon:(0,m.jsx)(O.Z,{style:{verticalAlign:"middle"}}),src:null==c?void 0:c.image,size:24}),(0,m.jsx)("span",{className:"ml-2 hidden md:inline-block",children:null==c?void 0:c.name}),(0,m.jsx)(eW.Z,{color:"green",className:"ml-2",children:null==c?void 0:null===(e=c.activeRole)||void 0===e?void 0:e.name}),(null==d?void 0:d.slug)==="topgroup"&&(0,m.jsx)(eW.Z,{color:"red",icon:(0,m.jsx)(eJ.Z,{}),children:"VIP"}),(0,m.jsx)(eH.Z,{className:"ml-2"})]})})]})]})}):null},e0=n(23430),e1=n(16596),e2=n(84213),e4=n(26855),e8=n(44973),e5=n(27484),e7=n.n(e5),e3=n(61123),e6=n(90447);function DatabaseBackupList_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function DatabaseBackupList_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?DatabaseBackupList_ownKeys(Object(n),!0).forEach(function(t){(0,G.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):DatabaseBackupList_ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var e9=n(56176),te=n(84110);e7().extend(te),e7().extend(e9);var tt=null!==(r=ez.XL.tableConfig.defaultPageSize)&&void 0!==r?r:20,DatabaseBackupList=function(){var e,t=(0,V.Jl)().responsive,n=(0,ei.o)(),r=(0,f.Z)(n,2),i=r[0];r[1].setQuery;var o=i.database,a=(0,s.useState)(1),l=a[0],u=a[1],c=(0,e_.sr)({filter:{dbSlug:o},populate:"owner,database",pagination:{page:l,size:tt}}),d=c.data,p=c.status,v=d||{},g=v.list,h=(v.pagination||{}).total_items,b=(0,e_.ij)(),y=(0,f.Z)(b,1)[0],j=(0,e_.OK)(),x=(0,f.Z)(j,1)[0],A=[{title:"No.",width:7,key:"no",dataIndex:"no",render:function(e,t,n){return(0,m.jsx)(m.Fragment,{children:(l-1)*tt+n+1})}},{title:"Name",width:50,dataIndex:"name",key:"name",render:function(e,t){return(0,m.jsx)(I(),{href:t.url||"#",target:"_blank",children:e})},filterSearch:!0,filters:[{text:"goon",value:"goon"}],onFilter:function(e,t){return!t.name||t.name.indexOf(e.toString())>-1}},{title:"Status",dataIndex:"status",key:"status",width:18,render:function(e,t){return(0,m.jsx)(eW.Z,{children:e})}},{title:"Type",dataIndex:"type",key:"type",width:18,render:function(e,t){return(0,m.jsx)(eW.Z,{children:e})}},{title:"Database",dataIndex:"dbSlug",key:"dbSlug",width:22,render:function(e,t){return t.dbSlug?(0,m.jsx)(eW.Z,{color:"success",children:t.dbSlug}):(0,m.jsx)(eW.Z,{color:"error",children:"-"})}},{title:"Created by",dataIndex:"owner",key:"owner",width:30,render:function(e,t){return(0,m.jsx)(m.Fragment,{children:null==t?void 0:t.owner.name})}},{title:"Created at",dataIndex:"createdAt",key:"createdAt",width:25,render:function(e){return(0,m.jsx)(e3.q,{date:e})},sorter:function(e,t){return e7()(e.createdAt).diff(e7()(t.createdAt))}},{title:(0,m.jsx)(eQ.Z.Text,{className:"text-xs md:text-sm",children:"Action"}),key:"action",fixed:"right",width:(null!=t&&t.md,20),render:function(e,t){return t.actions}}],w=(e=(0,J.Z)(Y().mark(function _callee(e){var t;return Y().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return e||e4.ZP.error({message:"Unable to delete this item."}),n.next=3,x({_id:e});case 3:null!=(t=n.sent)&&t.status&&e4.ZP.success({message:"Item deleted successfully."});case 5:case"end":return n.stop()}},_callee)})),function(t){return e.apply(this,arguments)}),Z=(null==g?void 0:g.map(function(e,t){return DatabaseBackupList_objectSpread(DatabaseBackupList_objectSpread({},e),{},{actions:(0,m.jsxs)(et.Z.Compact,{children:[(0,m.jsx)(K.Z,{overlay:"Download",children:(0,m.jsx)(en.ZP,{icon:(0,m.jsx)(e0.Z,{}),href:e.url,target:"_blank"})}),(0,m.jsx)(K.Z,{overlay:"Restore",children:(0,m.jsx)(en.ZP,{disabled:!0,icon:(0,m.jsx)(e1.Z,{}),onClick:function(){return y({id:null==e?void 0:e._id})}})}),(0,m.jsx)(er.Z,{title:"Are you sure to delete this item?",description:(0,m.jsx)("span",{className:"text-red-500",children:"Caution: this is permanent and cannot be rolled back."}),onConfirm:function(){return w(e._id)},okText:"Yes",cancelText:"No",children:(0,m.jsx)(en.ZP,{icon:(0,m.jsx)(eA.Z,{})})})]})})}))||[],S=(0,s.useRef)(null),k=(0,e2.Z)(S);return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(e6.V,{title:"Database Backups (".concat(null!=h?h:"-",")"),breadcrumbs:[{name:"Workspace"}],actions:[],children:(0,m.jsx)(eW.Z,{color:"success",children:o})}),(0,m.jsx)("div",{className:"h-full flex-auto overflow-hidden",ref:S,children:(0,m.jsx)(e8.Z,{sticky:!0,size:"small",loading:"loading"===p,columns:A,dataSource:Z,scroll:{x:1e3,y:void 0!==(null==k?void 0:k.height)?k.height-140:void 0},pagination:{pageSize:tt,total:h,position:["bottomCenter"]},onChange:function(e){var t=e.current;t&&u(t)}})})]})},tn=n(77171),tr=n(61716),ti=n(32983),to=n(25935),ta=n(91036),ts=n.n(ta);n(57046);var tl=n(56176),tu=n(84110);e7().extend(tu),e7().extend(tl);var AppLogs=function(e){var t,n=e.slug,r=(0,ei.o)(),i=(0,f.Z)(r,1)[0],a=i.app,l=i.env,u=(0,eF.un)(void 0===a?n:a,{filter:{env:l}}),c=u.data,d=void 0===c?{}:c,p=u.status,v=((null===(t=d.status)||void 0===t?void 0:t.toString())==="0"?[]:Object.keys(d))[0],g=v?d[v]:"";console.log({podLogs:g});var h=ts()("".concat(g).replace(/[\u001b\u009b][[()#;?]*(?:[0-9]{1,4}(?:;[0-9]{0,4})*)?[0-9A-ORZcf-nqry=><]/g,"")).split("\n").map(function(e,t){return e.toString()}).filter(function(e){return"0"!==e}),b=o.Z.useToken().token.colorText,y=(0,s.useState)(!1),j=y[0],x=y[1],A=(0,s.useRef)(null),w=(0,s.useRef)(null);(0,tr.Z)(w);var Z=(0,s.useRef)(null);(0,e2.Z)(Z);var scrollToBottom=function(){var e;null==A||null===(e=A.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})};return(0,m.jsxs)("div",{style:{color:b},className:"flex h-full flex-col",children:["loading"===p&&(0,m.jsx)($.Z,{active:!0}),(0,m.jsx)("div",{className:"flex-auto overflow-auto",ref:w,children:h.length<=1&&""===h[0]?(0,m.jsx)(ti.Z,{className:"py-10"}):(0,m.jsxs)("pre",{className:"no-scrollbar mb-0 p-4 pt-6 dark:bg-black",ref:Z,style:{width:j?"100%":"auto",whiteSpace:j?"normal":"nowrap"},children:[h.filter(function(e){return""!==e}).map(function(e,t){var n="".concat(e);if(n.toLowerCase().indexOf("error")>-1)return(0,m.jsxs)("p",{children:[(0,m.jsx)(ep.Z,{className:"text-red-600"})," ",(0,m.jsx)("span",{className:"text-red-600",children:(0,to.ZP)("".concat(e))})]},"log-line-".concat(t));if(n.indexOf("http://")>-1||n.indexOf("https://")>-1){var r=n.split(" ").map(function(e){return e.indexOf("http://")>-1||e.indexOf("https://")>-1?'<a href="'.concat(e,'" target="_blank" style="color: #008dff">').concat(e,"</a>"):e}).join(" ");return(0,m.jsx)("p",{children:(0,to.ZP)(r)},"log-line-".concat(t))}return(0,m.jsx)("p",{children:(0,to.ZP)("".concat(e))},"log-line-".concat(t))}),(0,m.jsx)("p",{ref:A})]})}),(0,m.jsxs)("div",{className:"flex p-4",children:[(0,m.jsx)("div",{className:"flex-auto"}),(0,m.jsxs)("div",{className:"flex gap-2",children:[(0,m.jsx)(en.ZP,{onClick:function(){return x(!j)},children:j?"UNWRAP":"WRAP"}),(0,m.jsx)(en.ZP,{icon:(0,m.jsx)(tn.Z,{}),onClick:function(){return scrollToBottom()}})]})]})]})},tc=n(15227),td=n(26686),tp=n(51423),tm=n(71230),tf=n(15746),tv=n(91710),tg=n(37804);function DeployEnvironmentVolume_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function DeployEnvironmentVolume_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?DeployEnvironmentVolume_ownKeys(Object(n),!0).forEach(function(t){(0,G.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):DeployEnvironmentVolume_ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var DeployEnvironmentVolume=function(e){var t,n=e.values,r=e.defaultValues,i=e.onChange,o=(0,ei.o)(),l=(0,f.Z)(o,2),u=l[0];l[1].setQuery;var c=a.Z.useApp().notification,d=(0,s.useState)(null!==(t=null!=n?n:r)&&void 0!==t?t:[]),p=d[0],v=d[1],g=(0,s.useState)({name:"",size:"",mountPath:""}),h=g[0],b=g[1],y=(0,eF.JR)({filter:{slug:u.app,env:u.env}}),j=(0,f.Z)(y,1)[0],x=(0,eF.KU)(),A=(0,f.Z)(x,1)[0],removeVolumeAtIndex=function(e){var t,n=p[e];return n?null===(t=A({slug:u.app,env:u.env,name:n.name}))||void 0===t?void 0:t.then(function(t){var r=t.data;r.success&&c.success({message:"Volume ".concat(n.name," has been deleted.")}),r.message&&c.info({message:r.message}),v(p.filter(function(t,n){return e!==n}))}).catch(function(e){}):c.error({message:"Volume not found."})};return(0,s.useEffect)(function(){i&&i(p)},[p]),(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("h3",{children:["Volumes"," ",(0,m.jsx)(K.Z,{title:"WARNING: When using volume, high-availability of your app will be disabled, since the app's replicas will need to stay on the same server of the volume.",children:(0,m.jsx)(z.Z,{})})]}),(0,m.jsx)(ew.Z,{bordered:!0,size:"small",dataSource:null!=p?p:[],footer:(0,m.jsxs)(et.Z.Compact,{style:{width:"100%"},children:[(0,m.jsx)(eg.Z,{name:"name",placeholder:"Volume name",prefix:(0,m.jsx)(K.Z,{title:"No spaces or special characters.",children:(0,m.jsx)(z.Z,{})}),onChange:function(e){e.currentTarget&&e.currentTarget.value&&b(DeployEnvironmentVolume_objectSpread(DeployEnvironmentVolume_objectSpread({},h),{},{name:e.currentTarget.value}))}}),(0,m.jsx)(eg.Z,{name:"mountPath",placeholder:"Mount to directory path",prefix:(0,m.jsx)(K.Z,{title:"Location of mapped directory in this container. For example: /var/www/html",children:(0,m.jsx)(z.Z,{})}),onChange:function(e){e.currentTarget&&e.currentTarget.value&&b(DeployEnvironmentVolume_objectSpread(DeployEnvironmentVolume_objectSpread({},h),{},{mountPath:e.currentTarget.value}))}}),(0,m.jsx)(tg.Z,{name:"size",placeholder:"Size",addonAfter:"Gi",style:{flex:"0 0 140px"},defaultValue:5,addonBefore:(0,m.jsx)(K.Z,{title:"Size of the volume in Gigabyte, this cannot be changed in the future.",children:(0,m.jsx)(z.Z,{})}),onChange:function(e){e&&b(DeployEnvironmentVolume_objectSpread(DeployEnvironmentVolume_objectSpread({},h),{},{size:"".concat(e,"Gi")}))}}),(0,m.jsx)(en.ZP,{icon:(0,m.jsx)(X.Z,{}),onClick:function(){console.log("valueToBeAdded :>> ",h),h&&(h.name?h.mountPath?(h.size||(h.size="".concat(5,"Gi")),j(h).then(function(e){if(console.log("res :>> ",e),e.status){var t=e.data;v(function(e){return[].concat((0,ex.Z)(e),[t])})}}).catch(function(e){})):c.error({message:'Volume "mountPath" is required.'}):c.error({message:'Volume "name" is required.'}))},children:"Add"})]}),renderItem:function(e,t){return(0,m.jsx)(ew.Z.Item,{actions:[(0,m.jsx)(en.ZP,{icon:(0,m.jsx)(eA.Z,{}),onClick:function(){return removeVolumeAtIndex(t)}},"volume-delete-btn")],children:(0,m.jsx)(ew.Z.Item.Meta,{title:(0,m.jsxs)("span",{children:[e.name," (",e.size,")"]}),description:"Mount to: ".concat(e.mountPath," (Node: ").concat(e.node,")")})},"volume-item-".concat(t))}})]})},deployments_DeployEnvironment=function(){var e,t,n,r,i,o,a,l,u=(0,ei.o)(),c=(0,f.Z)(u,2),d=c[0],p=d.project,v=d.app,g=d.env,h=c[1].setQuery,b=(0,eo.Z)(),y=(0,s.useState)(""),j=y[0],x=y[1],A=((0,eB.fy)({populate:"owner",pagination:{page:0,size:100}}).data||{}).list,w=(0,eF.Lw)(v,{filter:{env:g}}),Z=(0,eF.i6)({filter:{slug:v,env:g}}),S=(0,M.pD)((null===(e=w.data)||void 0===e?void 0:e.cluster)||"",{enabled:!!(null!==(t=w.data)&&void 0!==t&&t.cluster)}).data,k=[{type:"list_string",label:"Domains",name:"domains"},{type:"input",label:"Docker Image URL",name:"imageURL",placeholder:"Docker image URL",disabled:!0,displayValue:null!==(n=w.data)&&void 0!==n&&n.imageURL?null===(r=w.data)||void 0===r?void 0:r.imageURL:""},{type:"select",label:"CPU",name:"cpu",placeholder:"CPU",displayKey:"cpu",options:tv.Su.map(function(e){return{label:"".concat(e),value:e}}),wrapperStyle:{float:null!=b&&b.md?"left":"none",marginRight:null!=b&&b.md?15:0,width:null!=b&&b.md?260:"100%"}},{type:"select",label:"Memory",name:"memory",placeholder:"Memory",displayKey:"memory",options:tv.gM.map(function(e){return{label:"".concat(e),value:e}}),wrapperStyle:{float:null!=b&&b.md?"left":"none",marginRight:null!=b&&b.md?15:0,width:null!=b&&b.md?260:"100%"}},{type:"number",label:"Replicas",name:"replicas",placeholder:"1",defaultValue:1,wrapperStyle:{float:null!=b&&b.md?"left":"none",marginRight:null!=b&&b.md?15:0}},{type:"input",label:"PORT",name:"port",placeholder:"3000"},{type:"input",label:"Health Check Path",name:"healthz",placeholder:"/",wrapperStyle:{float:null!=b&&b.md?"left":"none",clear:"both",marginRight:null!=b&&b.md?15:0,width:null!=b&&b.md?"48%":"100%"}},{type:"select",label:"Redirect to first domain",name:"redirect",defaultValue:!1,options:[{label:"Yes",value:!0},{label:"No",value:!1}],wrapperStyle:{float:null!=b&&b.md?"right":"none",width:null!=b&&b.md?"50%":"100%"}},{type:"select",label:"Container Registry",name:"registry",placeholder:"Container Registry",displayKey:"registry",options:(void 0===A?[]:A).map(function(e){return{label:e.name||"",value:e.slug}}),wrapperStyle:{float:null!=b&&b.md?"left":"none",clear:"both",marginRight:null!=b&&b.md?15:0,width:null!=b&&b.md?"48%":"100%"}},{type:"input",label:"Cluster",name:"cluster",placeholder:"Cluster",disabled:!0,displayValue:S?"".concat(S.name," (").concat(S.slug,")"):"",wrapperStyle:{float:null!=b&&b.md?"right":"none",width:null!=b&&b.md?"50%":"100%"}},{type:"select",label:"SSL Issuer",name:"ssl",placeholder:"letsencrypt",displayKey:"ssl",options:eN.map(function(e){return{label:e||"",value:e}}),wrapperStyle:{float:null!=b&&b.md?"left":"none",marginRight:null!=b&&b.md?15:0,width:null!=b&&b.md?"48%":"100%"},onChange:function(e){x(e)}},{type:"input",label:"TLS Secret",name:"tlsSecret",placeholder:"",disabled:"letsencrypt"===j,wrapperStyle:{width:"100%",clear:"right"}}];return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("div",{className:" hidden h-80 w-full p-6",style:{display:null!==(i=w.data)&&void 0!==i&&i.screenshot?"block":"none"},children:(0,m.jsx)(tp.Z,{hoverable:!0,className:"relative h-full overflow-hidden",styles:{body:{height:"100%",padding:0}},children:(0,m.jsx)("div",{className:"h-full",style:{backgroundRepeat:"no-repeat",backgroundPosition:"center",backgroundSize:"cover",backgroundImage:null!==(o=w.data)&&void 0!==o&&o.screenshot?"url(".concat(null===(a=w.data)||void 0===a?void 0:a.screenshot,")"):"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMIAAADDCAYAAADQvc6UAAABRWlDQ1BJQ0MgUHJvZmlsZQAAKJFjYGASSSwoyGFhYGDIzSspCnJ3UoiIjFJgf8LAwSDCIMogwMCcmFxc4BgQ4ANUwgCjUcG3awyMIPqyLsis7PPOq3QdDFcvjV3jOD1boQVTPQrgSkktTgbSf4A4LbmgqISBgTEFyFYuLykAsTuAbJEioKOA7DkgdjqEvQHEToKwj4DVhAQ5A9k3gGyB5IxEoBmML4BsnSQk8XQkNtReEOBxcfXxUQg1Mjc0dyHgXNJBSWpFCYh2zi+oLMpMzyhRcASGUqqCZ16yno6CkYGRAQMDKMwhqj/fAIcloxgHQqxAjIHBEugw5sUIsSQpBobtQPdLciLEVJYzMPBHMDBsayhILEqEO4DxG0txmrERhM29nYGBddr//5/DGRjYNRkY/l7////39v///y4Dmn+LgeHANwDrkl1AuO+pmgAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAwqADAAQAAAABAAAAwwAAAAD9b/HnAAAHlklEQVR4Ae3dP3PTWBSGcbGzM6GCKqlIBRV0dHRJFarQ0eUT8LH4BnRU0NHR0UEFVdIlFRV7TzRksomPY8uykTk/zewQfKw/9znv4yvJynLv4uLiV2dBoDiBf4qP3/ARuCRABEFAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghgg0Aj8i0JO4OzsrPv69Wv+hi2qPHr0qNvf39+iI97soRIh4f3z58/u7du3SXX7Xt7Z2enevHmzfQe+oSN2apSAPj09TSrb+XKI/f379+08+A0cNRE2ANkupk+ACNPvkSPcAAEibACyXUyfABGm3yNHuAECRNgAZLuYPgEirKlHu7u7XdyytGwHAd8jjNyng4OD7vnz51dbPT8/7z58+NB9+/bt6jU/TI+AGWHEnrx48eJ/EsSmHzx40L18+fLyzxF3ZVMjEyDCiEDjMYZZS5wiPXnyZFbJaxMhQIQRGzHvWR7XCyOCXsOmiDAi1HmPMMQjDpbpEiDCiL358eNHurW/5SnWdIBbXiDCiA38/Pnzrce2YyZ4//59F3ePLNMl4PbpiL2J0L979+7yDtHDhw8vtzzvdGnEXdvUigSIsCLAWavHp/+qM0BcXMd/q25n1vF57TYBp0a3mUzilePj4+7k5KSLb6gt6ydAhPUzXnoPR0dHl79WGTNCfBnn1uvSCJdegQhLI1vvCk+fPu2ePXt2tZOYEV6/fn31dz+shwAR1sP1cqvLntbEN9MxA9xcYjsxS1jWR4AIa2Ibzx0tc44fYX/16lV6NDFLXH+YL32jwiACRBiEbf5KcXoTIsQSpzXx4N28Ja4BQoK7rgXiydbHjx/P25TaQAJEGAguWy0+2Q8PD6/Ki4R8EVl+bzBOnZY95fq9rj9zAkTI2SxdidBHqG9+skdw43borCXO/ZcJdraPWdv22uIEiLA4q7nvvCug8WTqzQveOH26fodo7g6uFe/a17W3+nFBAkRYENRdb1vkkz1CH9cPsVy/jrhr27PqMYvENYNlHAIesRiBYwRy0V+8iXP8+/fvX11Mr7L7ECueb/r48eMqm7FuI2BGWDEG8cm+7G3NEOfmdcTQw4h9/55lhm7DekRYKQPZF2ArbXTAyu4kDYB2YxUzwg0gi/41ztHnfQG26HbGel/crVrm7tNY+/1btkOEAZ2M05r4FB7r9GbAIdxaZYrHdOsgJ/wCEQY0J74TmOKnbxxT9n3FgGGWWsVdowHtjt9Nnvf7yQM2aZU/TIAIAxrw6dOnAWtZZcoEnBpNuTuObWMEiLAx1HY0ZQJEmHJ3HNvGCBBhY6jtaMoEiJB0Z29vL6ls58vxPcO8/zfrdo5qvKO+d3Fx8Wu8zf1dW4p/cPzLly/dtv9Ts/EbcvGAHhHyfBIhZ6NSiIBTo0LNNtScABFyNiqFCBChULMNNSdAhJyNSiECRCjUbEPNCRAhZ6NSiAARCjXbUHMCRMjZqBQiQIRCzTbUnAARcjYqhQgQoVCzDTUnQIScjUohAkQo1GxDzQkQIWejUogAEQo121BzAkTI2agUIkCEQs021JwAEXI2KoUIEKFQsw01J0CEnI1KIQJEKNRsQ80JECFno1KIABEKNdtQcwJEyNmoFCJAhELNNtScABFyNiqFCBChULMNNSdAhJyNSiECRCjUbEPNCRAhZ6NSiAARCjXbUHMCRMjZqBQiQIRCzTbUnAARcjYqhQgQoVCzDTUnQIScjUohAkQo1GxDzQkQIWejUogAEQo121BzAkTI2agUIkCEQs021JwAEXI2KoUIEKFQsw01J0CEnI1KIQJEKNRsQ80JECFno1KIABEKNdtQcwJEyNmoFCJAhELNNtScABFyNiqFCBChULMNNSdAhJyNSiECRCjUbEPNCRAhZ6NSiAARCjXbUHMCRMjZqBQiQIRCzTbUnAARcjYqhQgQoVCzDTUnQIScjUohAkQo1GxDzQkQIWejUogAEQo121BzAkTI2agUIkCEQs021JwAEXI2KoUIEKFQsw01J0CEnI1KIQJEKNRsQ80JECFno1KIABEKNdtQcwJEyNmoFCJAhELNNtScABFyNiqFCBChULMNNSdAhJyNSiEC/wGgKKC4YMA4TAAAAABJRU5ErkJggg=="}})})}),(0,m.jsxs)(smart_form_SmartForm,{name:"deploy_environment",formType:"edit",api:{useSlugApi:w,useUpdateApi:Z},configs:k,className:"h-auto",children:[(0,m.jsx)("div",{className:"clear-both mb-4 w-full",children:(0,m.jsx)(DeployEnvironmentVolume,{values:null===(l=w.data)||void 0===l?void 0:l.volumes})}),(0,m.jsx)("div",{className:"clear-both w-full",children:(0,m.jsxs)(tm.Z,{gutter:[16,16],align:"stretch",children:[(0,m.jsx)(tf.Z,{span:12,children:(0,m.jsx)(en.ZP,{block:!0,onClick:function(){return h({lv2:"build",project:p,app:v})},children:"Builds"})}),(0,m.jsx)(tf.Z,{span:12,children:(0,m.jsx)(en.ZP,{block:!0,onClick:function(){return h({lv2:"release",project:p,app:v,env:g})},children:"Releases"})}),(0,m.jsx)(tf.Z,{span:12,children:(0,m.jsx)(en.ZP,{block:!0,onClick:function(){return h({lv2:"env_vars",project:p,app:v,env:g})},children:"Environment Variables"})}),(0,m.jsx)(tf.Z,{span:12,children:(0,m.jsx)(en.ZP,{block:!0,onClick:function(){return h({lv2:"deployment_yaml",project:p,app:v,env:g})},children:"Deployment YAML"})}),(0,m.jsx)(tf.Z,{span:12,children:(0,m.jsx)(en.ZP,{block:!0,onClick:function(){return h({lv2:"app_logs",project:p,app:v,env:g})},children:"Application Logs"})})]})})]})]})},th=n(95696),deployments_DeploymentYaml=function(){var e,t,n=(0,ei.o)(),r=(0,f.Z)(n,2),i=r[0],o=(i.project,i.app),a=i.env;r[1].setQuery;var s=(0,l.vs)().isDarkMode;useDrawerProvider().closeDrawer;var u=(0,M.x7)({populate:"owner",pagination:{page:0,size:100}}).data||{};u.list,u.pagination;var c=(0,eF.Lw)(o,{filter:{env:a}});return(0,eF.i6)({filter:{slug:o,env:a}}),(0,m.jsx)("div",{className:"size-full",children:(0,m.jsxs)("div",{className:"flex size-full flex-col",children:[(0,m.jsx)(ed.ML,{theme:s?"vs-dark":"vs-light",height:"100%",defaultLanguage:"yaml",value:(null===(e=c.data)||void 0===e?void 0:e.deploymentYaml)||"",options:{minimap:{enabled:!1},scrollBeyondLastLine:!1}}),(0,m.jsx)(th.Z,{className:"px-4 pb-8",value:(null===(t=c.data)||void 0===t?void 0:t.deploymentYaml)||"",mode:"hidden"})]})})},tb=n(84602);function EnvVarsNewEdit_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var deployments_EnvVarsNewEdit=function(){var e,t,n=(0,ei.o)(),r=(0,f.Z)(n,1)[0],i=r.env,o=(r.project,r.app),a=(0,eF.H1)(),l=(0,f.Z)(a,2),c=l[0],d=l[1],p=(0,eF.im)(o,{populate:"project,owner,workspace"}),v=p.data,g=void 0===v?{}:v,h=p.status,b=(0,u.isEmpty)(g)?[]:(null===(t=(g.deployEnvironment||{})[i])||void 0===t?void 0:t.envVars)||[],y=(0,s.useState)([]),j=y[0],x=y[1],A=W.Z.useForm(),w=(0,f.Z)(A,1)[0],setEnvVars=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return x((0,ex.Z)(e))};(0,s.useEffect)(function(){var e=[];(0,u.isArray)(b)?e.push.apply(e,(0,ex.Z)(b.map(function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?EnvVarsNewEdit_ownKeys(Object(n),!0).forEach(function(t){(0,G.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):EnvVarsNewEdit_ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({id:(0,u.uniqueId)()},e)}))):(0,u.isArray)(b)||void 0===b[0]||Object.entries(b).forEach(function(t){var n=(0,f.Z)(t,2)[1];if(n.name&&n.value){var r={id:(0,u.uniqueId)(),name:n.name,value:n.value};e.push(r)}}),setEnvVars(e)},[JSON.stringify(b)]);var isVarNameExisted=function(e){return j.filter(function(t){return t.name===e}).length>1},addEnvVarField=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{id:(0,u.uniqueId)(),name:"",value:""};return x(function(t){return[].concat((0,ex.Z)(t),[e])})},updateVarNameByID=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";x(function(n){return n.map(function(n,r){return n.id===e?{id:e,name:t,value:n.value||""}:n})})},updateVarValueByID=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";x(function(n){return n.map(function(n,r){return n.id===e?{id:e,name:n.name||"",value:t}:n})})},Z=(e=(0,J.Z)(Y().mark(function _callee(e){return Y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,j.forEach(function(e){if((0,u.isEmpty)(e.name))throw Error("Variable's name should not be empty");if((0,tb.i1)(e.name))throw Error("Variable's name (".concat(e.name,") should not be a number"));if(isVarNameExisted(e.name))throw Error("Variable's name (".concat(e.name,") should be unique."))}),!(c&&g.slug)){e.next=6;break}return e.next=5,c({slug:g.slug,env:i,envVars:j});case 5:e.sent;case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),e4.ZP.error({message:e.t0.toString()});case 11:case"end":return e.stop()}},_callee,null,[[0,8]])})),function(t){return e.apply(this,arguments)});return(0,m.jsxs)(m.Fragment,{children:["loading"===h&&(0,m.jsx)($.Z,{active:!0}),"error"===h&&(0,m.jsx)(ee.Z,{message:"Unable to get data at the moment.",type:"error",showIcon:!0}),"success"===h&&(0,m.jsxs)(W.Z,{className:"h-full overflow-auto p-6",layout:"vertical",name:"deployEnvironment.".concat(i,".envVars"),form:w,onFinish:Z,onFinishFailed:function(e){console.log("Failed:",e)},autoComplete:"off",children:[(0,m.jsxs)(et.Z,{className:"w-full",direction:"vertical",size:"small",children:[(0,m.jsxs)(et.Z.Compact,{block:!0,children:[(0,m.jsx)(eQ.Z.Text,{className:"w-1/2",children:"Name"}),(0,m.jsx)(eQ.Z.Text,{className:"w-1/2",children:"Value"}),(0,m.jsx)("span",{className:"w-[32px]"})]}),(0,u.isEmpty)(j)&&(0,m.jsx)(ti.Z,{}),(j||[]).map(function(e,t){return(0,m.jsxs)(et.Z.Compact,{block:!0,children:[(0,m.jsx)(eg.Z,{className:"!flex-auto",placeholder:"NAME",status:(0,u.isEmpty)(e.name)||(0,tb.i1)(e.name)||isVarNameExisted(e.name)?"error":"",value:e.name,onChange:function(t){return t.currentTarget.value?updateVarNameByID(e.id,t.currentTarget.value):null}},"env-var-name-input-".concat(e.id)),(0,m.jsx)(eg.Z,{className:"!flex-auto",placeholder:"VALUE",value:e.value,onChange:function(t){return updateVarValueByID(e.id,t.currentTarget.value)}},"env-var-value-input-".concat(e.id)),(0,m.jsx)(en.ZP,{tabIndex:-1,icon:(0,m.jsx)(el.Z,{}),onClick:function(){var t;return t=e.id,x(function(e){return e.filter(function(e,n){return t!==e.id})})}})]},"env-var-".concat(e.id))})]}),(0,m.jsx)("div",{className:"py-6",children:(0,m.jsx)(en.ZP,{onClick:function(){return addEnvVarField()},children:"+ Add variable"})}),(0,m.jsx)(smart_form_ManualSaveController,{name:"envVars",apiStatus:d,initialValue:b,setValue:setEnvVars})]})]})},ty=n(67841),tj=n(54811),tx=n(35333),tA=n(53072);function ReleaseList_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ReleaseList_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ReleaseList_ownKeys(Object(n),!0).forEach(function(t){(0,G.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ReleaseList_ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var tw=n(56176),tZ=n(84110);e7().extend(tZ),e7().extend(tw);var tS=a.Z.useApp,tk=[{title:"Name",width:70,dataIndex:"name",key:"name",filterSearch:!0,filters:[{text:"goon",value:"goon"}],onFilter:function(e,t){return t.name&&t.name.indexOf(e.toString())>-1||!0},render:function(e,t){var n,r,i;return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("p",{children:(0,m.jsx)("strong",{children:e})}),(0,m.jsxs)("p",{children:["Revision: ",null!==(n=t.message)&&void 0!==n?n:"-",(0,m.jsx)("br",{}),"Author: ",null!==(r=null===(i=t.owner)||void 0===i?void 0:i.name)&&void 0!==r?r:"-",(0,m.jsx)("br",{}),"Created ",(0,m.jsx)(e3.q,{date:t.createdAt})]})]})}},{title:"Deploy status",dataIndex:"status",key:"status",width:30,filters:[{text:"start",value:"start"},{text:"failed",value:"failed"},{text:"success",value:"success"},{text:"building",value:"building"}],render:function(e){var t="warning",n=(0,m.jsx)(z.Z,{});switch(e){case"in_progress":t="processing",n=(0,m.jsx)(eu.Z,{className:"align-middle"});break;case"failed":t="error",n=(0,m.jsx)(ep.Z,{className:"align-middle"});break;case"success":t="success",n=(0,m.jsx)(em.Z,{className:"align-middle"});break;case"cancelled":t="warning",n=(0,m.jsx)(ep.Z,{className:"align-middle"});break;default:t="default",n=(0,m.jsx)(z.Z,{})}return(0,m.jsx)(eW.Z,{color:t,icon:n,children:e})}},{title:"Active",dataIndex:"active",key:"active",width:20,filters:[{text:"active",value:!0}],onFilter:function(e,t){return t.active===e},render:function(e){return!0===e?(0,m.jsx)(eW.Z,{color:"blue",icon:(0,m.jsx)(em.Z,{}),children:"active"}):"-"}},{title:"Action",key:"action",width:30,dataIndex:"action",render:function(e){return e}}],ReleaseList=function(){(0,U.useRouter)();var e,t=tS(),n=(0,ei.o)(),r=(0,f.Z)(n,1)[0],i=a.Z.useApp().modal,o=r.project,l=r.app,c=r.offsetHeader,d=r.env,p=void 0===d?"prod":d,v={};o&&(v.projectSlug=o),l&&(v.appSlug=l),p&&(v.env=p);var g=(0,s.useState)(1),h=g[0],b=g[1],y=(0,tx.kW)({filter:v,sort:"-createdAt",populate:"owner",pagination:{page:h,size:100}}),j=y.data,x=y.status,A=y.refetch,w=j||{},Z=w.list,S=(w.pagination||{}).total_items,k=(0,eF.im)(l,{populate:"owner"}).data,_=(0,tx.IX)(),P=(0,f.Z)(_,2),E=P[0],C=P[1],O=(0,s.useState)(""),N=O[0],D=O[1],L=(0,tx.bE)();(0,f.Z)(L,1)[0];var F=(e=(0,J.Z)(Y().mark(function _callee(e){var n,r;return Y().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(A(),!(0,u.isEmpty)(e)){i.next=4;break}return t.notification.error({message:"Failed to roll out.",description:"Release not found: ".concat(e),placement:"top"}),i.abrupt("return");case 4:return D(e),i.prev=5,i.next=8,E({id:e});case 8:n=i.sent,r=(0,u.isArray)(null==n?void 0:n.data)?null==n?void 0:n.data[0]:null==n?void 0:n.data,null!=n&&n.status&&(A(),t.notification.success({message:"Congrats, the release has been rolled out successfully!",description:(0,m.jsxs)(m.Fragment,{children:["Your website is ready to access on PRODUCTION environment:"," ",(0,m.jsx)("a",{href:"https://".concat(null==r?void 0:r.productionUrl),target:"_blank",rel:"noreferrer",children:null==r?void 0:r.productionUrl})]}),placement:"top"})),i.next=17;break;case 13:i.prev=13,i.t0=i.catch(5),console.error("Could not process rolling out this release:",i.t0),t.notification.error({message:"Failed to roll out.",description:"Could not process rolling out this release: ".concat(i.t0),placement:"top"});case 17:D("");case 18:case"end":return i.stop()}},_callee,null,[[5,13]])})),function(t){return e.apply(this,arguments)}),openPromoteDeployEnvironmentModal=function(e,t,n){var r=null==i?void 0:i.info({title:(0,m.jsxs)(eQ.Z.Title,{level:3,children:["Promote to ",n?n.toUpperCase():"another"," deploy environment"]}),icon:null,content:(0,m.jsx)(tA.Z,{app:e,fromEnv:t,toEnv:n,next:function(){null==r||r.destroy()}}),footer:null,closable:!0,maskClosable:!0,width:500,bodyStyle:{margin:0,width:"100%",justifyContent:"stretch"},onOk:function(){}})},B=(void 0===Z?[]:Z).map(function(e){return ReleaseList_objectSpread(ReleaseList_objectSpread({},e),{},{id:e._id,status:N===e._id&&"loading"===C?"in_progress":e.status,action:(0,m.jsx)(m.Fragment,{children:(0,m.jsxs)(et.Z.Compact,{children:[(0,m.jsx)(K.Z,{title:"Roll out",children:(0,m.jsx)(en.ZP,{disabled:N===e._id&&"loading"===C,icon:(0,m.jsx)(ty.Z,{}),onClick:function(){return F(e._id)}})}),(0,m.jsx)(K.Z,{title:"Promote to another deploy environment",arrow:!1,children:(0,m.jsx)(en.ZP,{icon:(0,m.jsx)(tj.Z,{}),onClick:function(){k?openPromoteDeployEnvironmentModal(k,p):console.log('App "'.concat(l,'" not found.'))},target:"_blank"})})]})})})});return console.log({displayedReleases:B}),(0,m.jsx)("div",{children:(0,m.jsx)(e8.Z,{loading:"loading"===x,columns:tk,dataSource:B,scroll:{x:600},sticky:{offsetHeader:void 0===c?0:c},pagination:{current:h,pageSize:100,total:S},onChange:function(e){var t=e.current;b(null!=t?t:1)}})})},SiteLayout=function(e){var t=e.useSidebar,n=useDrawerProvider();n.drawerVisibility;var r=n.showDrawer,i=n.closeDrawer,a=(0,ei.o)(),l=(0,f.Z)(a,2),u=l[0],c=l[1],d=(c.setQuery,c.deleteQuery);c.deleteAllQueryKeys;var p=u.lv1,g=u.lv2,h=(u.type,u.slug,u.project),b=u.app,y=u.env;o.Z.useToken().token.colorText;var openBuildList=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;r&&r({title:"Builds",content:(0,m.jsx)(tc.w,{})},{level:e})},openReleaseList=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;r&&r({title:"Releases",content:(0,m.jsx)(ReleaseList,{})},{level:e})},openBuildLogs=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;r&&r({title:"Build Logs",content:(0,m.jsx)(td.O,{})},{level:e})},openEnvVarsPage=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;r&&r({title:"Environment Variables",content:(0,m.jsx)(deployments_EnvVarsNewEdit,{})},{level:e})},openAppDeployEnvLogsPage=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;r&&r({title:"Application Logs (env: ".concat(y||"unknown",")"),content:(0,m.jsx)(AppLogs,{})},{level:e})},openDeploymentYamlPage=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;r&&r({title:"Deployment YAML: ".concat(y.toUpperCase()),content:(0,m.jsx)(deployments_DeploymentYaml,{})},{level:e})},openDeployEnvironment=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;r&&r({title:"Deploy Environment: ".concat(y.toUpperCase()),content:(0,m.jsx)(deployments_DeployEnvironment,{})},{level:e})},openDbBackupList=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;r&&r({title:"Cloud Database Backups",content:(0,m.jsx)(DatabaseBackupList,{})},{level:e})},openEditPage=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;r&&r({title:"Edit",content:(0,m.jsx)(commons_NewEditPage,{formType:"edit"})},{level:e})},openCreatePage=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;r&&r({title:"Create",content:(0,m.jsx)(commons_NewEditPage,{formType:"new"})},{level:e})};return(0,s.useEffect)(function(){switch(p){case"build":openBuildList();break;case"build_logs":openBuildLogs(1);break;case"release":openReleaseList();break;case"new":openCreatePage();break;case"edit":openEditPage();break;case"deploy_environment":openDeployEnvironment();break;case"env_vars":openEnvVarsPage();break;case"deployment_yaml":openDeploymentYamlPage(1);break;case"app_logs":openAppDeployEnvLogsPage();break;case"db_backups":openDbBackupList();break;default:d(["lv1"]),i&&i("lv1")}switch(g){case"build":openBuildList(2);break;case"build_logs":openBuildLogs(2);break;case"release":openReleaseList(2);break;case"app_logs":openAppDeployEnvLogsPage(2);break;case"env_vars":openEnvVarsPage(2);break;case"deployment_yaml":openDeploymentYamlPage(2);break;case"db_backups":openDbBackupList(2);break;default:d(["lv2"]),i&&i("lv2")}},[p,g,h,b,y]),(0,m.jsxs)(v.Z,{hasSider:!0,className:"full-height",children:[e.meta,(0,m.jsx)("div",{className:"full-height fixed z-[102] overflow-visible md:relative md:overflow-y-auto md:overflow-x-hidden",children:t?(0,m.jsx)(MenuSider,{}):null}),(0,m.jsxs)(v.Z,{className:"full-height overflow-auto transition-all",children:[t?(0,m.jsx)(SiteHeader,{}):null,(0,m.jsx)("div",{className:"flex flex-auto flex-col overflow-auto",children:e.children}),(0,m.jsx)(PageFooter,{})]})]})},t_=n(4730),tP=["components","children"];function Compose_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Compose_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Compose_ownKeys(Object(n),!0).forEach(function(t){(0,G.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Compose_ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Compose(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.components,n=e.children,r=(0,t_.Z)(e,tP);return(0,m.jsx)(m.Fragment,{children:(void 0===t?[]:t).reduceRight(function(t,n){return(0,s.createElement)(n,Compose_objectSpread(Compose_objectSpread({},r),{},{key:e.key}),t)},n)})}var tE=n(55240),Main=function(e){var t=(0,l.vs)().isDarkMode,n=e.useSidebar;return(0,s.useEffect)(function(){var e=document.documentElement;e.style.colorScheme=t?"dark":"",t?e.classList.contains("dark")||e.classList.add("dark"):e.classList.contains("dark")&&e.classList.remove("dark")},[t]),(0,m.jsxs)(i.ZP,{theme:{hashed:!1,algorithm:t?o.Z.darkAlgorithm:o.Z.defaultAlgorithm},children:[(0,m.jsx)(a.Z,{children:(0,m.jsx)(Compose,{components:[V.ZP,providers_DrawerProvider,tE.ZP],children:(0,m.jsx)(SiteLayout,{meta:e.meta,useSidebar:void 0===n||n,children:e.children})})}),(0,m.jsx)(measure_GtagScript,{gaIds:["G-QC4124805Q"]})]})}},1071:function(e,t,n){"use strict";n.d(t,{h:function(){return Meta}});var r=n(9008),i=n.n(r),o=n(11163),a=n(2962),s=n(55611),l=n(85893),Meta=function(e){var t=(0,o.useRouter)(),n=window.origin.indexOf("localhost")>-1;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(i(),{children:[(0,l.jsx)("meta",{charSet:"UTF-8"},"charset"),(0,l.jsx)("meta",{name:"viewport",content:"width=device-width,initial-scale=1"},"viewport"),(0,l.jsx)("link",{rel:"apple-touch-icon",href:"".concat(t.basePath,"/apple-touch-icon.png")},"apple"),(0,l.jsx)("link",{rel:"icon",type:"image/png",sizes:"32x32",href:"".concat(t.basePath,"/favicon-32x32.png")},"icon32"),(0,l.jsx)("link",{rel:"icon",type:"image/png",sizes:"16x16",href:"".concat(t.basePath,"/favicon-16x16.png")},"icon16"),(0,l.jsx)("link",{rel:"icon",href:"".concat(t.basePath,"/favicon").concat(n?"-red":"",".ico")},"favicon")]}),(0,l.jsx)(a.PB,{title:"".concat(e.title," | ").concat(s.XL.site_name),description:e.description,canonical:e.canonical,openGraph:{title:e.title,description:e.description,url:e.canonical,locale:s.XL.locale,site_name:s.XL.site_name}}),(0,l.jsx)("link",{href:"https://cdn.jsdelivr.net/npm/remixicon@2.5.0/fonts/remixicon.css",rel:"stylesheet"})]})}},55611:function(e,t,n){"use strict";n.d(t,{De:function(){return u},XL:function(){return l},r8:function(){return isDev}});var r=n(92777),i=n(82262),o=n(59499),a=n(4793);n(96486);var s=n(83454);function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var l={site_name:"DXUP",title:"DXUP",description:"Welcome to the Dashboard of DXUP.",locale:"en",tableConfig:{defaultPageSize:50}},u=function(){function Config(){(0,r.Z)(this,Config)}return(0,i.Z)(Config,null,[{key:"DX_SITE",get:function(){return"development"===this.NEXT_PUBLIC_ENV?"http://localhost:4000":"https://diginext.site"}},{key:"ENV",get:function(){return this.grab("NODE_ENV","development").toUpperCase()}},{key:"NEXT_PUBLIC_BASE_PATH",get:function(){return""}},{key:"getBasePath",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=this.NEXT_PUBLIC_BASE_PATH;return(""===t?t:"/".concat(t))+e}},{key:"path",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.getBasePath(e)}},{key:"NEXT_PUBLIC_ENV",get:function(){return"production"}},{key:"NEXT_PUBLIC_API_BASE_URL",get:function(){return window.location.origin.indexOf("localhost")>-1?"http://localhost:6969":window.location.origin}},{key:"NEXT_PUBLIC_DOMAIN",get:function(){return"dxup.dev"}},{key:"NEXT_PUBLIC_BASE_URL",get:function(){return window.location.origin}},{key:"DISABLE_INPECT_MEMORY",get:function(){return(0,a.AM)(this.grab("DISABLE_INPECT_MEMORY"))}},{key:"SECONDS_INPECT_MEMORY",get:function(){return(0,a.Hq)(this.grab("SECONDS_INPECT_MEMORY"))}},{key:"CORS_WHITELIST",get:function(){return s.env.CORS_WHITELIST?s.env.CORS_WHITELIST.split(";"):["localhost","192.168","127.0","digitop.vn","diginext.site","diginext.vn"]}}]),Config}();(0,o.Z)(u,"grab",function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return null!==(t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){(0,o.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},s.env)[e])&&void 0!==t?t:n});var isDev=function(){return"development"===u.NEXT_PUBLIC_ENV}},22868:function(){},14777:function(){},99830:function(){},70209:function(){}}]);