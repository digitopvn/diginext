"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3121],{43121:function(e,t,n){n.r(t),n.d(t,{commonmarkLanguage:function(){return tL},deleteMarkupBackward:function(){return tM},insertNewlineContinueMarkup:function(){return tT},markdown:function(){return tH},markdownKeymap:function(){return tP},markdownLanguage:function(){return ty}});var s,r,i=n(14806),o=n(91398),l=n(68935);class a{constructor(e,t,n){this.state=e,this.pos=t,this.explicit=n,this.abortListeners=[]}tokenBefore(e){let t=(0,l.qz)(this.state).resolveInner(this.pos,-1);for(;t&&0>e.indexOf(t.name);)t=t.parent;return t?{from:t.from,to:this.pos,text:this.state.sliceDoc(t.from,this.pos),type:t.type}:null}matchBefore(e){let t=this.state.doc.lineAt(this.pos),n=Math.max(t.from,this.pos-250),s=t.text.slice(n-t.from,this.pos-t.from),r=s.search(p(e,!1));return r<0?null:{from:n+r,to:this.pos,text:s.slice(r)}}get aborted(){return null==this.abortListeners}addEventListener(e,t){"abort"==e&&this.abortListeners&&this.abortListeners.push(t)}}function h(e){let t=Object.keys(e).join(""),n=/\w/.test(t);return n&&(t=t.replace(/\w/g,"")),`[${n?"\\w":""}${t.replace(/[^\w\s]/g,"\\$&")}]`}class f{constructor(e,t,n,s){this.completion=e,this.source=t,this.match=n,this.score=s}}function c(e){return e.selection.main.from}function p(e,t){var n;let{source:s}=e,r=t&&"^"!=s[0],i="$"!=s[s.length-1];return r||i?RegExp(`${r?"^":""}(?:${s})${i?"$":""}`,null!==(n=e.flags)&&void 0!==n?n:e.ignoreCase?"i":""):e}let u=i.q6.define(),d=new WeakMap;function m(e){if(!Array.isArray(e))return e;let t=d.get(e);return t||d.set(e,t=function(e){let t=e.map(e=>"string"==typeof e?{label:e}:e),[n,s]=t.every(e=>/^\w+$/.test(e.label))?[/\w*$/,/\w+$/]:function(e){let t=Object.create(null),n=Object.create(null);for(let{label:s}of e){t[s[0]]=!0;for(let r=1;r<s.length;r++)n[s[r]]=!0}let i=h(t)+h(n)+"*$";return[RegExp("^"+i),RegExp(i)]}(t);return e=>{let r=e.matchBefore(s);return r||e.explicit?{from:r?r.from:e.pos,options:t,validFor:n}:null}}(e)),t}let g=i.Py.define(),k=i.Py.define();class x{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[];for(let t=0;t<e.length;){let n=(0,i.gm)(e,t),s=(0,i.nZ)(n);this.chars.push(n);let r=e.slice(t,t+s),o=r.toUpperCase();this.folded.push((0,i.gm)(o==r?r.toLowerCase():o,0)),t+=s}this.astral=e.length!=this.chars.length}match(e){if(0==this.pattern.length)return[-100];if(e.length<this.pattern.length)return null;let{chars:t,folded:n,any:s,precise:r,byWord:o}=this;if(1==t.length){let l=(0,i.gm)(e,0),a=(0,i.nZ)(l),h=a==e.length?0:-100;if(l==t[0]);else{if(l!=n[0])return null;h+=-200}return[h,0,a]}let f=e.indexOf(this.pattern);if(0==f)return[e.length==this.pattern.length?0:-100,0,this.pattern.length];let c=t.length,p=0;if(f<0){for(let u=0,d=Math.min(e.length,200);u<d&&p<c;){let m=(0,i.gm)(e,u);(m==t[p]||m==n[p])&&(s[p++]=u),u+=(0,i.nZ)(m)}if(p<c)return null}let g=0,k=0,x=!1,b=0,L=-1,C=-1,y=/[a-z]/.test(e),w=!0;for(let S=0,v=Math.min(e.length,200),I=0;S<v&&k<c;){let A=(0,i.gm)(e,S);f<0&&(g<c&&A==t[g]&&(r[g++]=S),b<c&&(A==t[b]||A==n[b]?(0==b&&(L=S),C=S+1,b++):b=0));let T,B=A<255?A>=48&&A<=57||A>=97&&A<=122?2:A>=65&&A<=90?1:0:(T=(0,i.bg)(A))!=T.toLowerCase()?1:T!=T.toUpperCase()?2:0;(!S||1==B&&y||0==I&&0!=B)&&(t[k]==A||n[k]==A&&(x=!0)?o[k++]=S:o.length&&(w=!1)),I=B,S+=(0,i.nZ)(A)}return k==c&&0==o[0]&&w?this.result(-100+(x?-200:0),o,e):b==c&&0==L?[-200-e.length+(C==e.length?0:-100),0,C]:f>-1?[-700-e.length,f,f+this.pattern.length]:b==c?[-900-e.length,L,C]:k==c?this.result(-100+(x?-200:0)+-700+(w?0:-1100),o,e):2==t.length?null:this.result((s[0]?-700:0)+-200+-1100,s,e)}result(e,t,n){let s=[e-n.length],r=1;for(let o of t){let l=o+(this.astral?(0,i.nZ)((0,i.gm)(n,o)):1);r>1&&s[r-1]==o?s[r-1]=l:(s[r++]=o,s[r++]=l)}return s}}let b=i.r$.define({combine:e=>(0,i.BO)(e,{activateOnTyping:!0,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:C,compareCompletions:(e,t)=>e.label.localeCompare(t.label),interactionDelay:75},{defaultKeymap:(e,t)=>e&&t,closeOnBlur:(e,t)=>e&&t,icons:(e,t)=>e&&t,tooltipClass:(e,t)=>n=>L(e(n),t(n)),optionClass:(e,t)=>n=>L(e(n),t(n)),addToOptions:(e,t)=>e.concat(t)})});function L(e,t){return e?t?e+" "+t:e:t}function C(e,t,n,s,r){let i=e.textDirection==o.Nm.RTL,l=i,a=!1,h="top",f,c,p=t.left-r.left,u=r.right-t.right,d=s.right-s.left,m=s.bottom-s.top;if(l&&p<Math.min(d,u)?l=!1:!l&&u<Math.min(d,p)&&(l=!0),d<=(l?p:u))f=Math.max(r.top,Math.min(n.top,r.bottom-m))-t.top,c=Math.min(400,l?p:u);else{a=!0,c=Math.min(400,(i?t.right:r.right-t.left)-30);let g=r.bottom-t.bottom;g>=m||g>t.top?f=n.bottom-t.top:(h="bottom",f=t.bottom-n.top)}return{style:`${h}: ${f}px; max-width: ${c}px`,class:"cm-completionInfo-"+(a?i?"left-narrow":"right-narrow":l?"left":"right")}}function y(e,t,n){if(e<=n)return{from:0,to:e};if(t<0&&(t=0),t<=e>>1){let s=Math.floor(t/n);return{from:s*n,to:(s+1)*n}}let r=Math.floor((e-t)/n);return{from:e-(r+1)*n,to:e-r*n}}class w{constructor(e,t,n){let s;this.view=e,this.stateField=t,this.applyCompletion=n,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:e=>this.placeInfo(e),key:this},this.space=null,this.currentClass="";let r=e.state.field(t),{options:i,selected:o}=r.open,l=e.state.facet(b);this.optionContent=(s=l.addToOptions.slice(),l.icons&&s.push({render(e){let t=document.createElement("div");return t.classList.add("cm-completionIcon"),e.type&&t.classList.add(...e.type.split(/\s+/g).map(e=>"cm-completionIcon-"+e)),t.setAttribute("aria-hidden","true"),t},position:20}),s.push({render(e,t,n){let s=document.createElement("span");s.className="cm-completionLabel";let{label:r}=e,i=0;for(let o=1;o<n.length;){let l=n[o++],a=n[o++];l>i&&s.appendChild(document.createTextNode(r.slice(i,l)));let h=s.appendChild(document.createElement("span"));h.appendChild(document.createTextNode(r.slice(l,a))),h.className="cm-completionMatchedText",i=a}return i<r.length&&s.appendChild(document.createTextNode(r.slice(i))),s},position:50},{render(e){if(!e.detail)return null;let t=document.createElement("span");return t.className="cm-completionDetail",t.textContent=e.detail,t},position:80}),s.sort((e,t)=>e.position-t.position).map(e=>e.render)),this.optionClass=l.optionClass,this.tooltipClass=l.tooltipClass,this.range=y(i.length,o,l.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",t=>{for(let n=t.target,s;n&&n!=this.dom;n=n.parentNode)if("LI"==n.nodeName&&(s=/-(\d+)$/.exec(n.id))&&+s[1]<i.length){this.applyCompletion(e,i[+s[1]]),t.preventDefault();return}}),this.dom.addEventListener("focusout",t=>{let n=e.state.field(this.stateField,!1);n&&n.tooltip&&e.state.facet(b).closeOnBlur&&t.relatedTarget!=e.contentDOM&&e.dispatch({effects:k.of(null)})}),this.list=this.dom.appendChild(this.createListBox(i,r.id,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}mount(){this.updateSel()}update(e){var t,n,s;let r=e.state.field(this.stateField),i=e.startState.field(this.stateField);this.updateTooltipClass(e.state),r!=i&&(this.updateSel(),(null===(t=r.open)||void 0===t?void 0:t.disabled)!=(null===(n=i.open)||void 0===n?void 0:n.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!(null===(s=r.open)||void 0===s?void 0:s.disabled)))}updateTooltipClass(e){let t=this.tooltipClass(e);if(t!=this.currentClass){for(let n of this.currentClass.split(" "))n&&this.dom.classList.remove(n);for(let s of t.split(" "))s&&this.dom.classList.add(s);this.currentClass=t}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),t=e.open;if((t.selected>-1&&t.selected<this.range.from||t.selected>=this.range.to)&&(this.range=y(t.options.length,t.selected,this.view.state.facet(b).maxRenderedOptions),this.list.remove(),this.list=this.dom.appendChild(this.createListBox(t.options,e.id,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})),this.updateSelectedOption(t.selected)){this.destroyInfo();let{completion:n}=t.options[t.selected],{info:s}=n;if(!s)return;let r="string"==typeof s?document.createTextNode(s):s(n);if(!r)return;"then"in r?r.then(t=>{t&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(t,n)}).catch(e=>(0,o.OO)(this.view.state,e,"completion info")):this.addInfoPane(r,n)}}addInfoPane(e,t){this.destroyInfo();let n=this.info=document.createElement("div");if(n.className="cm-tooltip cm-completionInfo",null!=e.nodeType)n.appendChild(e),this.infoDestroy=null;else{let{dom:s,destroy:r}=e;n.appendChild(s),this.infoDestroy=r||null}this.dom.appendChild(n),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){var t,n;let s,r,i=null;for(let o=this.list.firstChild,l=this.range.from;o;o=o.nextSibling,l++)"LI"==o.nodeName&&o.id?l==e?o.hasAttribute("aria-selected")||(o.setAttribute("aria-selected","true"),i=o):o.hasAttribute("aria-selected")&&o.removeAttribute("aria-selected"):l--;return i&&(t=this.list,n=i,s=t.getBoundingClientRect(),(r=n.getBoundingClientRect()).top<s.top?t.scrollTop-=s.top-r.top:r.bottom>s.bottom&&(t.scrollTop+=r.bottom-s.bottom)),i}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let t=this.dom.getBoundingClientRect(),n=this.info.getBoundingClientRect(),s=e.getBoundingClientRect(),r=this.space;if(!r){let i=this.dom.ownerDocument.defaultView||window;r={left:0,top:0,right:i.innerWidth,bottom:i.innerHeight}}return s.top>Math.min(r.bottom,t.bottom)-10||s.bottom<Math.max(r.top,t.top)+10?null:this.view.state.facet(b).positionInfo(this.view,t,s,n,r)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,t,n){let s=document.createElement("ul");s.id=t,s.setAttribute("role","listbox"),s.setAttribute("aria-expanded","true"),s.setAttribute("aria-label",this.view.state.phrase("Completions"));let r=null;for(let i=n.from;i<n.to;i++){let{completion:o,match:l}=e[i],{section:a}=o;if(a){let h="string"==typeof a?a:a.name;h!=r&&(i>n.from||0==n.from)&&(r=h,"string"!=typeof a&&a.header?s.appendChild(a.header(a)):s.appendChild(document.createElement("completion-section")).textContent=h)}let f=s.appendChild(document.createElement("li"));f.id=t+"-"+i,f.setAttribute("role","option");let c=this.optionClass(o);for(let p of(c&&(f.className=c),this.optionContent)){let u=p(o,this.view.state,l);u&&f.appendChild(u)}}return n.from&&s.classList.add("cm-completionListIncompleteTop"),n.to<e.length&&s.classList.add("cm-completionListIncompleteBottom"),s}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function S(e){return 100*(e.boost||0)+(e.apply?10:0)+(e.info?5:0)+(e.type?1:0)}class v{constructor(e,t,n,s,r,i){this.options=e,this.attrs=t,this.tooltip=n,this.timestamp=s,this.selected=r,this.disabled=i}setSelected(e,t){return e==this.selected||e>=this.options.length?this:new v(this.options,T(t,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,t,n,s,r){let i=function(e,t){let n=[],s=null,r=e=>{n.push(e);let{section:t}=e.completion;if(t){s||(s=[]);let r="string"==typeof t?t:t.name;s.some(e=>e.name==r)||s.push("string"==typeof t?{name:r}:t)}};for(let i of e)if(i.hasResult()){if(!1===i.result.filter){let o=i.result.getMatch;for(let l of i.result.options){let a=[1e9-n.length];if(o)for(let h of o(l))a.push(h);r(new f(l,i.source,a,a[0]))}}else{let c=new x(t.sliceDoc(i.from,i.to)),p;for(let u of i.result.options)(p=c.match(u.label))&&r(new f(u,i.source,p,p[0]+(u.boost||0)))}}if(s){let d=Object.create(null),m=0,g=(e,t)=>{var n,s;return(null!==(n=e.rank)&&void 0!==n?n:1e9)-(null!==(s=t.rank)&&void 0!==s?s:1e9)||(e.name<t.name?-1:1)};for(let k of s.sort(g))m-=1e5,d[k.name]=m;for(let L of n){let{section:C}=L.completion;C&&(L.score+=d["string"==typeof C?C:C.name])}}let y=[],w=null,v=t.facet(b).compareCompletions;for(let I of n.sort((e,t)=>t.score-e.score||v(e.completion,t.completion)))w&&w.label==I.completion.label&&w.detail==I.completion.detail&&(null==w.type||null==I.completion.type||w.type==I.completion.type)&&w.apply==I.completion.apply?S(I.completion)>S(w)&&(y[y.length-1]=I):y.push(I),w=I.completion;return y}(e,t);if(!i.length)return s&&e.some(e=>1==e.state)?new v(s.options,s.attrs,s.tooltip,s.timestamp,s.selected,!0):null;let o=t.facet(b).selectOnOpen?0:-1;if(s&&s.selected!=o&&-1!=s.selected){let l=s.options[s.selected].completion;for(let a=0;a<i.length;a++)if(i[a].completion==l){o=a;break}}return new v(i,T(n,o),{pos:e.reduce((e,t)=>t.hasResult()?Math.min(e,t.from):e,1e8),create:e=>new w(e,H,N),above:r.aboveCursor},s?s.timestamp:Date.now(),o,!1)}map(e){return new v(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}}class I{constructor(e,t,n){this.active=e,this.id=t,this.open=n}static start(){return new I(B,"cm-ac-"+Math.floor(2e6*Math.random()).toString(36),null)}update(e){let{state:t}=e,n=t.facet(b),s=(n.override||t.languageDataAt("autocomplete",c(t)).map(m)).map(t=>(this.active.find(e=>e.source==t)||new E(t,this.active.some(e=>0!=e.state)?1:0)).update(e,n));s.length==this.active.length&&s.every((e,t)=>e==this.active[t])&&(s=this.active);let r=this.open;for(let i of(r&&e.docChanged&&(r=r.map(e.changes)),e.selection||s.some(t=>t.hasResult()&&e.changes.touchesRange(t.from,t.to))||!function(e,t){if(e==t)return!0;for(let n=0,s=0;;){for(;n<e.length&&!e[n].hasResult;)n++;for(;s<t.length&&!t[s].hasResult;)s++;let r=n==e.length,i=s==t.length;if(r||i)return r==i;if(e[n++].result!=t[s++].result)return!1}}(s,this.active)?r=v.build(s,t,this.id,r,n):r&&r.disabled&&!s.some(e=>1==e.state)&&(r=null),!r&&s.every(e=>1!=e.state)&&s.some(e=>e.hasResult())&&(s=s.map(e=>e.hasResult()?new E(e.source,0):e)),e.effects))i.is(O)&&(r=r&&r.setSelected(i.value,this.id));return s==this.active&&r==this.open?this:new I(s,this.id,r)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:A}}let A={"aria-autocomplete":"list"};function T(e,t){let n={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":e};return t>-1&&(n["aria-activedescendant"]=e+"-"+t),n}let B=[];class E{constructor(e,t,n=-1){this.source=e,this.state=t,this.explicitPos=n}hasResult(){return!1}update(e,t){let n=e.isUserEvent("input.type")?"input":e.isUserEvent("delete.backward")?"delete":null,s=this;for(let r of(n?s=s.handleUserEvent(e,n,t):e.docChanged?s=s.handleChange(e):e.selection&&0!=s.state&&(s=new E(s.source,0)),e.effects))if(r.is(g))s=new E(s.source,1,r.value?c(e.state):-1);else if(r.is(k))s=new E(s.source,0);else if(r.is(P))for(let i of r.value)i.source==s.source&&(s=i);return s}handleUserEvent(e,t,n){return"delete"!=t&&n.activateOnTyping?new E(this.source,1):this.map(e.changes)}handleChange(e){return e.changes.touchesRange(c(e.startState))?new E(this.source,0):this.map(e.changes)}map(e){return e.empty||this.explicitPos<0?this:new E(this.source,this.state,e.mapPos(this.explicitPos))}}class M extends E{constructor(e,t,n,s,r){super(e,2,t),this.result=n,this.from=s,this.to=r}hasResult(){return!0}handleUserEvent(e,t,n){var s;let r=e.changes.mapPos(this.from),i=e.changes.mapPos(this.to,1),o=c(e.state);if((this.explicitPos<0?o<=r:o<this.from)||o>i||"delete"==t&&c(e.startState)==this.from)return new E(this.source,"input"==t&&n.activateOnTyping?1:0);let l=this.explicitPos<0?-1:e.changes.mapPos(this.explicitPos),h;return!function(e,t,n,s){if(!e)return!1;let r=t.sliceDoc(n,s);return"function"==typeof e?e(r,n,s,t):p(e,!0).test(r)}(this.result.validFor,e.state,r,i)?this.result.update&&(h=this.result.update(this.result,r,i,new a(e.state,o,l>=0)))?new M(this.source,l,h,h.from,null!==(s=h.to)&&void 0!==s?s:c(e.state)):new E(this.source,1,l):new M(this.source,l,this.result,r,i)}handleChange(e){return e.changes.touchesRange(this.from,this.to)?new E(this.source,0):this.map(e.changes)}map(e){return e.empty?this:new M(this.source,this.explicitPos<0?-1:e.mapPos(this.explicitPos),this.result,e.mapPos(this.from),e.mapPos(this.to,1))}}let P=i.Py.define({map:(e,t)=>e.map(e=>e.map(t))}),O=i.Py.define(),H=i.QQ.define({create:()=>I.start(),update:(e,t)=>e.update(t),provide:e=>[o.hJ.from(e,e=>e.tooltip),o.tk.contentAttributes.from(e,e=>e.attrs)]});function N(e,t){let n=t.completion.apply||t.completion.label,s=e.state.field(H).active.find(e=>e.source==t.source);return s instanceof M&&("string"==typeof n?e.dispatch(Object.assign(Object.assign({},function(e,t,n,s){let{main:r}=e.selection,o=n-r.from,l=s-r.from;return Object.assign(Object.assign({},e.changeByRange(a=>a!=r&&n!=s&&e.sliceDoc(a.from+o,a.from+l)!=e.sliceDoc(n,s)?{range:a}:{changes:{from:a.from+o,to:s==r.from?a.to:a.from+l,insert:t},range:i.jT.cursor(a.from+o+t.length)})),{userEvent:"input.complete"})}(e.state,n,s.from,s.to)),{annotations:u.of(t.completion)})):n(e,t.completion,s.from,s.to),!0)}let R=o.p.widget({widget:new class extends o.l9{toDOM(){let e=document.createElement("span");return e.className="cm-snippetFieldPosition",e}ignoreEvent(){return!1}}}),J=o.p.mark({class:"cm-snippetField"});class ${constructor(e,t){this.ranges=e,this.active=t,this.deco=o.p.set(e.map(e=>(e.from==e.to?R:J).range(e.from,e.to)))}map(e){let t=[];for(let n of this.ranges){let s=n.map(e);if(!s)return null;t.push(s)}return new $(t,this.active)}selectionInsideField(e){return e.ranges.every(e=>this.ranges.some(t=>t.field==this.active&&t.from<=e.from&&t.to>=e.to))}}let D=i.Py.define({map:(e,t)=>e&&e.map(t)}),j=i.Py.define(),q=i.QQ.define({create:()=>null,update(e,t){for(let n of t.effects){if(n.is(D))return n.value;if(n.is(j)&&e)return new $(e.ranges,n.value)}return e&&t.docChanged&&(e=e.map(t.changes)),e&&t.selection&&!e.selectionInsideField(t.selection)&&(e=null),e},provide:e=>o.tk.decorations.from(e,e=>e?e.deco:o.p.none)});function z(e){return({state:t,dispatch:n})=>{var s;let r=t.field(q,!1);if(!r||e<0&&0==r.active)return!1;let o=r.active+e,l=e>0&&!r.ranges.some(t=>t.field==o+e);return n(t.update({selection:(s=r.ranges,i.jT.create(s.filter(e=>e.field==o).map(e=>i.jT.range(e.from,e.to)))),effects:D.of(l?null:new $(r.ranges,o))})),!0}}let F=({state:e,dispatch:t})=>!!e.field(q,!1)&&(t(e.update({effects:D.of(null)})),!0),X=z(1),U=z(-1),_=i.Py.define({map(e,t){let n=t.mapPos(e,-1,i.gc.TrackAfter);return null==n?void 0:n}}),Q=new class extends i.uU{};Q.startSide=1,Q.endSide=-1,"object"==typeof navigator&&navigator.userAgent;var Z=n(99415),V=n(41691);class G{static create(e,t,n,s,r){return new G(e,t,n,s+(s<<8)+e+(t<<4)|0,r,[],[])}constructor(e,t,n,s,r,i,o){this.type=e,this.value=t,this.from=n,this.hash=s,this.end=r,this.children=i,this.positions=o,this.hashProp=[[Z.md.contextHash,s]]}addChild(e,t){e.prop(Z.md.contextHash)!=this.hash&&(e=new Z.mp(e.type,e.children,e.positions,e.length,this.hashProp)),this.children.push(e),this.positions.push(t)}toTree(e,t=this.end){let n=this.children.length-1;return n>=0&&(t=Math.max(t,this.positions[n]+this.children[n].length+this.from)),new Z.mp(e.types[this.type],this.children,this.positions,t-this.from).balance({makeTree:(e,t,n)=>new Z.mp(Z.Jq.none,e,t,n,this.hashProp)})}}(s=r||(r={}))[s.Document=1]="Document",s[s.CodeBlock=2]="CodeBlock",s[s.FencedCode=3]="FencedCode",s[s.Blockquote=4]="Blockquote",s[s.HorizontalRule=5]="HorizontalRule",s[s.BulletList=6]="BulletList",s[s.OrderedList=7]="OrderedList",s[s.ListItem=8]="ListItem",s[s.ATXHeading1=9]="ATXHeading1",s[s.ATXHeading2=10]="ATXHeading2",s[s.ATXHeading3=11]="ATXHeading3",s[s.ATXHeading4=12]="ATXHeading4",s[s.ATXHeading5=13]="ATXHeading5",s[s.ATXHeading6=14]="ATXHeading6",s[s.SetextHeading1=15]="SetextHeading1",s[s.SetextHeading2=16]="SetextHeading2",s[s.HTMLBlock=17]="HTMLBlock",s[s.LinkReference=18]="LinkReference",s[s.Paragraph=19]="Paragraph",s[s.CommentBlock=20]="CommentBlock",s[s.ProcessingInstructionBlock=21]="ProcessingInstructionBlock",s[s.Escape=22]="Escape",s[s.Entity=23]="Entity",s[s.HardBreak=24]="HardBreak",s[s.Emphasis=25]="Emphasis",s[s.StrongEmphasis=26]="StrongEmphasis",s[s.Link=27]="Link",s[s.Image=28]="Image",s[s.InlineCode=29]="InlineCode",s[s.HTMLTag=30]="HTMLTag",s[s.Comment=31]="Comment",s[s.ProcessingInstruction=32]="ProcessingInstruction",s[s.Autolink=33]="Autolink",s[s.HeaderMark=34]="HeaderMark",s[s.QuoteMark=35]="QuoteMark",s[s.ListMark=36]="ListMark",s[s.LinkMark=37]="LinkMark",s[s.EmphasisMark=38]="EmphasisMark",s[s.CodeMark=39]="CodeMark",s[s.CodeText=40]="CodeText",s[s.CodeInfo=41]="CodeInfo",s[s.LinkTitle=42]="LinkTitle",s[s.LinkLabel=43]="LinkLabel",s[s.URL=44]="URL";class W{constructor(e,t){this.start=e,this.content=t,this.marks=[],this.parsers=[]}}class K{constructor(){this.text="",this.baseIndent=0,this.basePos=0,this.depth=0,this.markers=[],this.pos=0,this.indent=0,this.next=-1}forward(){this.basePos>this.pos&&this.forwardInner()}forwardInner(){let e=this.skipSpace(this.basePos);this.indent=this.countIndent(e,this.pos,this.indent),this.pos=e,this.next=e==this.text.length?-1:this.text.charCodeAt(e)}skipSpace(e){return en(this.text,e)}reset(e){for(this.text=e,this.baseIndent=this.basePos=this.pos=this.indent=0,this.forwardInner(),this.depth=1;this.markers.length;)this.markers.pop()}moveBase(e){this.basePos=e,this.baseIndent=this.countIndent(e,this.pos,this.indent)}moveBaseColumn(e){this.baseIndent=e,this.basePos=this.findColumn(e)}addMarker(e){this.markers.push(e)}countIndent(e,t=0,n=0){for(let s=t;s<e;s++)n+=9==this.text.charCodeAt(s)?4-n%4:1;return n}findColumn(e){let t=0;for(let n=0;t<this.text.length&&n<e;t++)n+=9==this.text.charCodeAt(t)?4-n%4:1;return t}scrub(){if(!this.baseIndent)return this.text;let e="";for(let t=0;t<this.basePos;t++)e+=" ";return e+this.text.slice(this.basePos)}}function Y(e,t,n){if(n.pos==n.text.length||e!=t.block&&n.indent>=t.stack[n.depth+1].value+n.baseIndent)return!0;if(n.indent>=n.baseIndent+4)return!1;let s=(e.type==r.OrderedList?eh:ea)(n,t,!1);return s>0&&(e.type!=r.BulletList||0>eo(n,t,!1))&&n.text.charCodeAt(n.pos+s-1)==e.value}let ee={[r.Blockquote]:(e,t,n)=>62==n.next&&(n.markers.push(eR(r.QuoteMark,t.lineStart+n.pos,t.lineStart+n.pos+1)),n.moveBase(n.pos+(et(n.text.charCodeAt(n.pos+1))?2:1)),e.end=t.lineStart+n.text.length,!0),[r.ListItem]:(e,t,n)=>(!(n.indent<n.baseIndent+e.value)||!(n.next>-1))&&(n.moveBaseColumn(n.baseIndent+e.value),!0),[r.OrderedList]:Y,[r.BulletList]:Y,[r.Document]:()=>!0};function et(e){return 32==e||9==e||10==e||13==e}function en(e,t=0){for(;t<e.length&&et(e.charCodeAt(t));)t++;return t}function es(e,t,n){for(;t>n&&et(e.charCodeAt(t-1));)t--;return t}function er(e){if(96!=e.next&&126!=e.next)return -1;let t=e.pos+1;for(;t<e.text.length&&e.text.charCodeAt(t)==e.next;)t++;if(t<e.pos+3)return -1;if(96==e.next){for(let n=t;n<e.text.length;n++)if(96==e.text.charCodeAt(n))return -1}return t}function ei(e){return 62!=e.next?-1:32==e.text.charCodeAt(e.pos+1)?2:1}function eo(e,t,n){if(42!=e.next&&45!=e.next&&95!=e.next)return -1;let s=1;for(let r=e.pos+1;r<e.text.length;r++){let i=e.text.charCodeAt(r);if(i==e.next)s++;else if(!et(i))return -1}return n&&45==e.next&&ec(e)>-1&&e.depth==t.stack.length?-1:s<3?-1:1}function el(e,t){for(let n=e.stack.length-1;n>=0;n--)if(e.stack[n].type==t)return!0;return!1}function ea(e,t,n){return(45==e.next||43==e.next||42==e.next)&&(e.pos==e.text.length-1||et(e.text.charCodeAt(e.pos+1)))&&(!n||el(t,r.BulletList)||e.skipSpace(e.pos+2)<e.text.length)?1:-1}function eh(e,t,n){let s=e.pos,i=e.next;for(;i>=48&&i<=57;){if(++s==e.text.length)return -1;i=e.text.charCodeAt(s)}return s==e.pos||s>e.pos+9||46!=i&&41!=i||s<e.text.length-1&&!et(e.text.charCodeAt(s+1))||n&&!el(t,r.OrderedList)&&(e.skipSpace(s+1)==e.text.length||s>e.pos+1||49!=e.next)?-1:s+1-e.pos}function ef(e){if(35!=e.next)return -1;let t=e.pos+1;for(;t<e.text.length&&35==e.text.charCodeAt(t);)t++;if(t<e.text.length&&32!=e.text.charCodeAt(t))return -1;let n=t-e.pos;return n>6?-1:n}function ec(e){if(45!=e.next&&61!=e.next||e.indent>=e.baseIndent+4)return -1;let t=e.pos+1;for(;t<e.text.length&&e.text.charCodeAt(t)==e.next;)t++;let n=t;for(;t<e.text.length&&et(e.text.charCodeAt(t));)t++;return t==e.text.length?n:-1}let ep=/^[ \t]*$/,eu=/-->/,ed=/\?>/,em=[[/^<(?:script|pre|style)(?:\s|>|$)/i,/<\/(?:script|pre|style)>/i],[/^\s*<!--/,eu],[/^\s*<\?/,ed],[/^\s*<![A-Z]/,/>/],[/^\s*<!\[CDATA\[/,/\]\]>/],[/^\s*<\/?(?:address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h1|h2|h3|h4|h5|h6|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul)(?:\s|\/?>|$)/i,ep],[/^\s*(?:<\/[a-z][\w-]*\s*>|<[a-z][\w-]*(\s+[a-z:_][\w-.]*(?:\s*=\s*(?:[^\s"'=<>`]+|'[^']*'|"[^"]*"))?)*\s*>)\s*$/i,ep]];function eg(e,t,n){if(60!=e.next)return -1;let s=e.text.slice(e.pos);for(let r=0,i=em.length-(n?1:0);r<i;r++)if(em[r][0].test(s))return r;return -1}function ek(e,t){let n=e.countIndent(t,e.pos,e.indent),s=e.countIndent(e.skipSpace(t),t,n);return s>=n+5?n+1:s}function ex(e,t,n){let s=e.length-1;s>=0&&e[s].to==t&&e[s].type==r.CodeText?e[s].to=n:e.push(eR(r.CodeText,t,n))}let eb={LinkReference:void 0,IndentedCode(e,t){let n=t.baseIndent+4;if(t.indent<n)return!1;let s=t.findColumn(n),i=e.lineStart+s,o=e.lineStart+t.text.length,l=[],a=[];for(ex(l,i,o);e.nextLine()&&t.depth>=e.stack.length;)if(t.pos==t.text.length)for(let h of(ex(a,e.lineStart-1,e.lineStart),t.markers))a.push(h);else if(t.indent<n)break;else{if(a.length){for(let f of a)f.type==r.CodeText?ex(l,f.from,f.to):l.push(f);a=[]}for(let c of(ex(l,e.lineStart-1,e.lineStart),t.markers))l.push(c);o=e.lineStart+t.text.length;let p=e.lineStart+t.findColumn(t.baseIndent+4);p<o&&ex(l,p,o)}return a.length&&(a=a.filter(e=>e.type!=r.CodeText)).length&&(t.markers=a.concat(t.markers)),e.addNode(e.buffer.writeElements(l,-i).finish(r.CodeBlock,o-i),i),!0},FencedCode(e,t){let n=er(t);if(n<0)return!1;let s=e.lineStart+t.pos,i=t.next,o=n-t.pos,l=t.skipSpace(n),a=es(t.text,t.text.length,l),h=[eR(r.CodeMark,s,s+o)];l<a&&h.push(eR(r.CodeInfo,e.lineStart+l,e.lineStart+a));for(let f=!0;e.nextLine()&&t.depth>=e.stack.length;f=!1){let c=t.pos;if(t.indent-t.baseIndent<4)for(;c<t.text.length&&t.text.charCodeAt(c)==i;)c++;if(c-t.pos>=o&&t.skipSpace(c)==t.text.length){for(let p of t.markers)h.push(p);h.push(eR(r.CodeMark,e.lineStart+t.pos,e.lineStart+c)),e.nextLine();break}{for(let u of(f||ex(h,e.lineStart-1,e.lineStart),t.markers))h.push(u);let d=e.lineStart+t.basePos,m=e.lineStart+t.text.length;d<m&&ex(h,d,m)}}return e.addNode(e.buffer.writeElements(h,-s).finish(r.FencedCode,e.prevLineEnd()-s),s),!0},Blockquote(e,t){let n=ei(t);return!(n<0)&&(e.startContext(r.Blockquote,t.pos),e.addNode(r.QuoteMark,e.lineStart+t.pos,e.lineStart+t.pos+1),t.moveBase(t.pos+n),null)},HorizontalRule(e,t){if(0>eo(t,e,!1))return!1;let n=e.lineStart+t.pos;return e.nextLine(),e.addNode(r.HorizontalRule,n),!0},BulletList(e,t){let n=ea(t,e,!1);if(n<0)return!1;e.block.type!=r.BulletList&&e.startContext(r.BulletList,t.basePos,t.next);let s=ek(t,t.pos+1);return e.startContext(r.ListItem,t.basePos,s-t.baseIndent),e.addNode(r.ListMark,e.lineStart+t.pos,e.lineStart+t.pos+n),t.moveBaseColumn(s),null},OrderedList(e,t){let n=eh(t,e,!1);if(n<0)return!1;e.block.type!=r.OrderedList&&e.startContext(r.OrderedList,t.basePos,t.text.charCodeAt(t.pos+n-1));let s=ek(t,t.pos+n);return e.startContext(r.ListItem,t.basePos,s-t.baseIndent),e.addNode(r.ListMark,e.lineStart+t.pos,e.lineStart+t.pos+n),t.moveBaseColumn(s),null},ATXHeading(e,t){let n=ef(t);if(n<0)return!1;let s=t.pos,i=e.lineStart+s,o=es(t.text,t.text.length,s),l=o;for(;l>s&&t.text.charCodeAt(l-1)==t.next;)l--;l!=o&&l!=s&&et(t.text.charCodeAt(l-1))||(l=t.text.length);let a=e.buffer.write(r.HeaderMark,0,n).writeElements(e.parser.parseInline(t.text.slice(s+n+1,l),i+n+1),-i);l<t.text.length&&a.write(r.HeaderMark,l-s,o-s);let h=a.finish(r.ATXHeading1-1+n,t.text.length-s);return e.nextLine(),e.addNode(h,i),!0},HTMLBlock(e,t){let n=eg(t,e,!1);if(n<0)return!1;let s=e.lineStart+t.pos,i=em[n][1],o=[],l=i!=ep;for(;!i.test(t.text)&&e.nextLine();){if(t.depth<e.stack.length){l=!1;break}for(let a of t.markers)o.push(a)}l&&e.nextLine();let h=i==eu?r.CommentBlock:i==ed?r.ProcessingInstructionBlock:r.HTMLBlock,f=e.prevLineEnd();return e.addNode(e.buffer.writeElements(o,-s).finish(h,f-s),s),!0},SetextHeading:void 0};class eL{constructor(e){this.stage=0,this.elts=[],this.pos=0,this.start=e.start,this.advance(e.content)}nextLine(e,t,n){if(-1==this.stage)return!1;let s=n.content+"\n"+t.scrub(),r=this.advance(s);return r>-1&&r<s.length&&this.complete(e,n,r)}finish(e,t){return(2==this.stage||3==this.stage)&&en(t.content,this.pos)==t.content.length&&this.complete(e,t,t.content.length)}complete(e,t,n){return e.addLeafElement(t,eR(r.LinkReference,this.start,this.start+n,this.elts)),!0}nextStage(e){return e?(this.pos=e.to-this.start,this.elts.push(e),this.stage++,!0):(!1===e&&(this.stage=-1),!1)}advance(e){for(;;){if(-1==this.stage)return -1;if(0==this.stage){if(!this.nextStage(eZ(e,this.pos,this.start,!0)))return -1;if(58!=e.charCodeAt(this.pos))return this.stage=-1;this.elts.push(eR(r.LinkMark,this.pos+this.start,this.pos+this.start+1)),this.pos++}else if(1==this.stage){if(!this.nextStage(e_(e,en(e,this.pos),this.start)))return -1}else{if(2!=this.stage)return eC(e,this.pos);let t=en(e,this.pos),n=0;if(t>this.pos){let s=eQ(e,t,this.start);if(s){let i=eC(e,s.to-this.start);i>0&&(this.nextStage(s),n=i)}}return n||(n=eC(e,this.pos)),n>0&&n<e.length?n:-1}}}}function eC(e,t){for(;t<e.length;t++){let n=e.charCodeAt(t);if(10==n)break;if(!et(n))return -1}return t}class ey{nextLine(e,t,n){let s=t.depth<e.stack.length?-1:ec(t),i=t.next;if(s<0)return!1;let o=eR(r.HeaderMark,e.lineStart+t.pos,e.lineStart+s);return e.nextLine(),e.addLeafElement(n,eR(61==i?r.SetextHeading1:r.SetextHeading2,n.start,e.prevLineEnd(),[...e.parser.parseInline(n.content,n.start),o])),!0}finish(){return!1}}let ew={LinkReference:(e,t)=>91==t.content.charCodeAt(0)?new eL(t):null,SetextHeading:()=>new ey},eS={text:"",end:0};class ev{constructor(e,t,n,s){this.parser=e,this.input=t,this.ranges=s,this.line=new K,this.atEnd=!1,this.reusePlaceholders=new Map,this.stoppedAt=null,this.rangeI=0,this.to=s[s.length-1].to,this.lineStart=this.absoluteLineStart=this.absoluteLineEnd=s[0].from,this.block=G.create(r.Document,0,this.lineStart,0,0),this.stack=[this.block],this.fragments=n.length?new eK(n,t):null,this.readLine()}get parsedPos(){return this.absoluteLineStart}advance(){if(null!=this.stoppedAt&&this.absoluteLineStart>this.stoppedAt)return this.finish();let{line:e}=this;for(;;){for(let t=0;;){let n=e.depth<this.stack.length?this.stack[this.stack.length-1]:null;for(;t<e.markers.length&&(!n||e.markers[t].from<n.end);){let s=e.markers[t++];this.addNode(s.type,s.from,s.to)}if(!n)break;this.finishContext()}if(e.pos<e.text.length)break;if(!this.nextLine())return this.finish()}if(this.fragments&&this.reuseFragment(e.basePos))return null;e:for(;;){for(let r of this.parser.blockParsers)if(r){let i=r(this,e);if(!1!=i){if(!0==i)return null;e.forward();continue e}}break}let o=new W(this.lineStart+e.pos,e.text.slice(e.pos));for(let l of this.parser.leafBlockParsers)if(l){let a=l(this,o);a&&o.parsers.push(a)}t:for(;this.nextLine()&&e.pos!=e.text.length;){if(e.indent<e.baseIndent+4){for(let h of this.parser.endLeafBlock)if(h(this,e,o))break t}for(let f of o.parsers)if(f.nextLine(this,e,o))return null;for(let c of(o.content+="\n"+e.scrub(),e.markers))o.marks.push(c)}return this.finishLeaf(o),null}stopAt(e){if(null!=this.stoppedAt&&this.stoppedAt<e)throw RangeError("Can't move stoppedAt forward");this.stoppedAt=e}reuseFragment(e){if(!this.fragments.moveTo(this.absoluteLineStart+e,this.absoluteLineStart)||!this.fragments.matches(this.block.hash))return!1;let t=this.fragments.takeNodes(this);return!!t&&(this.absoluteLineStart+=t,this.lineStart=eY(this.absoluteLineStart,this.ranges),this.moveRangeI(),this.absoluteLineStart<this.to?(this.lineStart++,this.absoluteLineStart++,this.readLine()):(this.atEnd=!0,this.readLine()),!0)}get depth(){return this.stack.length}parentType(e=this.depth-1){return this.parser.nodeSet.types[this.stack[e].type]}nextLine(){return(this.lineStart+=this.line.text.length,this.absoluteLineEnd>=this.to)?(this.absoluteLineStart=this.absoluteLineEnd,this.atEnd=!0,this.readLine(),!1):(this.lineStart++,this.absoluteLineStart=this.absoluteLineEnd+1,this.moveRangeI(),this.readLine(),!0)}moveRangeI(){for(;this.rangeI<this.ranges.length-1&&this.absoluteLineStart>=this.ranges[this.rangeI].to;)this.rangeI++,this.absoluteLineStart=Math.max(this.absoluteLineStart,this.ranges[this.rangeI].from)}scanLine(e){let t=eS;if(t.end=e,e>=this.to)t.text="";else if(t.text=this.lineChunkAt(e),t.end+=t.text.length,this.ranges.length>1){let n=this.absoluteLineStart,s=this.rangeI;for(;this.ranges[s].to<t.end;){s++;let r=this.ranges[s].from,i=this.lineChunkAt(r);t.end=r+i.length,t.text=t.text.slice(0,this.ranges[s-1].to-n)+i,n=t.end-t.text.length}}return t}readLine(){let{line:e}=this,{text:t,end:n}=this.scanLine(this.absoluteLineStart);for(this.absoluteLineEnd=n,e.reset(t);e.depth<this.stack.length;e.depth++){let s=this.stack[e.depth],i=this.parser.skipContextMarkup[s.type];if(!i)throw Error("Unhandled block context "+r[s.type]);if(!i(s,this,e))break;e.forward()}}lineChunkAt(e){let t=this.input.chunk(e),n;if(this.input.lineChunks)n="\n"==t?"":t;else{let s=t.indexOf("\n");n=s<0?t:t.slice(0,s)}return e+n.length>this.to?n.slice(0,this.to-e):n}prevLineEnd(){return this.atEnd?this.lineStart:this.lineStart-1}startContext(e,t,n=0){this.block=G.create(e,n,this.lineStart+t,this.block.hash,this.lineStart+this.line.text.length),this.stack.push(this.block)}startComposite(e,t,n=0){this.startContext(this.parser.getNodeType(e),t,n)}addNode(e,t,n){"number"==typeof e&&(e=new Z.mp(this.parser.nodeSet.types[e],eP,eP,(null!=n?n:this.prevLineEnd())-t)),this.block.addChild(e,t-this.block.from)}addElement(e){this.block.addChild(e.toTree(this.parser.nodeSet),e.from-this.block.from)}addLeafElement(e,t){this.addNode(this.buffer.writeElements(eG(t.children,e.marks),-t.from).finish(t.type,t.to-t.from),t.from)}finishContext(){let e=this.stack.pop(),t=this.stack[this.stack.length-1];t.addChild(e.toTree(this.parser.nodeSet),e.from-t.from),this.block=t}finish(){for(;this.stack.length>1;)this.finishContext();return this.addGaps(this.block.toTree(this.parser.nodeSet,this.lineStart))}addGaps(e){return this.ranges.length>1?function e(t,n,s,r,i){let o=t[n].to,l=[],a=[],h=s.from+r;function f(e,s){for(;s?e>=o:e>o;){let i=t[n+1].from-o;r+=i,e+=i,o=t[++n].to}}for(let c=s.firstChild;c;c=c.nextSibling){f(c.from+r,!0);let p=c.from+r,u,d=i.get(c.tree);d?u=d:c.to+r>o?(u=e(t,n,c,r,i),f(c.to+r,!1)):u=c.toTree(),l.push(u),a.push(p-h)}return f(s.to+r,!1),new Z.mp(s.type,l,a,s.to+r-h,s.tree?s.tree.propValues:void 0)}(this.ranges,0,e.topNode,this.ranges[0].from,this.reusePlaceholders):e}finishLeaf(e){for(let t of e.parsers)if(t.finish(this,e))return;let n=eG(this.parser.parseInline(e.content,e.start),e.marks);this.addNode(this.buffer.writeElements(n,-e.start).finish(r.Paragraph,e.content.length),e.start)}elt(e,t,n,s){return"string"==typeof e?eR(this.parser.getNodeType(e),t,n,s):new eN(e,t)}get buffer(){return new eO(this.parser.nodeSet)}}class eI extends Z._b{constructor(e,t,n,s,r,i,o,l,a){for(let h of(super(),this.nodeSet=e,this.blockParsers=t,this.leafBlockParsers=n,this.blockNames=s,this.endLeafBlock=r,this.skipContextMarkup=i,this.inlineParsers=o,this.inlineNames=l,this.wrappers=a,this.nodeTypes=Object.create(null),e.types))this.nodeTypes[h.name]=h.id}createParse(e,t,n){let s=new ev(this,e,t,n);for(let r of this.wrappers)s=r(s,e,t,n);return s}configure(e){let t=function e(t){if(!Array.isArray(t))return t;if(0==t.length)return null;let n=e(t[0]);if(1==t.length)return n;let s=e(t.slice(1));if(!s||!n)return n||s;let r=(e,t)=>(e||eP).concat(t||eP),i=n.wrap,o=s.wrap;return{props:r(n.props,s.props),defineNodes:r(n.defineNodes,s.defineNodes),parseBlock:r(n.parseBlock,s.parseBlock),parseInline:r(n.parseInline,s.parseInline),remove:r(n.remove,s.remove),wrap:i?o?(e,t,n,s)=>i(o(e,t,n,s),t,n,s):i:o}}(e);if(!t)return this;let{nodeSet:n,skipContextMarkup:s}=this,i=this.blockParsers.slice(),o=this.leafBlockParsers.slice(),l=this.blockNames.slice(),a=this.inlineParsers.slice(),h=this.inlineNames.slice(),f=this.endLeafBlock.slice(),c=this.wrappers;if(eA(t.defineNodes)){s=Object.assign({},s);let p=n.types.slice(),u;for(let d of t.defineNodes){let{name:m,block:g,composite:k,style:x}="string"==typeof d?{name:d}:d;if(p.some(e=>e.name==m))continue;k&&(s[p.length]=(e,t,n)=>k(t,n,e.value));let b=p.length,L=k?["Block","BlockContext"]:g?b>=r.ATXHeading1&&b<=r.SetextHeading2?["Block","LeafBlock","Heading"]:["Block","LeafBlock"]:void 0;p.push(Z.Jq.define({id:b,name:m,props:L&&[[Z.md.group,L]]})),x&&(u||(u={}),Array.isArray(x)||x instanceof V.Vp?u[m]=x:Object.assign(u,x))}n=new Z.Lj(p),u&&(n=n.extend((0,V.Gv)(u)))}if(eA(t.props)&&(n=n.extend(...t.props)),eA(t.remove))for(let C of t.remove){let y=this.blockNames.indexOf(C),w=this.inlineNames.indexOf(C);y>-1&&(i[y]=o[y]=void 0),w>-1&&(a[w]=void 0)}if(eA(t.parseBlock))for(let S of t.parseBlock){let v=l.indexOf(S.name);if(v>-1)i[v]=S.parse,o[v]=S.leaf;else{let I=S.before?eT(l,S.before):S.after?eT(l,S.after)+1:l.length-1;i.splice(I,0,S.parse),o.splice(I,0,S.leaf),l.splice(I,0,S.name)}S.endLeaf&&f.push(S.endLeaf)}if(eA(t.parseInline))for(let A of t.parseInline){let T=h.indexOf(A.name);if(T>-1)a[T]=A.parse;else{let B=A.before?eT(h,A.before):A.after?eT(h,A.after)+1:h.length-1;a.splice(B,0,A.parse),h.splice(B,0,A.name)}}return t.wrap&&(c=c.concat(t.wrap)),new eI(n,i,o,l,f,s,a,h,c)}getNodeType(e){let t=this.nodeTypes[e];if(null==t)throw RangeError(`Unknown node type '${e}'`);return t}parseInline(e,t){let n=new eV(this,e,t);n:for(let s=t;s<n.end;){let r=n.char(s);for(let i of this.inlineParsers)if(i){let o=i(n,r,s);if(o>=0){s=o;continue n}}s++}return n.resolveMarkers(0)}}function eA(e){return null!=e&&e.length>0}function eT(e,t){let n=e.indexOf(t);if(n<0)throw RangeError(`Position specified relative to unknown parser ${t}`);return n}let eB=[Z.Jq.none];for(let eE=1,eM;eM=r[eE];eE++)eB[eE]=Z.Jq.define({id:eE,name:eM,props:eE>=r.Escape?[]:[[Z.md.group,eE in ee?["Block","BlockContext"]:["Block","LeafBlock"]]],top:"Document"==eM});let eP=[];class eO{constructor(e){this.nodeSet=e,this.content=[],this.nodes=[]}write(e,t,n,s=0){return this.content.push(e,t,n,4+4*s),this}writeElements(e,t=0){for(let n of e)n.writeTo(this,t);return this}finish(e,t){return Z.mp.build({buffer:this.content,nodeSet:this.nodeSet,reused:this.nodes,topID:e,length:t})}}class eH{constructor(e,t,n,s=eP){this.type=e,this.from=t,this.to=n,this.children=s}writeTo(e,t){let n=e.content.length;e.writeElements(this.children,t),e.content.push(this.type,this.from+t,this.to+t,e.content.length+4-n)}toTree(e){return new eO(e).writeElements(this.children,-this.from).finish(this.type,this.to-this.from)}}class eN{constructor(e,t){this.tree=e,this.from=t}get to(){return this.from+this.tree.length}get type(){return this.tree.type.id}get children(){return eP}writeTo(e,t){e.nodes.push(this.tree),e.content.push(e.nodes.length-1,this.from+t,this.to+t,-1)}toTree(){return this.tree}}function eR(e,t,n,s){return new eH(e,t,n,s)}let eJ={resolve:"Emphasis",mark:"EmphasisMark"},e$={resolve:"Emphasis",mark:"EmphasisMark"},eD={},ej={};class eq{constructor(e,t,n,s){this.type=e,this.from=t,this.to=n,this.side=s}}let ez="!\"#$%&'()*+,-./:;<=>?@[\\]^_`{|}~",eF=/[!"#$%&'()*+,\-.\/:;<=>?@\[\\\]^_`{|}~\xA1\u2010-\u2027]/;try{eF=RegExp("[\\p{Pc}|\\p{Pd}|\\p{Pe}|\\p{Pf}|\\p{Pi}|\\p{Po}|\\p{Ps}]","u")}catch(eX){}let eU={Escape(e,t,n){if(92!=t||n==e.end-1)return -1;let s=e.char(n+1);for(let i=0;i<ez.length;i++)if(ez.charCodeAt(i)==s)return e.append(eR(r.Escape,n,n+2));return -1},Entity(e,t,n){if(38!=t)return -1;let s=/^(?:#\d+|#x[a-f\d]+|\w+);/i.exec(e.slice(n+1,n+31));return s?e.append(eR(r.Entity,n,n+1+s[0].length)):-1},InlineCode(e,t,n){if(96!=t||n&&96==e.char(n-1))return -1;let s=n+1;for(;s<e.end&&96==e.char(s);)s++;let i=s-n,o=0;for(;s<e.end;s++)if(96==e.char(s)){if(++o==i&&96!=e.char(s+1))return e.append(eR(r.InlineCode,n,s+1,[eR(r.CodeMark,n,n+i),eR(r.CodeMark,s+1-i,s+1)]))}else o=0;return -1},HTMLTag(e,t,n){if(60!=t||n==e.end-1)return -1;let s=e.slice(n+1,e.end),i=/^(?:[a-z][-\w+.]+:[^\s>]+|[a-z\d.!#$%&'*+/=?^_`{|}~-]+@[a-z\d](?:[a-z\d-]{0,61}[a-z\d])?(?:\.[a-z\d](?:[a-z\d-]{0,61}[a-z\d])?)*)>/i.exec(s);if(i)return e.append(eR(r.Autolink,n,n+1+i[0].length,[eR(r.LinkMark,n,n+1),eR(r.URL,n+1,n+i[0].length),eR(r.LinkMark,n+i[0].length,n+1+i[0].length)]));let o=/^!--[^>](?:-[^-]|[^-])*?-->/i.exec(s);if(o)return e.append(eR(r.Comment,n,n+1+o[0].length));let l=/^\?[^]*?\?>/.exec(s);if(l)return e.append(eR(r.ProcessingInstruction,n,n+1+l[0].length));let a=/^(?:![A-Z][^]*?>|!\[CDATA\[[^]*?\]\]>|\/\s*[a-zA-Z][\w-]*\s*>|\s*[a-zA-Z][\w-]*(\s+[a-zA-Z:_][\w-.:]*(?:\s*=\s*(?:[^\s"'=<>`]+|'[^']*'|"[^"]*"))?)*\s*(\/\s*)?>)/.exec(s);return a?e.append(eR(r.HTMLTag,n,n+1+a[0].length)):-1},Emphasis(e,t,n){if(95!=t&&42!=t)return -1;let s=n+1;for(;e.char(s)==t;)s++;let r=e.slice(n-1,n),i=e.slice(s,s+1),o=eF.test(r),l=eF.test(i),a=/\s|^$/.test(r),h=/\s|^$/.test(i),f=!h&&(!l||a||o),c=!a&&(!o||h||l);return e.append(new eq(95==t?eJ:e$,n,s,(f&&(42==t||!c||o)?1:0)|(c&&(42==t||!f||l)?2:0)))},HardBreak(e,t,n){if(92==t&&10==e.char(n+1))return e.append(eR(r.HardBreak,n,n+2));if(32==t){let s=n+1;for(;32==e.char(s);)s++;if(10==e.char(s)&&s>=n+2)return e.append(eR(r.HardBreak,n,s+1))}return -1},Link:(e,t,n)=>91==t?e.append(new eq(eD,n,n+1,1)):-1,Image:(e,t,n)=>33==t&&91==e.char(n+1)?e.append(new eq(ej,n,n+2,1)):-1,LinkEnd(e,t,n){if(93!=t)return -1;for(let s=e.parts.length-1;s>=0;s--){let i=e.parts[s];if(i instanceof eq&&(i.type==eD||i.type==ej)){if(!i.side||e.skipSpace(i.to)==n&&!/[(\[]/.test(e.slice(n+1,n+2)))return e.parts[s]=null,-1;let o=e.takeContent(s),l=e.parts[s]=function(e,t,n,s,i){let{text:o}=e,l=e.char(i),a=i;if(t.unshift(eR(r.LinkMark,s,s+(n==r.Image?2:1))),t.push(eR(r.LinkMark,i-1,i)),40==l){let h=e.skipSpace(i+1),f=e_(o,h-e.offset,e.offset),c;f&&(h=e.skipSpace(f.to))!=f.to&&(c=eQ(o,h-e.offset,e.offset))&&(h=e.skipSpace(c.to)),41==e.char(h)&&(t.push(eR(r.LinkMark,i,i+1)),a=h+1,f&&t.push(f),c&&t.push(c),t.push(eR(r.LinkMark,h,a)))}else if(91==l){let p=eZ(o,i-e.offset,e.offset,!1);p&&(t.push(p),a=p.to)}return eR(n,s,a,t)}(e,o,i.type==eD?r.Link:r.Image,i.from,n+1);if(i.type==eD)for(let a=0;a<s;a++){let h=e.parts[a];h instanceof eq&&h.type==eD&&(h.side=0)}return l.to}}return -1}};function e_(e,t,n){if(60==e.charCodeAt(t)){for(let s=t+1;s<e.length;s++){let i=e.charCodeAt(s);if(62==i)return eR(r.URL,t+n,s+1+n);if(60==i||10==i)return!1}return null}{let o=0,l=t;for(let a=!1;l<e.length;l++){let h=e.charCodeAt(l);if(et(h))break;if(a)a=!1;else if(40==h)o++;else if(41==h){if(!o)break;o--}else 92==h&&(a=!0)}return l>t?eR(r.URL,t+n,l+n):l==e.length&&null}}function eQ(e,t,n){let s=e.charCodeAt(t);if(39!=s&&34!=s&&40!=s)return!1;let i=40==s?41:s;for(let o=t+1,l=!1;o<e.length;o++){let a=e.charCodeAt(o);if(l)l=!1;else{if(a==i)return eR(r.LinkTitle,t+n,o+1+n);92==a&&(l=!0)}}return null}function eZ(e,t,n,s){for(let i=!1,o=t+1,l=Math.min(e.length,o+999);o<l;o++){let a=e.charCodeAt(o);if(i)i=!1;else{if(93==a)return!s&&eR(r.LinkLabel,t+n,o+1+n);if(s&&!et(a)&&(s=!1),91==a)return!1;92==a&&(i=!0)}}return null}class eV{constructor(e,t,n){this.parser=e,this.text=t,this.offset=n,this.parts=[]}char(e){return e>=this.end?-1:this.text.charCodeAt(e-this.offset)}get end(){return this.offset+this.text.length}slice(e,t){return this.text.slice(e-this.offset,t-this.offset)}append(e){return this.parts.push(e),e.to}addDelimiter(e,t,n,s,r){return this.append(new eq(e,t,n,(s?1:0)|(r?2:0)))}get hasOpenLink(){for(let e=this.parts.length-1;e>=0;e--){let t=this.parts[e];if(t instanceof eq&&(t.type==eD||t.type==ej))return!0}return!1}addElement(e){return this.append(e)}resolveMarkers(e){for(let t=e;t<this.parts.length;t++){let n=this.parts[t];if(!(n instanceof eq&&n.type.resolve&&2&n.side))continue;let s=n.type==eJ||n.type==e$,r=n.to-n.from,i,o=t-1;for(;o>=e;o--){let l=this.parts[o];if(l instanceof eq&&1&l.side&&l.type==n.type&&!(s&&(1&n.side||2&l.side)&&(l.to-l.from+r)%3==0&&((l.to-l.from)%3||r%3))){i=l;break}}if(!i)continue;let a=n.type.resolve,h=[],f=i.from,c=n.to;if(s){let p=Math.min(2,i.to-i.from,r);f=i.to-p,c=n.from+p,a=1==p?"Emphasis":"StrongEmphasis"}i.type.mark&&h.push(this.elt(i.type.mark,f,i.to));for(let u=o+1;u<t;u++)this.parts[u]instanceof eH&&h.push(this.parts[u]),this.parts[u]=null;n.type.mark&&h.push(this.elt(n.type.mark,n.from,c));let d=this.elt(a,f,c,h);this.parts[o]=s&&i.from!=f?new eq(i.type,i.from,f,i.side):null,(this.parts[t]=s&&n.to!=c?new eq(n.type,c,n.to,n.side):null)?this.parts.splice(t,0,d):this.parts[t]=d}let m=[];for(let g=e;g<this.parts.length;g++){let k=this.parts[g];k instanceof eH&&m.push(k)}return m}findOpeningDelimiter(e){for(let t=this.parts.length-1;t>=0;t--){let n=this.parts[t];if(n instanceof eq&&n.type==e)return t}return null}takeContent(e){let t=this.resolveMarkers(e);return this.parts.length=e,t}skipSpace(e){return en(this.text,e-this.offset)+this.offset}elt(e,t,n,s){return"string"==typeof e?eR(this.parser.getNodeType(e),t,n,s):new eN(e,t)}}function eG(e,t){if(!t.length)return e;if(!e.length)return t;let n=e.slice(),s=0;for(let r of t){for(;s<n.length&&n[s].to<r.to;)s++;if(s<n.length&&n[s].from<r.from){let i=n[s];i instanceof eH&&(n[s]=new eH(i.type,i.from,i.to,eG(i.children,[r])))}else n.splice(s++,0,r)}return n}let eW=[r.CodeBlock,r.ListItem,r.OrderedList,r.BulletList];class eK{constructor(e,t){this.fragments=e,this.input=t,this.i=0,this.fragment=null,this.fragmentEnd=-1,this.cursor=null,e.length&&(this.fragment=e[this.i++])}nextFragment(){this.fragment=this.i<this.fragments.length?this.fragments[this.i++]:null,this.cursor=null,this.fragmentEnd=-1}moveTo(e,t){for(;this.fragment&&this.fragment.to<=e;)this.nextFragment();if(!this.fragment||this.fragment.from>(e?e-1:0))return!1;if(this.fragmentEnd<0){let n=this.fragment.to;for(;n>0&&"\n"!=this.input.read(n-1,n);)n--;this.fragmentEnd=n?n-1:0}let s=this.cursor;s||(s=this.cursor=this.fragment.tree.cursor()).firstChild();let r=e+this.fragment.offset;for(;s.to<=r;)if(!s.parent())return!1;for(;;){if(s.from>=r)return this.fragment.from<=t;if(!s.childAfter(r))return!1}}matches(e){let t=this.cursor.tree;return t&&t.prop(Z.md.contextHash)==e}takeNodes(e){let t=this.cursor,n=this.fragment.offset,s=this.fragmentEnd-(this.fragment.openEnd?1:0),i=e.absoluteLineStart,o=i,l=e.block.children.length,a=o,h=l;for(;;){if(t.to-n>s){if(t.type.isAnonymous&&t.firstChild())continue;break}let f=eY(t.from-n,e.ranges);if(t.to-n<=e.ranges[e.rangeI].to)e.addNode(t.tree,f);else{let c=new Z.mp(e.parser.nodeSet.types[r.Paragraph],[],[],0,e.block.hashProp);e.reusePlaceholders.set(c,t.tree),e.addNode(c,f)}if(t.type.is("Block")&&(0>eW.indexOf(t.type.id)?(o=t.to-n,l=e.block.children.length):(o=a,l=h,a=t.to-n,h=e.block.children.length)),!t.nextSibling())break}for(;e.block.children.length>l;)e.block.children.pop(),e.block.positions.pop();return o-i}}function eY(e,t){let n=e;for(let s=1;s<t.length;s++){let r=t[s-1].to,i=t[s].from;r<e&&(n-=i-r)}return n}let e1=(0,V.Gv)({"Blockquote/...":V.pJ.quote,HorizontalRule:V.pJ.contentSeparator,"ATXHeading1/... SetextHeading1/...":V.pJ.heading1,"ATXHeading2/... SetextHeading2/...":V.pJ.heading2,"ATXHeading3/...":V.pJ.heading3,"ATXHeading4/...":V.pJ.heading4,"ATXHeading5/...":V.pJ.heading5,"ATXHeading6/...":V.pJ.heading6,"Comment CommentBlock":V.pJ.comment,Escape:V.pJ.escape,Entity:V.pJ.character,"Emphasis/...":V.pJ.emphasis,"StrongEmphasis/...":V.pJ.strong,"Link/... Image/...":V.pJ.link,"OrderedList/... BulletList/...":V.pJ.list,"BlockQuote/...":V.pJ.quote,"InlineCode CodeText":V.pJ.monospace,"URL Autolink":V.pJ.url,"HeaderMark HardBreak QuoteMark ListMark LinkMark EmphasisMark CodeMark":V.pJ.processingInstruction,"CodeInfo LinkLabel":V.pJ.labelName,LinkTitle:V.pJ.string,Paragraph:V.pJ.content}),e0=new eI(new Z.Lj(eB).extend(e1),Object.keys(eb).map(e=>eb[e]),Object.keys(eb).map(e=>ew[e]),Object.keys(eb),[(e,t)=>ef(t)>=0,(e,t)=>er(t)>=0,(e,t)=>ei(t)>=0,(e,t)=>ea(t,e,!0)>=0,(e,t)=>eh(t,e,!0)>=0,(e,t)=>eo(t,e,!0)>=0,(e,t)=>eg(t,e,!0)>=0],ee,Object.keys(eU).map(e=>eU[e]),Object.keys(eU),[]),e2={resolve:"Strikethrough",mark:"StrikethroughMark"},e4={defineNodes:[{name:"Strikethrough",style:{"Strikethrough/...":V.pJ.strikethrough}},{name:"StrikethroughMark",style:V.pJ.processingInstruction}],parseInline:[{name:"Strikethrough",parse(e,t,n){if(126!=t||126!=e.char(n+1)||126==e.char(n+2))return -1;let s=e.slice(n-1,n),r=e.slice(n+2,n+3),i=/\s|^$/.test(s),o=/\s|^$/.test(r),l=eF.test(s),a=eF.test(r);return e.addDelimiter(e2,n,n+2,!o&&(!a||i||l),!i&&(!l||o||a))},after:"Emphasis"}]};function e3(e,t,n=0,s,r=0){let i=0,o=!0,l=-1,a=-1,h=!1,f=()=>{s.push(e.elt("TableCell",r+l,r+a,e.parser.parseInline(t.slice(l,a),r+l)))};for(let c=n;c<t.length;c++){let p=t.charCodeAt(c);124!=p||h?(h||32!=p&&9!=p)&&(l<0&&(l=c),a=c+1):((!o||l>-1)&&i++,o=!1,s&&(l>-1&&f(),s.push(e.elt("TableDelimiter",c+r,c+r+1))),l=a=-1),h=!h&&92==p}return l>-1&&(i++,s&&f()),i}function e9(e,t){for(let n=t;n<e.length;n++){let s=e.charCodeAt(n);if(124==s)return!0;92==s&&n++}return!1}let e6=/^\|?(\s*:?-+:?\s*\|)+(\s*:?-+:?\s*)?$/;class e5{constructor(){this.rows=null}nextLine(e,t,n){if(null==this.rows){let s;if(this.rows=!1,(45==t.next||58==t.next||124==t.next)&&e6.test(s=t.text.slice(t.pos))){let r=[];e3(e,n.content,0,r,n.start)==e3(e,s,t.pos)&&(this.rows=[e.elt("TableHeader",n.start,n.start+n.content.length,r),e.elt("TableDelimiter",e.lineStart+t.pos,e.lineStart+t.text.length)])}}else if(this.rows){let i=[];e3(e,t.text,t.pos,i,e.lineStart),this.rows.push(e.elt("TableRow",e.lineStart+t.pos,e.lineStart+t.text.length,i))}return!1}finish(e,t){return!!this.rows&&(e.addLeafElement(t,e.elt("Table",t.start,t.start+t.content.length,this.rows)),!0)}}let e8={defineNodes:[{name:"Table",block:!0},{name:"TableHeader",style:{"TableHeader/...":V.pJ.heading}},"TableRow",{name:"TableCell",style:V.pJ.content},{name:"TableDelimiter",style:V.pJ.processingInstruction}],parseBlock:[{name:"Table",leaf:(e,t)=>e9(t.content,0)?new e5:null,endLeaf(e,t,n){if(n.parsers.some(e=>e instanceof e5)||!e9(t.text,t.basePos))return!1;let s=e.scanLine(e.absoluteLineEnd+1).text;return e6.test(s)&&e3(e,t.text,t.basePos)==e3(e,s,t.basePos)},before:"SetextHeading"}]};class e7{nextLine(){return!1}finish(e,t){return e.addLeafElement(t,e.elt("Task",t.start,t.start+t.content.length,[e.elt("TaskMarker",t.start,t.start+3),...e.parser.parseInline(t.content.slice(3),t.start+3)])),!0}}let te={defineNodes:[{name:"Task",block:!0,style:V.pJ.list},{name:"TaskMarker",style:V.pJ.atom}],parseBlock:[{name:"TaskList",leaf:(e,t)=>/^\[[ xX]\][ \t]/.test(t.content)&&"ListItem"==e.parentType().name?new e7:null,after:"SetextHeading"}]},tt=/(www\.)|(https?:\/\/)|([\w.+-]+@)|(mailto:|xmpp:)/gy,tn=/[\w-]+(\.[\w-]+)+(\/[^\s<]*)?/gy,ts=/[\w-]+\.[\w-]+($|\/)/,tr=/[\w.+-]+@[\w-]+(\.[\w.-]+)+/gy,ti=/\/[a-zA-Z\d@.]+/gy;function to(e,t,n,s){let r=0;for(let i=t;i<n;i++)e[i]==s&&r++;return r}function tl(e,t){tr.lastIndex=t;let n=tr.exec(e);if(!n)return -1;let s=n[0][n[0].length-1];return"_"==s||"-"==s?-1:t+n[0].length-("."==s?1:0)}let ta=[e8,te,e4,{parseInline:[{name:"Autolink",parse(e,t,n){let s=n-e.offset;tt.lastIndex=s;let r=tt.exec(e.text),i=-1;if(!r)return -1;if(r[1]||r[2]){if((i=function(e,t){tn.lastIndex=t;let n=tn.exec(e);if(!n||ts.exec(n[0])[0].indexOf("_")>-1)return -1;let s=t+n[0].length;for(;;){let r=e[s-1],i;if(/[?!.,:*_~]/.test(r)||")"==r&&to(e,t,s,")")>to(e,t,s,"("))s--;else if(";"==r&&(i=/&(?:#\d+|#x[a-f\d]+|\w+);$/.exec(e.slice(t,s))))s=t+i.index;else break}return s}(e.text,s+r[0].length))>-1&&e.hasOpenLink){let o=/([^\[\]]|\[[^\]]*\])*/.exec(e.text.slice(s,i));i=s+o[0].length}}else r[3]?i=tl(e.text,s):(i=tl(e.text,s+r[0].length))>-1&&"xmpp:"==r[0]&&(ti.lastIndex=i,(r=ti.exec(e.text))&&(i=r.index+r[0].length));return i<0?-1:(e.addElement(e.elt("URL",n,i+e.offset)),i+e.offset)}}]}];function th(e,t,n){return(s,r,i)=>{if(r!=e||s.char(i+1)==e)return -1;let o=[s.elt(n,i,i+1)];for(let l=i+1;l<s.end;l++){let a=s.char(l);if(a==e)return s.addElement(s.elt(t,i,l+1,o.concat(s.elt(n,l,l+1))));if(92==a&&o.push(s.elt("Escape",l,l+++2)),et(a))break}return -1}}let tf={defineNodes:[{name:"Superscript",style:V.pJ.special(V.pJ.content)},{name:"SuperscriptMark",style:V.pJ.processingInstruction}],parseInline:[{name:"Superscript",parse:th(94,"Superscript","SuperscriptMark")}]},tc={defineNodes:[{name:"Subscript",style:V.pJ.special(V.pJ.content)},{name:"SubscriptMark",style:V.pJ.processingInstruction}],parseInline:[{name:"Subscript",parse:th(126,"Subscript","SubscriptMark")}]},tp={defineNodes:[{name:"Emoji",style:V.pJ.character}],parseInline:[{name:"Emoji",parse(e,t,n){let s;return 58==t&&(s=/^[a-zA-Z_0-9]+:/.exec(e.slice(n+1,e.end)))?e.addElement(e.elt("Emoji",n,n+1+s[0].length)):-1}}]};var tu=n(33223);let td=(0,l.kU)({commentTokens:{block:{open:"<!--",close:"-->"}}}),tm=new Z.md,tg=e0.configure({props:[l.x0.add(e=>{var t;return!e.is("Block")||e.is("Document")||null!=tk(e)||"OrderedList"==(t=e).name||"BulletList"==t.name?void 0:(e,t)=>({from:t.doc.lineAt(e.from).to,to:e.to})}),tm.add(tk),l.uj.add({Document:()=>null}),l.pp.add({Document:td})]});function tk(e){let t=/^(?:ATX|Setext)Heading(\d)$/.exec(e.name);return t?+t[1]:void 0}let tx=l.rs.of((e,t,n)=>{for(let s=(0,l.qz)(e).resolveInner(n,-1);s&&!(s.from<t);s=s.parent){let r=s.type.prop(tm);if(null==r)continue;let i=function(e,t){let n=e;for(;;){let s=n.nextSibling,r;if(!s||null!=(r=tk(s.type))&&r<=t)break;n=s}return n.to}(s,r);if(i>n)return{from:n,to:i}}return null});function tb(e){return new l.SQ(td,e,[tx],"markdown")}let tL=tb(tg),tC=tg.configure([ta,tc,tf,tp,{props:[l.x0.add({Table:(e,t)=>({from:t.doc.lineAt(e.from).to,to:e.to})})]}]),ty=tb(tC);class tw{constructor(e,t,n,s,r,i,o){this.node=e,this.from=t,this.to=n,this.spaceBefore=s,this.spaceAfter=r,this.type=i,this.item=o}blank(e,t=!0){let n=this.spaceBefore+("Blockquote"==this.node.name?">":"");if(null!=e){for(;n.length<e;)n+=" ";return n}for(let s=this.to-this.from-n.length-this.spaceAfter.length;s>0;s--)n+=" ";return n+(t?this.spaceAfter:"")}marker(e,t){let n="OrderedList"==this.node.name?String(+tv(this.item,e)[2]+t):"";return this.spaceBefore+n+this.type+this.spaceAfter}}function tS(e,t){let n=[];for(let s=e;s&&"Document"!=s.name;s=s.parent)("ListItem"==s.name||"Blockquote"==s.name||"FencedCode"==s.name)&&n.push(s);let r=[];for(let i=n.length-1;i>=0;i--){let o=n[i],l,a=t.lineAt(o.from),h=o.from-a.from;if("FencedCode"==o.name)r.push(new tw(o,h,h,"","","",null));else if("Blockquote"==o.name&&(l=/^ *>( ?)/.exec(a.text.slice(h))))r.push(new tw(o,h,h+l[0].length,"",l[1],">",null));else if("ListItem"==o.name&&"OrderedList"==o.parent.name&&(l=/^( *)\d+([.)])( *)/.exec(a.text.slice(h)))){let f=l[3],c=l[0].length;f.length>=4&&(f=f.slice(0,f.length-4),c-=4),r.push(new tw(o.parent,h,h+c,l[1],f,l[2],o))}else if("ListItem"==o.name&&"BulletList"==o.parent.name&&(l=/^( *)([-+*])( {1,4}\[[ xX]\])?( +)/.exec(a.text.slice(h)))){let p=l[4],u=l[0].length;p.length>4&&(p=p.slice(0,p.length-4),u-=4);let d=l[2];l[3]&&(d+=l[3].replace(/[xX]/," ")),r.push(new tw(o.parent,h,h+u,l[1],p,d,o))}}return r}function tv(e,t){return/^(\s*)(\d+)(?=[.)])/.exec(t.sliceString(e.from,e.from+10))}function tI(e,t,n,s=0){for(let r=-1,i=e;;){if("ListItem"==i.name){let o=tv(i,t),l=+o[2];if(r>=0){if(l!=r+1)return;n.push({from:i.from+o[1].length,to:i.from+o[0].length,insert:String(r+2+s)})}r=l}let a=i.nextSibling;if(!a)break;i=a}}function tA(e,t){let n=/^[ \t]*/.exec(e)[0].length;if(!n||"	"!=t.facet(l.c))return e;let s=(0,i.IS)(e,4,n),r="";for(let o=s;o>0;)o>=4?(r+="	",o-=4):(r+=" ",o--);return r+e.slice(n)}let tT=({state:e,dispatch:t})=>{let n=(0,l.qz)(e),{doc:s}=e,r=null,o=e.changeByRange(t=>{if(!t.empty||!ty.isActiveAt(e,t.from))return r={range:t};let o=t.from,l=s.lineAt(o),a=tS(n.resolveInner(o,-1),s);for(;a.length&&a[a.length-1].from>o-l.from;)a.pop();if(!a.length)return r={range:t};let h=a[a.length-1];if(h.to-h.spaceAfter.length>o-l.from)return r={range:t};let f=o>=h.to-h.spaceAfter.length&&!/\S/.test(l.text.slice(h.to));if(h.item&&f){let c=h.node.firstChild,p=h.node.getChild("ListItem","ListItem");if(c.to>=o||p&&p.to<o||l.from>0&&!/[^\s>]/.test(s.lineAt(l.from-1).text)){let u=a.length>1?a[a.length-2]:null,d,m="";u&&u.item?(d=l.from+u.from,m=u.marker(s,1)):d=l.from+(u?u.to:0);let g=[{from:d,to:o,insert:m}];return"OrderedList"==h.node.name&&tI(h.item,s,g,-2),u&&"OrderedList"==u.node.name&&tI(u.item,s,g),{range:i.jT.cursor(d+m.length),changes:g}}{let k=tE(a,e,l);return{range:i.jT.cursor(o+k.length+1),changes:{from:l.from,insert:k+e.lineBreak}}}}if("Blockquote"==h.node.name&&f&&l.from){let x=s.lineAt(l.from-1),b=/>\s*$/.exec(x.text);if(b&&b.index==h.from){let L=e.changes([{from:x.from+b.index,to:x.to},{from:l.from+h.from,to:l.to}]);return{range:t.map(L),changes:L}}}let C=[];"OrderedList"==h.node.name&&tI(h.item,s,C);let y=h.item&&h.item.from<l.from,w="";if(!y||/^[\s\d.)\-+*>]*/.exec(l.text)[0].length>=h.to)for(let S=0,v=a.length-1;S<=v;S++)w+=S!=v||y?a[S].blank(S<v?(0,i.IS)(l.text,4,a[S+1].from)-w.length:null):a[S].marker(s,1);let I=o;for(;I>l.from&&/\s/.test(l.text.charAt(I-l.from-1));)I--;return w=tA(w,e),function(e,t){if("OrderedList"!=e.name&&"BulletList"!=e.name)return!1;let n=e.firstChild,s=e.getChild("ListItem","ListItem");if(!s)return!1;let r=t.lineAt(n.to),i=t.lineAt(s.from),o=/^[\s>]*$/.test(r.text);return r.number+(o?0:1)<i.number}(h.node,e.doc)&&(w=tE(a,e,l)+e.lineBreak+w),C.push({from:I,to:o,insert:e.lineBreak+w}),{range:i.jT.cursor(I+w.length+1),changes:C}});return!r&&(t(e.update(o,{scrollIntoView:!0,userEvent:"input"})),!0)};function tB(e){return"QuoteMark"==e.name||"ListMark"==e.name}function tE(e,t,n){let s="";for(let r=0,o=e.length-2;r<=o;r++)s+=e[r].blank(r<o?(0,i.IS)(n.text,4,e[r+1].from)-s.length:null,r<o);return tA(s,t)}let tM=({state:e,dispatch:t})=>{let n=(0,l.qz)(e),s=null,r=e.changeByRange(t=>{let r=t.from,{doc:o}=e;if(t.empty&&ty.isActiveAt(e,t.from)){let l=o.lineAt(r),a=tS(function(e,t){let n=e.resolveInner(t,-1),s=t;tB(n)&&(s=n.from,n=n.parent);for(let r;r=n.childBefore(s);)if(tB(r))s=r.from;else if("OrderedList"==r.name||"BulletList"==r.name)s=(n=r.lastChild).to;else break;return n}(n,r),o);if(a.length){let h=a[a.length-1],f=h.to-h.spaceAfter.length+(h.spaceAfter?1:0);if(r-l.from>f&&!/\S/.test(l.text.slice(f,r-l.from)))return{range:i.jT.cursor(l.from+f),changes:{from:l.from+f,to:r}};if(r-l.from==f&&(!h.item||l.from<=h.item.from||!/\S/.test(l.text.slice(0,h.to)))){let c=l.from+h.from;if(h.item&&h.node.from<h.item.from&&/\S/.test(l.text.slice(h.from,h.to))){let p=h.blank((0,i.IS)(l.text,4,h.to)-(0,i.IS)(l.text,4,h.from));return c==l.from&&(p=tA(p,e)),{range:i.jT.cursor(c+p.length),changes:{from:c,to:l.from+h.to,insert:p}}}if(c<r)return{range:i.jT.cursor(c),changes:{from:c,to:r}}}}}return s={range:t}});return!s&&(t(e.update(r,{scrollIntoView:!0,userEvent:"delete"})),!0)},tP=[{key:"Enter",run:tT},{key:"Backspace",run:tM}],tO=(0,tu.html)({matchClosingTags:!1});function tH(e={}){var t;let{codeLanguages:n,defaultCodeLanguage:s,addKeymap:a=!0,base:{parser:h}=tL,completeHTMLTags:f=!0}=e;if(!(h instanceof eI))throw RangeError("Base parser provided to `markdown` should be a Markdown parser");let c=e.extensions?[e.extensions]:[],p=[tO.support],u;s instanceof l.ri?(p.push(s.support),u=s.language):s&&(u=s);let d=n||u?(t=u,e=>{if(e&&n){let s=null;if(e=/\S*/.exec(e)[0],(s="function"==typeof n?n(e):l.c6.matchLanguageName(n,e,!0))instanceof l.c6)return s.support?s.support.language.parser:l.Be.getSkippingParser(s.load());if(s)return s.parser}return t?t.parser:null}):void 0;c.push(function(e){let{codeParser:t,htmlParser:n}=e,s=(0,Z.FE)((e,s)=>{let i=e.type.id;if(t&&(i==r.CodeBlock||i==r.FencedCode)){let o="";if(i==r.FencedCode){let l=e.node.getChild(r.CodeInfo);l&&(o=s.read(l.from,l.to))}let a=t(o);if(a)return{parser:a,overlay:e=>e.type.id==r.CodeText}}else if(n&&(i==r.HTMLBlock||i==r.HTMLTag))return{parser:n,overlay:function(e,t,n){let s=[];for(let r=e.firstChild,i=t;;r=r.nextSibling){let o=r?r.from:n;if(o>i&&s.push({from:i,to:o}),!r)break;i=r.to}return s}(e.node,e.from,e.to)};return null});return{wrap:s}}({codeParser:d,htmlParser:tO.language.parser})),a&&p.push(i.Wl.high(o.$f.of(tP)));let m=tb(h.configure(c));return f&&p.push(m.data.of({autocomplete:tN})),new l.ri(m,p)}function tN(e){let{state:t,pos:n}=e,s=/<[:\-\.\w\u00b7-\uffff]*$/.exec(t.sliceDoc(n-25,n));if(!s)return null;let r=(0,l.qz)(t).resolveInner(n,-1);for(;r&&!r.type.isTop;){if("CodeBlock"==r.name||"FencedCode"==r.name||"ProcessingInstructionBlock"==r.name||"CommentBlock"==r.name||"Link"==r.name||"Image"==r.name)return null;r=r.parent}return{from:n-s[0].length,to:n,options:function(){if(tR)return tR;let e=(0,tu.htmlCompletionSource)(new a(i.yy.create({extensions:tO}),0,!0));return tR=e?e.options:[]}(),validFor:/^<[:\-\.\w\u00b7-\uffff]*$/}}let tR=null}}]);