(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[299],{43008:function(e,t,n){"use strict";n.d(t,{H1:function(){return p},JR:function(){return b},KU:function(){return Z},Lw:function(){return h},TW:function(){return i},UV:function(){return r},VD:function(){return a},WK:function(){return u},_M:function(){return c},i6:function(){return g},im:function(){return s},kK:function(){return x},md:function(){return d},mv:function(){return m},rg:function(){return v},u4:function(){return o},un:function(){return y},wt:function(){return j},yq:function(){return f}});var l=n(84886);let a=e=>(0,l.wz)(["apps","list"],"/api/v1/app",e),s=(e,t)=>(0,l.AQ)(["apps",e],"/api/v1/app",e,t),i=()=>(0,l.FF)(["apps"],"/api/v1/app"),o=e=>(0,l.FF)(["apps"],"/api/v1/app/import-git",e),r=e=>(0,l.yt)(["apps","update"],"/api/v1/app",e),c=()=>(0,l.TV)(["apps","delete"],"/api/v1/app"),d=e=>(0,l.yt)(["apps","unarchive"],"/api/v1/app/unarchive",e),u=()=>(0,l.TV)(["apps","archive"],"/api/v1/app/archive"),p=e=>(0,l.yt)(["env_vars","update"],"/api/v1/app/environment/variables",e),m=e=>(0,l.FF)(["env_vars"],"/api/v1/app/environment/domains",e),h=(e,t)=>(0,l.AQ)(["deploy_environment",e],"/api/v1/app/deploy_environment",e,t),g=e=>(0,l.yt)(["deploy_environment","update"],"/api/v1/app/deploy_environment",e),v=()=>(0,l.TV)(["deploy_environment","delete"],"/api/v1/app/deploy_environment"),x=()=>(0,l.TV)(["deploy_environment","down"],"/api/v1/app/deploy_environment/down"),f=()=>(0,l.TV)(["deploy_environment","sleep"],"/api/v1/app/deploy_environment/sleep"),j=()=>(0,l.yt)(["deploy_environment","awake"],"/api/v1/app/deploy_environment/awake"),y=(e,t)=>(0,l.AQ)(["app_logs",e],"/api/v1/app/environment/logs",e,t),b=e=>(0,l.FF)(["volume"],"/api/v1/app/deploy_environment/volume",e),Z=()=>(0,l.TV)(["volume"],"/api/v1/app/deploy_environment/volume")},18820:function(e,t,n){"use strict";n.d(t,{MB:function(){return x},Wk:function(){return j},aC:function(){return f},x4:function(){return v}});var l=n(11527),a=n(88383),s=n(96246),i=n(50103),o=n(64686),r=n(41906),c=n(46998),d=n(32699),u=n(76806),p=n(50959),m=n(25616),h=n(81035),g=n(2513);let v=function(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=null!==(e=t.redirectURL)&&void 0!==e?e:g.De.NEXT_PUBLIC_API_BASE_URL,l="".concat(g.De.NEXT_PUBLIC_API_BASE_URL,"/auth/google?redirect_url=").concat(n);window.location.href=l},x=function(){var e,t;arguments.length>0&&void 0!==arguments[0]&&arguments[0];let n=(0,u.useRouter)(),[l]=(0,h.o)(),a=(null===(e=l.access_token)||void 0===e?void 0:e.toString())||(0,c.getCookie)("x-auth-cookie"),i=(null===(t=l.refresh_token)||void 0===t?void 0:t.toString())||(0,c.getCookie)("refresh_token");return(0,s.a)({queryKey:["auth"],enabled:void 0!==a&&void 0!==i,async queryFn(){var e,t,l,s,o,u,p,m,h,v;let x=Object.fromEntries(new URLSearchParams(n.asPath.indexOf("?")>-1?n.asPath.split("?")[1]:{}));a=a&&(0,d.endsWith)(a,"%23")?a.substring(0,a.length-3):a;let f=a?{Authorization:"Bearer ".concat(a)}:{};i=(null===(e=x.refresh_token)||void 0===e?void 0:e.toString())||(null===(t=(0,c.getCookie)("refresh_token"))||void 0===t?void 0:t.toString());try{let j="".concat(g.De.NEXT_PUBLIC_API_BASE_URL,"/auth/profile"),{data:y}=await r.Z.get(j,{headers:f,params:{access_token:a,refresh_token:i}});return(null==y?void 0:null===(l=y.data)||void 0===l?void 0:null===(s=l.token)||void 0===s?void 0:s.access_token)&&(0,c.setCookie)("x-auth-cookie",null==y?void 0:null===(o=y.data)||void 0===o?void 0:null===(u=o.token)||void 0===u?void 0:u.access_token),(null==y?void 0:null===(p=y.data)||void 0===p?void 0:null===(m=p.token)||void 0===m?void 0:m.refresh_token)&&(0,c.setCookie)("refresh_token",null==y?void 0:null===(h=y.data)||void 0===h?void 0:null===(v=h.token)||void 0===v?void 0:v.refresh_token),y}catch(b){console.error("[HOOK] useAuthApi >",b);return}}})},f=()=>{let e=(0,u.useRouter)(),[t]=(0,h.o)(),n=x(),{data:l,status:a,refetch:s,isStale:o,isRefetching:r}=n,{status:m}=l||{},g=null==l?void 0:l.data;(0,i.NL)();let v=t.access_token||(0,c.getCookie)("x-auth-cookie"),f=t.refresh_token||(0,c.getCookie)("refresh_token");return(0,p.useEffect)(()=>{let t=null==window?void 0:window.location.href;if(!v||!f){e.push(t?"/login?redirect_url=".concat(t):"/login");return}if(!r&&void 0!==m&&"loading"!==a){if(!m&&!g){e.push(t?"/login?redirect_url=".concat(t):"/login");return}((0,d.isEmpty)(null==g?void 0:g.activeWorkspace)||(0,d.isEmpty)(null==g?void 0:g.activeRole))&&e.push("/workspace/select",{query:{access_token:v,refresh_token:f}})}},[a,v,f]),[g,n]},j=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{children:t}=e,n=(0,u.useRouter)(),s=n.query.access_token||(0,c.getCookie)("x-auth-cookie"),[i,{status:r,isLoading:p,isFetched:h}]=f();return p?(0,l.jsxs)(m.Z,{children:[(0,l.jsx)(a.Z,{}),(0,l.jsx)("span",{className:"ml-2",children:"Loading..."})]}):h&&!s&&(0,d.isEmpty)(i)?(0,l.jsxs)(m.Z,{children:[(0,l.jsx)("p",{className:"ml-2",children:"Unauthenticated."}),(0,l.jsx)(o.ZP,{href:"/login",children:"Login"})]}):h&&s&&(0,d.isEmpty)(i)?(0,l.jsxs)(m.Z,{children:[(0,l.jsx)(a.Z,{}),(0,l.jsx)("span",{className:"ml-2",children:"Loading..."})]}):h&&((0,d.isEmpty)(null==i?void 0:i.activeWorkspace)||(0,d.isEmpty)(null==i?void 0:i.activeRole))?(0,l.jsxs)(m.Z,{className:"text-center",children:[(0,l.jsx)(a.Z,{}),(0,l.jsx)("span",{className:"ml-2",children:"Loading..."})]}):(0,l.jsx)(l.Fragment,{children:t})}},29834:function(e,t,n){"use strict";n.d(t,{BY:function(){return a},fg:function(){return o},rA:function(){return i},tx:function(){return s},vk:function(){return r}});var l=n(84886);let a=e=>(0,l.wz)(["builds","list"],"/api/v1/build",e),s=(e,t)=>(0,l.AQ)(["builds",e],"/api/v1/build",e,t),i=e=>(0,l.FF)(["builds","start"],"/api/v1/build/start",e),o=e=>(0,l.FF)(["builds","stop"],"/api/v1/build/stop",e),r=e=>(0,l.FF)(["builds","rerun"],"/api/v1/build/rerun",e)},35301:function(e,t,n){"use strict";n.d(t,{EF:function(){return a},N2:function(){return s},O2:function(){return u},OK:function(){return m},QB:function(){return r},Tf:function(){return c},_M:function(){return o},e6:function(){return i},ij:function(){return d},sr:function(){return p}});var l=n(84886);let a=e=>(0,l.wz)(["databases","list"],"/api/v1/database",e),s=(e,t)=>(0,l.AQ)(["databases",e],"/api/v1/database",e,t),i=e=>(0,l.FF)(["databases"],"/api/v1/database",e),o=e=>(0,l.yt)(["databases","update"],"/api/v1/database",e),r=()=>(0,l.TV)(["databases","delete"],"/api/v1/database"),c=e=>(0,l.FF)(["database-action-backup"],"/api/v1/database/backup",e),d=e=>(0,l.FF)(["database-action-restore"],"/api/v1/database/restore",e),u=e=>(0,l.FF)(["database-action-autos-backup"],"/api/v1/database/auto-backup",e),p=e=>(0,l.wz)(["database-backups","list"],"/api/v1/database-backup",e),m=()=>(0,l.TV)(["database-backups","delete"],"/api/v1/database-backup")},75360:function(e,t,n){"use strict";n.d(t,{nu:function(){return a}});var l=n(84886);let a=e=>(0,l.wz)(["providers","list"],"/api/v1/provider",e)},92961:function(e,t,n){"use strict";n.d(t,{An:function(){return c},CN:function(){return o},Qq:function(){return s},pD:function(){return i},ve:function(){return r},x7:function(){return a}});var l=n(84886);let a=e=>(0,l.wz)(["clusters","list"],"/api/v1/cluster",e),s=e=>(0,l.wz)(["clusters","list-all"],"/api/v1/cluster/all",e),i=(e,t)=>(0,l.AQ)(["cluster",e],"/api/v1/cluster",e,t),o=()=>(0,l.FF)(["clusters","create"],"/api/v1/cluster"),r=e=>(0,l.yt)(["clusters","update"],"/api/v1/cluster",e),c=()=>(0,l.TV)(["clusters","delete"],"/api/v1/cluster")},70297:function(e,t,n){"use strict";n.d(t,{GD:function(){return o},_q:function(){return i},du:function(){return a},pC:function(){return s}});var l=n(84886);let a=e=>(0,l.FF)(["deploy-source"],"/api/v1/deploy/from-source",e),s=e=>(0,l.FF)(["deploy-git"],"/api/v1/deploy/from-git",e),i=e=>(0,l.FF)(["deploy-app"],"/api/v1/deploy/from-app",e),o=e=>(0,l.FF)(["promote-deploy-env"],"/api/v1/deploy/promote",e)},2765:function(e,t,n){"use strict";n.d(t,{D$:function(){return i},Dh:function(){return a},FX:function(){return s},fR:function(){return o},mt:function(){return r}});var l=n(84886);let a=e=>(0,l.wz)(["frameworks","list"],"/api/v1/framework",e),s=(e,t)=>(0,l.AQ)(["frameworks",e],"/api/v1/framework",e,t),i=()=>(0,l.FF)(["frameworks"],"/api/v1/framework"),o=e=>(0,l.yt)(["frameworks"],"/api/v1/framework",e),r=()=>(0,l.TV)(["frameworks","delete"],"/api/v1/framework")},85410:function(e,t,n){"use strict";n.d(t,{CX:function(){return r},Td:function(){return u},Ve:function(){return o},o0:function(){return s},oR:function(){return d},sc:function(){return c},xP:function(){return i},y3:function(){return a}});var l=n(84886);let a=e=>(0,l.wz)(["gits","list"],"/api/v1/git",e),s=(e,t)=>(0,l.AQ)(["gits",e],"/api/v1/git",e,t),i=e=>(0,l.FF)(["gits"],"/api/v1/git",e),o=e=>(0,l.yt)(["gits"],"/api/v1/git",e),r=()=>(0,l.TV)(["gits"],"/api/v1/git"),c=()=>(0,l.h_)(["public-key"],"/api/v1/git/public-key"),d=e=>(0,l.wz)(["git-orgs","list"],"/api/v1/git/orgs",e),u=(e,t)=>(0,l.wz)(["git-repo-branches",e],"/api/v1/git/orgs/repos/branches",{...t,filter:{...null==t?void 0:t.filter,repo:e}})},11942:function(e,t,n){"use strict";n.d(t,{BT:function(){return s},E_:function(){return i},Zz:function(){return a}});var l=n(84886);let a=e=>(0,l.wz)(["projects","list"],"/api/v1/project",e),s=e=>(0,l.wz)(["projects","list"],"/api/v1/project/with-apps",e),i=()=>(0,l.TV)(["projects","delete"],"/api/v1/project")},92931:function(e,t,n){"use strict";n.d(t,{Bl:function(){return o},EL:function(){return i},Xn:function(){return r},Y4:function(){return c},fy:function(){return a},qB:function(){return s}});var l=n(84886);let a=e=>(0,l.wz)(["registries","list"],"/api/v1/registry",e),s=e=>(0,l.wz)(["registries","list-all"],"/api/v1/registry/all",e),i=(e,t)=>(0,l.AQ)(["registries",e],"/api/v1/registry",e,t),o=e=>(0,l.FF)(["registries"],"/api/v1/registry",e),r=e=>(0,l.yt)(["registries"],"/api/v1/registry",e),c=()=>(0,l.TV)(["registries"],"/api/v1/registry")},53675:function(e,t,n){"use strict";n.d(t,{IX:function(){return s},Lb:function(){return i},bE:function(){return o},kW:function(){return a}});var l=n(84886);let a=e=>(0,l.wz)(["releases","list"],"/api/v1/release",e),s=e=>(0,l.yt)(["releases","rollout"],"/api/v1/release/rollout-v2",e),i=e=>(0,l.FF)(["releases","create"],"/api/v1/release/from-build",e),o=e=>(0,l.yt)(["releases","preview"],"/api/v1/release/preview",e)},22430:function(e,t,n){"use strict";n.d(t,{CN:function(){return r},aB:function(){return o},bd:function(){return a},dZ:function(){return s},m1:function(){return i}});var l=n(84886);let a=e=>(0,l.wz)(["roles","list"],"/api/v1/role",e),s=(e,t)=>(0,l.AQ)(["roles",e],"/api/v1/role",e,t),i=e=>(0,l.FF)(["roles"],"/api/v1/role",e),o=e=>(0,l.yt)(["roles"],"/api/v1/role",e),r=e=>(0,l.TV)(["roles"],"/api/v1/role")},56183:function(e,t,n){"use strict";n.d(t,{$:function(){return s},u:function(){return a}});var l=n(84886);let a=()=>(0,l.h_)(["stats","version"],"/api/v1/stats/version",{staleTime:18e5}),s=()=>(0,l.h_)(["stats","summary"],"/api/v1/stats/summary")},28936:function(e,t,n){"use strict";n.d(t,{ND:function(){return r},Vz:function(){return a},oA:function(){return s},oJ:function(){return i},xj:function(){return o}});var l=n(84886);let a=e=>(0,l.wz)(["storages","list"],"/api/v1/storage",e),s=(e,t)=>(0,l.AQ)(["storages",e],"/api/v1/storage",e,t),i=e=>(0,l.FF)(["storages"],"/api/v1/storage",e),o=e=>(0,l.yt)(["storages"],"/api/v1/storage",e),r=()=>(0,l.TV)(["storages"],"/api/v1/storage")},88074:function(e,t,n){"use strict";n.d(t,{En:function(){return i},Hc:function(){return c},Hm:function(){return u},Rz:function(){return d},hz:function(){return s},kZ:function(){return r},mO:function(){return a},yl:function(){return o}});var l=n(84886);let a=e=>(0,l.wz)(["users","list"],"/api/v1/user",e),s=(e,t)=>(0,l.AQ)(["users",e],"/api/v1/user",e,t),i=e=>(0,l.FF)(["users"],"/api/v1/user",e),o=e=>(0,l.yt)(["users"],"/api/v1/user",e),r=()=>(0,l.TV)(["users"],"/api/v1/user"),c=e=>(0,l.yt)(["users"],"/api/v1/user/join-workspace",e),d=e=>(0,l.yt)(["users"],"/api/v1/user/assign-role",e),u=e=>(0,l.yt)(["users"],"/api/v1/user/permissions",e)},84886:function(e,t,n){"use strict";n.d(t,{AQ:function(){return h},FF:function(){return v},TV:function(){return f},h_:function(){return g},wz:function(){return m},yt:function(){return x}});var l=n(50103),a=n(96246),s=n(83798),i=n(73611),o=n(41906),r=n(46998),c=n(32699),d=n(76806),u=n(2513);let{useApp:p}=i.Z,m=function(e,t){var n,s;let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},m=p(),{notification:h}=m,g=(0,d.useRouter)(),v=null!==(n=g.query.access_token)&&void 0!==n?n:(0,r.getCookie)("x-auth-cookie"),x=null!==(s=g.query.refresh_token)&&void 0!==s?s:(0,r.getCookie)("refresh_token"),f=v?{Authorization:"Bearer ".concat(v)}:{};f["Cache-Control"]="no-cache";let{pagination:j={page:1,size:20},populate:y,filter:b,sort:Z="-updatedAt,-createdAt"}=i,w=new URLSearchParams(j).toString(),k=y?"populate=".concat(y):"",A=b?new URLSearchParams(b).toString():"",E="sort=".concat(Z),N=(0,l.NL)(),C=[...e];return C.push((0,c.isEmpty)(b)?{}:b),(0,c.isEmpty)(j)||C.push(j),(0,a.a)({refetchOnWindowFocus:!1,queryKey:C,staleTime:null==i?void 0:i.staleTime,enabled:null==i?void 0:i.enabled,async queryFn(){var n,l,a;let{data:s}=await o.Z.get("".concat(u.De.NEXT_PUBLIC_API_BASE_URL).concat(t,"?").concat(A,"&").concat(E,"&").concat(k,"&").concat(w),{...i,headers:f,params:{refresh_token:x}});s.status||(0,c.isEmpty)(s.messages)||s.messages.forEach(e=>{e&&h.error({message:"Failed.",description:e})});let{current_page:d,total_pages:p,total_items:m,page_size:g,next_page:v,prev_page:j,...y}=s;return(null===(n=s.token)||void 0===n?void 0:n.access_token)&&(0,r.setCookie)("x-auth-cookie",null===(l=s.token)||void 0===l?void 0:l.access_token),{list:(null==s?void 0:null===(a=s.data)||void 0===a?void 0:a.map(t=>(N.setQueryData([e[0],t._id],t),N.setQueryData([e[0],t.slug],t),N.setQueryData([e[0],{slug:t.slug}],t),{...t,key:t._id})))||[],pagination:{current_page:d,total_pages:p,total_items:m,page_size:g,next_page:v,prev_page:j},messages:s.messages,status:s.status}}})},h=function(e,t,n){var l,s;let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},m=p(),{notification:h}=m,g=(0,d.useRouter)(),v=null!==(l=g.query.access_token)&&void 0!==l?l:(0,r.getCookie)("x-auth-cookie"),x=null!==(s=g.query.refresh_token)&&void 0!==s?s:(0,r.getCookie)("refresh_token"),f=v?{Authorization:"Bearer ".concat(v)}:{};f["Cache-Control"]="no-cache";let{populate:j,filter:y={}}=i;y.slug=n;let b=j?"populate=".concat(j):"",Z=new URLSearchParams(y).toString();return(0,a.a)({enabled:null!=n,queryKey:e,staleTime:null==i?void 0:i.staleTime,async queryFn(){var e,n;let l="".concat(u.De.NEXT_PUBLIC_API_BASE_URL).concat(t,"?").concat(Z,"&").concat(b),{data:a}=await o.Z.get(l,{...i,headers:f,params:{refresh_token:x}});if(a.status||(0,c.isEmpty)(a.messages)||a.messages.forEach(e=>{e&&h.error({message:"Failed.",description:e})}),(null===(e=a.token)||void 0===e?void 0:e.access_token)&&(0,r.setCookie)("x-auth-cookie",null===(n=a.token)||void 0===n?void 0:n.access_token),(0,c.isArray)(a.data)){let s=a.data.map(e=>({...e,key:e._id}));return s[0]}return(0,c.isString)(a.data)?{status:a.status,data:a.data,messages:a.messages}:a.data}})},g=function(e,t){var n,l;let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=p(),{notification:m}=i,h=(0,d.useRouter)(),g=null!==(n=h.query.access_token)&&void 0!==n?n:(0,r.getCookie)("x-auth-cookie"),v=null!==(l=h.query.refresh_token)&&void 0!==l?l:(0,r.getCookie)("refresh_token"),x=g?{Authorization:"Bearer ".concat(g)}:{};return x["Cache-Control"]="no-cache",(0,a.a)({queryKey:e,staleTime:null==s?void 0:s.staleTime,enabled:null==s?void 0:s.enabled,async queryFn(){let{data:e}=await o.Z.get("".concat(u.De.NEXT_PUBLIC_API_BASE_URL).concat(t),{...s,headers:x,params:{refresh_token:v}});return e.status||(0,c.isEmpty)(e.messages)||e.messages.forEach(e=>{e&&m.error({message:"Failed.",description:e})}),e}})},v=function(e,t){var n,a;let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},m=p(),{notification:h}=m,g=(0,d.useRouter)(),v=(0,l.NL)(),x=null!==(n=g.query.access_token)&&void 0!==n?n:(0,r.getCookie)("x-auth-cookie"),f=null!==(a=g.query.refresh_token)&&void 0!==a?a:(0,r.getCookie)("refresh_token"),j=x?{Authorization:"Bearer ".concat(x)}:{};j["Cache-Control"]="no-cache";let y=(0,s.D)({async mutationFn(e){let{populate:n,sort:l,pagination:a,filter:s=e._id?{_id:e._id}:void 0}=i;e._id&&delete e._id;let r=s?"".concat(new URLSearchParams(s).toString(),"&"):"",d="".concat(u.De.NEXT_PUBLIC_API_BASE_URL).concat(t,"?").concat(r).concat(n?"populate=".concat(n):"");console.log("options :>> ",i);let{data:p,status:m}=await o.Z.post(d,e,{...i,headers:j,params:{refresh_token:f}});if(429===m)throw Error("Too many requests.");return p.status||((0,c.isEmpty)(p.messages)?h.error({message:"Something is wrong..."}):p.messages.forEach(e=>{if(e)try{h.error({message:"Failed.",description:e})}catch(t){console.error(t)}})),p},async onError(e,t,n){console.log("error :>> ",e)},onMutate:async t=>(await v.cancelQueries({queryKey:e}),t),onSuccess(t,n,l){v.invalidateQueries({queryKey:[e[0],"list"]}),v.invalidateQueries({queryKey:[e[0],null==t?void 0:t.slug]})}}),{mutateAsync:b,status:Z}=y;return[b,Z]},x=function(e,t){var a,i,m,h,g;let v=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},x=p(),{notification:f}=x,j=(0,d.useRouter)(),y=(0,l.NL)(),b=null!==(m=j.query.access_token)&&void 0!==m?m:(0,r.getCookie)("x-auth-cookie"),Z=null!==(h=j.query.refresh_token)&&void 0!==h?h:(0,r.getCookie)("refresh_token"),w=b?{Authorization:"Bearer ".concat(b)}:{};w["Cache-Control"]="no-cache";let{pagination:k={page:1,size:20},populate:A,sort:E="-createdAt",filter:N}=v,C=N?"".concat(new URLSearchParams(N).toString(),"&"):"",S=new URLSearchParams(k).toString();null!==(g=null===n.g||void 0===n.g?void 0:null===(a=n.g.window)||void 0===a?void 0:null===(i=a.location)||void 0===i?void 0:i.origin)&&void 0!==g||u.De.NEXT_PUBLIC_BASE_URL;let P="".concat(u.De.NEXT_PUBLIC_API_BASE_URL).concat(t,"?").concat(C).concat("sort=".concat(E,"&")).concat(A?"populate=".concat(A,"&"):"").concat(S),_=(0,s.D)({async mutationFn(e){let{data:t}=await o.Z.patch(P,e,{...v,headers:w,params:{refresh_token:Z}});return t.status||((0,c.isEmpty)(t.messages)?f.error({message:"Something is wrong..."}):(console.log("FAILLLLLLLLLLLLLLL :>> ",t.messages,f),t.messages.forEach(e=>{e&&f.error({message:"Failed.",description:e,style:{zIndex:100}})}))),t},onSuccess(t,n,l){y.invalidateQueries({queryKey:[e[0],"list"]}),(null==N?void 0:N.slug)&&y.invalidateQueries({queryKey:[e[0],N.slug]})}});return[_.mutateAsync,_.status]},f=function(e,t){var n,a;let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},m=p(),{notification:h}=m,g=(0,d.useRouter)(),v=(0,l.NL)(),x=null!==(n=g.query.access_token)&&void 0!==n?n:(0,r.getCookie)("x-auth-cookie"),f=null!==(a=g.query.refresh_token)&&void 0!==a?a:(0,r.getCookie)("refresh_token"),j=x?{Authorization:"Bearer ".concat(x)}:{};j["Cache-Control"]="no-cache";let y=(0,s.D)({async mutationFn(e){let n=e?"".concat(new URLSearchParams(e).toString()):"",l="".concat(u.De.NEXT_PUBLIC_API_BASE_URL).concat(t,"?").concat(n),{data:a}=await o.Z.delete(l,{...i,headers:j,params:{refresh_token:f}});return a.status||((0,c.isEmpty)(a.messages)?h.error({message:"Something is wrong..."}):a.messages.forEach(e=>{console.log("message :>> ",e),e&&h.error({message:"Failed.",description:e})})),a},onSuccess:t=>(v.invalidateQueries({queryKey:[e[0],"list"]}),t)}),{mutateAsync:b,status:Z}=y;return[b,Z]}},25616:function(e,t,n){"use strict";var l=n(11527);let a=e=>(0,l.jsx)("div",{className:"absolute top-1/2 left-1/2 w-full max-w-lg -translate-x-1/2 -translate-y-1/2 ".concat(e.className),children:e.children});t.Z=a},99657:function(e,t,n){"use strict";var l=n(11527),a=n(57192),s=n(69786),i=n(90800),o=n(64686),r=n(31494),c=n(32699),d=n(1030);let u=e=>{let{children:t,className:n,value:u,mode:p="block",type:m="text"}=e,[h,g]=(0,d.m9)();switch(p){case"inline":return(0,l.jsxs)(s.Z.Compact,{className:n,children:[(0,l.jsx)(i.Z,{type:m,className:"flex-none",disabled:!0,value:u}),(0,l.jsx)(o.ZP,{type:"primary",danger:!(0,c.isEmpty)(h),size:"large",onClick:()=>g(u),icon:(0,l.jsx)(a.Z,{}),children:h?"Copied":"Copy"})]});case"hidden":return(0,l.jsxs)("div",{className:n,children:[(0,l.jsx)(i.Z,{type:m,className:"flex-none",disabled:!0,value:u,hidden:!0}),(0,l.jsx)(o.ZP,{type:"primary",danger:!(0,c.isEmpty)(h),size:"large",onClick:()=>g(u),icon:(0,l.jsx)(a.Z,{}),children:h?"Copied":"Copy"})]});default:return(0,l.jsxs)("div",{className:"text-center ".concat(n||""),children:[(0,l.jsx)(r.Z.Paragraph,{children:"text"===m?(0,l.jsx)("pre",{children:u}):(0,l.jsx)(i.Z,{type:"password",className:"flex-none",disabled:!0,value:u})}),(0,l.jsx)(o.ZP,{type:"primary",danger:!(0,c.isEmpty)(h),size:"large",onClick:()=>g(u),icon:(0,l.jsx)(a.Z,{}),children:h?"Copied":"Copy"})]})}};t.Z=u},14149:function(e,t,n){"use strict";n.d(t,{q:function(){return c}});var l=n(11527),a=n(53156),s=n(74637),i=n.n(s);n(50959);let o=n(64814),r=n(54498);i().extend(r),i().extend(o);let c=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{date:t}=e;return(0,l.jsx)(a.Z,{title:i()(t).format("LLL"),children:(0,l.jsx)("span",{children:t?i()(t).fromNow():"-"})})}},32352:function(e,t,n){"use strict";n.d(t,{D:function(){return h},V:function(){return g}});var l=n(11527),a=n(52256),s=n(87601),i=n(69124),o=n(35666),r=n(64686),c=n(19292),d=n(69786),u=n(76806),p=n(50959),m=n(1030);function h(e){let{token:{colorTextHeading:t}}=o.Z.useToken(),{isDarkMode:n}=(0,m.vs)(),{color:a=n?"white":"black",value:s}=e;return(0,l.jsx)("h1",{className:"my-0 grow py-0 pt-2 text-xl font-bold",style:{color:a},children:s})}let g=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,u.useRouter)(),{children:n,breadcrumbs:m=[],title:g="Page Title",actions:v=[(0,l.jsx)(r.ZP,{type:"default",icon:(0,l.jsx)(a.Z,{className:"align-middle"}),children:"Settings"},"workspace-setting-btn"),(0,l.jsx)(r.ZP,{type:"default",icon:(0,l.jsx)(s.Z,{className:"align-middle"})},"more-btn")]}=e,{token:{colorTextHeading:x}}=o.Z.useToken(),[f,j]=(0,p.useState)(!1);return(0,p.useEffect)(()=>{j(!0)},[]),f?(0,l.jsxs)("div",{className:"border-b border-gray-300 px-6 py-4",children:[(0,l.jsx)(c.Z,{items:[{key:"breadcrumb-home",href:"".concat(t.basePath,"/"),title:(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(i.Z,{})})},...m.map((e,t)=>({key:"breadcrumb-".concat(t),href:e.url,title:(0,l.jsxs)(l.Fragment,{children:[e.icon," ",e.name]})}))]}),(0,l.jsxs)("div",{className:" flex w-full flex-col md:flex-row",children:[(0,l.jsx)(h,{value:g}),(0,l.jsx)("div",{children:(0,l.jsx)(d.Z,{wrap:!0,children:v})})]}),n]}):null}},42822:function(e,t,n){"use strict";n.d(t,{w:function(){return D}});var l=n(11527),a=n(67495),s=n(81363),i=n(88383),o=n(16440),r=n(19509),c=n(98768),d=n(64378),u=n(57132),p=n(31739),m=n(30388),h=n(73611),g=n(44177),v=n(69786),x=n(53156),f=n(64686),j=n(48880),y=n(74637),b=n.n(y),Z=n(52195),w=n(32699),k=n(79789),A=n.n(k),E=n(76806),N=n(50959),C=n(18820),S=n(29834),P=n(70297),_=n(53675),I=n(14149),F=n(32352),R=n(81035);let B=n(64814),L=n(54498);b().extend(L),b().extend(B);let Q=new Z.b,T=new Z.f(Q),{useApp:z}=h.Z,U=n(81679),D=()=>{var e;(0,E.useRouter)();let t=z(),[n]=(0,C.aC)(),[h,{setQuery:y}]=(0,R.o)(),{project:Z,app:k,env:B}=h,L=[{title:"Name",width:80,dataIndex:"name",key:"name",render:(e,t)=>(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("p",{children:(0,l.jsx)(A(),{href:"/build/logs?build_slug=".concat(t.slug).concat(t.env?"&env=".concat(t.env):""),children:(0,l.jsx)("strong",{children:e})})}),(0,l.jsxs)("ul",{className:"ml-4 list-disc",children:[(0,l.jsxs)("li",{children:["Project: ",(0,l.jsx)(g.Z,{children:t.projectSlug})]}),(0,l.jsxs)("li",{children:["App: ",(0,l.jsx)(g.Z,{children:t.appSlug})]}),(0,l.jsxs)("li",{children:["Author: ",(0,l.jsx)(g.Z,{children:t.ownerSlug||"-"})]}),(0,l.jsxs)("li",{children:["CLI: ",(0,l.jsx)(g.Z,{children:t.cliVersion||"-"})]}),(0,l.jsxs)("li",{children:["Server: ",(0,l.jsx)(g.Z,{children:t.serverVersion||"-"})]}),(0,l.jsxs)("li",{children:["Location: ",(0,l.jsx)(g.Z,{children:t.serverLocation||"-"})]}),void 0!==t.duration?(0,l.jsxs)("li",{children:["Duration:"," ",(0,l.jsx)(g.Z,{color:"gold",icon:(0,l.jsx)(a.Z,{}),children:T.humanize(t.duration,{round:!0})},"duration")]}):(0,l.jsx)(l.Fragment,{})]})]})},{title:"Created at",dataIndex:"createdAt",key:"createdAt",width:30,render:e=>(0,l.jsx)(I.q,{date:e}),sorter:(e,t)=>b()(e.createdAt).diff(b()(t.createdAt))},{title:"Deploy Environment",dataIndex:"env",key:"env",width:35,filters:[{text:"dev",value:"dev"},{text:"demo",value:"demo"},{text:"beta",value:"beta"},{text:"alpha",value:"alpha"},{text:"staging",value:"staging"},{text:"prod",value:"prod"}],onFilter:(e,t)=>!!t.env&&t.env===e,render:e=>(0,l.jsx)(g.Z,{color:"pink",children:e||"-"})},{title:"Build Status",dataIndex:"status",key:"status",width:30,filters:[{text:"building",value:"building"},{text:"error",value:"error"},{text:"success",value:"success"}],onFilter:(e,t)=>!!t.status&&t.status===e,render(e){let t="warning",n=(0,l.jsx)(s.Z,{});switch(e){case"building":t="processing",n=(0,l.jsx)(i.Z,{className:"align-middle"});break;case"failed":t="error",n=(0,l.jsx)(o.Z,{className:"align-middle"});break;case"success":t="success",n=(0,l.jsx)(r.Z,{className:"align-middle"});break;default:t="default",n=(0,l.jsx)(s.Z,{})}return(0,l.jsx)(g.Z,{color:t,icon:n,children:e})}},{title:"Deploy Status",dataIndex:"deployStatus",key:"deployStatus",width:30,filters:[{text:"pending",value:"pending"},{text:"in_progress",value:"in_progress"},{text:"failed",value:"failed"},{text:"success",value:"success"},{text:"cancelled",value:"cancelled"}],onFilter:(e,t)=>!!t.deployStatus&&t.deployStatus===e,render(e){let t="warning",n=(0,l.jsx)(s.Z,{});switch(e){case"in_progress":t="processing",n=(0,l.jsx)(i.Z,{className:"align-middle"});break;case"failed":t="error",n=(0,l.jsx)(o.Z,{className:"align-middle"});break;case"success":t="success",n=(0,l.jsx)(r.Z,{className:"align-middle"});break;case"cancelled":t="yellow",n=(0,l.jsx)(o.Z,{className:"align-middle"});break;default:t="default",n=(0,l.jsx)(s.Z,{})}return(0,l.jsx)(g.Z,{color:t,icon:n,children:e})}},{title:"Action",key:"action",width:30,dataIndex:"action"}],Q={workspace:null===(e=n.activeWorkspace)||void 0===e?void 0:e._id};Z&&(Q.projectSlug=Z),k&&(Q.appSlug=k);let[D,V]=(0,N.useState)(1),[q,O]=(0,P._q)(),[K,J]=(0,P.pC)(),[M,X]=(0,S.fg)(),{data:H,status:Y}=(0,S.BY)({sort:"-createdAt",pagination:{page:D,size:100},filter:Q}),{list:G,pagination:W}=H||{},{total_items:$}=W||{},ee=(e,t)=>{let n={build_slug:e};t&&(n.env=t),h.lv1?n.lv2="build_logs":n.lv1="build_logs",y(n)},[et]=(0,_.Lb)(),en=async(e,n)=>{if((0,w.isEmpty)(e)){t.notification.error({message:"Failed to release the build.",description:"Build not found: ".concat(e),placement:"top"});return}try{let a=await et({build:e,env:null!=B?B:n});if(null==a?void 0:a.status){let s=null==a?void 0:a.data;t.notification.success({message:"Congrats, the release has been created successfully!",description:(0,l.jsxs)(l.Fragment,{children:["You can now preview it on ",(0,l.jsx)("a",{href:"https://".concat(null==s?void 0:s.prereleaseUrl),children:"PRE-RELEASE"})," endpoint."]}),placement:"top"});return}}catch(i){console.error("Could not process releasing this build:",i),t.notification.error({message:"Failed to roll out.",description:"Could not process releasing this build: ".concat(i),placement:"top"})}},el=async e=>{let n=await M({slug:e});console.log("[BuildList] stopBuild :>> ",n),(null==n?void 0:n.status)||t.notification.error({message:"Failed to proceed.",description:"Could not stop this build due to server issue. Please try again later.",placement:"top"})},ea=null==G?void 0:G.map(e=>({id:e._id,...e,action:(0,l.jsxs)(v.Z.Compact,{children:["building"===e.status&&(0,l.jsx)(x.Z,{title:"Stop building",children:(0,l.jsx)(f.ZP,{danger:!0,icon:(0,l.jsx)(c.Z,{}),onClick:()=>el(null==e?void 0:e.slug)})}),(0,l.jsx)(x.Z,{title:"View logs",children:(0,l.jsx)(f.ZP,{icon:(0,l.jsx)(d.Z,{}),onClick:()=>ee(e.slug,e.env)})}),(0,l.jsx)(x.Z,{title:"Open image URL",children:(0,l.jsx)(f.ZP,{icon:(0,l.jsx)(u.Z,{}),href:"https://".concat(e.image),target:"_blank"})}),(0,l.jsx)(x.Z,{title:"Create a release from this build",children:(0,l.jsx)(f.ZP,{disabled:"success"!==e.status,icon:(0,l.jsx)(p.Z,{}),onClick(){var t;return en(null===(t=e._id)||void 0===t?void 0:t.toString(),e.env)}})})]})})),es=e=>{let{current:t}=e;V(null!=t?t:1)},ei=(0,N.useRef)(null),eo=(0,m.Z)(ei);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(F.V,{title:"Builds (".concat($?U($):"-",")"),breadcrumbs:[{name:"Workspace"}],actions:[]}),(0,l.jsx)("div",{className:"h-full flex-auto overflow-hidden",ref:ei,children:(0,l.jsx)(j.Z,{size:"small",loading:"loading"===Y,columns:L,dataSource:ea,scroll:{x:550,y:void 0!==(null==eo?void 0:eo.height)?eo.height-140:void 0},sticky:{offsetHeader:0},pagination:{current:D,pageSize:100,total:$,position:["bottomCenter"]},onChange:es})})]})}},52504:function(e,t,n){"use strict";n.d(t,{O:function(){return M}});var l=n(11527),a=n(64378),s=n(90404),i=n(19278),o=n(67495),r=n(19509),c=n(88383),d=n(71040),u=n(22049),p=n(74884),m=n(94222),h=n(16440),g=n(98768),v=n(45992),x=n(858),f=n(26171),j=n(30388),y=n(77280),b=n(35666),Z=n(71370),w=n(44177),k=n(69786),A=n(64686),E=n(74637),N=n.n(E),C=n(3726),S=n(52195),P=n(79789),_=n.n(P),I=n(76806),F=n(50959),R=n(55282),B=n.n(R),L=n(29834),Q=n(70297),T=n(53675),z=n(32352),U=n(81035);n(2513);let D=new S.b,V=new S.f(D),q=n(37324),O=n(64814),K=n(54498);N().extend(K),N().extend(O);let J=e=>B()("".concat(e).replace(/[\u001b\u009b][[()#;?]*(?:[0-9]{1,4}(?:;[0-9]{0,4})*)?[0-9A-ORZcf-nqry=><]/g,"")),M=e=>{let{slug:t}=e,n=(0,I.useRouter)(),[E]=(0,U.o)(),{build_slug:S,env:P}=E,{data:R={},refetch:B}=(0,L.tx)(S),D=(null==R?void 0:R.logs)||"",O=J(D),[K,M]=(0,L.vk)(),[X,H]=(0,Q.du)(),[Y,G]=(0,Q._q)(),[W,$]=(0,L.fg)(),{status:ee}=R||{},et=O.split("\n").map((e,t)=>e.toString()),en=window.location.origin,[el,ea]=(0,F.useState)(["Connecting..."]),[es,ei]=(0,F.useState)("building"),[eo,er]=(0,F.useState)("in_progress"),[ec,ed]=(0,F.useState)(!1),[eu,ep]=(0,F.useState)(!1),[em,eh]=(0,F.useState)("0"),{data:eg,refetch:ev}=(0,T.kW)({filter:{build:null==R?void 0:R._id},enabled:void 0!==R&&"success"===es}),{list:ex=[]}=eg||{},ef=ex[0],ej=(0,F.useRef)(null),ey=(0,F.useRef)(null),eb=(0,f.Z)(ey),eZ=(0,F.useRef)(null),ew=(0,j.Z)(eZ),ek=((null==eb?void 0:eb.top)||0)>((null==ew?void 0:ew.height)||0)-((null==window?void 0:window.innerHeight)||0),{token:{colorText:eA}}=b.Z.useToken(),eE=()=>{var e;ek||null==ej||null===(e=ej.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},eN=()=>{if(!R.branch||!R.appSlug||void 0===P){Z.ZP.error({message:"Unable to re-run the build & deploy process: invalid build."});return}Y({appSlug:R.appSlug,gitBranch:R.branch,deployParams:{env:P.toString(),deployInBackground:!0}}).then(e=>{e.status?(Z.ZP.success({message:"Build & deploy process have been re-ran, redirecting..."}),n.push(e.data.logURL)):Z.ZP.error({message:e.messages.join(", ")})}).catch(e=>Z.ZP.error({message:"Unable to re-run the build & deploy process: ".concat(e)}))},eC=()=>{if(!R){Z.ZP.error({message:"Build not found."});return}if(!R.branch||!R.appSlug){Z.ZP.error({message:"Unable to re-run the build: invalid build (missing git branch)."});return}K({buildWatch:!1}).then(e=>{e.status?(Z.ZP.success({message:"Build has been re-ran, redirecting..."}),n.push(e.data.logURL)):Z.ZP.error({message:e.messages.join(", ")})}).catch(e=>Z.ZP.error({message:"Unable to re-run the build: ".concat(e)})),Z.ZP.info({message:"This feature is under development."})};(0,y.Z)(()=>{(null==R?void 0:R.startTime)&&eh(V.humanize(N()(R.startTime).diff(N()()),{round:!0})),(null==R?void 0:R.duration)&&eh(V.humanize((null==R?void 0:R.duration)||0,{round:!0}))},(null==R?void 0:R.duration)?void 0:1e3),(0,F.useEffect)(()=>{(null==R?void 0:R.duration)&&eh(V.humanize((null==R?void 0:R.duration)||0,{round:!0}))},[null==R?void 0:R.duration]),(0,F.useEffect)(()=>{D&&ea(et)},[et.length]),(0,F.useEffect)(()=>{eE()},[el.length]),(0,F.useEffect)(()=>{if(null==D||D.toString().toLowerCase(),ei((null==R?void 0:R.status)||"start"),P?(er(R.deployStatus||"pending"),"pending"!==R.deployStatus&&"in_progress"!==R.deployStatus&&ed(!0)):((null==R?void 0:R.status)!=="building"&&ed(!0),er("cancelled")),!S)return()=>!1;let e=q(en,{transports:["websocket"]});return e.on("connect",()=>{e.emit("join",{room:S}),e.on("message",t=>{let{action:n,message:l}=t;l&&(ea(e=>[...e,J(l)]),((null==l?void 0:l.toLowerCase().indexOf("command failed with exit code 1"))>-1||(null==l?void 0:l.toLowerCase().indexOf("[error]"))>-1)&&(ei("failed"),ed(!0),B())),"failed"===n&&(ei("failed"),ed(!0),B()),"end"===n&&(e.disconnect(),ed(!0),ei("success"),B())})}),e.on("disconnect",()=>{console.log("[socket] disconnected !"),ea(e=>[...e,"Disconnected with build server."])}),()=>{e.connected&&(console.log("[socket] disconnecting..."),e.disconnect(),B())}},[null==R?void 0:R.status,null==R?void 0:R.deployStatus,null==ef?void 0:ef.status,D,S]);let[eS,eP]=(0,F.useState)(!1);return(0,F.useEffect)(()=>{eP(!0)},[]),eS?(0,l.jsxs)("div",{style:{color:eA},className:"flex h-full flex-col",children:[(0,l.jsx)(z.V,{title:"Build Logs: ".concat(S),breadcrumbs:[{name:"Builds",url:"/build"},{name:'Project "'.concat(null==R?void 0:R.projectSlug,'"')},{name:'App "'.concat(null==R?void 0:R.appSlug,'"')},(null==R?void 0:R.env)?{name:'Env "'.concat(null==R?void 0:R.env,'"')}:{}],actions:[(0,l.jsxs)(w.Z,{color:"gold",icon:(0,l.jsx)(a.Z,{}),children:["CLI: ",(null==R?void 0:R.cliVersion)||"-"]},"cli-version"),(0,l.jsxs)(w.Z,{color:"gold",icon:(0,l.jsx)(s.Z,{}),children:["Server: ",(null==R?void 0:R.serverVersion)||"-"]},"server-version"),(0,l.jsxs)(w.Z,{color:"gold",icon:(0,l.jsx)(i.Z,{}),children:["Location: ",(null==R?void 0:R.serverLocation)||"-"]},"server-location"),(0,l.jsxs)(w.Z,{color:"gold",icon:(0,l.jsx)(o.Z,{}),children:["Duration: ",em]},"duration"),(0,l.jsxs)(w.Z,{color:"success"===es?"green":"building"===es?"blue":"failed"===es?"red":"default",icon:"success"===es?(0,l.jsx)(r.Z,{}):"building"===es?(0,l.jsx)(c.Z,{}):"failed"===es?(0,l.jsx)(d.Z,{}):(0,l.jsx)(l.Fragment,{}),children:["Build: ",es]},"status"),(0,l.jsxs)(w.Z,{color:"success"===eo?"green":"in_progress"===eo?"blue":"failed"===eo?"red":"cancelled"===eo?"yellow":"default",icon:"success"===eo?(0,l.jsx)(r.Z,{}):"in_progress"===eo?(0,l.jsx)(c.Z,{}):"failed"===eo||"cancelled"===eo?(0,l.jsx)(d.Z,{}):(0,l.jsx)(l.Fragment,{}),children:["Deploy: ",eo||"N/A"]},"deployStatus")],children:(0,l.jsxs)(k.Z,{wrap:!0,className:"mt-2",children:[(0,l.jsx)(w.Z,{color:"geekblue",icon:(0,l.jsx)(u.Z,{}),children:N()(null==R?void 0:R.createdAt).format("LLL")},"created-date"),(0,l.jsx)(w.Z,{color:"magenta",icon:(0,l.jsx)(p.Z,{}),children:null==R?void 0:R.createdBy},"created-by"),(null==R?void 0:R.status)==="success"&&(0,l.jsx)(_(),{href:"https://".concat(null==R?void 0:R.image,":").concat(null==R?void 0:R.tag),target:"_blank",children:(0,l.jsx)(w.Z,{color:"volcano",icon:(0,l.jsx)(m.Z,{}),children:"click to view image url"},"image-tag")})]})}),(0,l.jsx)("div",{className:"flex-auto overflow-x-auto overflow-y-scroll",ref:ey,children:(0,l.jsxs)("pre",{className:"no-scrollbar bg-black p-4 pt-6 text-neutral-200",ref:eZ,style:{width:eu?"100%":"auto",whiteSpace:eu?"normal":"nowrap"},children:[el.filter(e=>""!==e).map((e,t)=>{let n="".concat(e);if(n.toLowerCase().indexOf("error")>-1)return(0,l.jsxs)("p",{children:[(0,l.jsx)(h.Z,{className:"text-red-600"})," ",(0,l.jsx)("span",{className:"text-red-600",children:(0,C.ZP)("".concat(e))})]},"log-line-".concat(t));if(n.indexOf("http://")>-1||n.indexOf("https://")>-1){let a=n.split(" "),s=a.map(e=>{let t=e;return(e.indexOf("http://")>-1||e.indexOf("https://")>-1)&&(t='<a href="'.concat(e.replace(/"/gi,""),'" target="_blank" style="color: #008dff">').concat(e.replace(/"/gi,""),"</a>")),t}).join(" ");return(0,l.jsx)("p",{children:(0,C.ZP)(s)},"log-line-".concat(t))}return(0,l.jsx)("p",{children:(0,C.ZP)("".concat(e))},"log-line-".concat(t))}),(0,l.jsx)("p",{ref:ej})]})}),(0,l.jsxs)("div",{className:"flex-col px-4 py-2 md:flex",children:[(0,l.jsxs)("div",{className:"flex-auto",children:["building"===es&&(0,l.jsxs)("h3",{className:"text-xl text-blue-600",children:[(0,l.jsx)(c.Z,{})," Build: In progress."]}),"failed"===es&&(0,l.jsxs)("h2",{className:"text-xl text-red-600",children:[(0,l.jsx)(d.Z,{})," Build: Failed."]}),"success"===es&&(0,l.jsxs)("h2",{className:"text-xl text-green-600",children:[(0,l.jsx)(r.Z,{})," Build: Success."]}),"cancelled"===eo?(0,l.jsxs)("h3",{className:"text-xl text-yellow-600",children:[(0,l.jsx)(o.Z,{})," Deploy: Cancelled."]}):"in_progress"===eo?(0,l.jsxs)("h3",{className:"text-xl text-blue-600",children:[(0,l.jsx)(c.Z,{})," Deploy: In progress."]}):"failed"===eo?(0,l.jsxs)("h3",{className:"text-xl text-red-600",children:[(0,l.jsx)(d.Z,{})," Deploy: Failed."]}):"success"===eo?(0,l.jsxs)("h3",{className:"text-xl text-green-600",children:[(0,l.jsx)(r.Z,{})," Deploy: Success."]}):"pending"===eo?(0,l.jsxs)("h3",{className:"text-xl",children:[(0,l.jsx)(o.Z,{})," Deploy: Wait for building."]}):(0,l.jsxs)("h3",{className:"text-xl",children:[(0,l.jsx)(o.Z,{})," Deploy: N/A."]})]}),(0,l.jsxs)("div",{className:"flex gap-2",children:["building"===ee&&(0,l.jsx)(A.ZP,{icon:(0,l.jsx)(g.Z,{}),onClick:()=>W({slug:S}),children:"STOP"}),"building"!==ee&&void 0!==P&&(0,l.jsx)(A.ZP,{icon:(0,l.jsx)(v.Z,{}),onClick:()=>eN(),children:"RE-RUN"}),"building"!==ee&&(0,l.jsx)(A.ZP,{icon:(0,l.jsx)(v.Z,{}),onClick:()=>eC(),children:"RE-BUILD"}),(0,l.jsx)(A.ZP,{onClick:()=>ep(!eu),children:eu?"UNWRAP":"WRAP"}),(0,l.jsx)(A.ZP,{icon:(0,l.jsx)(x.Z,{}),onClick:()=>eE()})]})]})]}):null}},18405:function(e,t,n){"use strict";var l=n(11527),a=n(80589),s=n(9853),i=n(73611),o=n(37528),r=n(69786),c=n(73162),d=n(90800),u=n(64686),p=n(50959),m=n(92961),h=n(70297);let g=e=>{var t,n,g,v,x;let{app:f,fromEnv:j,toEnv:y,next:b}=e,Z=i.Z.useApp(),{notification:w}=Z,k=y?null===(t=f.deployEnvironment)||void 0===t?void 0:t[y]:void 0,A=Object.keys(f.deployEnvironment||{}),{data:E,status:N}=(0,m.x7)({pagination:{size:50}}),{list:C}=E||{},[S,P]=(0,h.GD)(),[_,I]=p.useState(null===(n=f.deployEnvironment)||void 0===n?void 0:null===(g=n[j])||void 0===g?void 0:g.cluster),[F,R]=p.useState(y||""),[B,L]=p.useState(A),[Q,T]=p.useState(!1),z=async e=>{console.log("PromoteDeployEnvironmentModal > Submit:",e),T(!0);let t=await S({appSlug:f.slug,fromEnv:j,env:y||e.newEnv||e.toEnv,clusterSlug:e.cluster});console.log("PromoteDeployEnvironmentModal > Response :>> ",t),T(!1),t.status&&w.success({message:"Successfully!",description:"App has been promoted to ".concat(y," environment.")}),b&&b(t)},U=e=>{console.log("Failed:",e),T(!1)};return(0,p.useEffect)(()=>{if("success"===N){let e=null==C?void 0:C.find(e=>e.slug===(null==k?void 0:k.cluster));I(null==e?void 0:e.slug)}},[N]),(0,p.useEffect)(()=>{y&&(console.log("toEnv :>> ",y),R(y))},[y]),(0,l.jsxs)(o.Z,{name:"promote-deploy-environment",style:{width:"100%",maxWidth:600},layout:"vertical",onFinish:z,onFinishFailed:U,autoComplete:"off",preserve:!1,disabled:Q,children:[!y&&(0,l.jsxs)(r.Z,{children:[(0,l.jsx)(o.Z.Item,{label:"Select a target deploy environment",name:"toEnv",initialValue:F,children:(0,l.jsx)(c.Z,{showSearch:!0,disabled:""!==F,value:F,size:"large",placeholder:"Select a target deploy environment",filterOption:(e,t)=>(null!==(v=null==t?void 0:t.label)&&void 0!==v?v:"").toLowerCase().includes(e.toLowerCase()),onSelect:e=>console.log('Selected "'.concat(e,'"')),options:(B||[]).map(e=>({label:e,value:e}))})}),(0,l.jsx)(o.Z.Item,{label:"New deploy environment",name:"newEnv",children:(0,l.jsx)(d.Z,{size:"large",onChange(e){R(e.currentTarget.value)}})})]}),(0,l.jsx)(o.Z.Item,{label:"Select target cluster",name:"cluster",rules:[{required:!0,message:"Please select your cluster."}],initialValue:_,required:!0,children:(0,l.jsx)(c.Z,{showSearch:!0,size:"large",placeholder:"Select target cluster",filterOption:(e,t)=>(null!==(x=null==t?void 0:t.label)&&void 0!==x?x:"").toLowerCase().includes(e.toLowerCase()),defaultValue:_,options:null==C?void 0:C.map(e=>({label:"".concat(e.name," (").concat(e.slug,")"),value:e.slug}))})}),(0,l.jsx)(o.Z.Item,{noStyle:!0,children:(0,l.jsx)(u.ZP,{type:"primary",size:"large",htmlType:"submit",style:{width:"100%"},icon:"success"===P?(0,l.jsx)(a.Z,{}):(0,l.jsx)(s.Z,{}),loading:"loading"===P,children:"Submit"})})]})};t.Z=g},49523:function(e,t,n){"use strict";function l(e){let t=e.filter((e,t,n)=>n.indexOf(e)===t);return t}function a(e){return[...new Set(e)]}n.d(t,{Y:function(){return a},z:function(){return l}})},81035:function(e,t,n){"use strict";n.d(t,{o:function(){return s}});var l=n(76806),a=n(50959);let s=()=>{let e=(0,l.useRouter)(),t=e.asPath,n=new URLSearchParams(e.asPath.split("?")[1]),s=Object.fromEntries(n),[i,o]=(0,a.useState)(s),r=t=>{let n={...i};return t.forEach(e=>{delete n[e]}),o(n),e.push(e.pathname,{query:n}),i},c=()=>{let e=Object.keys(i);return r(e)};return(0,a.useEffect)(()=>{if(e.isReady){if(-1===t.indexOf("?")){c();return}o(s)}},[e.asPath,e.isReady]),[i,{setQuery:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n={...i,...t};return o(n),e.push("".concat(e.pathname),{query:n}),n},deleteQuery:r,deleteAllQueryKeys:c}]}},45581:function(e,t,n){"use strict";n.d(t,{Jl:function(){return o}});var l=n(11527),a=n(54162),s=n(50959);let i=(0,s.createContext)({sidebarCollapsed:!1}),o=()=>{let e=(0,s.useContext)(i);return e};t.ZP=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,a.F)(),[n,o]=(0,s.useState)(!1),r=e=>void 0!==e?o(e):o(e=>!e);return(0,l.jsx)(i.Provider,{value:{sidebarCollapsed:n,toggleSidebar:r,responsive:t},children:e.children})}},75112:function(e,t,n){"use strict";n.d(t,{f9:function(){return o}});var l=n(11527),a=n(66321),s=n(50959);let i=(0,s.createContext)({}),o=()=>{let e=(0,s.useContext)(i);return e};t.ZP=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[t,n]=a.Z.useModal();return(0,l.jsxs)(i.Provider,{value:{modal:t},children:[e.children,n]})}},64060:function(e,t,n){"use strict";n.d(t,{o:function(){return t9}});var l,a,s,i=n(11527),o=n(80666),r=n(35666),c=n(73611),d=n(50959),u=n(1030),p=n(32699),m=n.n(p),h=n(46475),g=n.n(h);let v=e=>{let{gaIds:t}=e;return(0,p.isEmpty)(t)?null:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(g(),{src:"https://www.googletagmanager.com/gtag/js?id=".concat(t[0]),strategy:"afterInteractive"}),(0,i.jsx)(g(),{id:"google-analytics",strategy:"afterInteractive",children:"\n                window.dataLayer = window.dataLayer || [];\n                function gtag(){window.dataLayer.push(arguments);}\n                gtag('js', new Date());\n                ".concat(t.map(e=>"gtag('config', '".concat(e,"');\n")),"\n                ")})]})};var x=n(13739),f=n(48723),j=n(79017),y=n(18165),b=n(94222),Z=n(22982),w=n(99868),k=n(67495),A=n(48582),E=n(80402),N=n(63761),C=n(84341),S=n(90404),P=n(76487),_=n(71059),I=n(35627),F=n(74884),R=n(92475),B=n(54023),L=n(52256),Q=n(71553),T=n(16889),z=n(79789),U=n.n(z),D=n(76806),V=n(18820),q=n(45581);let O=[{key:"menu/",icon:(0,i.jsx)(f.Z,{}),label:(0,i.jsx)(U(),{href:"/",children:"Dashboard"})},{key:"menu/project",icon:(0,i.jsx)(j.Z,{}),label:(0,i.jsx)(U(),{href:"/project",children:"Projects & apps"})},{key:"menu/deploy-environment",icon:(0,i.jsx)(y.Z,{}),label:(0,i.jsx)(U(),{href:"/deploy-environment",children:"Deploy environments"})},{key:"menu/build",icon:(0,i.jsx)(b.Z,{}),label:(0,i.jsx)("a",{href:"/build",children:"Builds & deploys"})},{key:"menu/framework",icon:(0,i.jsx)(Z.Z,{}),label:(0,i.jsx)(U(),{href:"/framework",children:"Frameworks"})},{key:"menu/git",icon:(0,i.jsx)(w.Z,{}),label:(0,i.jsx)(U(),{href:"/git",children:"Git Providers"})},{key:"menu/cronjob",icon:(0,i.jsx)(k.Z,{}),label:(0,i.jsx)(U(),{href:"/cronjob",children:"Cronjobs"})},{key:"menu/monitor",icon:(0,i.jsx)(A.Z,{}),label:(0,i.jsx)(i.Fragment,{children:"Monitoring"}),children:[{key:"menu/monitor/node",label:(0,i.jsx)(U(),{href:"/monitor/node",children:"Nodes"})},{key:"menu/monitor/namespace",label:(0,i.jsx)(U(),{href:"/monitor/namespace",children:"Namespaces"})},{key:"menu/monitor/service",label:(0,i.jsx)(U(),{href:"/monitor/service",children:"Services"})},{key:"menu/monitor/ingress",label:(0,i.jsx)(U(),{href:"/monitor/ingress",children:"Ingresses"})},{key:"menu/monitor/deployment",label:(0,i.jsx)(U(),{href:"/monitor/deployment",children:"Deployments"})},{key:"menu/monitor/pod",label:(0,i.jsx)(U(),{href:"/monitor/pod",children:"Pods"})},{key:"menu/monitor/secret",label:(0,i.jsx)(U(),{href:"/monitor/secret",children:"Secrets"}),disabled:!0},{key:"menu/monitor/configmap",label:(0,i.jsx)(U(),{href:"/monitor/configmap",children:"ConfigMaps"}),disabled:!0},{key:"menu/monitor/volume",label:(0,i.jsx)(U(),{href:"/monitor/volume",children:"Persistent Volumes"}),disabled:!0},{key:"menu/monitor/certmanager",label:(0,i.jsx)(U(),{href:"/monitor/certmanager",children:"Cert-Manager CRDs"}),disabled:!0}]},{key:"menu/infrastructure",icon:(0,i.jsx)(E.Z,{}),label:"Infrastructure",children:[{key:"menu/infrastructure/cloud-provider",icon:(0,i.jsx)(N.Z,{}),label:(0,i.jsx)(U(),{href:"/infrastructure/cloud-provider",children:"Cloud Providers"})},{key:"menu/infrastructure/cluster",icon:(0,i.jsx)(C.Z,{}),label:(0,i.jsx)(U(),{href:"/infrastructure/cluster",children:"K8S Clusters"})},{key:"menu/infrastructure/database",icon:(0,i.jsx)(S.Z,{}),label:(0,i.jsx)(U(),{href:"/infrastructure/database",children:"Databases"})},{key:"menu/infrastructure/registry",icon:(0,i.jsx)(P.Z,{}),label:(0,i.jsx)(U(),{href:"/infrastructure/registry",children:"Container Registries"})},{key:"menu/infrastructure/storage",icon:(0,i.jsx)(_.Z,{}),label:(0,i.jsx)(U(),{href:"/infrastructure/storage",children:"Cloud Storages"})}]},{key:"menu/workspace",icon:(0,i.jsx)(I.Z,{}),label:(0,i.jsx)(i.Fragment,{children:"Workspace"}),children:[{key:"menu/workspace/users",icon:(0,i.jsx)(F.Z,{}),label:(0,i.jsx)(U(),{href:"/workspace/users",children:"Users"})},{key:"menu/workspace/teams",icon:(0,i.jsx)(R.Z,{}),label:(0,i.jsx)(U(),{href:"/workspace/teams",children:"Teams"})},{key:"menu/workspace/roles",icon:(0,i.jsx)(B.Z,{}),label:(0,i.jsx)(U(),{href:"/workspace/roles",children:"Roles"})}]},{key:"menu/settings",icon:(0,i.jsx)(L.Z,{}),label:(0,i.jsx)(U(),{href:"/settings",children:"Settings"})}],K=()=>{let e=(0,D.useRouter)(),{sidebarCollapsed:t,toggleSidebar:n,responsive:l}=(0,q.Jl)(),{isDarkMode:a}=(0,u.vs)(),[s]=(0,V.aC)(),o=((null==s?void 0:s.roles)||[]).filter(e=>{var t;return e.workspace===(null===(t=s.activeWorkspace)||void 0===t?void 0:t._id)});o[0];let r="menu/".concat((0,p.trimStart)(e.pathname,"/").split("/")[0]),c="menu".concat((0,p.trimEnd)(e.pathname,"/")),m=(0,d.useMemo)(()=>(null==window?void 0:window.innerWidth)>=728,[null==window?void 0:window.innerWidth]);(0,d.useEffect)(()=>{(null==window?void 0:window.innerWidth)<728&&!t&&n&&n(!0)},[null==window?void 0:window.innerWidth]);let[h,g]=(0,d.useState)("".concat(e.basePath,"/assets/images/diginext_logo_white.svg")),[v,x]=(0,d.useState)("".concat(e.basePath,"/assets/images/diginext-icon-white.svg"));(0,d.useEffect)(()=>{g(a?"".concat(e.basePath,"/assets/images/diginext_logo_white.svg"):"".concat(e.basePath,"/assets/images/diginext_logo.svg")),x(a?"".concat(e.basePath,"/assets/images/diginext-icon-white.svg"):"".concat(e.basePath,"/assets/images/diginext-icon-black.svg"))},[a]);let[f,j]=(0,d.useState)(!1);return(0,d.useEffect)(()=>{j(!0)},[]),f?(0,i.jsxs)(T.ZP,{theme:"light",collapsible:m,collapsed:t,onCollapse:e=>n&&n(e),breakpoint:"lg",width:250,style:{height:"100%"},collapsedWidth:(null==l?void 0:l.md)?"50":"0",children:[t?(0,i.jsx)("div",{className:"mx-auto my-5 w-[32px]",children:(0,i.jsx)(U(),{href:"/",legacyBehavior:!0,children:(0,i.jsx)("img",{src:v,alt:"DXUP Logo"})})}):(0,i.jsx)("div",{className:"mx-auto my-5 w-36",children:(0,i.jsx)(U(),{href:"/",legacyBehavior:!0,children:(0,i.jsx)("img",{src:h,alt:"DXUP Logo"})})}),(0,i.jsx)(Q.Z,{mode:"inline",inlineCollapsed:t,defaultOpenKeys:[r],defaultSelectedKeys:[r,c],items:O})]}):null};var J=n(81363),M=n(53156),X=n(75360),H=n(92961),Y=n(59701),G=n(37528),W=n(437),$=n(11930),ee=n(69786),et=n(64686),en=n(47749),el=n(81035),ea=n(54162),es=n(73220);let ei=(0,d.createContext)({drawerVisibility:{lv1:!1,lv2:!1},toggleDrawer(e,t){},showDrawer(e,t){},closeDrawer(e){}}),eo=()=>{let e=(0,d.useContext)(ei);return e};var er=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[t,n]=(0,d.useState)({lv1:!1,lv2:!1}),[l,a]=(0,d.useState)(),[s,o]=(0,d.useState)(),[r,{setQuery:c,deleteQuery:u,deleteAllQueryKeys:p}]=(0,el.o)(),m=(0,ea.F)(),h=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"lv1",t=arguments.length>1?arguments[1]:void 0;return void 0!==t?n(n=>{let l={...n};return l[e]=t,l}):n(t=>{let n={...t};return n[e]=!t[e],n})},g=e=>{e?(u([e]),h(e,!1)):(p(),n({lv1:!1,lv2:!1}))},v=()=>{p(),n(e=>({...e,lv1:!1}))},x=()=>{u(["lv2"]),n(e=>({...e,lv2:!1}))},f=(e,t)=>{switch(null==t?void 0:t.level){case 1:a(e),h("lv1",!0);break;case 2:o(e),h("lv2",!0)}};return(0,i.jsxs)(ei.Provider,{value:{drawerVisibility:t,toggleDrawer:h,showDrawer:f,closeDrawer:g},children:[e.children,(0,i.jsxs)(es.Z,{title:null==l?void 0:l.title,placement:"right",onClose:v,open:t.lv1,width:(null==m?void 0:m.md)?"70%":"100%",styles:{body:{overflow:"auto",overflowX:"hidden",flex:"auto",padding:0}},destroyOnClose:!0,children:[null==l?void 0:l.content,(0,i.jsx)(es.Z,{title:null==s?void 0:s.title,placement:"right",onClose:x,open:t.lv2,width:(null==m?void 0:m.md)?"70%":"100%",styles:{body:{overflow:"auto",overflowX:"hidden",flex:"auto",padding:0}},destroyOnClose:!0,children:null==s?void 0:s.content})]})]})},ec=n(7318),ed=n(88383),eu=n(80589),ep=n(72473),em=n(62854),eh=n(16440),eg=n(19509),ev=n(23836),ex=n(37566);let ef=e=>{let t;let{compact:n=!1,name:l,setValue:a,initialValue:s,apiStatus:o}=e,r=G.Z.useFormInstance(),c=()=>r.submit(),d=()=>{r.setFieldValue(l,s),a(s)},u=()=>{r.setFieldValue(l,""),a(void 0)};return o&&"loading"===o&&(t=(0,i.jsx)(ed.Z,{})),o&&"error"===o&&(t=(0,i.jsx)(eh.Z,{})),o&&"success"===o&&(t=(0,i.jsx)(eg.Z,{})),(0,i.jsxs)(ee.Z,{size:n?4:8,children:[t,(0,i.jsx)(et.ZP,{type:"primary",icon:n&&(0,i.jsx)(eu.Z,{}),onClick:()=>c(),children:!n&&"Save"}),(0,i.jsx)(et.ZP,{icon:n&&(0,i.jsx)(ev.Z,{}),onClick:()=>u(),children:!n&&"Clear"}),(0,i.jsx)(et.ZP,{danger:!0,icon:n&&(0,i.jsx)(ex.Z,{}),onClick:()=>d(),children:!n&&"Reset"})]})},ej=e=>{let t;let{label:n,postLabel:l,name:a,required:s=!1,requiredMessage:o="Please input your ".concat(n),defaultValue:r,initialValue:c,value:p,status:m,autoSave:h=!1,isNew:g,lang:v=[],height:x,disabled:f=!1,visible:j=!0,wrapperStyle:y}=e,b=G.Z.useFormInstance(),[Z,w]=(0,d.useState)(null!=p?p:r),k=(0,u.Nr)(Z,500),{isDarkMode:A}=(0,u.vs)(),E=e=>{b.setFieldValue(a,e),w(e)},N=()=>b.submit();return(0,d.useEffect)(()=>{b.setFieldValue(a,p),w(p||"")},[p]),(0,d.useEffect)(()=>{k!==p&&h&&!g&&N()},[k]),m&&"error"===m[a]&&(t=(0,i.jsxs)("span",{className:"text-red-600",children:[(0,i.jsx)(ec.Z,{}),"Failed"]})),m&&"loading"===m[a]&&(t=(0,i.jsx)(ed.Z,{})),m&&"success"===m[a]&&(t=(0,i.jsx)(eu.Z,{color:"green"})),(0,i.jsxs)(G.Z.Item,{label:(0,i.jsxs)(ee.Z,{size:"small",children:[n,t]}),name:a,rules:[{required:s,message:o}],style:{display:j?"block":"none",...y},children:[(0,i.jsx)(em.ZP,{className:"w-full",height:x,theme:A?"dark":"light",extensions:[...v.map(e=>ep.RI[e]()),(0,em.w9)({syntaxHighlighting:!0})],onChange:E,value:Z,editable:!f}),l,!f&&!h&&!g&&(0,i.jsx)(ef,{initialValue:c,name:a,setValue:w}),(0,i.jsx)("div",{className:"h-4"})]})};var ey=n(90800);let eb=e=>{let t;let{label:n,postLabel:l,name:a,required:s=!1,requiredMessage:o="Please input your ".concat(n),defaultValue:r,initialValue:c,value:p,status:m,autoSave:h=!0,isNew:g,placeholder:v,disabled:x=!1,visible:f=!0,wrapperStyle:j}=e,y=G.Z.useFormInstance(),[b,Z]=(0,d.useState)(null!=p?p:r),w=(0,u.Nr)(b,500),k=e=>{let t=e.currentTarget.value;y.setFieldValue(a,t),Z(t)},A=()=>y.submit();return(0,d.useEffect)(()=>{y.setFieldValue(a,p),Z(p)},[p]),(0,d.useEffect)(()=>{w!==p&&h&&!g&&A()},[w]),m&&"error"===m[a]&&(t=(0,i.jsxs)("span",{className:"text-red-600",children:[(0,i.jsx)(ec.Z,{}),"Failed"]})),m&&"loading"===m[a]&&(t=(0,i.jsx)(ed.Z,{})),m&&"success"===m[a]&&(t=(0,i.jsx)(eu.Z,{color:"green"})),(0,i.jsx)(G.Z.Item,{label:(0,i.jsxs)(ee.Z.Compact,{direction:"vertical",children:[(0,i.jsxs)(ee.Z,{size:"small",children:[n,t]}),l]}),name:a,rules:[{required:s,message:o}],style:{display:f?"block":"none",...j},children:(0,i.jsxs)(ee.Z,{direction:"vertical",className:"w-full",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)(ey.Z,{autoComplete:"off",placeholder:v,onChange:k,value:b,disabled:x,hidden:!1===f||void 0!==e.displayValue}),void 0!==e.displayValue?(0,i.jsx)(et.ZP,{disabled:!0,block:!0,children:e.displayValue}):null]}),!h&&!g&&(0,i.jsx)(ef,{initialValue:c,name:a,setValue:Z})]})})};var eZ=n(13031);let ew=e=>{let t;let{label:n,postLabel:l,name:a,required:s=!1,requiredMessage:o="Please input your ".concat(n),defaultValue:r,initialValue:c,value:m,status:h,autoSave:g=!0,isNew:v,placeholder:x,disabled:f=!1,visible:j=!0,wrapperStyle:y}=e,b=G.Z.useFormInstance(),[Z,w]=(0,d.useState)(null!=m?m:r),k=(0,u.Nr)(Z,500),A=e=>{let t=(null!=Z?Z:0)+e;b.setFieldValue(a,t),w(t)},E=e=>{let t=(null!=Z?Z:0)-e;t<0&&(t=0),b.setFieldValue(a,t),w(t)},N=e=>{let t=(0,p.toNumber)(e.currentTarget.value);b.setFieldValue(a,t),w(t)},C=()=>b.submit();return(0,d.useEffect)(()=>{b.setFieldValue(a,m),w(m)},[m]),(0,d.useEffect)(()=>{k!==m&&g&&!v&&C()},[k]),h&&"error"===h[a]&&(t=(0,i.jsxs)("span",{className:"text-red-600",children:[(0,i.jsx)(ec.Z,{}),"Failed"]})),h&&"loading"===h[a]&&(t=(0,i.jsx)(ed.Z,{})),h&&"success"===h[a]&&(t=(0,i.jsx)(eu.Z,{color:"green"})),(0,i.jsx)(G.Z.Item,{label:(0,i.jsxs)(ee.Z.Compact,{direction:"vertical",children:[(0,i.jsxs)(ee.Z,{size:"small",children:[n,t]}),l]}),name:a,rules:[{required:s,message:o}],style:{display:j?"block":"none",...y},children:(0,i.jsxs)(ee.Z,{direction:"vertical",className:"w-full",children:[(0,i.jsx)(ey.Z,{size:"small",autoComplete:"off",placeholder:x,onChange:N,value:Z,disabled:f,prefix:(0,i.jsx)(et.ZP,{type:"link",icon:(0,i.jsx)(eZ.Z,{}),onClick:()=>E(1)}),suffix:(0,i.jsx)(et.ZP,{type:"link",icon:(0,i.jsx)(Y.Z,{}),onClick:()=>A(1)}),style:{textAlign:"center"}}),!g&&!v&&(0,i.jsx)(ef,{initialValue:c,name:a,setValue:w})]})})};var ek=n(43569),eA=n(99380);let eE=e=>{let t;let{label:n,postLabel:l,name:a,required:s=!1,requiredMessage:o="Please input your ".concat(n),defaultValue:r,initialValue:c,value:p,status:m,autoSave:h=!0,isNew:g,placeholder:v,disabled:x=!1,visible:f=!0,wrapperStyle:j}=e,y=G.Z.useFormInstance(),[b,Z]=(0,d.useState)(null!=p?p:r),w=(0,u.Nr)(b,500),k=e=>{let t=e.currentTarget.value;y.setFieldValue(a,t),Z(t)},A=()=>y.submit();return(0,d.useEffect)(()=>{y.setFieldValue(a,p),Z(p)},[p]),(0,d.useEffect)(()=>{w!==p&&h&&!g&&A()},[w]),m&&"error"===m[a]&&(t=(0,i.jsxs)("span",{className:"text-red-600",children:[(0,i.jsx)(ec.Z,{}),"Failed"]})),m&&"loading"===m[a]&&(t=(0,i.jsx)(ed.Z,{})),m&&"success"===m[a]&&(t=(0,i.jsx)(eu.Z,{color:"green"})),(0,i.jsx)(G.Z.Item,{label:(0,i.jsxs)(ee.Z.Compact,{direction:"vertical",children:[(0,i.jsxs)(ee.Z,{size:"small",children:[n,t]}),l]}),name:a,rules:[{required:s,message:o}],style:{display:f?"block":"none",...j},children:(0,i.jsxs)(ee.Z,{direction:"vertical",className:"w-full",children:[(0,i.jsx)(ey.Z.Password,{autoComplete:"off",placeholder:v,onChange:k,value:b,disabled:x,iconRender:e=>e?(0,i.jsx)(ek.Z,{}):(0,i.jsx)(eA.Z,{})}),!h&&!g&&(0,i.jsx)(ef,{initialValue:c,name:a,setValue:Z})]})})};var eN=n(73162);let eC=e=>{let t;let{className:n,style:l,label:a,postLabel:s,name:o,required:r=!1,requiredMessage:c="Please input your ".concat(a),defaultValue:p,initialValue:m,value:h,status:g,autoSave:v=!0,isNew:x,options:f,onChange:j,disabled:y=!1,visible:b=!0,wrapperStyle:Z}=e,w=G.Z.useFormInstance(),[k,A]=(0,d.useState)(null!=h?h:p),E=(0,u.Nr)(k,500),N=e=>{w.setFieldValue(o,e),A(e),j&&j(e)},C=()=>w.submit();return(0,d.useEffect)(()=>{w.setFieldValue(o,h),A(h),j&&j(h)},[h]),(0,d.useEffect)(()=>{E!==h&&v&&!x&&C()},[E]),g&&"error"===g[o]&&(t=(0,i.jsxs)("span",{className:"text-red-600",children:[(0,i.jsx)(ec.Z,{}),"Failed"]})),g&&"loading"===g[o]&&(t=(0,i.jsx)(ed.Z,{})),g&&"success"===g[o]&&(t=(0,i.jsx)(eu.Z,{color:"green"})),(0,i.jsx)(G.Z.Item,{label:(0,i.jsxs)(ee.Z,{size:"small",children:[a,t]}),name:o,rules:[{required:r,message:c}],style:{display:b?"block":"none",...Z},children:(0,i.jsxs)(ee.Z.Compact,{direction:"horizontal",className:"w-full",children:[(0,i.jsx)(eN.Z,{className:n,style:l,value:k,onChange:N,options:f,disabled:y}),s,!v&&!x&&(0,i.jsx)(ef,{initialValue:m,name:o,setValue:A})]})})};var eS=n(2164),eP=n(24695),e_=n(49523);let eI=e=>{var t;let n;let{className:l,style:a,label:s,postLabel:o,name:r,required:c=!1,requiredMessage:m="Please input your ".concat(s),value:h=[],defaultValue:g=[],initialValue:v=[],status:x={},autoSave:f=!0,isNew:j,options:y,onChange:b,disabled:Z=!1,visible:w=!0}=e,k=G.Z.useFormInstance(),[A,E]=(0,d.useState)(""),[N,C]=(0,d.useState)(null!==(t=null!=h?h:g)&&void 0!==t?t:[]),S=(0,u.Nr)(N,500),P=e=>{let t=(0,e_.z)(N||[]),n=t.indexOf(e)>-1?t:[...t,e];k.setFieldValue(r,n),C(n),E(""),x[r]="loading",b&&b(e)},_=e=>{let t=N?N.filter((t,n)=>n!==e):[];C(t),k.setFieldValue(r,t),b&&b(t)},I=()=>k.submit();return(0,d.useEffect)(()=>{let e=null!=h?h:[];h&&!(0,p.isArray)(h)&&void 0!==h[0]&&(e=[],Object.entries(h).forEach(t=>{let[,n]=t;console.log("val :>> ",n),"string"==typeof n&&e.push(n)})),k.setFieldValue(r,e),C(e)},[h]),(0,d.useEffect)(()=>{S!==h&&f&&!j&&I()},[S]),x&&"error"===x[r]&&(n=(0,i.jsxs)("span",{className:"text-red-600",children:[(0,i.jsx)(ec.Z,{}),"Failed"]})),x&&"loading"===x[r]&&(n=(0,i.jsx)(ed.Z,{})),x&&"success"===x[r]&&(n=(0,i.jsx)(eu.Z,{color:"green"})),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(G.Z.Item,{label:(0,i.jsxs)(ee.Z,{size:"small",children:[s,n]}),name:r,rules:[{required:c,message:m}],style:{display:w?"block":"none"},children:(0,i.jsx)(eP.Z,{bordered:!0,size:"small",dataSource:null!=N?N:[],footer:(0,i.jsx)(ee.Z.Compact,{style:{width:"100%"},children:(0,i.jsx)(ey.Z.Search,{value:A,onChange:e=>E(e.currentTarget.value),loading:x&&"loading"===x[r],enterButton:(0,i.jsx)(et.ZP,{icon:(0,i.jsx)(Y.Z,{}),onClick:()=>P(A),children:"Add"})})}),renderItem:(e,t)=>(0,i.jsx)(eP.Z.Item,{actions:[(0,i.jsx)(et.ZP,{icon:(0,i.jsx)(eS.Z,{}),onClick:()=>_(t)},"".concat(s,"-delete-btn"))],children:(0,i.jsx)(eP.Z.Item.Meta,{title:(0,i.jsx)("span",{children:e})})})})}),o,!f&&!j&&(0,i.jsx)(ef,{initialValue:v,name:r,setValue:C})]})},{TextArea:eF}=ey.Z,eR=e=>{let t;let{label:n,postLabel:l,name:a,required:s=!1,requiredMessage:o="Please input your ".concat(n),defaultValue:r,initialValue:c,value:p,status:m,autoSave:h=!0,isNew:g,disabled:v=!1,visible:x=!0}=e,f=G.Z.useFormInstance(),[j,y]=(0,d.useState)(null!=p?p:r),b=(0,u.Nr)(j,500),Z=e=>{let t=e.currentTarget.value;f.setFieldValue(a,t),y(t)},w=()=>f.submit();return(0,d.useEffect)(()=>{f.setFieldValue(a,p),y(p)},[p]),(0,d.useEffect)(()=>{b!==p&&h&&!g&&w()},[b]),m&&"error"===m[a]&&(t=(0,i.jsxs)("span",{className:"text-red-600",children:[(0,i.jsx)(ec.Z,{}),"Failed"]})),m&&"loading"===m[a]&&(t=(0,i.jsx)(ed.Z,{})),m&&"success"===m[a]&&(t=(0,i.jsx)(eu.Z,{color:"green"})),(0,i.jsx)(G.Z.Item,{label:(0,i.jsxs)(ee.Z,{size:"small",children:[n,t]}),name:a,rules:[{required:s,message:o}],style:{display:x?"block":"none"},children:(0,i.jsxs)(ee.Z,{direction:"vertical",className:"w-full",children:[(0,i.jsx)(eF,{rows:3,onChange:Z,value:j,disabled:v}),l,!h&&!g&&(0,i.jsx)(ef,{compact:!0,initialValue:c,name:a,setValue:y})]})})},{useApp:eB}=c.Z,eL=e=>{let{children:t,className:n="",formType:l,name:a,configs:s=[]}=e,o=eB(),{useSlugApi:c,useCreateApi:u,useUpdateApi:h}=e.api||{},{data:g,status:v}=c||{},[x,f]=h||[],[j,y]=u||[],[b,{deleteAllQueryKeys:Z}]=(0,el.o)(),[w]=G.Z.useForm(),[k,A]=(0,d.useState)(),E="new"===l,{token:{colorBgContainer:N}}=r.Z.useToken(),{closeDrawer:C}=eo(),[S,P]=(0,d.useState)(!1);(0,d.useEffect)(()=>{"success"===v&&P(!0)},[v]);let _=async e=>{let t;let n={...e};if(E){if(!j)return;Object.entries(n).forEach(e=>{let[t,l]=e;t.indexOf(".")>-1&&(delete n[t],m().set(n,t,l))}),console.log("[NEW] Submit:",n),console.log("[NEW] result :>> ",t=await j(n)),(null==t?void 0:t.status)&&(o.notification.success({message:"Congrats!",description:"Item has been created successfully."}),C())}else{if(!x||!S)return;let l={};Object.entries(n).forEach(e=>{let[t,a]=e;if(g&&a!==g[t])l[t]="loading";else{var i;delete l[t],(null===(i=s.find(e=>e.name===t))||void 0===i?void 0:i.alwaysSend)||delete n[t]}}),console.log("[UPDATE] Submit:",n),(0,p.isEmpty)(l)?console.log("[UPDATE] Skipped, nothing new to update."):(console.log("[UPDATE] result :>> ",t=await x(n)),Object.entries(n).forEach(e=>{let[n,a]=e;l[n]=(null==t?void 0:t.status)===0?"error":"success"})),console.log("statuses :>> ",l),A(l)}},I=e=>{console.log("Failed:",e)};return(0,i.jsxs)("div",{className:"overflow-x-hidden p-6 pb-16 ".concat(n),children:["loading"===v&&!1===E&&(0,i.jsx)(W.Z,{active:!0}),"loading"===y&&!0===E&&(0,i.jsx)(W.Z,{active:!0}),("error"===v&&!1===E||"success"===v&&!1===E&&(!g||(0,p.isEmpty)(g.owner)&&(0,p.isEmpty)(g.lastUpdatedBy)))&&(0,i.jsx)($.Z,{message:"Unable to get data at the moment.",type:"error",showIcon:!0}),"error"===y&&!0===E&&(0,i.jsx)($.Z,{message:"Unable to submit data at the moment.",type:"error",showIcon:!0}),("success"===v&&(!(0,p.isEmpty)(g.owner)||!(0,p.isEmpty)(g.lastUpdatedBy))||!0===E&&"loading"!==y)&&(0,i.jsxs)(G.Z,{className:["h-full","overflow-x-hidden",n].join(" "),layout:"vertical",form:w,onFinish:_,onFinishFailed:I,autoComplete:"off",children:[s.map(e=>{var t,n,l,s,o,r,c;switch(e.type){case"input":return(0,i.jsx)(eb,{...e,value:null!==(t=e.value)&&void 0!==t?t:g?m().get(g,e.name):"",status:k,isNew:E},"".concat(a,"-").concat(e.name));case"password":return(0,i.jsx)(eE,{...e,value:null!==(n=e.value)&&void 0!==n?n:g?m().get(g,e.name):"",status:k,isNew:E},"".concat(a,"-").concat(e.name));case"number":return(0,i.jsx)(ew,{...e,value:null!==(l=e.value)&&void 0!==l?l:g?m().get(g,e.name):0,status:k,isNew:E},"".concat(a,"-").concat(e.name));case"textarea":return(0,i.jsx)(eR,{...e,value:null!==(s=e.value)&&void 0!==s?s:g?m().get(g,e.name):"",status:k,isNew:E},"".concat(a,"-").concat(e.name));case"code-editor":return console.log("field.value :>> ",e.value),console.log("_.get(item, field.name) :>> ",m().get(g,e.name)),(0,i.jsx)(ej,{...e,value:null!==(o=e.value)&&void 0!==o?o:g?m().get(g,e.name):"",status:k,isNew:E},"".concat(a,"-").concat(e.name));case"select":{let d=m().get(g,e.name);return(0,i.jsx)(eC,{...e,style:{flex:"auto",...null==e?void 0:e.style},value:d,status:k,isNew:E},"".concat(a,"-").concat(e.name))}case"list_string":let u=null!==(c=null!==(r=e.value)&&void 0!==r?r:g?m().get(g,e.name):[])&&void 0!==c?c:[];return(0,i.jsx)(eI,{...e,value:u,status:k,isNew:E},"".concat(a,"-").concat(e.name));default:return null}}),t,E&&(0,i.jsx)("div",{className:"absolute left-0 bottom-0 w-full px-6 py-3",style:{backgroundColor:N},children:(0,i.jsxs)(ee.Z,{align:"center",children:[(0,i.jsx)(G.Z.Item,{style:{marginBottom:0},children:(0,i.jsx)(et.ZP,{type:"primary",htmlType:"submit",icon:(0,i.jsx)(Y.Z,{}),children:"Submit"})}),(0,i.jsx)(en.Z,{title:"Are you sure?",onConfirm:()=>Z(),okText:"Yes",cancelText:"No",children:(0,i.jsx)(et.ZP,{type:"primary",danger:!0,children:"Discard"})})]})})]})]})};var eQ=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[{cluster_slug:t}]=(0,el.o)(),n=(0,H.pD)(t,{populate:"owner,provider"}),{data:l}=n,a=(0,H.ve)({filter:{id:null==l?void 0:l._id}}),s=(0,H.CN)(),{data:{list:o=[]}={}}=(0,X.nu)(),[r,c]=(0,d.useState)(""),u=[{type:"input",label:"Name",name:"name",placeholder:"Cluster name"},{type:"input",label:(0,i.jsxs)(i.Fragment,{children:["Short name"," ",(0,i.jsx)(M.Z,{title:"Get this from your cloud provider console panel.",children:(0,i.jsx)(J.Z,{})})]}),name:"shortName",placeholder:"Short name",visible:"custom"!==r},{type:"select",label:"Cloud Provider",name:"provider",placeholder:"Cloud Provider",displayKey:"provider.name",options:o.map(e=>({label:e.name||"",value:e._id})),onChange(e){var t;return c((null===(t=o.find(t=>t._id===e))||void 0===t?void 0:t.shortName)||"")}},{type:"input",label:"Primary IP",name:"primaryIP",placeholder:"192.168.10.50"},{type:"input",label:"Primary domain",name:"primaryDomain",placeholder:"example.com"},{type:"input",label:"Project ID (Google)",name:"projectID",placeholder:"my-project-id",visible:"gcloud"===r},{type:"input",label:"Region (Google)",name:"region",placeholder:"asia-southeast1",visible:"gcloud"===r},{type:"input",label:"Zone (Google)",name:"zone",placeholder:"asia-southeast1-a",visible:"gcloud"===r},{type:"code-editor",lang:["json"],label:"Service Account (JSON)",name:"serviceAccount",visible:"gcloud"===r,height:"350px"},{type:"code-editor",lang:["yaml"],label:"KubeConfig (YAML)",name:"kubeConfig",visible:"custom"===r,height:"350px"},{type:"textarea",label:"API Access Token",name:"apiAccessToken",visible:"digitalocean"===r}];return(0,i.jsx)(eL,{name:"cluster",formType:e.isNew?"new":"edit",api:{useSlugApi:n,useUpdateApi:a,useCreateApi:s},configs:u})},eT=n(35301);let ez=["gcloud","digitalocean","dockerhub"].map(e=>{switch(e){case"digitalocean":return{name:"Digital Ocean Registry",slug:"digitalocean"};case"gcloud":return{name:"Google Container Registry",slug:"gcloud"};case"dockerhub":return{name:"Docker Registry",slug:"dockerhub"};default:return}}),eU=["gcloud","do_space","aws_s3"].map(e=>{switch(e){case"aws_s3":return{name:"Amazon S3 Storage",slug:"aws_s3"};case"gcloud":return{name:"Google Cloud Storage",slug:"gcloud"};case"do_space":return{name:"DigitalOcean Space Storage",slug:"do_space"};default:return}}),eD=["mongodb","mysql","mariadb","postgresql"],eV=["bitbucket","github"].map(e=>{switch(e){case"bitbucket":return{name:"Bitbucket",slug:"bitbucket"};case"github":return{name:"Github",slug:"github"};default:return{name:"Unknown",slug:"unknown"}}}),eq=["none","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"],eO=["letsencrypt","custom","none"];var eK=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[{database:t}]=(0,el.o)(),n=(0,eT.N2)(t,{populate:"owner"}),{data:l}=n,a=(0,eT._M)({filter:{id:null==l?void 0:l._id}}),s=(0,eT.e6)(),[o,r]=(0,d.useState)(),c=[{type:"input",label:"Name",name:"name",placeholder:"Give your database a name"},{type:"select",label:"Database type",name:"type",displayKey:"type",options:eD.map(e=>({label:e||"",value:e})),onChange:e=>r(e)},{type:"input",label:"Connection URI",name:"url",placeholder:"mongodb"===o?"mongodb://...":"postgresql://...",visible:"mongodb"===o||"postgresql"===o},{type:"input",label:"Host",name:"host",placeholder:"10.10.10.10",visible:!(null==l?void 0:l.url)},{type:"input",label:"Port",name:"port",placeholder:"27017",visible:!(null==l?void 0:l.url)},{type:"input",label:"User",name:"user",placeholder:"root",visible:!(null==l?void 0:l.url)},{type:"password",label:"Pass",name:"pass",visible:!(null==l?void 0:l.url)},{type:"input",label:"Auth database",name:"authDb",placeholder:"admin",visible:!(null==l?void 0:l.url)}];return(0,i.jsx)(eL,{name:"database",formType:e.isNew?"new":"edit",api:{useSlugApi:n,useUpdateApi:a,useCreateApi:s},configs:c})},eJ=n(2765),eM=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[{framework_slug:t}]=(0,el.o)(),n=(0,eJ.FX)(t,{populate:"owner,git"}),{data:l}=n,a=(0,eJ.fR)({filter:{id:null==l?void 0:l._id}}),s=(0,eJ.D$)(),o=[{type:"input",label:"Name",name:"name",placeholder:"My Starter Template"},{type:"select",label:"Git Provider",name:"gitProvider",displayKey:"gitProvider",style:{width:250},options:eV.map(e=>({label:null==e?void 0:e.name,value:null==e?void 0:e.slug}))},{type:"input",label:"Repository HTTPS URL",name:"repoURL",placeholder:"https://github.com/user/repo.git"},{type:"input",label:"Repository SSH URL",name:"repoSSH",placeholder:"git@github.com:user/repo.git"},{type:"input",label:"Main branch",name:"mainBranch",placeholder:"main"}];return(0,i.jsx)(eL,{name:"framework",formType:e.isNew?"new":"edit",api:{useSlugApi:n,useUpdateApi:a,useCreateApi:s},configs:o})},eX=n(85410),eH=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[{git_provider_slug:t}]=(0,el.o)(),n=(0,eX.o0)(t,{populate:"owner"}),{data:l}=n,a=(0,eX.Ve)({filter:{id:null==l?void 0:l._id}}),s=(0,eX.xP)();return(0,i.jsx)(eL,{name:"gitProvider",formType:e.isNew?"new":"edit",api:{useSlugApi:n,useUpdateApi:a,useCreateApi:s},configs:[{type:"input",label:"Name",name:"name",placeholder:"Github"},{type:"input",label:"Host",name:"host",placeholder:"github.com"},{type:"input",label:"Workspace name",name:"gitWorkspace",placeholder:"my-organization"},{type:"input",label:"Workspace URL",name:"repo.url",placeholder:"https://github.com/my-organization"},{type:"input",label:"Workspace SSH Prefix",name:"repo.sshPrefix",placeholder:"git@github.com:my-organization"}]})},eY=n(43008),eG=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[{app:t}]=(0,el.o)(),n=(0,eY.im)(t,{populate:"owner"}),{data:l}=n,a=(0,eY.UV)({filter:{id:null==l?void 0:l._id}}),{data:{list:s=[]}={}}=(0,eX.y3)(),[o,r]=(0,d.useState)(),c=[{type:"input",label:"Name",name:"name",placeholder:"App name"},{type:"select",label:"Git Provider",name:"gitProvider",placeholder:"Git Provider",displayKey:"gitProvider",options:s.map(e=>({label:e.name||"",value:e._id})),onChange:e=>r(s.find(t=>t._id===e))},{type:"input",label:"Repo URL",name:"git.repoURL",placeholder:"https://github.com/organization-name/example-repo"},{type:"input",label:"Repo SSH",name:"git.repoSSH",placeholder:"git@github.com:organization-name/example-repo.git"}];return(0,i.jsx)(eL,{name:"app",formType:e.isNew?"new":"edit",api:{useSlugApi:n,useUpdateApi:a},configs:c})},eW=n(92931),e$=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[{lv1:t,registry_slug:n}]=(0,el.o)(),l=(0,eW.EL)(n,{populate:"owner",enabled:void 0!==n}),{data:a}=l,s=(0,eW.Xn)({filter:{id:null==a?void 0:a._id}}),o=(0,eW.Bl)(),[r,c]=(0,d.useState)();console.log("providerShortName :>> ",r),(0,d.useEffect)(()=>{(null==a?void 0:a.provider)&&c(a.provider)},[null==a?void 0:a.provider]);let u=[{type:"input",label:"Name",name:"name",placeholder:"My Container Registry",required:!0},{type:"select",alwaysSend:!0,label:"Provider",name:"provider",displayKey:"name",visible:"new"===t,options:ez.map(e=>({label:(null==e?void 0:e.name)||"",value:null==e?void 0:e.slug})),onChange(e){var t;return c((null===(t=ez.find(t=>(null==t?void 0:t.slug)===e))||void 0===t?void 0:t.slug)||void 0)}},{type:"code-editor",lang:["yaml","json"],label:"Google Service Account (JSON)",name:"serviceAccount",visible:"gcloud"===r,required:"gcloud"===r},{type:"input",label:"Registry Host",name:"host",visible:"gcloud"===r,placeholder:"gcloud"===r?"gcr.io":""},{type:"password",label:"DigitalOcean API access token",name:"apiAccessToken",visible:"digitalocean"===r,required:"digitalocean"===r},{type:"input",label:"Docker username",name:"dockerUsername",required:"dockerhub"===r,visible:"dockerhub"===r},{type:"password",label:"Docker password",name:"dockerPassword",required:"dockerhub"===r,visible:"dockerhub"===r},{type:"input",label:"Organization",name:"organization",visible:"dockerhub"===r}];return(0,i.jsx)(eL,{name:"registry",formType:e.isNew?"new":"edit",api:{useSlugApi:l,useUpdateApi:s,useCreateApi:o},configs:u})},e0=n(28936),e1=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[{lv1:t,registry_slug:n}]=(0,el.o)(),l=(0,e0.oA)(n,{populate:"owner"}),{data:a}=l,s=(0,e0.xj)({filter:{id:null==a?void 0:a._id}}),o=(0,e0.oJ)(),[r,c]=(0,d.useState)();(0,d.useEffect)(()=>{(null==a?void 0:a.provider)&&c(a.provider)},[null==a?void 0:a.provider]);let u=[{type:"input",label:"Name",name:"name",placeholder:"My Cloud Storage Name",required:!0},{type:"select",label:"Cloud Storage Provider",name:"provider",displayKey:"name",visible:"new"===t,options:eU.map(e=>({label:(null==e?void 0:e.name)||"",value:null==e?void 0:e.slug})),onChange(e){var t;return c((null===(t=eU.find(t=>(null==t?void 0:t.slug)===e))||void 0===t?void 0:t.slug)||void 0)}},{type:"input",label:"Bucket",name:"bucket",placeholder:"Bucket name",required:!0},{type:"input",label:"Host (domain)",name:"host",placeholder:"example.com",required:!0},{type:"input",label:"Region",name:"region",placeholder:"us-west-2"},{type:"code-editor",lang:["yaml","json"],label:"Google Service Account (JSON)",name:"auth.service_account",visible:"gcloud"===r,required:"gcloud"===r},{type:"input",label:"Key ID",name:"auth.key_id",required:"do_space"===r||"aws_s3"===r,visible:"do_space"===r||"aws_s3"===r},{type:"password",label:"Key Secret",name:"auth.key_secret",required:"do_space"===r||"aws_s3"===r,visible:"do_space"===r||"aws_s3"===r}];return(0,i.jsx)(eL,{name:"registry",formType:e.isNew?"new":"edit",api:{useSlugApi:l,useUpdateApi:s,useCreateApi:o},configs:u})},e2=n(22430),e8=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[{role:t}]=(0,el.o)(),n=(0,e2.dZ)(t,{populate:"owner"}),{data:l}=n||{},a=(0,e2.aB)({filter:{id:null==l?void 0:l._id}}),s=(0,e2.m1)(),o=[{type:"input",label:"Name",name:"name",placeholder:"Role's name",disabled:void 0===l||void 0===l.type||["administrator","moderator","member"].includes(l.type)}];return(0,i.jsx)(eL,{name:"roles",formType:e.isNew?"new":"edit",api:{useSlugApi:n,useUpdateApi:a,useCreateApi:s},configs:o})},e6=n(88074),e4=n(31494),e3=n(11942);let e5=e=>{var t,n,l,a,s,o,r;let{user:d}=e||{},{notification:u}=c.Z.useApp(),[{user:p}]=(0,el.o)(),{data:m}=(0,e3.Zz)({pagination:{page:1,size:1e3}}),{list:h=[]}=m||{},{data:g}=(0,eY.VD)({pagination:{page:1,size:1e3}}),{list:v=[]}=g||{},{data:x}=(0,eX.y3)({pagination:{page:1,size:1e3}}),{list:f=[]}=x||{},{data:j}=(0,eJ.Dh)({pagination:{page:1,size:1e3}}),{list:y=[]}=j||{},{data:b}=(0,H.x7)({pagination:{page:1,size:1e3}}),{list:Z=[]}=b||{},{data:w}=(0,eT.EF)({pagination:{page:1,size:1e3}}),{list:k=[]}=w||{},{data:A}=(0,eW.fy)({pagination:{page:1,size:1e3}}),{list:E=[]}=A||{},[N,C]=(0,e6.Hm)(),S=e=>{var t;if(!p)return;let n={userSlug:p,resource:{}};Object.entries(e).forEach(e=>{let[t,l]=e;l&&(n.resource[t]=l.join(","))}),console.log("updateData :>> ",n),null===(t=N(n))||void 0===t||t.then(()=>{u.success({message:"User's access permissions have been updated."})})},P=e=>{console.error(e)};return(0,i.jsxs)("div",{className:"px-6",children:[(0,i.jsx)(e4.Z.Title,{level:4,children:"Access Permissions"}),(0,i.jsxs)(G.Z,{name:"access-permissions",layout:"vertical",onFinishFailed:P,onFinish:S,children:[(0,i.jsx)(G.Z.Item,{className:"mb-2",name:"projects",label:"Projects",initialValue:null==d?void 0:null===(t=d.allowAccess)||void 0===t?void 0:t.projects,shouldUpdate:!0,children:(0,i.jsx)(eN.Z,{mode:"multiple",placeholder:"Please select projects",options:null==h?void 0:h.map(e=>({label:"".concat(e.name," (").concat(e.slug,")"),value:e._id}))})}),(0,i.jsx)(G.Z.Item,{className:"mb-2",name:"apps",label:"Apps",initialValue:null==d?void 0:null===(n=d.allowAccess)||void 0===n?void 0:n.apps,shouldUpdate:!0,children:(0,i.jsx)(eN.Z,{mode:"multiple",placeholder:"Please select apps",options:null==v?void 0:v.map(e=>({label:"".concat(e.name," (").concat(e.slug,")"),value:e._id}))})}),(0,i.jsx)(G.Z.Item,{className:"mb-2",name:"gits",label:"Gits",initialValue:null==d?void 0:null===(l=d.allowAccess)||void 0===l?void 0:l.gits,shouldUpdate:!0,children:(0,i.jsx)(eN.Z,{mode:"multiple",placeholder:"Please select gits",options:null==f?void 0:f.map(e=>({label:"".concat(e.name," (").concat(e.slug,")"),value:e._id}))})}),(0,i.jsx)(G.Z.Item,{className:"mb-2",name:"frameworks",label:"Frameworks",initialValue:null==d?void 0:null===(a=d.allowAccess)||void 0===a?void 0:a.frameworks,shouldUpdate:!0,children:(0,i.jsx)(eN.Z,{mode:"multiple",placeholder:"Please select frameworks",options:null==y?void 0:y.map(e=>({label:"".concat(e.name," (").concat(e.slug,")"),value:e._id}))})}),(0,i.jsx)(G.Z.Item,{className:"mb-2",name:"clusters",label:"Clusters",initialValue:null==d?void 0:null===(s=d.allowAccess)||void 0===s?void 0:s.clusters,shouldUpdate:!0,children:(0,i.jsx)(eN.Z,{mode:"multiple",placeholder:"Please select clusters",options:null==Z?void 0:Z.map(e=>({label:"".concat(e.name," (").concat(e.slug,")"),value:e._id}))})}),(0,i.jsx)(G.Z.Item,{className:"mb-2",name:"databases",label:"Databases",initialValue:null==d?void 0:null===(o=d.allowAccess)||void 0===o?void 0:o.databases,shouldUpdate:!0,children:(0,i.jsx)(eN.Z,{mode:"multiple",placeholder:"Please select databases",options:null==k?void 0:k.map(e=>({label:"".concat(e.name," (").concat(e.slug,")"),value:e._id}))})}),(0,i.jsx)(G.Z.Item,{className:"mb-2",name:"container_registries",label:"Container Registries",initialValue:null==d?void 0:null===(r=d.allowAccess)||void 0===r?void 0:r.container_registries,shouldUpdate:!0,children:(0,i.jsx)(eN.Z,{mode:"multiple",placeholder:"Please select container registries",options:null==E?void 0:E.map(e=>({label:"".concat(e.name," (").concat(e.slug,")"),value:e._id}))})}),(0,i.jsxs)("div",{className:"flex gap-2",children:[(0,i.jsx)(G.Z.Item,{noStyle:!0,children:(0,i.jsx)(et.ZP,{htmlType:"submit",type:"primary",children:"Save"})}),(0,i.jsx)(et.ZP,{danger:!0,children:"Reset permissions"})]})]})]})};var e9=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[{user:t}]=(0,el.o)(),n=(0,e6.hz)(t,{populate:"roles"}),{data:l}=n||{},a=(0,e6.yl)({filter:{id:null==l?void 0:l._id},populate:"roles"}),s=(0,e6.En)({populate:"roles"}),[o,r]=(0,e6.Rz)(),{data:{list:c=[]}={}}=(0,e2.bd)(),u=c[0],[p,m]=(0,d.useState)(u),h=[{type:"input",label:"Name",name:"name",placeholder:"User's name"},{type:"select",label:"Role",name:"roles",style:{width:250},displayKey:"roles.0._id",options:c.map(e=>({label:e.name||"",value:e._id}))}];return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(eL,{name:"user",formType:e.isNew?"new":"edit",className:"pb-2",api:{useSlugApi:n,useUpdateApi:a,useCreateApi:s},configs:h}),(0,i.jsx)(e5,{user:l})]})},e7=function(){let e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{formType:"new"},[{type:n}]=(0,el.o)();switch(n){case"app":e=(0,i.jsx)(eG,{isNew:"new"===t.formType});break;case"cluster":e=(0,i.jsx)(eQ,{isNew:"new"===t.formType});break;case"framework":e=(0,i.jsx)(eM,{isNew:"new"===t.formType});break;case"git-provider":e=(0,i.jsx)(eH,{isNew:"new"===t.formType});break;case"registry":e=(0,i.jsx)(e$,{isNew:"new"===t.formType});break;case"storage":e=(0,i.jsx)(e1,{isNew:"new"===t.formType});break;case"database":e=(0,i.jsx)(eK,{isNew:"new"===t.formType});break;case"user":e=(0,i.jsx)(e9,{isNew:"new"===t.formType});break;case"role":e=(0,i.jsx)(e8,{isNew:"new"===t.formType})}return(0,i.jsx)("div",{className:"h-full",children:e})},te=n(56183),tt=n(2513);let tn=function(){var e,t;let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{data:l}=(0,te.u)();return(0,i.jsxs)("div",{children:[n.children,(0,i.jsxs)("div",{className:"border-t border-gray-300 py-4 text-center text-xs",children:["Version ",(0,i.jsx)("strong",{className:"text-brand",children:null==l?void 0:null===(e=l.data)||void 0===e?void 0:e.version})," - Location:"," ",(0,i.jsx)("strong",{className:"text-brand",children:(null==l?void 0:null===(t=l.data)||void 0===t?void 0:t.location)||"unknown"}),(0,i.jsx)("br",{}),"Copyright ",new Date().getFullYear()," \xa9"," ",(0,i.jsx)(U(),{href:"https://dxup.dev/?ref=dxup-dashboard",target:"_blank",children:tt.XL.title.toUpperCase()}),". Powered by"," ",(0,i.jsx)("a",{href:"https://wearetopgroup.com/en?ref=dxup-dashboard",target:"_blank",rel:"noreferrer",children:"TOP GROUP"}),"."]})]})};var tl=n(74685),ta=n(71275),ts=n(99157),ti=n(70907),to=n(35484),tr=n(72784),tc=n(53722),td=n(44177);let{Header:tu}=x.Z,tp=function(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{onSidebarChange:n}=t,{isDarkMode:l,toggle:a}=(0,u.vs)(),[s]=(0,V.aC)(),{token:{colorBgContainer:o}}=r.Z.useToken(),{sidebarCollapsed:c,toggleSidebar:p}=(0,q.Jl)();(0,d.useEffect)(()=>n&&n(c),[c]);let[m,h]=(0,d.useState)(!1);return(0,d.useEffect)(()=>{h(!0)},[]),m?(0,i.jsx)(tu,{className:"w-full",style:{position:"sticky",top:0,paddingInline:24,lineHeight:"48px",height:48,zIndex:100,background:o},children:(0,i.jsxs)("div",{className:"flex ",children:[(0,i.jsx)("div",{className:"grow",children:(0,i.jsx)("div",{className:"hidden md:block",children:d.createElement(c?tl.Z:ta.Z,{className:"trigger",onClick:()=>p&&p()})})}),(0,i.jsxs)(ee.Z,{size:4,children:[(0,i.jsx)(et.ZP,{type:"text",icon:(0,i.jsx)(ts.Z,{}),href:"https://zii.vn/dx-docs",target:"_blank"}),(0,i.jsx)(et.ZP,{type:"text",icon:(0,i.jsx)(ti.Z,{}),href:"https://github.com/digitopvn/diginext/",target:"_blank"}),(0,i.jsx)(et.ZP,{type:"text",style:{fontSize:18,verticalAlign:"middle",paddingTop:0},onClick:a,icon:l?(0,i.jsx)("i",{className:"ri-sun-line inline-block"}):(0,i.jsx)("i",{className:"ri-moon-line inline-block"})}),(0,i.jsx)(tr.Z,{placement:"bottomRight",trigger:"click",content:(0,i.jsxs)(ee.Z,{direction:"vertical",children:[(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)("p",{className:"mb-0",children:(0,i.jsx)("strong",{children:null==s?void 0:s.name})}),(0,i.jsx)("p",{className:"mb-0",children:null==s?void 0:s.email})]}),(0,i.jsxs)(ee.Z.Compact,{direction:"vertical",className:"w-full",children:[(0,i.jsx)(et.ZP,{href:"/profile",children:"Profile"}),(0,i.jsx)(et.ZP,{href:"/workspace/select",children:"Switch workspace"}),(0,i.jsx)(et.ZP,{href:"/logout",children:"Sign out"})]})]}),children:(0,i.jsxs)("div",{className:"cursor-pointer align-middle",children:[(0,i.jsx)(tc.C,{style:{lineHeight:"20px"},icon:(0,i.jsx)(F.Z,{style:{verticalAlign:"middle"}}),src:null==s?void 0:s.image,size:24}),(0,i.jsx)("span",{className:"ml-2 hidden md:inline-block",children:null==s?void 0:s.name}),(0,i.jsx)(td.Z,{color:"green",className:"ml-2",children:null==s?void 0:null===(e=s.activeRole)||void 0===e?void 0:e.name}),(0,i.jsx)(to.Z,{className:"ml-2"})]})})]})]})}):null};var tm=n(96580),th=n(98344),tg=n(30388),tv=n(71370),tx=n(48880),tf=n(74637),tj=n.n(tf),ty=n(14149),tb=n(32352);let tZ=n(64814),tw=n(54498);tj().extend(tw),tj().extend(tZ);let tk=null!==(l=tt.XL.tableConfig.defaultPageSize)&&void 0!==l?l:20,tA=()=>{let{responsive:e}=(0,q.Jl)(),[t,{setQuery:n}]=(0,el.o)(),{database:l}=t,[a,s]=(0,d.useState)(1),{data:o,status:r}=(0,eT.sr)({filter:{dbSlug:l},populate:"owner,database",pagination:{page:a,size:tk}}),{list:c,pagination:u}=o||{},{total_items:p}=u||{},[m]=(0,eT.ij)(),[h]=(0,eT.OK)(),g=[{title:"No.",width:7,key:"no",dataIndex:"no",render:(e,t,n)=>(0,i.jsx)(i.Fragment,{children:(a-1)*tk+n+1})},{title:"Name",width:50,dataIndex:"name",key:"name",render:(e,t)=>(0,i.jsx)(U(),{href:t.url||"#",target:"_blank",children:e}),filterSearch:!0,filters:[{text:"goon",value:"goon"}],onFilter:(e,t)=>!t.name||t.name.indexOf(e.toString())>-1},{title:"Status",dataIndex:"status",key:"status",width:18,render:(e,t)=>(0,i.jsx)(td.Z,{children:e})},{title:"Type",dataIndex:"type",key:"type",width:18,render:(e,t)=>(0,i.jsx)(td.Z,{children:e})},{title:"Database",dataIndex:"dbSlug",key:"dbSlug",width:22,render:(e,t)=>t.dbSlug?(0,i.jsx)(td.Z,{color:"success",children:t.dbSlug}):(0,i.jsx)(td.Z,{color:"error",children:"-"})},{title:"Created by",dataIndex:"owner",key:"owner",width:30,render:(e,t)=>(0,i.jsx)(i.Fragment,{children:null==t?void 0:t.owner.name})},{title:"Created at",dataIndex:"createdAt",key:"createdAt",width:25,render:e=>(0,i.jsx)(ty.q,{date:e}),sorter:(e,t)=>tj()(e.createdAt).diff(tj()(t.createdAt))},{title:(0,i.jsx)(e4.Z.Text,{className:"text-xs md:text-sm",children:"Action"}),key:"action",fixed:"right",width:(null==e||e.md,20),render:(e,t)=>t.actions}],v=async e=>{e||tv.ZP.error({message:"Unable to delete this item."});let t=await h({_id:e});(null==t?void 0:t.status)&&tv.ZP.success({message:"Item deleted successfully."})},x=e=>{let{current:t}=e;t&&s(t)},f=(null==c?void 0:c.map((e,t)=>({...e,actions:(0,i.jsxs)(ee.Z.Compact,{children:[(0,i.jsx)(M.Z,{overlay:"Download",children:(0,i.jsx)(et.ZP,{icon:(0,i.jsx)(tm.Z,{}),href:e.url,target:"_blank"})}),(0,i.jsx)(M.Z,{overlay:"Restore",children:(0,i.jsx)(et.ZP,{disabled:!0,icon:(0,i.jsx)(th.Z,{}),onClick:()=>m({id:null==e?void 0:e._id})})}),(0,i.jsx)(en.Z,{title:"Are you sure to delete this item?",description:(0,i.jsx)("span",{className:"text-red-500",children:"Caution: this is permanent and cannot be rolled back."}),onConfirm:()=>v(e._id),okText:"Yes",cancelText:"No",children:(0,i.jsx)(et.ZP,{icon:(0,i.jsx)(eS.Z,{})})})]})})))||[],j=(0,d.useRef)(null),y=(0,tg.Z)(j);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(tb.V,{title:"Database Backups (".concat(null!=p?p:"-",")"),breadcrumbs:[{name:"Workspace"}],actions:[],children:(0,i.jsx)(td.Z,{color:"success",children:l})}),(0,i.jsx)("div",{className:"h-full flex-auto overflow-hidden",ref:j,children:(0,i.jsx)(tx.Z,{sticky:!0,size:"small",loading:"loading"===r,columns:g,dataSource:f,scroll:{x:1e3,y:void 0!==(null==y?void 0:y.height)?y.height-140:void 0},pagination:{pageSize:tk,total:p,position:["bottomCenter"]},onChange:x})})]})};var tE=n(858),tN=n(26171),tC=n(37649),tS=n(3726),tP=n(55282),t_=n.n(tP);n(37324);let tI=n(64814),tF=n(54498);tj().extend(tF),tj().extend(tI);let tR=e=>t_()("".concat(e).replace(/[\u001b\u009b][[()#;?]*(?:[0-9]{1,4}(?:;[0-9]{0,4})*)?[0-9A-ORZcf-nqry=><]/g,"")),tB=e=>{var t;let{slug:n}=e,[l]=(0,el.o)(),{app:a=n,env:s}=l,{data:o={},status:c}=(0,eY.un)(a,{filter:{env:s}}),u=(null===(t=o.status)||void 0===t?void 0:t.toString())==="0"?[]:Object.keys(o),p=u[0],m=p?o[p]:"";console.log({podLogs:m});let h=tR(m),g=h.split("\n").map((e,t)=>e.toString()).filter(e=>"0"!==e),{token:{colorText:v}}=r.Z.useToken(),[x,f]=(0,d.useState)(!1),j=(0,d.useRef)(null),y=(0,d.useRef)(null);(0,tN.Z)(y);let b=(0,d.useRef)(null);(0,tg.Z)(b);let Z=()=>{var e;null==j||null===(e=j.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})};return(0,i.jsxs)("div",{style:{color:v},className:"flex h-full flex-col",children:["loading"===c&&(0,i.jsx)(W.Z,{active:!0}),(0,i.jsx)("div",{className:"flex-auto overflow-auto",ref:y,children:g.length<=1&&""===g[0]?(0,i.jsx)(tC.Z,{className:"py-10"}):(0,i.jsxs)("pre",{className:"no-scrollbar mb-0 p-4 pt-6 dark:bg-black",ref:b,style:{width:x?"100%":"auto",whiteSpace:x?"normal":"nowrap"},children:[g.filter(e=>""!==e).map((e,t)=>{let n="".concat(e);if(n.toLowerCase().indexOf("error")>-1)return(0,i.jsxs)("p",{children:[(0,i.jsx)(eh.Z,{className:"text-red-600"})," ",(0,i.jsx)("span",{className:"text-red-600",children:(0,tS.ZP)("".concat(e))})]},"log-line-".concat(t));if(n.indexOf("http://")>-1||n.indexOf("https://")>-1){let l=n.split(" "),a=l.map(e=>e.indexOf("http://")>-1||e.indexOf("https://")>-1?'<a href="'.concat(e,'" target="_blank" style="color: #008dff">').concat(e,"</a>"):e).join(" ");return(0,i.jsx)("p",{children:(0,tS.ZP)(a)},"log-line-".concat(t))}return(0,i.jsx)("p",{children:(0,tS.ZP)("".concat(e))},"log-line-".concat(t))}),(0,i.jsx)("p",{ref:j})]})}),(0,i.jsxs)("div",{className:"flex p-4",children:[(0,i.jsx)("div",{className:"flex-auto"}),(0,i.jsxs)("div",{className:"flex gap-2",children:[(0,i.jsx)(et.ZP,{onClick:()=>f(!x),children:x?"UNWRAP":"WRAP"}),(0,i.jsx)(et.ZP,{icon:(0,i.jsx)(tE.Z,{}),onClick:()=>Z()})]})]})]})};var tL=n(42822),tQ=n(52504),tT=n(27899),tz=n(11015),tU=n(78825);function tD(e,t){let n=e;for(let l=1;l<t;l++)n*=2;return n}let tV=e=>{if("none"===e)return{};let t=(0,p.toNumber)(e.substring(0,e.length-1));return{requests:{cpu:"".concat(tD(20,t),"m"),memory:"".concat(tD(128,t),"Mi")},limits:{cpu:"".concat(tD(20,t),"m"),memory:"".concat(tD(128,t),"Mi")}}};var tq=n(28648);let tO=e=>{var t;let{values:n,defaultValues:l,onChange:a}=e,[s,{setQuery:o}]=(0,el.o)(),{notification:r}=c.Z.useApp(),[u,p]=(0,d.useState)(null!==(t=null!=n?n:l)&&void 0!==t?t:[]),[m,h]=(0,d.useState)({name:"",size:"",mountPath:""}),[g]=(0,eY.JR)({filter:{slug:s.app,env:s.env}}),[v]=(0,eY.KU)(),x=e=>e.name?e.mountPath?(e.size||(e.size="".concat(5,"Gi")),g(e).then(e=>{if(console.log("res :>> ",e),e.status){let{data:t}=e;p(e=>[...e,t])}}).catch(e=>{})):r.error({message:'Volume "mountPath" is required.'}):r.error({message:'Volume "name" is required.'}),f=e=>{var t;let n=u[e];return n?null===(t=v({slug:s.app,env:s.env,name:n.name}))||void 0===t?void 0:t.then(t=>{let{data:l}=t;l.success&&r.success({message:"Volume ".concat(n.name," has been deleted.")}),l.message&&r.info({message:l.message}),p(u.filter((t,n)=>e!==n))}).catch(e=>{}):r.error({message:"Volume not found."})};return(0,d.useEffect)(()=>{a&&a(u)},[u]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("h3",{children:["Volumes"," ",(0,i.jsx)(M.Z,{title:"WARNING: When using volume, high-availability of your app will be disabled, since the app's replicas will need to stay on the same server of the volume.",children:(0,i.jsx)(J.Z,{})})]}),(0,i.jsx)(eP.Z,{bordered:!0,size:"small",dataSource:null!=u?u:[],footer:(0,i.jsxs)(ee.Z.Compact,{style:{width:"100%"},children:[(0,i.jsx)(ey.Z,{name:"name",placeholder:"Volume name",prefix:(0,i.jsx)(M.Z,{title:"No spaces or special characters.",children:(0,i.jsx)(J.Z,{})}),onChange(e){e.currentTarget&&e.currentTarget.value&&h({...m,name:e.currentTarget.value})}}),(0,i.jsx)(ey.Z,{name:"mountPath",placeholder:"Mount to directory path",prefix:(0,i.jsx)(M.Z,{title:"Location of mapped directory in this container. For example: /var/www/html",children:(0,i.jsx)(J.Z,{})}),onChange(e){e.currentTarget&&e.currentTarget.value&&h({...m,mountPath:e.currentTarget.value})}}),(0,i.jsx)(tq.Z,{name:"size",placeholder:"Size",addonAfter:"Gi",style:{flex:"0 0 140px"},defaultValue:5,addonBefore:(0,i.jsx)(M.Z,{title:"Size of the volume in Gigabyte, this cannot be changed in the future.",children:(0,i.jsx)(J.Z,{})}),onChange(e){e&&h({...m,size:"".concat(e,"Gi")})}}),(0,i.jsx)(et.ZP,{icon:(0,i.jsx)(Y.Z,{}),onClick(){console.log("valueToBeAdded :>> ",m),m&&x(m)},children:"Add"})]}),renderItem:(e,t)=>(0,i.jsx)(eP.Z.Item,{actions:[(0,i.jsx)(et.ZP,{icon:(0,i.jsx)(eS.Z,{}),onClick:()=>f(t)},"volume-delete-btn")],children:(0,i.jsx)(eP.Z.Item.Meta,{title:(0,i.jsxs)("span",{children:[e.name," (",e.size,")"]}),description:"Mount to: ".concat(e.mountPath," (Node: ").concat(e.node,")")})},"volume-item-".concat(t))})]})},tK=()=>{var e,t,n,l,a,s,o,r;let[{project:c,app:u,env:p},{setQuery:m}]=(0,el.o)(),h=(0,ea.F)(),[g,v]=(0,d.useState)(""),{data:x}=(0,eW.fy)({populate:"owner",pagination:{page:0,size:100}}),{list:f=[]}=x||{},j=(0,eY.Lw)(u,{filter:{env:p}}),y=(0,eY.i6)({filter:{slug:u,env:p}}),{data:b}=(0,H.pD)((null===(e=j.data)||void 0===e?void 0:e.cluster)||"",{enabled:void 0!==(null===(t=j.data)||void 0===t?void 0:t.cluster)}),Z=[{type:"list_string",label:"Domains",name:"domains"},{type:"input",label:"Docker Image URL",name:"imageURL",placeholder:"Docker image URL",disabled:!0,displayValue:(null===(n=j.data)||void 0===n?void 0:n.imageURL)?null===(l=j.data)||void 0===l?void 0:l.imageURL:""},{type:"select",label:"Container size",name:"size",placeholder:"Container size",displayKey:"size",defaultValue:"none",options:eq.map(e=>{var t,n;let l=tV(e||"none");return{label:"".concat(e," ").concat(l.limits?"(cpu: ".concat(null===(t=l.limits)||void 0===t?void 0:t.cpu,", mem: ").concat(null===(n=l.limits)||void 0===n?void 0:n.memory,")"):""),value:e}}),wrapperStyle:{float:(null==h?void 0:h.md)?"left":"none",marginRight:(null==h?void 0:h.md)?15:0,width:(null==h?void 0:h.md)?260:"100%"}},{type:"number",label:"Replicas",name:"replicas",placeholder:"1",defaultValue:1,wrapperStyle:{float:(null==h?void 0:h.md)?"left":"none",marginRight:(null==h?void 0:h.md)?15:0}},{type:"input",label:"PORT",name:"port",placeholder:"3000"},{type:"select",label:"Container Registry",name:"registry",placeholder:"Container Registry",displayKey:"registry",options:f.map(e=>({label:e.name||"",value:e.slug})),wrapperStyle:{float:(null==h?void 0:h.md)?"left":"none",clear:"both",marginRight:(null==h?void 0:h.md)?15:0,width:(null==h?void 0:h.md)?"48%":"100%"}},{type:"input",label:"Cluster",name:"cluster",placeholder:"Cluster",disabled:!0,displayValue:b?"".concat(b.name," (").concat(b.slug,")"):"",wrapperStyle:{float:(null==h?void 0:h.md)?"right":"none",width:(null==h?void 0:h.md)?"50%":"100%"}},{type:"select",label:"SSL Issuer",name:"ssl",placeholder:"letsencrypt",displayKey:"ssl",options:eO.map(e=>({label:e||"",value:e})),wrapperStyle:{float:(null==h?void 0:h.md)?"left":"none",marginRight:(null==h?void 0:h.md)?15:0,width:(null==h?void 0:h.md)?"48%":"100%"},onChange(e){v(e)}},{type:"input",label:"TLS Secret",name:"tlsSecret",placeholder:"",disabled:"letsencrypt"===g,wrapperStyle:{width:"100%",clear:"right"}}];return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:" hidden h-80 w-full p-6",style:{display:(null===(a=j.data)||void 0===a?void 0:a.screenshot)?"block":"none"},children:(0,i.jsx)(tT.Z,{hoverable:!0,className:"relative h-full overflow-hidden",styles:{body:{height:"100%",padding:0}},children:(0,i.jsx)("div",{className:"h-full",style:{backgroundRepeat:"no-repeat",backgroundPosition:"center",backgroundSize:"cover",backgroundImage:(null===(s=j.data)||void 0===s?void 0:s.screenshot)?"url(".concat(null===(o=j.data)||void 0===o?void 0:o.screenshot,")"):"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMIAAADDCAYAAADQvc6UAAABRWlDQ1BJQ0MgUHJvZmlsZQAAKJFjYGASSSwoyGFhYGDIzSspCnJ3UoiIjFJgf8LAwSDCIMogwMCcmFxc4BgQ4ANUwgCjUcG3awyMIPqyLsis7PPOq3QdDFcvjV3jOD1boQVTPQrgSkktTgbSf4A4LbmgqISBgTEFyFYuLykAsTuAbJEioKOA7DkgdjqEvQHEToKwj4DVhAQ5A9k3gGyB5IxEoBmML4BsnSQk8XQkNtReEOBxcfXxUQg1Mjc0dyHgXNJBSWpFCYh2zi+oLMpMzyhRcASGUqqCZ16yno6CkYGRAQMDKMwhqj/fAIcloxgHQqxAjIHBEugw5sUIsSQpBobtQPdLciLEVJYzMPBHMDBsayhILEqEO4DxG0txmrERhM29nYGBddr//5/DGRjYNRkY/l7////39v///y4Dmn+LgeHANwDrkl1AuO+pmgAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAwqADAAQAAAABAAAAwwAAAAD9b/HnAAAHlklEQVR4Ae3dP3PTWBSGcbGzM6GCKqlIBRV0dHRJFarQ0eUT8LH4BnRU0NHR0UEFVdIlFRV7TzRksomPY8uykTk/zewQfKw/9znv4yvJynLv4uLiV2dBoDiBf4qP3/ARuCRABEFAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghgg0Aj8i0JO4OzsrPv69Wv+hi2qPHr0qNvf39+iI97soRIh4f3z58/u7du3SXX7Xt7Z2enevHmzfQe+oSN2apSAPj09TSrb+XKI/f379+08+A0cNRE2ANkupk+ACNPvkSPcAAEibACyXUyfABGm3yNHuAECRNgAZLuYPgEirKlHu7u7XdyytGwHAd8jjNyng4OD7vnz51dbPT8/7z58+NB9+/bt6jU/TI+AGWHEnrx48eJ/EsSmHzx40L18+fLyzxF3ZVMjEyDCiEDjMYZZS5wiPXnyZFbJaxMhQIQRGzHvWR7XCyOCXsOmiDAi1HmPMMQjDpbpEiDCiL358eNHurW/5SnWdIBbXiDCiA38/Pnzrce2YyZ4//59F3ePLNMl4PbpiL2J0L979+7yDtHDhw8vtzzvdGnEXdvUigSIsCLAWavHp/+qM0BcXMd/q25n1vF57TYBp0a3mUzilePj4+7k5KSLb6gt6ydAhPUzXnoPR0dHl79WGTNCfBnn1uvSCJdegQhLI1vvCk+fPu2ePXt2tZOYEV6/fn31dz+shwAR1sP1cqvLntbEN9MxA9xcYjsxS1jWR4AIa2Ibzx0tc44fYX/16lV6NDFLXH+YL32jwiACRBiEbf5KcXoTIsQSpzXx4N28Ja4BQoK7rgXiydbHjx/P25TaQAJEGAguWy0+2Q8PD6/Ki4R8EVl+bzBOnZY95fq9rj9zAkTI2SxdidBHqG9+skdw43borCXO/ZcJdraPWdv22uIEiLA4q7nvvCug8WTqzQveOH26fodo7g6uFe/a17W3+nFBAkRYENRdb1vkkz1CH9cPsVy/jrhr27PqMYvENYNlHAIesRiBYwRy0V+8iXP8+/fvX11Mr7L7ECueb/r48eMqm7FuI2BGWDEG8cm+7G3NEOfmdcTQw4h9/55lhm7DekRYKQPZF2ArbXTAyu4kDYB2YxUzwg0gi/41ztHnfQG26HbGel/crVrm7tNY+/1btkOEAZ2M05r4FB7r9GbAIdxaZYrHdOsgJ/wCEQY0J74TmOKnbxxT9n3FgGGWWsVdowHtjt9Nnvf7yQM2aZU/TIAIAxrw6dOnAWtZZcoEnBpNuTuObWMEiLAx1HY0ZQJEmHJ3HNvGCBBhY6jtaMoEiJB0Z29vL6ls58vxPcO8/zfrdo5qvKO+d3Fx8Wu8zf1dW4p/cPzLly/dtv9Ts/EbcvGAHhHyfBIhZ6NSiIBTo0LNNtScABFyNiqFCBChULMNNSdAhJyNSiECRCjUbEPNCRAhZ6NSiAARCjXbUHMCRMjZqBQiQIRCzTbUnAARcjYqhQgQoVCzDTUnQIScjUohAkQo1GxDzQkQIWejUogAEQo121BzAkTI2agUIkCEQs021JwAEXI2KoUIEKFQsw01J0CEnI1KIQJEKNRsQ80JECFno1KIABEKNdtQcwJEyNmoFCJAhELNNtScABFyNiqFCBChULMNNSdAhJyNSiECRCjUbEPNCRAhZ6NSiAARCjXbUHMCRMjZqBQiQIRCzTbUnAARcjYqhQgQoVCzDTUnQIScjUohAkQo1GxDzQkQIWejUogAEQo121BzAkTI2agUIkCEQs021JwAEXI2KoUIEKFQsw01J0CEnI1KIQJEKNRsQ80JECFno1KIABEKNdtQcwJEyNmoFCJAhELNNtScABFyNiqFCBChULMNNSdAhJyNSiECRCjUbEPNCRAhZ6NSiAARCjXbUHMCRMjZqBQiQIRCzTbUnAARcjYqhQgQoVCzDTUnQIScjUohAkQo1GxDzQkQIWejUogAEQo121BzAkTI2agUIkCEQs021JwAEXI2KoUIEKFQsw01J0CEnI1KIQJEKNRsQ80JECFno1KIABEKNdtQcwJEyNmoFCJAhELNNtScABFyNiqFCBChULMNNSdAhJyNSiEC/wGgKKC4YMA4TAAAAABJRU5ErkJggg=="}})})}),(0,i.jsxs)(eL,{name:"deploy_environment",formType:"edit",api:{useSlugApi:j,useUpdateApi:y},configs:Z,className:"h-auto",children:[(0,i.jsx)("div",{className:"clear-both mb-4 w-full",children:(0,i.jsx)(tO,{values:null===(r=j.data)||void 0===r?void 0:r.volumes})}),(0,i.jsx)("div",{className:"clear-both w-full",children:(0,i.jsxs)(tz.Z,{gutter:[16,16],align:"stretch",children:[(0,i.jsx)(tU.Z,{span:12,children:(0,i.jsx)(et.ZP,{block:!0,onClick:()=>m({lv2:"build",project:c,app:u}),children:"Builds"})}),(0,i.jsx)(tU.Z,{span:12,children:(0,i.jsx)(et.ZP,{block:!0,onClick:()=>m({lv2:"release",project:c,app:u,env:p}),children:"Releases"})}),(0,i.jsx)(tU.Z,{span:12,children:(0,i.jsx)(et.ZP,{block:!0,onClick:()=>m({lv2:"env_vars",project:c,app:u,env:p}),children:"Environment Variables"})}),(0,i.jsx)(tU.Z,{span:12,children:(0,i.jsx)(et.ZP,{block:!0,onClick:()=>m({lv2:"deployment_yaml",project:c,app:u,env:p}),children:"Deployment YAML"})}),(0,i.jsx)(tU.Z,{span:12,children:(0,i.jsx)(et.ZP,{block:!0,onClick:()=>m({lv2:"app_logs",project:c,app:u,env:p}),children:"Application Logs"})})]})})]})]})};var tJ=n(99657);let tM=()=>{var e;let[{project:t,app:n,env:l},{setQuery:a}]=(0,el.o)(),{closeDrawer:s}=eo(),{data:o}=(0,H.x7)({populate:"owner",pagination:{page:0,size:100}}),{list:r=[],pagination:c}=o||{},d=(0,eY.Lw)(n,{filter:{env:l}}),u=(0,eY.i6)({filter:{slug:n,env:l}});return(0,i.jsx)("div",{className:"h-full w-full",children:(0,i.jsxs)("div",{className:"flex h-full w-full flex-col",children:[(0,i.jsx)(eL,{name:"deployment_yaml",formType:"edit",api:{useSlugApi:d,useUpdateApi:u},configs:[{type:"code-editor",name:"deploymentYaml",lang:["yaml"],disabled:!0,wrapperStyle:{display:"flex",width:"100%"}}],className:"flex w-full !overflow-x-auto pb-4"}),(0,i.jsx)(tJ.Z,{className:"px-4 pb-8",value:(null===(e=d.data)||void 0===e?void 0:e.deploymentYaml)||"",mode:"hidden"})]})})};var tX=n(46690);let tH=()=>{var e;let[{env:t,project:n,app:l}]=(0,el.o)(),[a,s]=(0,eY.H1)(),{data:o={},status:r}=(0,eY.im)(l,{populate:"project,owner,workspace"}),c=(0,p.isEmpty)(o)?[]:(null===(e=(o.deployEnvironment||{})[t])||void 0===e?void 0:e.envVars)||[],[u,m]=(0,d.useState)([]),[h]=G.Z.useForm(),g=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return m([...e])};(0,d.useEffect)(()=>{let e=[];(0,p.isArray)(c)?e.push(...c.map((e,t)=>({id:(0,p.uniqueId)(),...e}))):(0,p.isArray)(c)||void 0===c[0]||Object.entries(c).forEach(t=>{let[,n]=t;if(n.name&&n.value){let l={id:(0,p.uniqueId)(),name:n.name,value:n.value};e.push(l)}}),g(e)},[JSON.stringify(c)]);let v=e=>{let t=u.filter(t=>t.name===e).length;return t>1},x=e=>m(t=>t.filter((t,n)=>e!==t.id)),f=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{id:(0,p.uniqueId)(),name:"",value:""};return m(t=>[...t,e])},j=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";m(n=>n.map((n,l)=>n.id===e?{id:e,name:t,value:n.value||""}:n))},y=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";m(n=>n.map((n,l)=>n.id===e?{id:e,name:n.name||"",value:t}:n))},b=async e=>{try{u.forEach(e=>{if((0,p.isEmpty)(e.name))throw Error("Variable's name should not be empty");if((0,tX.i1)(e.name))throw Error("Variable's name (".concat(e.name,") should not be a number"));if(v(e.name))throw Error("Variable's name (".concat(e.name,") should be unique."))}),a&&o.slug&&await a({slug:o.slug,env:t,envVars:u})}catch(n){tv.ZP.error({message:n.toString()})}},Z=e=>{console.log("Failed:",e)};return(0,i.jsxs)(i.Fragment,{children:["loading"===r&&(0,i.jsx)(W.Z,{active:!0}),"error"===r&&(0,i.jsx)($.Z,{message:"Unable to get data at the moment.",type:"error",showIcon:!0}),"success"===r&&(0,i.jsxs)(G.Z,{className:"h-full overflow-auto p-6",layout:"vertical",name:"deployEnvironment.".concat(t,".envVars"),form:h,onFinish:b,onFinishFailed:Z,autoComplete:"off",children:[(0,i.jsxs)(ee.Z,{className:"w-full",direction:"vertical",size:"small",children:[(0,i.jsxs)(ee.Z.Compact,{block:!0,children:[(0,i.jsx)(e4.Z.Text,{className:"w-1/2",children:"Name"}),(0,i.jsx)(e4.Z.Text,{className:"w-1/2",children:"Value"}),(0,i.jsx)("span",{className:"w-[32px]"})]}),(0,p.isEmpty)(u)&&(0,i.jsx)(tC.Z,{}),(u||[]).map((e,t)=>(0,i.jsxs)(ee.Z.Compact,{block:!0,children:[(0,i.jsx)(ey.Z,{className:"!flex-auto",placeholder:"NAME",status:(0,p.isEmpty)(e.name)||(0,tX.i1)(e.name)||v(e.name)?"error":"",value:e.name,onChange:t=>t.currentTarget.value?j(e.id,t.currentTarget.value):null},"env-var-name-input-".concat(e.id)),(0,i.jsx)(ey.Z,{className:"!flex-auto",placeholder:"VALUE",value:e.value,onChange:t=>y(e.id,t.currentTarget.value)},"env-var-value-input-".concat(e.id)),(0,i.jsx)(et.ZP,{tabIndex:-1,icon:(0,i.jsx)(ec.Z,{}),onClick:()=>x(e.id)})]},"env-var-".concat(e.id)))]}),(0,i.jsx)("div",{className:"py-6",children:(0,i.jsx)(et.ZP,{onClick:()=>f(),children:"+ Add variable"})}),(0,i.jsx)(ef,{name:"envVars",apiStatus:s,initialValue:c,setValue:g})]})]})};var tY=n(31739),tG=n(22449),tW=n(53675),t$=n(18405);let t0=n(64814),t1=n(54498);tj().extend(t1),tj().extend(t0);let{useApp:t2}=c.Z,t8=[{title:"Name",width:70,dataIndex:"name",key:"name",filterSearch:!0,filters:[{text:"goon",value:"goon"}],onFilter:(e,t)=>t.name&&t.name.indexOf(e.toString())>-1||!0,render(e,t){var n;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("p",{children:(0,i.jsx)("strong",{children:e})}),(0,i.jsxs)("p",{children:["Revision: ",null!==(a=t.message)&&void 0!==a?a:"-",(0,i.jsx)("br",{}),"Author: ",null!==(s=null===(n=t.owner)||void 0===n?void 0:n.name)&&void 0!==s?s:"-",(0,i.jsx)("br",{}),"Created ",(0,i.jsx)(ty.q,{date:t.createdAt})]})]})}},{title:"Deploy status",dataIndex:"status",key:"status",width:30,filters:[{text:"start",value:"start"},{text:"failed",value:"failed"},{text:"success",value:"success"},{text:"building",value:"building"}],render(e){let t="warning",n=(0,i.jsx)(J.Z,{});switch(e){case"in_progress":t="processing",n=(0,i.jsx)(ed.Z,{className:"align-middle"});break;case"failed":t="error",n=(0,i.jsx)(eh.Z,{className:"align-middle"});break;case"success":t="success",n=(0,i.jsx)(eg.Z,{className:"align-middle"});break;case"cancelled":t="warning",n=(0,i.jsx)(eh.Z,{className:"align-middle"});break;default:t="default",n=(0,i.jsx)(J.Z,{})}return(0,i.jsx)(td.Z,{color:t,icon:n,children:e})}},{title:"Active",dataIndex:"active",key:"active",width:20,filters:[{text:"active",value:!0}],onFilter:(e,t)=>t.active===e,render:e=>!0===e?(0,i.jsx)(td.Z,{color:"blue",icon:(0,i.jsx)(eg.Z,{}),children:"active"}):"-"},{title:"Action",key:"action",width:30,dataIndex:"action",render:e=>e}],t6=()=>{(0,D.useRouter)();let e=t2(),[t]=(0,el.o)(),{modal:n}=c.Z.useApp(),{project:l,app:a,offsetHeader:s=0,env:o="prod"}=t,r={};l&&(r.projectSlug=l),a&&(r.appSlug=a),o&&(r.env=o);let[u,m]=(0,d.useState)(1),{data:h,status:g,refetch:v}=(0,tW.kW)({filter:r,sort:"-createdAt",populate:"owner",pagination:{page:u,size:100}}),{list:x=[],pagination:f}=h||{},{total_items:j}=f||{},y=(0,eY.im)(a,{populate:"owner"}),{data:b}=y,[Z,w]=(0,tW.IX)(),[k,A]=(0,d.useState)(""),[E]=(0,tW.bE)(),N=async t=>{if(v(),(0,p.isEmpty)(t)){e.notification.error({message:"Failed to roll out.",description:"Release not found: ".concat(t),placement:"top"});return}A(t);try{let n=await Z({id:t}),l=(0,p.isArray)(null==n?void 0:n.data)?null==n?void 0:n.data[0]:null==n?void 0:n.data;(null==n?void 0:n.status)&&(v(),e.notification.success({message:"Congrats, the release has been rolled out successfully!",description:(0,i.jsxs)(i.Fragment,{children:["Your website is ready to access on PRODUCTION environment:"," ",(0,i.jsx)("a",{href:"https://".concat(null==l?void 0:l.productionUrl),target:"_blank",rel:"noreferrer",children:null==l?void 0:l.productionUrl})]}),placement:"top"}))}catch(a){console.error("Could not process rolling out this release:",a),e.notification.error({message:"Failed to roll out.",description:"Could not process rolling out this release: ".concat(a),placement:"top"})}A("")},C=(e,t,l)=>{let a=null==n?void 0:n.info({title:(0,i.jsxs)(e4.Z.Title,{level:3,children:["Promote to ",l?l.toUpperCase():"another"," deploy environment"]}),icon:null,content:(0,i.jsx)(t$.Z,{app:e,fromEnv:t,toEnv:l,next(){null==a||a.destroy()}}),footer:null,closable:!0,maskClosable:!0,width:500,bodyStyle:{margin:0,width:"100%",justifyContent:"stretch"},onOk(){}})},S=x.map(e=>({...e,id:e._id,status:k===e._id&&"loading"===w?"in_progress":e.status,action:(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(ee.Z.Compact,{children:[(0,i.jsx)(M.Z,{title:"Roll out",children:(0,i.jsx)(et.ZP,{disabled:k===e._id&&"loading"===w,icon:(0,i.jsx)(tY.Z,{}),onClick:()=>N(e._id)})}),(0,i.jsx)(M.Z,{title:"Promote to another deploy environment",arrow:!1,children:(0,i.jsx)(et.ZP,{icon:(0,i.jsx)(tG.Z,{}),onClick(){b?C(b,o):console.log('App "'.concat(a,'" not found.'))},target:"_blank"})})]})})}));console.log({displayedReleases:S});let P=e=>{let{current:t}=e;m(null!=t?t:1)};return(0,i.jsx)("div",{children:(0,i.jsx)(tx.Z,{loading:"loading"===g,columns:t8,dataSource:S,scroll:{x:600},sticky:{offsetHeader:s},pagination:{current:u,pageSize:100,total:j},onChange:P})})},t4=e=>{let{useSidebar:t}=e,n=eo(),{drawerVisibility:l,showDrawer:a,closeDrawer:s}=n,[o,{setQuery:c,deleteQuery:u,deleteAllQueryKeys:p}]=(0,el.o)(),{lv1:m,lv2:h,type:g,slug:v,project:f,app:j,env:y}=o,{token:{colorText:b}}=r.Z.useToken(),Z=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;a&&a({title:"Builds",content:(0,i.jsx)(tL.w,{})},{level:e})},w=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;a&&a({title:"Releases",content:(0,i.jsx)(t6,{})},{level:e})},k=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;a&&a({title:"Build Logs",content:(0,i.jsx)(tQ.O,{})},{level:e})},A=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;a&&a({title:"Environment Variables",content:(0,i.jsx)(tH,{})},{level:e})},E=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;a&&a({title:"Application Logs (env: ".concat(y||"unknown",")"),content:(0,i.jsx)(tB,{})},{level:e})},N=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;a&&a({title:"Deployment YAML: ".concat(y.toUpperCase()),content:(0,i.jsx)(tM,{})},{level:e})},C=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;a&&a({title:"Deploy Environment: ".concat(y.toUpperCase()),content:(0,i.jsx)(tK,{})},{level:e})},S=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;a&&a({title:"Cloud Database Backups",content:(0,i.jsx)(tA,{})},{level:e})},P=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;a&&a({title:"Edit",content:(0,i.jsx)(e7,{formType:"edit"})},{level:e})},_=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;a&&a({title:"Create",content:(0,i.jsx)(e7,{formType:"new"})},{level:e})};return(0,d.useEffect)(()=>{switch(m){case"build":Z();break;case"build_logs":k(1);break;case"release":w();break;case"new":_();break;case"edit":P();break;case"deploy_environment":C();break;case"env_vars":A();break;case"deployment_yaml":N(1);break;case"app_logs":E();break;case"db_backups":S();break;default:u(["lv1"]),s&&s("lv1")}switch(h){case"build":Z(2);break;case"build_logs":k(2);break;case"release":w(2);break;case"app_logs":E(2);break;case"env_vars":A(2);break;case"deployment_yaml":N(2);break;case"db_backups":S(2);break;default:u(["lv2"]),s&&s("lv2")}},[m,h,f,j,y]),(0,i.jsxs)(x.Z,{hasSider:!0,className:"full-height",children:[e.meta,(0,i.jsx)("div",{className:"full-height fixed z-[102] overflow-visible md:relative md:overflow-y-auto md:overflow-x-hidden",children:t?(0,i.jsx)(K,{}):null}),(0,i.jsxs)(x.Z,{className:"full-height overflow-auto transition-all",children:[t?(0,i.jsx)(tp,{}):null,(0,i.jsx)("div",{className:"flex flex-auto flex-col overflow-auto",children:e.children}),(0,i.jsx)(tn,{})]})]})};function t3(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{components:t=[],children:n,...l}=e;return(0,i.jsx)(i.Fragment,{children:t.reduceRight((t,n)=>(0,d.createElement)(n,{...l,key:e.key},t),n)})}var t5=n(75112);let t9=e=>{let{isDarkMode:t}=(0,u.vs)(),{useSidebar:n=!0}=e;return(0,d.useEffect)(()=>{let e=document.documentElement;e.style.colorScheme=t?"dark":"",t?e.classList.contains("dark")||e.classList.add("dark"):e.classList.contains("dark")&&e.classList.remove("dark")},[t]),(0,i.jsxs)(o.ZP,{theme:{hashed:!1,algorithm:t?r.Z.darkAlgorithm:r.Z.defaultAlgorithm},children:[(0,i.jsx)(c.Z,{children:(0,i.jsx)(t3,{components:[q.ZP,er,t5.ZP],children:(0,i.jsx)(t4,{meta:e.meta,useSidebar:n,children:e.children})})}),(0,i.jsx)(v,{gaIds:["G-QC4124805Q"]})]})}},10769:function(e,t,n){"use strict";n.d(t,{h:function(){return c}});var l=n(11527),a=n(20579),s=n.n(a),i=n(76806),o=n(73157),r=n(2513);let c=e=>{let t=(0,i.useRouter)(),n=window.origin.indexOf("localhost")>-1;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(s(),{children:[(0,l.jsx)("meta",{charSet:"UTF-8"},"charset"),(0,l.jsx)("meta",{name:"viewport",content:"width=device-width,initial-scale=1"},"viewport"),(0,l.jsx)("link",{rel:"apple-touch-icon",href:"".concat(t.basePath,"/apple-touch-icon.png")},"apple"),(0,l.jsx)("link",{rel:"icon",type:"image/png",sizes:"32x32",href:"".concat(t.basePath,"/favicon-32x32.png")},"icon32"),(0,l.jsx)("link",{rel:"icon",type:"image/png",sizes:"16x16",href:"".concat(t.basePath,"/favicon-16x16.png")},"icon16"),(0,l.jsx)("link",{rel:"icon",href:"".concat(t.basePath,"/favicon").concat(n?"-red":"",".ico")},"favicon")]}),(0,l.jsx)(o.PB,{title:"".concat(e.title," | ").concat(r.XL.site_name),description:e.description,canonical:e.canonical,openGraph:{title:e.title,description:e.description,url:e.canonical,locale:r.XL.locale,site_name:r.XL.site_name}}),(0,l.jsx)("link",{href:"https://cdn.jsdelivr.net/npm/remixicon@2.5.0/fonts/remixicon.css",rel:"stylesheet"})]})}},2513:function(e,t,n){"use strict";n.d(t,{De:function(){return o},XL:function(){return i},r8:function(){return r}});var l=n(78207);n(32699);var a=n(24140);let s={DEVELOPMENT:"development",STAGING:"staging",CANARY:"canary",PRODUCTION:"production"},i={site_name:"DXUP",title:"DXUP",description:"Welcome to the Dashboard of DXUP.",locale:"en",tableConfig:{defaultPageSize:50}};class o{static get DX_SITE(){return"development"===this.NEXT_PUBLIC_ENV?"http://localhost:4000":"https://diginext.site"}static get ENV(){return this.grab("NODE_ENV","development").toUpperCase()}static get NEXT_PUBLIC_BASE_PATH(){return""}static getBasePath(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",{NEXT_PUBLIC_BASE_PATH:t}=this;return(""===t?t:"/".concat(t))+e}static path(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.getBasePath(e)}static get NEXT_PUBLIC_ENV(){return"production"}static get NEXT_PUBLIC_API_BASE_URL(){return window.location.origin.indexOf("localhost")>-1?"https://app.dxup.dev":window.location.origin}static get NEXT_PUBLIC_DOMAIN(){return"dxup.dev"}static get NEXT_PUBLIC_BASE_URL(){return window.location.origin}static get DISABLE_INPECT_MEMORY(){return(0,l.AM)(this.grab("DISABLE_INPECT_MEMORY"))}static get SECONDS_INPECT_MEMORY(){return(0,l.Hq)(this.grab("SECONDS_INPECT_MEMORY"))}static get CORS_WHITELIST(){return a.env.CORS_WHITELIST?a.env.CORS_WHITELIST.split(";"):["localhost","192.168","127.0","digitop.vn","diginext.site","diginext.vn"]}}o.grab=function(e){var t;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",l={...a.env};return null!==(t=l[e])&&void 0!==t?t:n};let r=()=>o.NEXT_PUBLIC_ENV===s.DEVELOPMENT},64711:function(){},72350:function(){},75104:function(){},16854:function(){}}]);