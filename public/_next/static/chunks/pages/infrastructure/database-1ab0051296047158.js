(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3755],{92810:function(e,t,a){"use strict";a.d(t,{Z:function(){return l}});var n=a(30001),s=a(50959),i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M536.1 273H488c-4.4 0-8 3.6-8 8v275.3c0 2.6 1.2 5 3.3 6.5l165.3 120.7c3.6 2.6 8.6 1.9 11.2-1.7l28.6-39c2.7-3.7 1.9-8.7-1.7-11.2L544.1 528.5V281c0-4.4-3.6-8-8-8zm219.8 75.2l156.8 38.3c5 1.2 9.9-2.6 9.9-7.7l.8-161.5c0-6.7-7.7-10.5-12.9-6.3L752.9 334.1a8 8 0 003 14.1zm167.7 301.1l-56.7-19.5a8 8 0 00-10.1 4.8c-1.9 5.1-3.9 10.1-6 15.1-17.8 42.1-43.3 80-75.9 112.5a353 353 0 01-112.5 75.9 352.18 352.18 0 01-137.7 27.8c-47.8 0-94.1-9.3-137.7-27.8a353 353 0 01-112.5-75.9c-32.5-32.5-58-70.4-75.9-112.5A353.44 353.44 0 01171 512c0-47.8 9.3-94.2 27.8-137.8 17.8-42.1 43.3-80 75.9-112.5a353 353 0 01112.5-75.9C430.6 167.3 477 158 524.8 158s94.1 9.3 137.7 27.8A353 353 0 01775 261.7c10.2 10.3 19.8 21 28.6 32.3l59.8-46.8C784.7 146.6 662.2 81.9 524.6 82 285 82.1 92.6 276.7 95 516.4 97.4 751.9 288.9 942 524.8 942c185.5 0 343.5-117.6 403.7-282.3 1.5-4.2-.7-8.9-4.9-10.4z"}}]},name:"history",theme:"outlined"},c=a(94590),r=function(e,t){return s.createElement(c.Z,(0,n.Z)((0,n.Z)({},e),{},{ref:t,icon:i}))};r.displayName="HistoryOutlined";var l=s.forwardRef(r)},5433:function(e,t,a){"use strict";var n=a(2734),s=a(50959),i=a(72096),c=a(19589),r=a(89107);let l=null,o=e=>e(),d=[],u={},f=s.forwardRef((e,t)=>{let[a,n]=s.useState(),[c,l]=s.useState(),[o,d]=s.useState(),[f,h]=s.useState(),[p,x]=s.useState(),[m,v]=s.useState(),[g,b]=(0,r.k)({prefixCls:a,getContainer:()=>c,maxCount:o,rtl:f,top:p,bottom:m}),y=(0,i.w6)(),Z=y.getRootPrefixCls(),j=y.getIconPrefixCls(),k=()=>{let{prefixCls:e,container:t,maxCount:a,rtl:s,top:c,bottom:r}=function(){let{prefixCls:e,getContainer:t,rtl:a,maxCount:n,top:s,bottom:c}=u,r=null!=e?e:(0,i.w6)().getPrefixCls("notification"),l=(null==t?void 0:t())||document.body;return{prefixCls:r,container:l,rtl:a,maxCount:n,top:s,bottom:c}}();n(e),l(t),d(a),h(s),x(c),v(r)};return s.useEffect(k,[]),s.useImperativeHandle(t,()=>{let e=Object.assign({},g);return Object.keys(e).forEach(t=>{e[t]=function(){return k(),g[t].apply(g,arguments)}}),{instance:e,sync:k}}),s.createElement(i.ZP,{prefixCls:Z,iconPrefixCls:j},b)});function h(){if(!l){let e=document.createDocumentFragment(),t={fragment:e};l=t,o(()=>{(0,n.s)(s.createElement(f,{ref(e){let{instance:a,sync:n}=e||{};Promise.resolve().then(()=>{!t.instance&&a&&(t.instance=a,t.sync=n,h())})}}),e)});return}l.instance&&(d.forEach(e=>{switch(e.type){case"open":o(()=>{l.instance.open(Object.assign(Object.assign({},u),e.config))});break;case"destroy":o(()=>{null==l||l.instance.destroy(e.key)})}}),d=[])}function p(e){d.push({type:"open",config:e}),h()}let x={open:p,destroy:function(e){d.push({type:"destroy",key:e}),h()},config:function(e){u=Object.assign(Object.assign({},u),e),o(()=>{var e;null===(e=null==l?void 0:l.sync)||void 0===e||e.call(l)})},useNotification:r.Z,_InternalPanelDoNotUseOrYouWillBeFired:c.ZP},m=x;["success","info","warning","error"].forEach(e=>{m[e]=t=>p(Object.assign(Object.assign({},t),{type:e}))}),t.Z=m},28709:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/infrastructure/database",function(){return a(60237)}])},60237:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return L}});var n,s=a(11527),i=a(2154),c=a(30001),r=a(50959),l={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M518.3 459a8 8 0 00-12.6 0l-112 141.7a7.98 7.98 0 006.3 12.9h73.9V856c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V613.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 459z"}},{tag:"path",attrs:{d:"M811.4 366.7C765.6 245.9 648.9 160 512.2 160S258.8 245.8 213 366.6C127.3 389.1 64 467.2 64 560c0 110.5 89.5 200 199.9 200H304c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8h-40.1c-33.7 0-65.4-13.4-89-37.7-23.5-24.2-36-56.8-34.9-90.6.9-26.4 9.9-51.2 26.2-72.1 16.7-21.3 40.1-36.8 66.1-43.7l37.9-9.9 13.9-36.6c8.6-22.8 20.6-44.1 35.7-63.4a245.6 245.6 0 0152.4-49.9c41.1-28.9 89.5-44.2 140-44.2s98.9 15.3 140 44.2c19.9 14 37.5 30.8 52.4 49.9 15.1 19.3 27.1 40.7 35.7 63.4l13.8 36.5 37.8 10C846.1 454.5 884 503.8 884 560c0 33.1-12.9 64.3-36.3 87.7a123.07 123.07 0 01-87.6 36.3H720c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h40.1C870.5 760 960 670.5 960 560c0-92.7-63.1-170.7-148.6-193.3z"}}]},name:"cloud-upload",theme:"outlined"},o=a(94590),d=function(e,t){return r.createElement(o.Z,(0,c.Z)((0,c.Z)({},e),{},{ref:t,icon:l}))};d.displayName="CloudUploadOutlined";var u=r.forwardRef(d),f={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M945 412H689c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h256c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8zM811 548H689c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h122c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8zM477.3 322.5H434c-6.2 0-11.2 5-11.2 11.2v248c0 3.6 1.7 6.9 4.6 9l148.9 108.6c5 3.6 12 2.6 15.6-2.4l25.7-35.1v-.1c3.6-5 2.5-12-2.5-15.6l-126.7-91.6V333.7c.1-6.2-5-11.2-11.1-11.2z"}},{tag:"path",attrs:{d:"M804.8 673.9H747c-5.6 0-10.9 2.9-13.9 7.7a321 321 0 01-44.5 55.7 317.17 317.17 0 01-101.3 68.3c-39.3 16.6-81 25-124 25-43.1 0-84.8-8.4-124-25-37.9-16-72-39-101.3-68.3s-52.3-63.4-68.3-101.3c-16.6-39.2-25-80.9-25-124 0-43.1 8.4-84.7 25-124 16-37.9 39-72 68.3-101.3 29.3-29.3 63.4-52.3 101.3-68.3 39.2-16.6 81-25 124-25 43.1 0 84.8 8.4 124 25 37.9 16 72 39 101.3 68.3a321 321 0 0144.5 55.7c3 4.8 8.3 7.7 13.9 7.7h57.8c6.9 0 11.3-7.2 8.2-13.3-65.2-129.7-197.4-214-345-215.7-216.1-2.7-395.6 174.2-396 390.1C71.6 727.5 246.9 903 463.2 903c149.5 0 283.9-84.6 349.8-215.8a9.18 9.18 0 00-8.2-13.3z"}}]},name:"field-time",theme:"outlined"},h=function(e,t){return r.createElement(o.Z,(0,c.Z)((0,c.Z)({},e),{},{ref:t,icon:f}))};h.displayName="FieldTimeOutlined";var p=r.forwardRef(h),x=a(92810),m=a(13740),v=a(78177),g=a(67918),b=a(58699),y=a(85273),Z=a(46457),j=a(5433),k=a(36865),w=a(88158),C=a(61663),E=a(75921),_=a(74637),P=a.n(_),N=a(32699),O=a(64718),S=a(58012),z=a(97591),A=a(49309),H=a(90400),I=a(13557);let T=a(64814),B=a(54498);P().extend(B),P().extend(T);let R=null!==(n=I.XL.tableConfig.defaultPageSize)&&void 0!==n?n:20,D=()=>{let{responsive:e}=(0,H.Jl)(),[t,a]=(0,r.useState)(1),{data:n,status:i}=(0,O.EF)({populate:"owner,autoBackup",pagination:{page:t,size:R}}),{list:c,pagination:l}=n||{},{total_items:o}=l||{},[d]=(0,O.QB)(),[f]=(0,O.v_)(),[h]=(0,O.RT)(),[_]=(0,O.CS)(),[I,{setQuery:T}]=(0,A.o)(),B=[{title:"Name",width:50,dataIndex:"name",key:"name",render:(e,t)=>(0,s.jsx)(b.ZP,{type:"link",onClick:()=>T({lv1:"edit",type:"database",database:t.slug}),style:{overflowWrap:"break-word",whiteSpace:"pre-wrap",textAlign:"left"},children:e}),fixed:(null==e?void 0:e.md)?"left":void 0,filterSearch:!0,filters:[{text:"goon",value:"goon"}],onFilter:(e,t)=>!t.name||t.name.indexOf(e.toString())>-1},{title:"Type",dataIndex:"type",key:"type",width:20,render:(e,t)=>(0,s.jsx)(y.Z,{children:e})},{title:"Verified",dataIndex:"verified",key:"verified",width:20,render:(e,t)=>t.verified?(0,s.jsx)(y.Z,{color:"success",children:"YES"}):(0,s.jsx)(y.Z,{color:"error",children:"NO"})},{title:"Auto-backup",dataIndex:"auto-backup",key:"auto-backup",width:20,render:(e,t)=>(0,N.isEmpty)(t.autoBackup)?(0,s.jsx)(y.Z,{color:"error",children:"NO"}):t.autoBackup.active?(0,s.jsx)(y.Z,{color:"success",children:"YES"}):(0,s.jsx)(y.Z,{color:"volcano",children:"STOPPED"})},{title:"Created by",dataIndex:"owner",key:"owner",width:30,render:(e,t)=>(0,s.jsx)(s.Fragment,{children:null==t?void 0:t.owner.name})},{title:"Created at",dataIndex:"createdAt",key:"createdAt",width:25,render:e=>(0,s.jsx)(S.q,{date:e}),sorter:(e,t)=>P()(e.createdAt).diff(P()(t.createdAt))},{title:(0,s.jsx)(Z.Z.Text,{className:"text-xs md:text-sm",children:"Action"}),key:"action",fixed:"right",width:(null==e?void 0:e.md)?30:26,render:(e,t)=>t.actions}],D=async e=>{e||j.Z.error({message:"Unable to backup."});let t=await f({_id:e});(null==t?void 0:t.status)&&j.Z.success({message:"Database has been backed up successfully."})},F=async e=>{e||j.Z.error({message:"Unable to auto backup."});let t=await _({_id:e});(null==t?void 0:t.status)&&j.Z.success({message:"Database has been enabled auto-backup."})},M=async e=>{e||j.Z.error({message:"Unable to delete this item."});let t=await d({_id:e});(null==t?void 0:t.status)&&j.Z.success({message:"Item deleted successfully."})},V=e=>{let{current:t}=e;t&&a(t)},L=(null==c?void 0:c.map((e,t)=>({...e,actions:(0,s.jsxs)(k.Z.Compact,{children:[(0,s.jsx)(w.Z,{overlay:"Run backup",children:(0,s.jsx)(b.ZP,{icon:(0,s.jsx)(u,{}),onClick:()=>D(null==e?void 0:e._id)})}),(0,s.jsx)(w.Z,{overlay:"Enable auto-backup",children:(0,s.jsx)(b.ZP,{icon:(0,s.jsx)(p,{}),onClick:()=>F(null==e?void 0:e._id)})}),(0,s.jsx)(w.Z,{overlay:"Backup history",children:(0,s.jsx)(b.ZP,{icon:(0,s.jsx)(x.Z,{}),onClick:()=>j.Z.warning({message:"This feature is under development"})})}),(0,s.jsx)(C.Z,{title:"Are you sure to delete this item?",description:(0,s.jsx)("span",{className:"text-red-500",children:"Caution: this is permanent and cannot be rolled back."}),onConfirm:()=>M(e._id),okText:"Yes",cancelText:"No",children:(0,s.jsx)(b.ZP,{icon:(0,s.jsx)(m.Z,{})})})]})})))||[],U=(0,r.useRef)(null),W=(0,g.Z)(U);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(z.V,{title:"Databases (".concat(null!=o?o:"-",")"),breadcrumbs:[{name:"Workspace"}],actions:[(0,s.jsx)(b.ZP,{type:"default",icon:(0,s.jsx)(v.Z,{className:"align-middle"}),onClick:()=>T({lv1:"new",type:"database"}),children:"Add"},"workspace-setting-btn")]}),(0,s.jsx)("div",{className:"h-full flex-auto overflow-hidden",ref:U,children:(0,s.jsx)(E.Z,{sticky:!0,size:"small",loading:"loading"===i,columns:B,dataSource:L,scroll:{x:1e3,y:void 0!==(null==W?void 0:W.height)?W.height-100:void 0},pagination:{pageSize:R,total:o,position:["bottomCenter"]},onChange:V})})]})};var F=a(7021),M=a(24810);let V=()=>(0,s.jsx)(i.Wk,{children:(0,s.jsx)(F.o,{meta:(0,s.jsx)(M.h,{title:"Databases",description:"List of cloud databases."}),children:(0,s.jsx)(D,{})})});var L=V}},function(e){e.O(0,[8201,2967,5775,9780,9774,2888,179],function(){return e(e.s=28709)}),_N_E=e.O()}]);