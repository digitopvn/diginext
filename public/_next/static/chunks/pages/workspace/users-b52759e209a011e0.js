(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8875],{35396:function(e,t,i){"use strict";var n=i(30001),l=i(50959),a=i(62658),r=i(94590),s=function(e,t){return l.createElement(r.Z,(0,n.Z)((0,n.Z)({},e),{},{ref:t,icon:a.Z}))};s.displayName="EditOutlined",t.Z=l.forwardRef(s)},74555:function(e,t,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/workspace/users",function(){return i(96076)}])},13861:function(e,t,i){"use strict";i.d(t,{Hg:function(){return r},av:function(){return l},hv:function(){return a}});var n=i(19005);let l=e=>(0,n.FF)(["workspaces"],"/api/v1/workspace",e),a=e=>(0,n.yt)(["workspaces"],"/api/v1/workspace",e),r=e=>(0,n.FF)(["workspaces","invite"],"/api/v1/workspace/invite",e)},96076:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return J}});var n,l=i(11527),a=i(2154),r=i(97591),s=i(30001),o=i(50959),d={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M678.3 642.4c24.2-13 51.9-20.4 81.4-20.4h.1c3 0 4.4-3.6 2.2-5.6a371.67 371.67 0 00-103.7-65.8c-.4-.2-.8-.3-1.2-.5C719.2 505 759.6 431.7 759.6 349c0-137-110.8-248-247.5-248S264.7 212 264.7 349c0 82.7 40.4 156 102.6 201.1-.4.2-.8.3-1.2.5-44.7 18.9-84.8 46-119.3 80.6a373.42 373.42 0 00-80.4 119.5A373.6 373.6 0 00137 888.8a8 8 0 008 8.2h59.9c4.3 0 7.9-3.5 8-7.8 2-77.2 32.9-149.5 87.6-204.3C357 628.2 432.2 597 512.2 597c56.7 0 111.1 15.7 158 45.1a8.1 8.1 0 008.1.3zM512.2 521c-45.8 0-88.9-17.9-121.4-50.4A171.2 171.2 0 01340.5 349c0-45.9 17.9-89.1 50.3-121.6S466.3 177 512.2 177s88.9 17.9 121.4 50.4A171.2 171.2 0 01683.9 349c0 45.9-17.9 89.1-50.3 121.6C601.1 503.1 558 521 512.2 521zM880 759h-84v-84c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v84h-84c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h84v84c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-84h84c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8z"}}]},name:"user-add",theme:"outlined"},c=i(94590),u=function(e,t){return o.createElement(c.Z,(0,s.Z)((0,s.Z)({},e),{},{ref:t,icon:d}))};u.displayName="UserAddOutlined";var f=o.forwardRef(u),x=i(48274),h=i(58699),m=i(85273),p=i(99678),g=i(50002),_=i(46457),v=i(3748),F=i(68802),y=i.n(F),w=i(13861);let j=[],b=e=>{let{label:t,value:i,closable:n,onClose:a,color:r}=e,s=e=>{e.preventDefault(),e.stopPropagation()};return(0,l.jsx)(m.Z,{color:y()(i)?"default":"error",onMouseDown:s,closable:n,onClose:a,style:{marginRight:3},children:t})},k=()=>{let e=p.Z.useApp(),[t]=g.Z.useForm(),[i,n]=(0,o.useState)(!1),[a]=(0,w.Hg)(),r=()=>{t.resetFields(["emails"])},s=e=>{console.log("selected:",e),n(e.filter(e=>y()(e)).length>0)},d=async t=>{console.log("data :>> ",t);let i=await a(t);(null==i?void 0:i.status)&&(r(),e.modal.success({title:"Congrats!",content:(0,l.jsx)(l.Fragment,{children:"Invitation emails have been sent successfully."}),closable:!0}))},c=t=>{console.log("Failed:",t),e.notification.error({message:"Failed",description:"Something is wrong."})};return(0,l.jsxs)("div",{children:[(0,l.jsx)(_.Z.Title,{level:4,children:"Emails"}),(0,l.jsxs)(g.Z,{name:"invite",form:t,onFinish:d,onFinishFailed:c,children:[(0,l.jsx)(g.Z.Item,{name:"emails",children:(0,l.jsx)(v.Z,{style:{width:300},mode:"tags",showArrow:!1,onChange:s,tokenSeparators:[","," "],options:j,tagRender:e=>b(e),dropdownRender:e=>(0,l.jsx)(l.Fragment,{})})}),(0,l.jsx)(g.Z.Item,{children:(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,l.jsx)(h.ZP,{type:"primary",htmlType:"submit",disabled:!i,children:"Invite"}),(0,l.jsx)(h.ZP,{children:"Clear"})]})})]})]})},Z=()=>(0,l.jsx)(x.Z,{placement:"bottomRight",trigger:"click",content:(0,l.jsx)(k,{}),children:(0,l.jsx)(h.ZP,{type:"default",icon:(0,l.jsx)(f,{className:"align-middle"}),children:"Invite"},"workspace-setting-btn")});var C=i(35396),A=i(13740),S=i(30388),E=i(5433),N=i(36865),I=i(61663),P=i(75921),D=i(74637),R=i.n(D),$=i(22820),z=i(58012),O=i(49309),q=i(90400),M=i(13557);let T=i(64814),U=i(54498);R().extend(U),R().extend(T);let W=null!==(n=M.XL.tableConfig.defaultPageSize)&&void 0!==n?n:20,L=()=>{let{responsive:e}=(0,q.Jl)(),t=[{title:"Name",width:60,dataIndex:"name",key:"name",fixed:(null==e?void 0:e.md)?"left":void 0,filterSearch:!0,filters:[{text:"goon",value:"goon"}],onFilter:(e,t)=>!t.name||t.name.indexOf(e.toString())>-1},{title:"User name",dataIndex:"slug",key:"slug",width:50,filterSearch:!0,filters:[{text:"goon",value:"goon"}],render:e=>(0,l.jsx)(h.ZP,{type:"link",style:{padding:0},children:e}),onFilter:(e,t)=>!t.slug||t.slug.indexOf(e.toString())>-1},{title:"Email",dataIndex:"email",key:"email",width:80},{title:"Roles",dataIndex:"roles",key:"roles",width:40,filterSearch:!0,filters:[{text:"goon",value:"goon"}],render(e){var t;return(0,l.jsx)(l.Fragment,{children:null===(t=e[0])||void 0===t?void 0:t.name})}},{title:"Updated at",dataIndex:"updatedAt",key:"updatedAt",width:50,render:e=>(0,l.jsx)(z.q,{date:e}),sorter:(e,t)=>R()(e.updatedAt).diff(R()(t.updatedAt))},{title:"Created at",dataIndex:"createdAt",key:"createdAt",width:50,render:e=>(0,l.jsx)(z.q,{date:e}),sorter:(e,t)=>R()(e.createdAt).diff(R()(t.createdAt))},{title:(0,l.jsx)(_.Z.Text,{className:"text-xs md:text-sm",children:"Action"}),key:"action",fixed:"right",width:(null==e?void 0:e.md)?30:26,render:(e,t)=>t.actions}],[i,n]=(0,o.useState)(1),{data:a,status:r}=(0,$.mO)({populate:"roles,teams",pagination:{page:i,size:W}}),{list:s,pagination:d}=a||{},{total_items:c}=d||{};console.log("users :>> ",s);let[u]=(0,$.kZ)(),[f,{setQuery:x}]=(0,O.o)(),m=async e=>{let t=await u({_id:e});(null==t?void 0:t.status)&&E.Z.success({message:"Item deleted successfully."})},p=e=>{let{current:t}=e;t&&n(t)},g=(null==s?void 0:s.map((e,t)=>({...e,actions:(0,l.jsxs)(N.Z.Compact,{children:[(0,l.jsx)(h.ZP,{icon:(0,l.jsx)(C.Z,{}),onClick:()=>x({lv1:"edit",type:"user",user:e.slug})}),(0,l.jsx)(I.Z,{title:"Are you sure to delete this item?",description:(0,l.jsx)("span",{className:"text-red-500",children:"Caution: this is permanent and cannot be rolled back."}),onConfirm:()=>m(e._id),okText:"Yes",cancelText:"No",children:(0,l.jsx)(h.ZP,{icon:(0,l.jsx)(A.Z,{})})})]})})))||[],v=(0,o.useRef)(null),F=(0,S.Z)(v);return(0,l.jsx)("div",{className:"h-full flex-auto overflow-hidden",ref:v,children:(0,l.jsx)(P.Z,{sticky:!0,size:"small",loading:"loading"===r,columns:t,dataSource:g,scroll:{x:1e3,y:void 0!==(null==F?void 0:F.height)?F.height-140:void 0},pagination:{pageSize:W,total:c,position:["bottomCenter"]},onChange:p})})};var X=i(27481),H=i(24810);let B=()=>(0,l.jsx)(a.Wk,{children:(0,l.jsxs)(X.o,{meta:(0,l.jsx)(H.h,{title:"Users",description:"List of users in the workspace."}),children:[(0,l.jsx)(r.V,{title:"Users",breadcrumbs:[{name:"Workspace"}],actions:[(0,l.jsx)(Z,{},"invite-member-btn")]}),(0,l.jsx)(L,{})]})});var J=B},71827:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){(0,l.default)(e),"object"===a(t)?(i=t.min||0,n=t.max):(i=arguments[1],n=arguments[2]);var i,n,r=encodeURI(e).split(/%..|./).length-1;return r>=i&&(void 0===n||r<=n)};var n,l=(n=i(5923))&&n.__esModule?n:{default:n};function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e.exports=t.default,e.exports.default=t.default},68802:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if((0,n.default)(e),(t=(0,l.default)(t,d)).require_display_name||t.allow_display_name){var i=e.match(c);if(i){var o,p,g=i[1];if(e=e.replace(g,"").replace(/(^<|>$)/g,""),g.endsWith(" ")&&(g=g.slice(0,-1)),!(p=(o=g).replace(/^"(.+)"$/,"$1")).trim()||/[\.";<>]/.test(p)&&(p===o||p.split('"').length!==p.split('\\"').length))return!1}else if(t.require_display_name)return!1}if(!t.ignore_max_length&&e.length>254)return!1;var _=e.split("@"),v=_.pop(),F=v.toLowerCase();if(t.host_blacklist.includes(F)||t.host_whitelist.length>0&&!t.host_whitelist.includes(F))return!1;var y=_.join("@");if(t.domain_specific_validation&&("gmail.com"===F||"googlemail.com"===F)){var w=(y=y.toLowerCase()).split("+")[0];if(!(0,a.default)(w.replace(/\./g,""),{min:6,max:30}))return!1;for(var j=w.split("."),b=0;b<j.length;b++)if(!f.test(j[b]))return!1}if(!1===t.ignore_max_length&&(!(0,a.default)(y,{max:64})||!(0,a.default)(v,{max:254})))return!1;if(!(0,r.default)(v,{require_tld:t.require_tld,ignore_max_length:t.ignore_max_length})){if(!t.allow_ip_domain)return!1;if(!(0,s.default)(v)){if(!v.startsWith("[")||!v.endsWith("]"))return!1;var k=v.slice(1,-1);if(0===k.length||!(0,s.default)(k))return!1}}if('"'===y[0])return y=y.slice(1,y.length-1),t.allow_utf8_local_part?m.test(y):x.test(y);for(var Z=t.allow_utf8_local_part?h:u,C=y.split("."),A=0;A<C.length;A++)if(!Z.test(C[A]))return!1;return!t.blacklisted_chars||-1===y.search(RegExp("[".concat(t.blacklisted_chars,"]+"),"g"))};var n=o(i(5923)),l=o(i(94983)),a=o(i(71827)),r=o(i(30314)),s=o(i(45947));function o(e){return e&&e.__esModule?e:{default:e}}var d={allow_display_name:!1,require_display_name:!1,allow_utf8_local_part:!0,require_tld:!0,blacklisted_chars:"",ignore_max_length:!1,host_blacklist:[],host_whitelist:[]},c=/^([^\x00-\x1F\x7F-\x9F\cX]+)</i,u=/^[a-z\d!#\$%&'\*\+\-\/=\?\^_`{\|}~]+$/i,f=/^[a-z\d]+$/,x=/^([\s\x01-\x08\x0b\x0c\x0e-\x1f\x7f\x21\x23-\x5b\x5d-\x7e]|(\\[\x01-\x09\x0b\x0c\x0d-\x7f]))*$/i,h=/^[a-z\d!#\$%&'\*\+\-\/=\?\^_`{\|}~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+$/i,m=/^([\s\x01-\x08\x0b\x0c\x0e-\x1f\x7f\x21\x23-\x5b\x5d-\x7e\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|(\\[\x01-\x09\x0b\x0c\x0d-\x7f\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))*$/i;e.exports=t.default,e.exports.default=t.default}},function(e){e.O(0,[8201,2967,6839,5932,9774,2888,179],function(){return e(e.s=74555)}),_N_E=e.O()}]);