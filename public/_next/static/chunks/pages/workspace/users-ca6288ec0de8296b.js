(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[875],{83630:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/workspace/users",function(){return n(30612)}])},66830:function(e,t,n){"use strict";n.d(t,{Hg:function(){return l},av:function(){return i},hv:function(){return r}});var s=n(83360);let i=e=>(0,s.FF)(["workspaces"],"/api/v1/workspace",e),r=e=>(0,s.yt)(["workspaces"],"/api/v1/workspace",e),l=e=>(0,s.FF)(["workspaces","invite"],"/api/v1/workspace/invite",e)},81289:function(e,t,n){"use strict";n.d(t,{D:function(){return h},V:function(){return m}});var s=n(11527),i=n(95752),r=n(99513),l=n(18467),a=n(515),o=n(82129),d=n(8290),c=n(20193),u=n(95954),x=n(85276);function h(e){let{token:{colorTextHeading:t}}=a.Z.useToken(),{isDarkMode:n}=(0,x.vs)(),{color:i=n?"white":"black",value:r}=e;return(0,s.jsx)("h1",{className:"my-0 grow py-0 pt-2 text-xl font-bold",style:{color:i},children:r})}let m=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,u.useRouter)(),{breadcrumbs:n=[],title:x="Page Title",actions:m=[(0,s.jsx)(o.ZP,{type:"default",icon:(0,s.jsx)(i.Z,{className:"align-middle"}),children:"Settings"},"workspace-setting-btn"),(0,s.jsx)(o.ZP,{type:"default",icon:(0,s.jsx)(r.Z,{className:"align-middle"})},"more-btn")]}=e,{token:{colorTextHeading:p}}=a.Z.useToken();return(0,s.jsxs)("div",{className:"border-b border-gray-300 px-6 py-4",children:[(0,s.jsxs)(d.Z,{children:[(0,s.jsx)(d.Z.Item,{href:"".concat(t.basePath,"/"),children:(0,s.jsx)(l.Z,{})},"breadcrumb-home"),n.map((e,t)=>(0,s.jsxs)(d.Z.Item,{href:e.url,children:[e.icon,(0,s.jsx)("span",{children:e.name})]},"breadcrumb-".concat(t)))]}),(0,s.jsxs)("div",{className:" flex w-full flex-row",children:[(0,s.jsx)(h,{value:x}),(0,s.jsx)("div",{children:(0,s.jsx)(c.Z,{children:m})})]})]})}},30612:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return L}});var s,i=n(11527),r=n(66109),l=n(81289),a=n(42581),o=n(89875),d=n(82129),c=n(3741),u=n(34113),x=n(31326),h=n(17434),m=n(95568),p=n(50959),g=n(68802),f=n.n(g),j=n(66830);let v=[],k=e=>{let{label:t,value:n,closable:s,onClose:r,color:l}=e,a=e=>{e.preventDefault(),e.stopPropagation()};return(0,i.jsx)(c.Z,{color:f()(n)?"default":"error",onMouseDown:a,closable:s,onClose:r,style:{marginRight:3},children:t})},w=()=>{let e=u.Z.useApp(),[t]=x.Z.useForm(),[n,s]=(0,p.useState)(!1),[r]=(0,j.Hg)(),l=()=>{t.resetFields(["emails"])},a=e=>{console.log("selected:",e),s(e.filter(e=>f()(e)).length>0)},o=async t=>{console.log("data :>> ",t);let n=await r(t);(null==n?void 0:n.status)&&(l(),e.modal.success({title:"Congrats!",content:(0,i.jsx)(i.Fragment,{children:"Invitation emails have been sent successfully."}),closable:!0}))},c=t=>{console.log("Failed:",t),e.notification.error({message:"Failed",description:"Something is wrong."})};return(0,i.jsxs)("div",{children:[(0,i.jsx)(h.Z.Title,{level:4,children:"Emails"}),(0,i.jsxs)(x.Z,{name:"invite",form:t,onFinish:o,onFinishFailed:c,children:[(0,i.jsx)(x.Z.Item,{name:"emails",children:(0,i.jsx)(m.Z,{style:{width:300},mode:"tags",showArrow:!1,onChange:a,tokenSeparators:[","," "],options:v,tagRender:e=>k(e),dropdownRender:e=>(0,i.jsx)(i.Fragment,{})})}),(0,i.jsx)(x.Z.Item,{children:(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,i.jsx)(d.ZP,{type:"primary",htmlType:"submit",disabled:!n,children:"Invite"}),(0,i.jsx)(d.ZP,{children:"Clear"})]})})]})]})},Z=()=>(0,i.jsx)(o.Z,{placement:"bottomRight",trigger:"click",content:(0,i.jsx)(w,{}),children:(0,i.jsx)(d.ZP,{type:"default",icon:(0,i.jsx)(a.Z,{className:"align-middle"}),children:"Invite"},"workspace-setting-btn")});var y=n(79908),b=n(5962),F=n(25857),N=n(20193),I=n(42741),P=n(39658),_=n(74637),C=n.n(_),A=n(49113),S=n(1830),T=n(32365),E=n(74883);let R=n(64814),O=n(54498);C().extend(O),C().extend(R);let U=[{title:"Name",width:60,dataIndex:"name",key:"name",fixed:"left",filterSearch:!0,filters:[{text:"goon",value:"goon"}],onFilter:(e,t)=>!t.name||t.name.indexOf(e.toString())>-1},{title:"User name",dataIndex:"slug",key:"slug",width:50,filterSearch:!0,filters:[{text:"goon",value:"goon"}],render:e=>(0,i.jsx)(d.ZP,{type:"link",style:{padding:0},children:e}),onFilter:(e,t)=>!t.slug||t.slug.indexOf(e.toString())>-1},{title:"Email",dataIndex:"email",key:"email",width:80},{title:"Roles",dataIndex:"roles",key:"roles",width:40,filterSearch:!0,filters:[{text:"goon",value:"goon"}],render:e=>{var t;return(0,i.jsx)(i.Fragment,{children:null===(t=e[0])||void 0===t?void 0:t.name})}},{title:"Updated at",dataIndex:"updatedAt",key:"updatedAt",width:50,render:e=>(0,i.jsx)(S.q,{date:e}),sorter:(e,t)=>C()(e.updatedAt).diff(C()(t.updatedAt))},{title:"Created at",dataIndex:"createdAt",key:"createdAt",width:50,render:e=>(0,i.jsx)(S.q,{date:e}),sorter:(e,t)=>C()(e.createdAt).diff(C()(t.createdAt))},{title:"Action",key:"action",width:50,fixed:"right",render:(e,t)=>t.actions}],D=null!==(s=E.XL.tableConfig.defaultPageSize)&&void 0!==s?s:20,H=()=>{let[e,t]=(0,p.useState)(1),{data:n}=(0,A.mO)({populate:"roles,teams",pagination:{page:e,size:D}}),{list:s,pagination:r}=n||{},{total_items:l}=r||{};console.log("users :>> ",s);let[a]=(0,A.kZ)(),[o,{setQuery:c}]=(0,T.o)(),u=async e=>{let t=await a({_id:e});(null==t?void 0:t.status)&&F.Z.success({message:"Item deleted successfully."})},x=e=>{let{current:n}=e;n&&t(n)},h=(null==s?void 0:s.map((e,t)=>({...e,actions:(0,i.jsxs)(N.Z.Compact,{children:[(0,i.jsx)(d.ZP,{icon:(0,i.jsx)(y.Z,{}),onClick:()=>c({lv1:"edit",type:"user",user:e.slug})}),(0,i.jsx)(I.Z,{title:"Are you sure to delete this item?",description:(0,i.jsx)("span",{className:"text-red-500",children:"Caution: this is permanent and cannot be rolled back."}),onConfirm:()=>u(e._id),okText:"Yes",cancelText:"No",children:(0,i.jsx)(d.ZP,{icon:(0,i.jsx)(b.Z,{})})})]})})))||[];return console.log("displayedUsers :>> ",h),(0,i.jsx)("div",{children:(0,i.jsx)(P.Z,{columns:U,dataSource:h,scroll:{x:1200},sticky:{offsetHeader:48},pagination:{pageSize:D,total:l},onChange:x})})};var X=n(97428),q=n(96861);let z=()=>(0,i.jsx)(r.Wk,{children:(0,i.jsxs)(X.o,{meta:(0,i.jsx)(q.h,{title:"Users",description:"List of users in the workspace."}),children:[(0,i.jsx)(l.V,{title:"Users",breadcrumbs:[{name:"Workspace"}],actions:[(0,i.jsx)(Z,{},"invite-member-btn")]}),(0,i.jsx)(H,{})]})});var L=z}},function(e){e.O(0,[201,967,938,246,368,774,888,179],function(){return e(e.s=83630)}),_N_E=e.O()}]);