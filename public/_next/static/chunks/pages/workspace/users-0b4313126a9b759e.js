(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8875],{35396:function(e,t,n){"use strict";var i=n(30001),r=n(50959),l=n(62658),a=n(94590),s=function(e,t){return r.createElement(a.Z,(0,i.Z)((0,i.Z)({},e),{},{ref:t,icon:l.Z}))};s.displayName="EditOutlined",t.Z=r.forwardRef(s)},5433:function(e,t,n){"use strict";var i=n(2734),r=n(50959),l=n(72096),a=n(19589),s=n(89107);let o=null,c=e=>e(),d=[],u={},f=r.forwardRef((e,t)=>{let[n,i]=r.useState(),[a,o]=r.useState(),[c,d]=r.useState(),[f,x]=r.useState(),[m,h]=r.useState(),[p,g]=r.useState(),[v,_]=(0,s.k)({prefixCls:n,getContainer:()=>a,maxCount:c,rtl:f,top:m,bottom:p}),y=(0,l.w6)(),F=y.getRootPrefixCls(),b=y.getIconPrefixCls(),w=()=>{let{prefixCls:e,container:t,maxCount:n,rtl:r,top:a,bottom:s}=function(){let{prefixCls:e,getContainer:t,rtl:n,maxCount:i,top:r,bottom:a}=u,s=null!=e?e:(0,l.w6)().getPrefixCls("notification"),o=(null==t?void 0:t())||document.body;return{prefixCls:s,container:o,rtl:n,maxCount:i,top:r,bottom:a}}();i(e),o(t),d(n),x(r),h(a),g(s)};return r.useEffect(w,[]),r.useImperativeHandle(t,()=>{let e=Object.assign({},v);return Object.keys(e).forEach(t=>{e[t]=function(){return w(),v[t].apply(v,arguments)}}),{instance:e,sync:w}}),r.createElement(l.ZP,{prefixCls:F,iconPrefixCls:b},_)});function x(){if(!o){let e=document.createDocumentFragment(),t={fragment:e};o=t,c(()=>{(0,i.s)(r.createElement(f,{ref(e){let{instance:n,sync:i}=e||{};Promise.resolve().then(()=>{!t.instance&&n&&(t.instance=n,t.sync=i,x())})}}),e)});return}o.instance&&(d.forEach(e=>{switch(e.type){case"open":c(()=>{o.instance.open(Object.assign(Object.assign({},u),e.config))});break;case"destroy":c(()=>{null==o||o.instance.destroy(e.key)})}}),d=[])}function m(e){d.push({type:"open",config:e}),x()}let h={open:m,destroy:function(e){d.push({type:"destroy",key:e}),x()},config:function(e){u=Object.assign(Object.assign({},u),e),c(()=>{var e;null===(e=null==o?void 0:o.sync)||void 0===e||e.call(o)})},useNotification:s.Z,_InternalPanelDoNotUseOrYouWillBeFired:a.ZP},p=h;["success","info","warning","error"].forEach(e=>{p[e]=t=>m(Object.assign(Object.assign({},t),{type:e}))}),t.Z=p},74555:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/workspace/users",function(){return n(96076)}])},13861:function(e,t,n){"use strict";n.d(t,{Hg:function(){return a},av:function(){return r},hv:function(){return l}});var i=n(19005);let r=e=>(0,i.FF)(["workspaces"],"/api/v1/workspace",e),l=e=>(0,i.yt)(["workspaces"],"/api/v1/workspace",e),a=e=>(0,i.FF)(["workspaces","invite"],"/api/v1/workspace/invite",e)},96076:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Y}});var i,r=n(11527),l=n(2154),a=n(97591),s=n(30001),o=n(50959),c={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M678.3 642.4c24.2-13 51.9-20.4 81.4-20.4h.1c3 0 4.4-3.6 2.2-5.6a371.67 371.67 0 00-103.7-65.8c-.4-.2-.8-.3-1.2-.5C719.2 505 759.6 431.7 759.6 349c0-137-110.8-248-247.5-248S264.7 212 264.7 349c0 82.7 40.4 156 102.6 201.1-.4.2-.8.3-1.2.5-44.7 18.9-84.8 46-119.3 80.6a373.42 373.42 0 00-80.4 119.5A373.6 373.6 0 00137 888.8a8 8 0 008 8.2h59.9c4.3 0 7.9-3.5 8-7.8 2-77.2 32.9-149.5 87.6-204.3C357 628.2 432.2 597 512.2 597c56.7 0 111.1 15.7 158 45.1a8.1 8.1 0 008.1.3zM512.2 521c-45.8 0-88.9-17.9-121.4-50.4A171.2 171.2 0 01340.5 349c0-45.9 17.9-89.1 50.3-121.6S466.3 177 512.2 177s88.9 17.9 121.4 50.4A171.2 171.2 0 01683.9 349c0 45.9-17.9 89.1-50.3 121.6C601.1 503.1 558 521 512.2 521zM880 759h-84v-84c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v84h-84c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h84v84c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-84h84c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8z"}}]},name:"user-add",theme:"outlined"},d=n(94590),u=function(e,t){return o.createElement(d.Z,(0,s.Z)((0,s.Z)({},e),{},{ref:t,icon:c}))};u.displayName="UserAddOutlined";var f=o.forwardRef(u),x=n(48274),m=n(58699),h=n(85273),p=n(99678),g=n(50002),v=n(46457),_=n(3748),y=n(68802),F=n.n(y),b=n(13861);let w=[],j=e=>{let{label:t,value:n,closable:i,onClose:l,color:a}=e,s=e=>{e.preventDefault(),e.stopPropagation()};return(0,r.jsx)(h.Z,{color:F()(n)?"default":"error",onMouseDown:s,closable:i,onClose:l,style:{marginRight:3},children:t})},k=()=>{let e=p.Z.useApp(),[t]=g.Z.useForm(),[n,i]=(0,o.useState)(!1),[l]=(0,b.Hg)(),a=()=>{t.resetFields(["emails"])},s=e=>{console.log("selected:",e),i(e.filter(e=>F()(e)).length>0)},c=async t=>{console.log("data :>> ",t);let n=await l(t);(null==n?void 0:n.status)&&(a(),e.modal.success({title:"Congrats!",content:(0,r.jsx)(r.Fragment,{children:"Invitation emails have been sent successfully."}),closable:!0}))},d=t=>{console.log("Failed:",t),e.notification.error({message:"Failed",description:"Something is wrong."})};return(0,r.jsxs)("div",{children:[(0,r.jsx)(v.Z.Title,{level:4,children:"Emails"}),(0,r.jsxs)(g.Z,{name:"invite",form:t,onFinish:c,onFinishFailed:d,children:[(0,r.jsx)(g.Z.Item,{name:"emails",children:(0,r.jsx)(_.Z,{style:{width:300},mode:"tags",showArrow:!1,onChange:s,tokenSeparators:[","," "],options:w,tagRender:e=>j(e),dropdownRender:e=>(0,r.jsx)(r.Fragment,{})})}),(0,r.jsx)(g.Z.Item,{children:(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,r.jsx)(m.ZP,{type:"primary",htmlType:"submit",disabled:!n,children:"Invite"}),(0,r.jsx)(m.ZP,{children:"Clear"})]})})]})]})},Z=()=>(0,r.jsx)(x.Z,{placement:"bottomRight",trigger:"click",content:(0,r.jsx)(k,{}),children:(0,r.jsx)(m.ZP,{type:"default",icon:(0,r.jsx)(f,{className:"align-middle"}),children:"Invite"},"workspace-setting-btn")});var C=n(35396),S=n(13740),E=n(67918),P=n(5433),A=n(36865),O=n(61663),I=n(75921),N=n(74637),D=n.n(N),R=n(22820),$=n(58012),z=n(49309),q=n(90400),M=n(13557);let T=n(64814),U=n(54498);D().extend(U),D().extend(T);let W=null!==(i=M.XL.tableConfig.defaultPageSize)&&void 0!==i?i:20,L=()=>{let{responsive:e}=(0,q.Jl)(),t=[{title:"Name",width:60,dataIndex:"name",key:"name",fixed:(null==e?void 0:e.md)?"left":void 0,filterSearch:!0,filters:[{text:"goon",value:"goon"}],onFilter:(e,t)=>!t.name||t.name.indexOf(e.toString())>-1},{title:"User name",dataIndex:"slug",key:"slug",width:50,filterSearch:!0,filters:[{text:"goon",value:"goon"}],render:e=>(0,r.jsx)(m.ZP,{type:"link",style:{padding:0},children:e}),onFilter:(e,t)=>!t.slug||t.slug.indexOf(e.toString())>-1},{title:"Email",dataIndex:"email",key:"email",width:80},{title:"Roles",dataIndex:"roles",key:"roles",width:40,filterSearch:!0,filters:[{text:"goon",value:"goon"}],render(e){var t;return(0,r.jsx)(r.Fragment,{children:null===(t=e[0])||void 0===t?void 0:t.name})}},{title:"Updated at",dataIndex:"updatedAt",key:"updatedAt",width:50,render:e=>(0,r.jsx)($.q,{date:e}),sorter:(e,t)=>D()(e.updatedAt).diff(D()(t.updatedAt))},{title:"Created at",dataIndex:"createdAt",key:"createdAt",width:50,render:e=>(0,r.jsx)($.q,{date:e}),sorter:(e,t)=>D()(e.createdAt).diff(D()(t.createdAt))},{title:(0,r.jsx)(v.Z.Text,{className:"text-xs md:text-sm",children:"Action"}),key:"action",fixed:"right",width:(null==e?void 0:e.md)?30:26,render:(e,t)=>t.actions}],[n,i]=(0,o.useState)(1),{data:l,status:a}=(0,R.mO)({populate:"roles,teams",pagination:{page:n,size:W}}),{list:s,pagination:c}=l||{},{total_items:d}=c||{};console.log("users :>> ",s);let[u]=(0,R.kZ)(),[f,{setQuery:x}]=(0,z.o)(),h=async e=>{let t=await u({_id:e});(null==t?void 0:t.status)&&P.Z.success({message:"Item deleted successfully."})},p=e=>{let{current:t}=e;t&&i(t)},g=(null==s?void 0:s.map((e,t)=>({...e,actions:(0,r.jsxs)(A.Z.Compact,{children:[(0,r.jsx)(m.ZP,{icon:(0,r.jsx)(C.Z,{}),onClick:()=>x({lv1:"edit",type:"user",user:e.slug})}),(0,r.jsx)(O.Z,{title:"Are you sure to delete this item?",description:(0,r.jsx)("span",{className:"text-red-500",children:"Caution: this is permanent and cannot be rolled back."}),onConfirm:()=>h(e._id),okText:"Yes",cancelText:"No",children:(0,r.jsx)(m.ZP,{icon:(0,r.jsx)(S.Z,{})})})]})})))||[],_=(0,o.useRef)(null),y=(0,E.Z)(_);return(0,r.jsx)("div",{className:"h-full flex-auto overflow-hidden",ref:_,children:(0,r.jsx)(I.Z,{sticky:!0,size:"small",loading:"loading"===a,columns:t,dataSource:g,scroll:{x:1e3,y:void 0!==(null==y?void 0:y.height)?y.height-100:void 0},pagination:{pageSize:W,total:d,position:["bottomCenter"]},onChange:p})})};var X=n(7021),H=n(24810);let B=()=>(0,r.jsx)(l.Wk,{children:(0,r.jsxs)(X.o,{meta:(0,r.jsx)(H.h,{title:"Users",description:"List of users in the workspace."}),children:[(0,r.jsx)(a.V,{title:"Users",breadcrumbs:[{name:"Workspace"}],actions:[(0,r.jsx)(Z,{},"invite-member-btn")]}),(0,r.jsx)(L,{})]})});var Y=B},71827:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){(0,r.default)(e),"object"===l(t)?(n=t.min||0,i=t.max):(n=arguments[1],i=arguments[2]);var n,i,a=encodeURI(e).split(/%..|./).length-1;return a>=n&&(void 0===i||a<=i)};var i,r=(i=n(5923))&&i.__esModule?i:{default:i};function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e.exports=t.default,e.exports.default=t.default},68802:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if((0,i.default)(e),(t=(0,r.default)(t,c)).require_display_name||t.allow_display_name){var n=e.match(d);if(n){var o,p,g=n[1];if(e=e.replace(g,"").replace(/(^<|>$)/g,""),g.endsWith(" ")&&(g=g.slice(0,-1)),!(p=(o=g).replace(/^"(.+)"$/,"$1")).trim()||/[\.";<>]/.test(p)&&(p===o||p.split('"').length!==p.split('\\"').length))return!1}else if(t.require_display_name)return!1}if(!t.ignore_max_length&&e.length>254)return!1;var v=e.split("@"),_=v.pop(),y=_.toLowerCase();if(t.host_blacklist.includes(y)||t.host_whitelist.length>0&&!t.host_whitelist.includes(y))return!1;var F=v.join("@");if(t.domain_specific_validation&&("gmail.com"===y||"googlemail.com"===y)){var b=(F=F.toLowerCase()).split("+")[0];if(!(0,l.default)(b.replace(/\./g,""),{min:6,max:30}))return!1;for(var w=b.split("."),j=0;j<w.length;j++)if(!f.test(w[j]))return!1}if(!1===t.ignore_max_length&&(!(0,l.default)(F,{max:64})||!(0,l.default)(_,{max:254})))return!1;if(!(0,a.default)(_,{require_tld:t.require_tld,ignore_max_length:t.ignore_max_length})){if(!t.allow_ip_domain)return!1;if(!(0,s.default)(_)){if(!_.startsWith("[")||!_.endsWith("]"))return!1;var k=_.slice(1,-1);if(0===k.length||!(0,s.default)(k))return!1}}if('"'===F[0])return F=F.slice(1,F.length-1),t.allow_utf8_local_part?h.test(F):x.test(F);for(var Z=t.allow_utf8_local_part?m:u,C=F.split("."),S=0;S<C.length;S++)if(!Z.test(C[S]))return!1;return!t.blacklisted_chars||-1===F.search(RegExp("[".concat(t.blacklisted_chars,"]+"),"g"))};var i=o(n(5923)),r=o(n(94983)),l=o(n(71827)),a=o(n(30314)),s=o(n(45947));function o(e){return e&&e.__esModule?e:{default:e}}var c={allow_display_name:!1,require_display_name:!1,allow_utf8_local_part:!0,require_tld:!0,blacklisted_chars:"",ignore_max_length:!1,host_blacklist:[],host_whitelist:[]},d=/^([^\x00-\x1F\x7F-\x9F\cX]+)</i,u=/^[a-z\d!#\$%&'\*\+\-\/=\?\^_`{\|}~]+$/i,f=/^[a-z\d]+$/,x=/^([\s\x01-\x08\x0b\x0c\x0e-\x1f\x7f\x21\x23-\x5b\x5d-\x7e]|(\\[\x01-\x09\x0b\x0c\x0d-\x7f]))*$/i,m=/^[a-z\d!#\$%&'\*\+\-\/=\?\^_`{\|}~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+$/i,h=/^([\s\x01-\x08\x0b\x0c\x0e-\x1f\x7f\x21\x23-\x5b\x5d-\x7e\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|(\\[\x01-\x09\x0b\x0c\x0d-\x7f\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))*$/i;e.exports=t.default,e.exports.default=t.default}},function(e){e.O(0,[8201,2967,5775,9780,9774,2888,179],function(){return e(e.s=74555)}),_N_E=e.O()}]);