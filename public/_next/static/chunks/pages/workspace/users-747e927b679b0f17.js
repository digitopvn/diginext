(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8875],{47389:function(e,t,n){"use strict";var r=n(1413),a=n(67294),i=n(27363),o=n(91146),l=a.forwardRef(function(e,t){return a.createElement(o.Z,(0,r.Z)((0,r.Z)({},e),{},{ref:t,icon:i.Z}))});t.Z=l},4408:function(e,t,n){"use strict";n.d(t,{Hg:function(){return useWorkspaceInviteApi},av:function(){return useWorkspaceCreateApi},d1:function(){return useTestWorkspaceUploadApi},hv:function(){return useWorkspaceUpdateApi}});var r=n(11778),useWorkspaceCreateApi=function(e){return(0,r.FF)(["workspaces"],"/api/v1/workspace",e)},useWorkspaceUpdateApi=function(e){return(0,r.yt)(["workspaces"],"/api/v1/workspace",e)},useWorkspaceInviteApi=function(e){return(0,r.FF)(["workspaces","invite"],"/api/v1/workspace/invite",e)},useTestWorkspaceUploadApi=function(){return(0,r.FF)(["workspaces","test-upload"],"/api/v1/workspace/test-cloud-storage")}},22145:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return users}});var r,a=n(22598),i=n(90447),o=n(1413),l=n(67294),s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M678.3 642.4c24.2-13 51.9-20.4 81.4-20.4h.1c3 0 4.4-3.6 2.2-5.6a371.67 371.67 0 00-103.7-65.8c-.4-.2-.8-.3-1.2-.5C719.2 505 759.6 431.7 759.6 349c0-137-110.8-248-247.5-248S264.7 212 264.7 349c0 82.7 40.4 156 102.6 201.1-.4.2-.8.3-1.2.5-44.7 18.9-84.8 46-119.3 80.6a373.42 373.42 0 00-80.4 119.5A373.6 373.6 0 00137 888.8a8 8 0 008 8.2h59.9c4.3 0 7.9-3.5 8-7.8 2-77.2 32.9-149.5 87.6-204.3C357 628.2 432.2 597 512.2 597c56.7 0 111.1 15.7 158 45.1a8.1 8.1 0 008.1.3zM512.2 521c-45.8 0-88.9-17.9-121.4-50.4A171.2 171.2 0 01340.5 349c0-45.9 17.9-89.1 50.3-121.6S466.3 177 512.2 177s88.9 17.9 121.4 50.4A171.2 171.2 0 01683.9 349c0 45.9-17.9 89.1-50.3 121.6C601.1 503.1 558 521 512.2 521zM880 759h-84v-84c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v84h-84c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h84v84c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-84h84c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8z"}}]},name:"user-add",theme:"outlined"},c=n(91146),u=l.forwardRef(function(e,t){return l.createElement(c.Z,(0,o.Z)((0,o.Z)({},e),{},{ref:t,icon:s}))}),d=n(55241),f=n(73318),p=n(50029),x=n(16835),_=n(87794),h=n.n(_),m=n(66309),g=n(14364),v=n(8232),w=n(71471),b=n(65217),y=n(83868),F=n.n(y),j=n(4408),k=n(85893),Z=[],renderTag=function(e){var t=e.label,n=e.value,r=e.closable,a=e.onClose;return e.color,(0,k.jsx)(m.Z,{color:F()(n)?"default":"error",onMouseDown:function(e){e.preventDefault(),e.stopPropagation()},closable:r,onClose:a,style:{marginRight:3},children:t})},workspaces_InviteMember=function(){var e,t=g.Z.useApp(),n=v.Z.useForm(),r=(0,x.Z)(n,1)[0],a=(0,l.useState)(!1),i=a[0],o=a[1],s=(0,j.Hg)(),c=(0,x.Z)(s,1)[0],reset=function(){r.resetFields(["emails"])},u=(e=(0,p.Z)(h().mark(function _callee(e){var n;return h().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return console.log("data :>> ",e),r.next=3,c(e);case 3:null!=(n=r.sent)&&n.status&&(reset(),t.modal.success({title:"Congrats!",content:(0,k.jsx)(k.Fragment,{children:"Invitation emails have been sent successfully."}),closable:!0}));case 5:case"end":return r.stop()}},_callee)})),function(t){return e.apply(this,arguments)});return(0,k.jsxs)("div",{children:[(0,k.jsx)(w.Z.Title,{level:4,children:"Emails"}),(0,k.jsxs)(v.Z,{name:"invite",form:r,onFinish:u,onFinishFailed:function(e){console.log("Failed:",e),t.notification.error({message:"Failed",description:"Something is wrong."})},layout:"vertical",children:[(0,k.jsx)(v.Z.Item,{name:"emails",children:(0,k.jsx)(b.Z,{style:{width:300},mode:"tags",showArrow:!1,onChange:function(e){console.log("selected:",e),o(e.filter(function(e){return F()(e)}).length>0)},tokenSeparators:[","," "],options:Z,tagRender:function(e){return renderTag(e)},dropdownRender:function(e){return(0,k.jsx)(k.Fragment,{})}})}),(0,k.jsx)(v.Z.Item,{name:"role",children:(0,k.jsx)(b.Z,{style:{width:300},options:[{value:"member",label:"Member"},{value:"guest",label:"Guest"}]})}),(0,k.jsx)(v.Z.Item,{children:(0,k.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,k.jsx)(f.ZP,{type:"primary",htmlType:"submit",disabled:!i,children:"Invite"}),(0,k.jsx)(f.ZP,{children:"Clear"})]})})]})]})},workspaces_InviteMemberButton=function(){return(0,k.jsx)(d.Z,{placement:"bottomRight",trigger:"click",content:(0,k.jsx)(workspaces_InviteMember,{}),children:(0,k.jsx)(f.ZP,{type:"default",icon:(0,k.jsx)(u,{className:"align-middle"}),children:"Invite"},"workspace-setting-btn")})},A=n(59499),O=n(47389),D=n(48689),P=n(84213),C=n(26855),S=n(78957),I=n(86738),R=n(44973),q=n(27484),E=n.n(q),M=n(15832),$=n(61123),z=n(56832),W=n(3669),N=n(55611);function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){(0,A.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var T=n(56176),U=n(84110);E().extend(U),E().extend(T);var L=null!==(r=N.XL.tableConfig.defaultPageSize)&&void 0!==r?r:20,UserList=function(){var e,t=(0,W.Jl)().responsive,n=[{title:"Name",width:60,dataIndex:"name",key:"name",fixed:null!=t&&t.md?"left":void 0,filterSearch:!0,filters:[{text:"goon",value:"goon"}],onFilter:function(e,t){return!t.name||t.name.indexOf(e.toString())>-1}},{title:"User name",dataIndex:"slug",key:"slug",width:50,filterSearch:!0,filters:[{text:"goon",value:"goon"}],render:function(e){return(0,k.jsx)(f.ZP,{type:"link",style:{padding:0},children:e})},onFilter:function(e,t){return!t.slug||t.slug.indexOf(e.toString())>-1}},{title:"Email",dataIndex:"email",key:"email",width:80},{title:"Roles",dataIndex:"roles",key:"roles",width:40,filterSearch:!0,filters:[{text:"goon",value:"goon"}],render:function(e){var t;return(0,k.jsx)(k.Fragment,{children:null===(t=e[0])||void 0===t?void 0:t.name})}},{title:"Updated at",dataIndex:"updatedAt",key:"updatedAt",width:50,render:function(e){return(0,k.jsx)($.q,{date:e})},sorter:function(e,t){return E()(e.updatedAt).diff(E()(t.updatedAt))}},{title:"Created at",dataIndex:"createdAt",key:"createdAt",width:50,render:function(e){return(0,k.jsx)($.q,{date:e})},sorter:function(e,t){return E()(e.createdAt).diff(E()(t.createdAt))}},{title:(0,k.jsx)(w.Z.Text,{className:"text-xs md:text-sm",children:"Action"}),key:"action",fixed:"right",width:null!=t&&t.md?30:26,render:function(e,t){return t.actions}}],r=(0,l.useState)(1),a=r[0],i=r[1],o=(0,M.mO)({populate:"roles,teams",pagination:{page:a,size:L}}),s=o.data,c=o.status,u=s||{},d=u.list,_=(u.pagination||{}).total_items,m=(0,M.kZ)(),g=(0,x.Z)(m,1)[0],v=(0,z.o)(),b=(0,x.Z)(v,2),y=(b[0],b[1].setQuery),F=(e=(0,p.Z)(h().mark(function _callee(e){var t;return h().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,g({_id:e});case 2:null!=(t=n.sent)&&t.status&&C.ZP.success({message:"Item deleted successfully."});case 4:case"end":return n.stop()}},_callee)})),function(t){return e.apply(this,arguments)}),j=(null==d?void 0:d.map(function(e,t){return _objectSpread(_objectSpread({},e),{},{actions:(0,k.jsxs)(S.Z.Compact,{children:[(0,k.jsx)(f.ZP,{icon:(0,k.jsx)(O.Z,{}),onClick:function(){return y({lv1:"edit",type:"user",user:e.slug})}}),(0,k.jsx)(I.Z,{title:"Are you sure to delete this item?",description:(0,k.jsx)("span",{className:"text-red-500",children:"Caution: this is permanent and cannot be rolled back."}),onConfirm:function(){return F(e._id)},okText:"Yes",cancelText:"No",children:(0,k.jsx)(f.ZP,{icon:(0,k.jsx)(D.Z,{})})})]})})}))||[],Z=(0,l.useRef)(null),A=(0,P.Z)(Z);return(0,k.jsx)("div",{className:"h-full flex-auto overflow-hidden",ref:Z,children:(0,k.jsx)(R.Z,{sticky:!0,size:"small",loading:"loading"===c,columns:n,dataSource:j,scroll:{x:1e3,y:void 0!==(null==A?void 0:A.height)?A.height-140:void 0},pagination:{pageSize:L,total:_,position:["bottomCenter"]},onChange:function(e){var t=e.current;t&&i(t)}})})},X=n(6761),B=n(1071),users=function(){return(0,k.jsx)(a.Wk,{children:(0,k.jsxs)(X.o,{meta:(0,k.jsx)(B.h,{title:"Users",description:"List of users in the workspace."}),children:[(0,k.jsx)(i.V,{title:"Users",breadcrumbs:[{name:"Workspace"}],actions:[(0,k.jsx)(workspaces_InviteMemberButton,{},"invite-member-btn")]}),(0,k.jsx)(UserList,{})]})})}},67330:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/workspace/users",function(){return n(22145)}])},93235:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){(0,a.default)(e),"object"===_typeof(t)?(n=t.min||0,r=t.max):(n=arguments[1],r=arguments[2]);var n,r,i=encodeURI(e).split(/%..|./).length-1;return i>=n&&(void 0===r||i<=r)};var r,a=(r=n(65571))&&r.__esModule?r:{default:r};function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e.exports=t.default,e.exports.default=t.default},83868:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if((0,r.default)(e),(t=(0,l.default)(t,s)).require_display_name||t.allow_display_name){var n=e.match(c);if(n){var _,h,m=n[1];if(e=e.replace(m,"").replace(/(^<|>$)/g,""),m.endsWith(" ")&&(m=m.slice(0,-1)),!(h=(_=m).replace(/^"(.+)"$/,"$1")).trim()||/[\.";<>]/.test(h)&&(h===_||h.split('"').length!==h.split('\\"').length))return!1}else if(t.require_display_name)return!1}if(!t.ignore_max_length&&e.length>254)return!1;var g=e.split("@"),v=g.pop(),w=v.toLowerCase();if(t.host_blacklist.includes(w)||t.host_whitelist.length>0&&!t.host_whitelist.includes(w))return!1;var b=g.join("@");if(t.domain_specific_validation&&("gmail.com"===w||"googlemail.com"===w)){var y=(b=b.toLowerCase()).split("+")[0];if(!(0,a.default)(y.replace(/\./g,""),{min:6,max:30}))return!1;for(var F=y.split("."),j=0;j<F.length;j++)if(!d.test(F[j]))return!1}if(!1===t.ignore_max_length&&(!(0,a.default)(b,{max:64})||!(0,a.default)(v,{max:254})))return!1;if(!(0,i.default)(v,{require_tld:t.require_tld,ignore_max_length:t.ignore_max_length,allow_underscores:t.allow_underscores})){if(!t.allow_ip_domain)return!1;if(!(0,o.default)(v)){if(!v.startsWith("[")||!v.endsWith("]"))return!1;var k=v.slice(1,-1);if(0===k.length||!(0,o.default)(k))return!1}}if('"'===b[0])return b=b.slice(1,b.length-1),t.allow_utf8_local_part?x.test(b):f.test(b);for(var Z=t.allow_utf8_local_part?p:u,A=b.split("."),O=0;O<A.length;O++)if(!Z.test(A[O]))return!1;return!t.blacklisted_chars||-1===b.search(RegExp("[".concat(t.blacklisted_chars,"]+"),"g"))};var r=_interopRequireDefault(n(65571)),a=_interopRequireDefault(n(93235)),i=_interopRequireDefault(n(10221)),o=_interopRequireDefault(n(61028)),l=_interopRequireDefault(n(84808));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var s={allow_display_name:!1,allow_underscores:!1,require_display_name:!1,allow_utf8_local_part:!0,require_tld:!0,blacklisted_chars:"",ignore_max_length:!1,host_blacklist:[],host_whitelist:[]},c=/^([^\x00-\x1F\x7F-\x9F\cX]+)</i,u=/^[a-z\d!#\$%&'\*\+\-\/=\?\^_`{\|}~]+$/i,d=/^[a-z\d]+$/,f=/^([\s\x01-\x08\x0b\x0c\x0e-\x1f\x7f\x21\x23-\x5b\x5d-\x7e]|(\\[\x01-\x09\x0b\x0c\x0d-\x7f]))*$/i,p=/^[a-z\d!#\$%&'\*\+\-\/=\?\^_`{\|}~\u00A1-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+$/i,x=/^([\s\x01-\x08\x0b\x0c\x0e-\x1f\x7f\x21\x23-\x5b\x5d-\x7e\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|(\\[\x01-\x09\x0b\x0c\x0d-\x7f\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))*$/i;e.exports=t.default,e.exports.default=t.default},10221:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){(0,r.default)(e),(t=(0,a.default)(t,i)).allow_trailing_dot&&"."===e[e.length-1]&&(e=e.substring(0,e.length-1)),!0===t.allow_wildcard&&0===e.indexOf("*.")&&(e=e.substring(2));var n=e.split("."),o=n[n.length-1];return!(t.require_tld&&(n.length<2||!t.allow_numeric_tld&&!/^([a-z\u00A1-\u00A8\u00AA-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}|xn[a-z0-9-]{2,})$/i.test(o)||/\s/.test(o))||!t.allow_numeric_tld&&/^\d+$/.test(o))&&n.every(function(e){return!(e.length>63&&!t.ignore_max_length||!/^[a-z_\u00a1-\uffff0-9-]+$/i.test(e)||/[\uff01-\uff5e]/.test(e)||/^-|-$/.test(e)||!t.allow_underscores&&/_/.test(e))})};var r=_interopRequireDefault(n(65571)),a=_interopRequireDefault(n(84808));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var i={require_tld:!0,allow_underscores:!1,allow_trailing_dot:!1,allow_numeric_tld:!1,allow_wildcard:!1,ignore_max_length:!1};e.exports=t.default,e.exports.default=t.default},61028:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function isIP(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return((0,a.default)(e),t=String(t))?"4"===t?l.test(e):"6"===t&&c.test(e):isIP(e,4)||isIP(e,6)};var r,a=(r=n(65571))&&r.__esModule?r:{default:r},i="(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])",o="(".concat(i,"[.]){3}").concat(i),l=new RegExp("^".concat(o,"$")),s="(?:[0-9a-fA-F]{1,4})",c=RegExp("^("+"(?:".concat(s,":){7}(?:").concat(s,"|:)|")+"(?:".concat(s,":){6}(?:").concat(o,"|:").concat(s,"|:)|")+"(?:".concat(s,":){5}(?::").concat(o,"|(:").concat(s,"){1,2}|:)|")+"(?:".concat(s,":){4}(?:(:").concat(s,"){0,1}:").concat(o,"|(:").concat(s,"){1,3}|:)|")+"(?:".concat(s,":){3}(?:(:").concat(s,"){0,2}:").concat(o,"|(:").concat(s,"){1,4}|:)|")+"(?:".concat(s,":){2}(?:(:").concat(s,"){0,3}:").concat(o,"|(:").concat(s,"){1,5}|:)|")+"(?:".concat(s,":){1}(?:(:").concat(s,"){0,4}:").concat(o,"|(:").concat(s,"){1,6}|:)|")+"(?::((?::".concat(s,"){0,5}:").concat(o,"|(?::").concat(s,"){1,7}|:))")+")(%[0-9a-zA-Z-.:]{1,})?$");e.exports=t.default,e.exports.default=t.default},84808:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;for(var n in t)void 0===e[n]&&(e[n]=t[n]);return e},e.exports=t.default,e.exports.default=t.default}},function(e){e.O(0,[3662,5877,3945,9774,2888,179],function(){return e(e.s=67330)}),_N_E=e.O()}]);