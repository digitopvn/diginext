(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8512],{6441:function(e,t,l){"use strict";l.d(t,{Z:function(){return s}});var n=l(30001),a=l(50959),c={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M464 144H160c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V160c0-8.8-7.2-16-16-16zm-52 268H212V212h200v200zm452-268H560c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V160c0-8.8-7.2-16-16-16zm-52 268H612V212h200v200zm52 132H560c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V560c0-8.8-7.2-16-16-16zm-52 268H612V612h200v200zM424 712H296V584c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v128H104c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h128v128c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V776h128c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}}]},name:"appstore-add",theme:"outlined"},i=l(47855),o=function(e,t){return a.createElement(i.Z,(0,n.Z)((0,n.Z)({},e),{},{ref:t,icon:c}))};o.displayName="AppstoreAddOutlined";var s=a.forwardRef(o)},67284:function(e,t,l){"use strict";l.d(t,{Z:function(){return s}});var n=l(30001),a=l(50959),c={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M257.7 752c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9zm67.4-174.4L687.8 215l73.3 73.3-362.7 362.6-88.9 15.7 15.6-89zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32z"}}]},name:"edit",theme:"outlined"},i=l(47855),o=function(e,t){return a.createElement(i.Z,(0,n.Z)((0,n.Z)({},e),{},{ref:t,icon:c}))};o.displayName="EditOutlined";var s=a.forwardRef(o)},65338:function(e,t,l){"use strict";l.d(t,{Z:function(){return s}});var n=l(30001),a=l(50959),c={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M705.6 124.9a8 8 0 00-11.6 7.2v64.2c0 5.5 2.9 10.6 7.5 13.6a352.2 352.2 0 0162.2 49.8c32.7 32.8 58.4 70.9 76.3 113.3a355 355 0 0127.9 138.7c0 48.1-9.4 94.8-27.9 138.7a355.92 355.92 0 01-76.3 113.3 353.06 353.06 0 01-113.2 76.4c-43.8 18.6-90.5 28-138.5 28s-94.7-9.4-138.5-28a353.06 353.06 0 01-113.2-76.4A355.92 355.92 0 01184 650.4a355 355 0 01-27.9-138.7c0-48.1 9.4-94.8 27.9-138.7 17.9-42.4 43.6-80.5 76.3-113.3 19-19 39.8-35.6 62.2-49.8 4.7-2.9 7.5-8.1 7.5-13.6V132c0-6-6.3-9.8-11.6-7.2C178.5 195.2 82 339.3 80 506.3 77.2 745.1 272.5 943.5 511.2 944c239 .5 432.8-193.3 432.8-432.4 0-169.2-97-315.7-238.4-386.7zM480 560h64c4.4 0 8-3.6 8-8V88c0-4.4-3.6-8-8-8h-64c-4.4 0-8 3.6-8 8v464c0 4.4 3.6 8 8 8z"}}]},name:"poweroff",theme:"outlined"},i=l(47855),o=function(e,t){return a.createElement(i.Z,(0,n.Z)((0,n.Z)({},e),{},{ref:t,icon:c}))};o.displayName="PoweroffOutlined";var s=a.forwardRef(o)},52853:function(e,t,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/project",function(){return l(553)}])},553:function(e,t,l){"use strict";l.r(t),l.d(t,{default:function(){return eN}});var n,a=l(11527),c=l(18820),i=l(81363),o=l(85664),s=l(2164),r=l(30001),d=l(50959),u={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M574 665.4a8.03 8.03 0 00-11.3 0L446.5 781.6c-53.8 53.8-144.6 59.5-204 0-59.5-59.5-53.8-150.2 0-204l116.2-116.2c3.1-3.1 3.1-8.2 0-11.3l-39.8-39.8a8.03 8.03 0 00-11.3 0L191.4 526.5c-84.6 84.6-84.6 221.5 0 306s221.5 84.6 306 0l116.2-116.2c3.1-3.1 3.1-8.2 0-11.3L574 665.4zm258.6-474c-84.6-84.6-221.5-84.6-306 0L410.3 307.6a8.03 8.03 0 000 11.3l39.7 39.7c3.1 3.1 8.2 3.1 11.3 0l116.2-116.2c53.8-53.8 144.6-59.5 204 0 59.5 59.5 53.8 150.2 0 204L665.3 562.6a8.03 8.03 0 000 11.3l39.8 39.8c3.1 3.1 8.2 3.1 11.3 0l116.2-116.2c84.5-84.6 84.5-221.5 0-306.1zM610.1 372.3a8.03 8.03 0 00-11.3 0L372.3 598.7a8.03 8.03 0 000 11.3l39.6 39.6c3.1 3.1 8.2 3.1 11.3 0l226.4-226.4c3.1-3.1 3.1-8.2 0-11.3l-39.5-39.6z"}}]},name:"link",theme:"outlined"},p=l(47855),h=function(e,t){return d.createElement(p.Z,(0,r.Z)((0,r.Z)({},e),{},{ref:t,icon:u}))};h.displayName="LinkOutlined";var v=d.forwardRef(h),m=l(57132),x=l(31739),f=l(22449),g={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M464 144H160c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V160c0-8.8-7.2-16-16-16zm-52 268H212V212h200v200zm452-268H560c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V160c0-8.8-7.2-16-16-16zm-52 268H612V212h200v200zM464 544H160c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V560c0-8.8-7.2-16-16-16zm-52 268H212V612h200v200zm452-268H560c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V560c0-8.8-7.2-16-16-16zm-52 268H612V612h200v200z"}}]},name:"appstore",theme:"outlined"},y=function(e,t){return d.createElement(p.Z,(0,r.Z)((0,r.Z)({},e),{},{ref:t,icon:g}))};y.displayName="AppstoreOutlined";var j=d.forwardRef(y),Z=l(94222),k={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M688 312v-48c0-4.4-3.6-8-8-8H296c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h384c4.4 0 8-3.6 8-8zm-392 88c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h184c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H296zm376 116c-119.3 0-216 96.7-216 216s96.7 216 216 216 216-96.7 216-216-96.7-216-216-216zm107.5 323.5C750.8 868.2 712.6 884 672 884s-78.8-15.8-107.5-44.5C535.8 810.8 520 772.6 520 732s15.8-78.8 44.5-107.5C593.2 595.8 631.4 580 672 580s78.8 15.8 107.5 44.5C808.2 653.2 824 691.4 824 732s-15.8 78.8-44.5 107.5zM761 656h-44.3c-2.6 0-5 1.2-6.5 3.3l-63.5 87.8-23.1-31.9a7.92 7.92 0 00-6.5-3.3H573c-6.5 0-10.3 7.4-6.5 12.7l73.8 102.1c3.2 4.4 9.7 4.4 12.9 0l114.2-158c3.9-5.3.1-12.7-6.4-12.7zM440 852H208V148h560v344c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V108c0-17.7-14.3-32-32-32H168c-17.7 0-32 14.3-32 32v784c0 17.7 14.3 32 32 32h272c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8z"}}]},name:"file-done",theme:"outlined"},b=function(e,t){return d.createElement(p.Z,(0,r.Z)((0,r.Z)({},e),{},{ref:t,icon:k}))};b.displayName="FileDoneOutlined";var w=d.forwardRef(b),z={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M468 128H160c-17.7 0-32 14.3-32 32v308c0 4.4 3.6 8 8 8h332c4.4 0 8-3.6 8-8V136c0-4.4-3.6-8-8-8zm-56 284H192V192h220v220zm-138-74h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm194 210H136c-4.4 0-8 3.6-8 8v308c0 17.7 14.3 32 32 32h308c4.4 0 8-3.6 8-8V556c0-4.4-3.6-8-8-8zm-56 284H192V612h220v220zm-138-74h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm590-630H556c-4.4 0-8 3.6-8 8v332c0 4.4 3.6 8 8 8h332c4.4 0 8-3.6 8-8V160c0-17.7-14.3-32-32-32zm-32 284H612V192h220v220zm-138-74h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm194 210h-48c-4.4 0-8 3.6-8 8v134h-78V556c0-4.4-3.6-8-8-8H556c-4.4 0-8 3.6-8 8v332c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V644h78v102c0 4.4 3.6 8 8 8h190c4.4 0 8-3.6 8-8V556c0-4.4-3.6-8-8-8zM746 832h-48c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8zm142 0h-48c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}}]},name:"qrcode",theme:"outlined"},C=function(e,t){return d.createElement(p.Z,(0,r.Z)((0,r.Z)({},e),{},{ref:t,icon:z}))};C.displayName="QrcodeOutlined";var _=d.forwardRef(C),V=l(6441),N=l(90404),H=l(99380),A={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M193 796c0 17.7 14.3 32 32 32h574c17.7 0 32-14.3 32-32V563c0-176.2-142.8-319-319-319S193 386.8 193 563v233zm72-233c0-136.4 110.6-247 247-247s247 110.6 247 247v193H404V585c0-5.5-4.5-10-10-10h-44c-5.5 0-10 4.5-10 10v171h-75V563zm-48.1-252.5l39.6-39.6c3.1-3.1 3.1-8.2 0-11.3l-67.9-67.9a8.03 8.03 0 00-11.3 0l-39.6 39.6a8.03 8.03 0 000 11.3l67.9 67.9c3.1 3.1 8.1 3.1 11.3 0zm669.6-79.2l-39.6-39.6a8.03 8.03 0 00-11.3 0l-67.9 67.9a8.03 8.03 0 000 11.3l39.6 39.6c3.1 3.1 8.2 3.1 11.3 0l67.9-67.9c3.1-3.2 3.1-8.2 0-11.3zM832 892H192c-17.7 0-32 14.3-32 32v24c0 4.4 3.6 8 8 8h688c4.4 0 8-3.6 8-8v-24c0-17.7-14.3-32-32-32zM484 180h56c4.4 0 8-3.6 8-8V76c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v96c0 4.4 3.6 8 8 8z"}}]},name:"alert",theme:"outlined"},S=function(e,t){return d.createElement(p.Z,(0,r.Z)((0,r.Z)({},e),{},{ref:t,icon:A}))};S.displayName="AlertOutlined";var E=d.forwardRef(S),P=l(65338),M={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M456 231a56 56 0 10112 0 56 56 0 10-112 0zm0 280a56 56 0 10112 0 56 56 0 10-112 0zm0 280a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"more",theme:"outlined"},L=function(e,t){return d.createElement(p.Z,(0,r.Z)((0,r.Z)({},e),{},{ref:t,icon:M}))};L.displayName="MoreOutlined";var O=d.forwardRef(L),T=l(67284),R=l(98344),B=l(23836),I=l(80402),F=l(67576),D=l(59701),U=l(50103),q=l(30388),K=l(44177),Y=l(64686),Q=l(31494),W=l(71370),X=l(69786),G=l(47749),J=l(53156),$=l(13452),ee=l(48880),et=l(74637),el=l.n(et),en=l(32699),ea=l(79789),ec=l.n(ea),ei=l(76806),eo=l(43008),es=l(29834),er=l(92961),ed=l(70297),eu=l(11942),ep=l(14149),eh=l(32352),ev=l(80244),em=l(81035),ex=l(45581),ef=l(75112),eg=l(2513),ey=l(17349),ej=l(81243),eZ=l(18405);let ek=l(64814),eb=l(54498);el().extend(eb),el().extend(ek);let ew=null!==(n=eg.XL.tableConfig.defaultPageSize)&&void 0!==n?n:20,ez=()=>{let e=(0,ei.useRouter)(),[t,{setQuery:l}]=(0,em.o)(),{responsive:n}=(0,ex.Jl)(),{modal:c}=(0,ef.f9)(),[r,u]=(0,d.useState)(t.page?parseInt(t.page,10):1),p=(0,U.NL)(),{data:h,status:g,refetch:y}=(0,eu.BT)({populate:"owner",pagination:{page:r,size:ew}}),{list:k,pagination:b}=h||{},{total_pages:z,total_items:C}=b||{},{data:A,status:S}=(0,er.x7)({pagination:{page:r,size:50}}),{list:M}=A||{},L=[{title:"Projects",width:(null==n?void 0:n.md)?60:40,dataIndex:"name",key:"name",fixed:(null==n?void 0:n.md)?"left":void 0,filterSearch:!0,filters:null==k?void 0:k.map(e=>({text:(null==e?void 0:e.slug)||"",value:(null==e?void 0:e.slug)||""})),onFilter:(e,t)=>null==t||!t.slug||(null==t?void 0:t.slug.indexOf(e.toString()))>-1,render(e,t){var n,c;return"project"===t.type?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ec(),{href:"/apps?project=".concat(t.slug),children:(0,a.jsx)("strong",{children:t.name})})," ",(0,a.jsx)(K.Z,{children:t.slug})]}):"app"===t.type?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:"cursor-pointer text-purple-300 transition-colors hover:text-purple-500 hover:transition-colors",onClick:()=>l({lv1:"edit",type:"app",app:t.slug}),children:t.name})," ",(0,a.jsx)(K.Z,{children:t.slug}),(0,a.jsx)(ec(),{href:(null===(n=t.git)||void 0===n?void 0:n.repoURL)||"#",target:"_blank",children:(0,a.jsx)(K.Z,{color:"cyan",children:null===(c=t.git)||void 0===c?void 0:c.provider})})]}):e}},{title:"Cluster",width:30,dataIndex:"cluster",key:"cluster",render:e=>(0,a.jsx)(Y.ZP,{type:"link",style:{padding:0},children:e})},{title:"Status",dataIndex:"status",key:"status",width:(null==n?void 0:n.md)?20:15,filters:[{text:"archived",value:"archived"},{text:"healthy",value:"healthy"},{text:"undeployed",value:"undeployed"},{text:"partial_healthy",value:"partial_healthy"},{text:"failed",value:"failed"},{text:"crashed",value:"crashed"},{text:"unknown",value:"unknown"}],filterSearch:!0,onFilter:(e,t)=>"archived"===e?void 0!==t.archivedAt:"project"===t.type||"app"===t.type||(console.log("record.status === value :>> ",t.status,e),!!t.status&&t.status===e),render(e,t){let l=e;return t.type,(null==t?void 0:t.archivedAt)&&(l="archived"),(0,a.jsx)(K.Z,{color:"healthy"===e?"success":"undeployed"===e?"pink":"default",icon:(0,a.jsx)(i.Z,{className:"align-middle"}),children:l})}},{title:"Last updated by",dataIndex:"lastUpdatedBy",key:"lastUpdatedBy",width:35,filterSearch:!0,render(e,t){var l;return(0,a.jsx)(a.Fragment,{children:e||(null===(l=t.owner)||void 0===l?void 0:l.name)})}},{title:"Last updated",dataIndex:"updatedAt",key:"updatedAt",width:30,render:e=>(0,a.jsx)(ep.q,{date:e}),sorter:(e,t)=>el()(e.updatedAt).diff(el()(t.updatedAt))},{title:"Created at",dataIndex:"createdAt",key:"createdAt",width:30,render:e=>(0,a.jsx)(ep.q,{date:e}),sorter:(e,t)=>el()(e.createdAt).diff(el()(t.createdAt))},{title:(0,a.jsx)(Q.Z.Text,{className:"text-xs md:text-sm",children:"Action"}),key:"action",fixed:"right",width:(null==n?void 0:n.md)?18:13,dataIndex:"action",render:(e,t)=>t.actions}],[et,ea]=(0,eu.E_)(),[eg,ek]=(0,eo._M)(),[eb,ez]=(0,eo.rg)(),[eC,e_]=(0,eo.WK)(),[eV,eN]=(0,eo.md)(),[eH,eA]=(0,es.rA)(),[eS,eE]=(0,es.fg)(),[eP,eM]=(0,ed.GD)(),[eL,eO]=(0,eo.yq)(),[eT,eR]=(0,eo.wt)(),[eB,eI]=(0,eo.kK)(),eF=(e,t)=>{console.log("env :>> ",t);let l=null==c?void 0:c.info({title:"Add new domains",icon:(0,a.jsx)(o.Z,{}),content:(0,a.jsx)(ey.Z,{app:e,env:t,next(){null==l||l.destroy(),W.ZP.success({message:"Congrats!",description:"New domain was added successfully!"})}}),footer:null,closable:!0,maskClosable:!0,onOk(){}})},eD=()=>{let e=null==c?void 0:c.info({className:"!p-0",style:{padding:0},bodyStyle:{padding:0},icon:null,content:(0,a.jsx)(ej.Z,{onClose:()=>null==e?void 0:e.destroy()}),footer:null,closable:!0,maskClosable:!0,onOk(){}})},eU=(e,t,l,n)=>{let i=null==c?void 0:c.info({title:(0,a.jsx)(Q.Z.Title,{level:3,children:(null==n?void 0:n.title)||"Promote to ".concat(l?l.toUpperCase():"another"," deploy environment")}),icon:null,content:(0,a.jsx)(eZ.Z,{app:e,fromEnv:t,toEnv:l,next(){null==i||i.destroy(),y()}}),footer:null,closable:!0,maskClosable:!0,width:500,styles:{body:{margin:0,width:"100%",justifyContent:"stretch"}},onOk(){}})},eq=(e,t,n)=>{l({lv1:"build",project:e,app:t})},eK=(e,t,n)=>{l({lv1:"release",project:e,app:t,env:n})},eY=(e,t,n)=>{l({lv1:"env_vars",project:e,app:t,env:n})},eQ=async e=>{let t=await et({_id:e});console.log("[deleteProject] result :>> ",t)},eW=async e=>{let t=await eg({_id:e});y(),console.log("[deleteApp] result :>> ",t)},eX=async(e,t)=>{let l=await eb({_id:e,env:t});console.log("[deleteEnvironment] result :>> ",l),p.invalidateQueries({queryKey:["projects","list"]}),p.invalidateQueries({queryKey:["apps","list"]})};(0,d.useEffect)(()=>{if(!e.isReady)return;let l=t.page?parseInt(t.page.toString(),10):1;u(l)},[t.page]);let eG=null==k?void 0:k.map(t=>({...t,type:"project",actions:(0,a.jsx)(X.Z.Compact,{children:(0,a.jsx)(G.Z,{title:"Are you sure to delete this project?",description:(0,a.jsx)("span",{className:"text-red-500",children:"Caution: all of the related apps & deployed environments will be also deleted."}),onConfirm:()=>eQ(t._id),okText:"Yes",cancelText:"No",children:(0,a.jsx)(Y.ZP,{icon:(0,a.jsx)(s.Z,{})})})}),key:t._id,id:t._id,status:"N/A",children:t.apps?t.apps.map(n=>{var c;let i=Object.keys(null!==(c=n.deployEnvironment)&&void 0!==c?c:{}),o=i.map(c=>{var i,o;let r=(n.deployEnvironment||{})[c]||{},d="https://".concat(null===(i=r.domains)||void 0===i?void 0:i[0]),u={name:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(J.Z,{title:(null===(o=r.domains)||void 0===o?void 0:o.map(e=>(0,a.jsx)("ul",{style:{listStyleType:"disc"},children:(0,a.jsx)("li",{style:{listStyleType:"disc",display:"list-item"},children:(0,a.jsxs)(ec(),{href:"https://".concat(e),target:"_blank",children:["https://",e]})})},e)))||"No domains",children:(0,a.jsx)(ec(),{href:d,target:"_blank",children:(0,a.jsx)(v,{})},d)}),(0,a.jsx)(Y.ZP,{type:"link",onClick:()=>l({lv1:"deploy_environment",project:t.slug,app:n.slug,env:c}),children:c.toUpperCase()}),(0,a.jsxs)(K.Z,{color:"green",children:["Namespace: ",r.namespace]})]}),key:"".concat(t.slug,"-").concat(n.slug,"-").concat(c),id:c,slug:c,projectSlug:t.slug,appSlug:n.slug,type:"prod"!==c?"env":"env-prod",url:r.domains?"https://".concat(r.domains[0]):"",...r};return u.actions=(0,a.jsxs)(X.Z.Compact,{children:[(0,a.jsx)(J.Z,{title:"View website",children:(0,a.jsx)(Y.ZP,{icon:(0,a.jsx)(m.Z,{}),href:u.url,target:"_blank",disabled:(0,en.isEmpty)(u.url)})}),(0,a.jsx)($.Z,{menu:{items:[{label:(0,a.jsx)(J.Z,{title:"Build & deploy from latest git source",children:"Deploy now"}),key:"deploy-now",icon:(0,a.jsx)(x.Z,{}),onClick:()=>e.push("/deploy?app=".concat(n.slug,"&env=").concat(c,"&registry=").concat(r.registry,"&cluster=").concat(r.cluster))},{label:(0,a.jsx)(J.Z,{title:"Deploy current build of this environment to production",children:"Promote to PRODUCTION"}),key:"promote-to-production",icon:(0,a.jsx)(f.Z,{}),onClick(){eU(n,c,"prod")}},{label:(0,a.jsx)(J.Z,{title:"Deploy current build of this environment to production",children:"Promote to another"}),key:"promote-to-another",icon:(0,a.jsx)(f.Z,{}),onClick(){eU(n,c)}},{label:"List of releases",key:"list-of-releases",icon:(0,a.jsx)(j,{}),onClick:()=>eK(u.projectSlug,u.appSlug,c)},{label:"List of builds",key:"list-of-builds",icon:(0,a.jsx)(Z.Z,{}),onClick:()=>eq(u.projectSlug,u.appSlug,u.id)},{label:"Deployment YAML",key:"deployment-yaml",icon:(0,a.jsx)(w,{}),onClick:()=>l({lv1:"deployment_yaml",project:u.projectSlug,app:u.appSlug,env:c})},{label:"Environment variables",key:"env-vars",icon:(0,a.jsx)(_,{}),onClick:()=>eY(u.projectSlug,u.appSlug,c)},{label:"Add domains",key:"add-domains",icon:(0,a.jsx)(V.Z,{}),onClick:()=>eF(u.appSlug,c)},{label:"Change cluster",key:"change-cluster",icon:(0,a.jsx)(N.Z,{}),onClick:()=>eU(n,c,c,{title:"Change to another cluster"})},{label:"Sleep",key:"sleep",icon:(0,a.jsx)(H.Z,{}),onClick:()=>eL({slug:u.appSlug,env:c})},{label:"Awake",key:"awake",icon:(0,a.jsx)(E,{}),onClick:()=>eT({slug:u.appSlug,env:c})},{label:"Take down",key:"take-down",icon:(0,a.jsx)(P.Z,{}),onClick:()=>eB({slug:u.appSlug,env:c})}]},children:(0,a.jsx)(Y.ZP,{style:{padding:"4px 4px"},children:(0,a.jsx)(O,{})})}),(0,a.jsx)(G.Z,{title:"Are you sure to delete this environment?",description:(0,a.jsx)("span",{className:"text-red-500",children:"Caution: this is permanent and cannot be rolled back (excepts re-deploying)."}),onConfirm:()=>eX(n._id,c),okText:"Yes",cancelText:"No",children:(0,a.jsx)(Y.ZP,{icon:(0,a.jsx)(s.Z,{})})})]}),u});return{...n,key:n._id,id:n._id,type:"app",children:o,actions:(0,a.jsxs)(X.Z.Compact,{children:[(0,a.jsx)(J.Z,{title:"Edit app",children:(0,a.jsx)(Y.ZP,{icon:(0,a.jsx)(T.Z,{}),onClick:()=>l({lv1:"edit",type:"app",app:n.slug})})}),(0,a.jsx)(J.Z,{title:void 0!==n.archiveAt?"Unarchive":"Archive",children:(0,a.jsx)(Y.ZP,{icon:void 0!==n.archiveAt?(0,a.jsx)(R.Z,{}):(0,a.jsx)(B.Z,{}),onClick(){var e,t;return void 0!==n.archiveAt?null===(e=eV({_id:n._id}))||void 0===e?void 0:e.then(()=>y()):null===(t=eC({_id:n._id}))||void 0===t?void 0:t.then(()=>y())}})}),(0,a.jsx)(G.Z,{title:"Are you sure to delete this app?",description:(0,a.jsx)("span",{className:"text-red-500",children:"Caution: all of the related deployed environments will be also deleted."}),onConfirm:()=>eW(n._id),okText:"Yes",cancelText:"No",children:(0,a.jsx)(Y.ZP,{icon:(0,a.jsx)(s.Z,{})})})]})}}):[]})),eJ=e=>{console.log("Table changed!");let{current:t}=e;l({page:null!=t?t:1})},e$=(0,d.useRef)(null),e0=(0,q.Z)(e$);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ev.Z,{commands:null==k?void 0:k.map(e=>{var t;return{label:"".concat(e.name," (").concat(e.slug,")"),value:e,children:null===(t=e.apps)||void 0===t?void 0:t.filter(e=>!e.deletedAt).map(t=>({value:t,label:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(K.Z,{children:e.slug}),"≫",(0,a.jsx)(K.Z,{children:t.slug})]}),children:Object.keys(t.deployEnvironment||{}).map(n=>({label:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(I.Z,{}),"Deploy environment ≫ ".concat(n.toUpperCase())]}),value:(t.deployEnvironment||{})[n],onSelect:a=>l({lv1:"deploy_environment",project:e.slug,app:t.slug,env:n})}))}))}})}),(0,a.jsx)(eh.V,{title:"Projects & apps",breadcrumbs:[{name:"Workspace"}],actions:[(0,a.jsx)(Y.ZP,{icon:(0,a.jsx)(F.Z,{className:"align-middle"}),href:"/import",children:"Import"},"import-btn"),(0,a.jsx)(Y.ZP,{icon:(0,a.jsx)(D.Z,{className:"align-middle"}),onClick:()=>eD(),children:"Create app"},"create-app-btn")]}),(0,a.jsx)("div",{className:"h-full flex-auto overflow-hidden",ref:e$,children:(0,a.jsx)(ee.Z,{size:"small",loading:"loading"===g,columns:L,dataSource:eG,scroll:{x:(null==n?void 0:n.md)?1600:1200,y:void 0!==(null==e0?void 0:e0.height)?e0.height-120:void 0},sticky:{offsetHeader:0},pagination:{showSizeChanger:!0,current:r,defaultPageSize:ew,total:C,position:["bottomCenter"]},onChange:eJ})})]})};var eC=l(42051),e_=l(10769);let eV=()=>(0,a.jsx)(c.Wk,{children:(0,a.jsx)(eC.o,{meta:(0,a.jsx)(e_.h,{title:"Projects",description:"Manage builds & deployments of your projects / apps "}),children:(0,a.jsx)(ez,{})})});var eN=eV}},function(e){e.O(0,[8201,8564,2967,1003,4184,9198,7168,4825,9774,2888,179],function(){return e(e.s=52853)}),_N_E=e.O()}]);