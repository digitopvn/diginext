(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[155],{58898:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/git",function(){return s(88295)}])},81289:function(e,t,s){"use strict";s.d(t,{D:function(){return p},V:function(){return h}});var n=s(11527),i=s(95752),a=s(99513),l=s(18467),r=s(515),o=s(82129),c=s(8290),d=s(20193),u=s(95954),x=s(85276);function p(e){let{token:{colorTextHeading:t}}=r.Z.useToken(),{isDarkMode:s}=(0,x.vs)(),{color:i=s?"white":"black",value:a}=e;return(0,n.jsx)("h1",{className:"my-0 grow py-0 pt-2 text-xl font-bold",style:{color:i},children:a})}let h=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,u.useRouter)(),{breadcrumbs:s=[],title:x="Page Title",actions:h=[(0,n.jsx)(o.ZP,{type:"default",icon:(0,n.jsx)(i.Z,{className:"align-middle"}),children:"Settings"},"workspace-setting-btn"),(0,n.jsx)(o.ZP,{type:"default",icon:(0,n.jsx)(a.Z,{className:"align-middle"})},"more-btn")]}=e,{token:{colorTextHeading:m}}=r.Z.useToken();return(0,n.jsxs)("div",{className:"border-b border-gray-300 px-6 py-4",children:[(0,n.jsxs)(c.Z,{children:[(0,n.jsx)(c.Z.Item,{href:"".concat(t.basePath,"/"),children:(0,n.jsx)(l.Z,{})},"breadcrumb-home"),s.map((e,t)=>(0,n.jsxs)(c.Z.Item,{href:e.url,children:[e.icon,(0,n.jsx)("span",{children:e.name})]},"breadcrumb-".concat(t)))]}),(0,n.jsxs)("div",{className:" flex w-full flex-row",children:[(0,n.jsx)(p,{value:x}),(0,n.jsx)("div",{children:(0,n.jsx)(d.Z,{children:h})})]})]})}},88295:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return et}});var n,i=s(11527),a=s(64025),l=s(49724),r=s(96430),o=s(38833),c=s(82129),d=s(69766),u=s(50959),x=s(66109),p=s(81289),h=s(29935),m=s(31604),g=s(9734),j=s(4084),f=s(83036),v=s(17434),Z=s(7482),b=s(8811),k=s(39502),y=s(95568),w=s(25857),P=s(80324),C=s(32699),S=s(95019),N=s(7761),_=s(77172),F=s(31326),T=s(78007);let I=e=>{let{next:t}=e,[s]=(0,S.xP)(),n=async e=>{console.log("Success:",e);let n=await s({type:"bitbucket",bitbucket_oauth:e});n&&t&&n.data.slug&&t(n.data.slug)},a=e=>{console.log("Failed:",e)};return(0,i.jsxs)(F.Z,{name:"app-password",labelCol:{span:6},wrapperCol:{span:18},style:{maxWidth:600},onFinish:n,onFinishFailed:a,autoComplete:"off",children:[(0,i.jsx)(F.Z.Item,{label:"Username",name:"username",rules:[{required:!0,message:"Please input your username!"}],children:(0,i.jsx)(T.Z,{prefix:(0,i.jsx)(j.Z,{}),placeholder:"Username"})}),(0,i.jsx)(F.Z.Item,{label:"App password",name:"app_password",rules:[{required:!0,message:"Please input app password!"}],children:(0,i.jsx)(T.Z.Password,{prefix:(0,i.jsx)(N.Z,{})})}),(0,i.jsx)(F.Z.Item,{wrapperCol:{offset:6,span:18},children:(0,i.jsx)(c.ZP,{type:"primary",htmlType:"submit",icon:(0,i.jsx)(_.Z,{}),children:"Connect"})})]})},W=e=>{let{next:t}=e,[s]=(0,S.xP)(),n=async e=>{console.log("Success:",e);let n=await s({type:"github",github_oauth:{personal_access_token:e.access_token}});n&&t&&n.data.slug&&t(n.data.slug)},a=e=>{console.log("Failed:",e)};return(0,i.jsxs)(F.Z,{name:"personal-access-token",style:{maxWidth:600},onFinish:n,onFinishFailed:a,autoComplete:"off",children:[(0,i.jsx)(F.Z.Item,{style:{width:"100%",display:"block"},name:"access_token",rules:[{required:!0,message:"Please input your personal access token."}],children:(0,i.jsx)(T.Z.Password,{style:{flex:1,marginRight:6},size:"large",prefix:(0,i.jsx)(N.Z,{}),placeholder:"Your personal access token",autoComplete:"off"})}),(0,i.jsx)(F.Z.Item,{children:(0,i.jsx)(c.ZP,{size:"large",type:"primary",htmlType:"submit",icon:(0,i.jsx)(_.Z,{}),children:"Connect"})})]})},A=()=>{var e,t,s,n;let[a,l]=(0,u.useState)(0),[r,o]=(0,u.useState)(),c=(0,S.oR)({filter:{slug:r},enabled:void 0!==r}),[d]=(0,S.Ve)({filter:{slug:r}});return(0,i.jsxs)(i.Fragment,{children:[0===a&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(v.Z.Title,{level:2,className:"text-center",children:"Bitbucket Connect"}),(0,i.jsxs)(Z.Z,{children:["WITH APP PASSWORD"," ",(0,i.jsx)(v.Z.Link,{href:"https://support.atlassian.com/bitbucket-cloud/docs/app-passwords/",target:"_blank",children:(0,i.jsx)(h.Z,{})})]}),(0,i.jsx)(b.Z,{className:"app-password",children:(0,i.jsx)(I,{next:e=>{console.log("providerSlug :>> ",e),o(e),l(1)}})})]}),1===a&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(v.Z.Title,{level:2,className:"text-center",children:"Select bitbucket workspace"}),(0,i.jsxs)(b.Z,{className:"org-select",children:["loading"===c.status&&(0,i.jsx)(m.Z,{}),"error"===c.status&&(0,i.jsx)(k.Z,{type:"error",message:(0,i.jsx)(i.Fragment,{children:(null===(e=c.data)||void 0===e?void 0:e.messages)||"Authenticated failed."})}),"success"===c.status&&(0,i.jsx)(y.Z,{style:{display:"block"},value:null===(t=null===(s=c.data)||void 0===s?void 0:s.list[0])||void 0===t?void 0:t.name,onSelect:e=>{var t;console.log("org :>> ",e),null===(t=d({gitWorkspace:e}))||void 0===t||t.then(e=>{if((0,C.isEmpty)(e.data))return;let t=e.data[0]||e.data;if(console.log("gitProvider :>> ",t),!t){w.Z.error({message:"Oops...",description:"Can't update git provider."});return}l(2)})},options:(null===(n=c.data)||void 0===n?void 0:n.list.map(e=>({value:e.name,label:e.name})))||[]})]})]}),2===a&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(v.Z.Title,{level:2,className:"text-center",children:[(0,i.jsx)(g.Z,{})," Congrats!"]}),(0,i.jsx)(b.Z,{className:"org-select text-center",children:"You've connected your Bitbucket workspace successfully."})]}),(0,i.jsx)("br",{}),(0,i.jsx)(P.Z,{current:a,items:[{title:"Login",icon:(0,i.jsx)(j.Z,{})},{title:"Select org.",icon:(0,i.jsx)(f.Z,{})},{title:"Done",icon:(0,i.jsx)(g.Z,{})}]})]})},O=()=>{var e,t,s;let[n,a]=(0,u.useState)(0),[l,r]=(0,u.useState)(),o=(0,S.oR)({filter:{slug:l},enabled:void 0!==l});console.log("orgs.data :>> ",o.data);let[c]=(0,S.Ve)({filter:{slug:l}});return(0,i.jsxs)(i.Fragment,{children:[0===n&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(v.Z.Title,{level:2,className:"text-center",children:"Github Connect"}),(0,i.jsxs)(Z.Z,{children:["WITH PERSONAL ACCESS TOKEN"," ",(0,i.jsx)(v.Z.Link,{href:"https://docs.github.com/en/authentication/keeping-your-account-and-data-secure/creating-a-personal-access-token",target:"_blank",children:(0,i.jsx)(h.Z,{})})]}),(0,i.jsx)(b.Z,{className:"personal-access-token",children:(0,i.jsx)(W,{next:e=>{console.log("providerSlug :>> ",e),r(e),a(1)}})})]}),1===n&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(v.Z.Title,{level:2,className:"text-center",children:"Select github organization"}),(0,i.jsx)(b.Z,{className:"org-select",children:(0,i.jsx)(y.Z,{style:{display:"block"},value:null===(e=null===(t=o.data)||void 0===t?void 0:t.list[0])||void 0===e?void 0:e.name,onSelect:e=>{var t;console.log("org :>> ",e),null===(t=c({gitWorkspace:e}))||void 0===t||t.then(e=>{if((0,C.isEmpty)(e.data))return;let t=e.data[0]||e.data;if(console.log("gitProvider :>> ",t),!t){w.Z.error({message:"Oops...",description:"Can't update git provider."});return}a(2)})},options:(null===(s=o.data)||void 0===s?void 0:s.list.map(e=>({value:e.name,label:e.name})))||[]})})]}),2===n&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(v.Z.Title,{level:2,className:"text-center",children:[(0,i.jsx)(g.Z,{})," Congrats!"]}),(0,i.jsx)(b.Z,{className:"org-select text-center",children:"You've connected your Github organization successfully."})]}),(0,i.jsx)("br",{}),(0,i.jsx)(P.Z,{current:n,items:[{title:"Login",icon:(0,i.jsx)(j.Z,{})},{title:"Select org.",icon:(0,i.jsx)(f.Z,{})},{title:"Done",icon:(0,i.jsx)(g.Z,{})}]})]})},E=e=>{let{provider:t}=e;return"bitbucket"===t?(0,i.jsx)(A,{}):(0,i.jsx)(O,{})};var L=s(79908),z=s(5962),R=s(20193),G=s(42741),X=s(39658),q=s(74637),B=s.n(q),D=s(1830),H=s(32365),V=s(74883);let Y=s(64814),U=s(54498);B().extend(U),B().extend(Y);let K=[{title:"Name",width:70,dataIndex:"name",key:"name",fixed:"left",filterSearch:!0,filters:[{text:"goon",value:"goon"}],onFilter:(e,t)=>!t.name||t.name.indexOf(e.toString())>-1},{title:"Host",dataIndex:"host",key:"host",width:50},{title:"Namespace",width:50,dataIndex:"gitWorkspace",key:"gitWorkspace",render:(e,t)=>{var s;return(0,i.jsx)(c.ZP,{type:"link",style:{padding:0},href:null===(s=t.repo)||void 0===s?void 0:s.url,target:"_blank",children:e})},filterSearch:!0,filters:[{text:"goon",value:"goon"}],onFilter:(e,t)=>!t.gitWorkspace||t.gitWorkspace.indexOf(e.toString())>-1},{title:"Created by",dataIndex:"owner",key:"owner",width:50,filterSearch:!0,filters:[{text:"goon",value:"goon"}],onFilter:(e,t)=>!t.owner||(t.owner.name||"").toLowerCase().indexOf(e.toString())>-1,render:(e,t)=>(0,i.jsx)(i.Fragment,{children:t.owner.name})},{title:"Created at",dataIndex:"createdAt",key:"createdAt",width:50,render:e=>(0,i.jsx)(D.q,{date:e}),sorter:(e,t)=>B()(e.createdAt).diff(B()(t.createdAt))},{title:"Action",key:"action",width:50,fixed:"right",render:(e,t)=>t.actions}],J=null!==(n=V.XL.tableConfig.defaultPageSize)&&void 0!==n?n:20,M=()=>{let[e,t]=(0,u.useState)(1),{data:s}=(0,S.y3)({filter:{verified:!0},populate:"owner",pagination:{page:e,size:J}}),{list:n,pagination:a}=s||{},{total_items:l}=a||{},[r]=(0,S.CX)(),[o,{setQuery:d}]=(0,H.o)(),x=async e=>{let t=await r({_id:e});console.log("deleteItem :>> ",t)},p=(null==n?void 0:n.map(e=>({...e,actions:(0,i.jsxs)(R.Z.Compact,{children:[(0,i.jsx)(c.ZP,{icon:(0,i.jsx)(L.Z,{}),onClick:()=>d({lv1:"edit",type:"git-provider",git_provider_slug:e.slug})}),(0,i.jsx)(G.Z,{title:"Are you sure to delete this git provider?",description:(0,i.jsx)("span",{className:"text-red-500",children:"Caution: this is permanent and cannot be rolled back."}),onConfirm:()=>x(e._id),okText:"Yes",cancelText:"No",children:(0,i.jsx)(c.ZP,{icon:(0,i.jsx)(z.Z,{})})})]})})))||[],h=e=>{let{current:s}=e;s&&t(s)};return(0,i.jsx)("div",{children:(0,i.jsx)(X.Z,{columns:K,dataSource:p,scroll:{x:1200},sticky:{offsetHeader:48},pagination:{pageSize:J,total:l},onChange:h})})};var Q=s(14062),$=s(96861);let ee=()=>{let[e,t]=(0,u.useState)(),[s,n]=(0,u.useState)(!1),h=e=>{t(e),n(!0)},m=()=>{n(!1)},g=[{key:"1",icon:(0,i.jsx)(a.Z,{}),onClick:()=>h("bitbucket"),label:(0,i.jsx)(i.Fragment,{children:"Bitbucket"})},{key:"2",icon:(0,i.jsx)(l.Z,{}),onClick:()=>h("github"),label:(0,i.jsx)(i.Fragment,{children:"Github"})}];return(0,i.jsx)(x.Wk,{children:(0,i.jsxs)(Q.o,{meta:(0,i.jsx)($.h,{title:"Git Providers",description:"The collection of GIT Providers for your team."}),children:[(0,i.jsx)(p.V,{title:"Git Providers",breadcrumbs:[{name:"Workspace"}],actions:[(0,i.jsx)(o.Z,{menu:{items:g},placement:"bottomRight",arrow:!0,children:(0,i.jsx)(c.ZP,{type:"default",icon:(0,i.jsx)(r.Z,{className:"align-middle"}),children:"Connect"})},"git-connect-btn")]}),(0,i.jsx)(M,{}),(0,i.jsx)(d.Z,{open:s,onCancel:m,footer:null,destroyOnClose:!0,children:e&&(0,i.jsx)(E,{provider:e})})]})})};var et=ee},96861:function(e,t,s){"use strict";s.d(t,{h:function(){return c}});var n=s(11527),i=s(67559),a=s.n(i),l=s(95954),r=s(68449),o=s(74883);let c=e=>{let t=(0,l.useRouter)();return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(a(),{children:[(0,n.jsx)("meta",{charSet:"UTF-8"},"charset"),(0,n.jsx)("meta",{name:"viewport",content:"width=device-width,initial-scale=1"},"viewport"),(0,n.jsx)("link",{rel:"apple-touch-icon",href:"".concat(t.basePath,"/apple-touch-icon.png")},"apple"),(0,n.jsx)("link",{rel:"icon",type:"image/png",sizes:"32x32",href:"".concat(t.basePath,"/favicon-32x32.png")},"icon32"),(0,n.jsx)("link",{rel:"icon",type:"image/png",sizes:"16x16",href:"".concat(t.basePath,"/favicon-16x16.png")},"icon16"),(0,n.jsx)("link",{rel:"icon",href:"".concat(t.basePath,"/favicon.ico")},"favicon")]}),(0,n.jsx)(r.PB,{title:"".concat(e.title," | ").concat(o.XL.site_name),description:e.description,canonical:e.canonical,openGraph:{title:e.title,description:e.description,url:e.canonical,locale:o.XL.locale,site_name:o.XL.site_name}}),(0,n.jsx)("link",{href:"https://cdn.jsdelivr.net/npm/remixicon@2.5.0/fonts/remixicon.css",rel:"stylesheet"})]})}}},function(e){e.O(0,[201,967,728,139,368,647,774,888,179],function(){return e(e.s=58898)}),_N_E=e.O()}]);