(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8512],{43921:function(e,l,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/project",function(){return t(42092)}])},42092:function(e,l,t){"use strict";t.r(l),t.d(l,{default:function(){return eS}});var n,s=t(11527),i=t(14367),o=t(86218),a=t(4651),r=t(13740),d=t(31906),c=t(10544),u=t(76332),p=t(76068),m=t(34380),x=t(14989),h=t(66396),j=t(34282),v=t(63626),g=t(91446),y=t(84765),f=t(35396),Z=t(58254),k=t(5029),b=t(70759),S=t(48424),C=t(78177),w=t(233),_=t(30388),I=t(85273),N=t(58699),P=t(46457),Y=t(5433),A=t(36865),F=t(61663),T=t(88158),E=t(34153),L=t(5489),D=t(74637),O=t.n(D),U=t(32699),q=t(25698),z=t.n(q),M=t(39445),R=t(50959),W=t(54389),K=t(31211),V=t(54579),B=t(51959),G=t(42149),X=t(92810),Q=t(74190);let H=e=>{var l;let t=(0,M.useRouter)(),[n,i]=R.useState(!1),[o,a]=R.useState(""),[r,d]=R.useState([]),c=r[r.length-1],u=e=>{t.push(e),i(!1)};return R.useEffect(()=>{let e=e=>{"k"===e.key&&(e.metaKey||e.ctrlKey)&&(e.preventDefault(),i(e=>!e))};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[]),(0,s.jsxs)(Q.mY.Dialog,{open:n,onOpenChange:i,label:"Global Command Menu",children:[(0,s.jsx)(Q.mY.Input,{value:o,onValueChange:a}),(0,s.jsxs)(Q.mY.List,{children:[(0,s.jsx)(Q.mY.Empty,{children:"No results found."}),null===(l=c?c.children:null==e?void 0:e.commands)||void 0===l?void 0:l.map((e,l)=>e.children?(0,s.jsx)(Q.mY.Group,{heading:e.label,children:e.children.map((e,l)=>(0,s.jsx)(Q.mY.Item,{onSelect(){e.children?(a(""),d([...r,e])):(i(!1),e.onSelect&&e.onSelect(e.value))},children:e.label},"subcmd-".concat(e.label,"-").concat(l)))},"cmdgroup-".concat(l)):(0,s.jsx)(Q.mY.Item,{onSelect(){i(!1),e.onSelect&&e.onSelect(e.value)},children:e.label},"cmd-".concat(l))),c&&(0,s.jsxs)(Q.mY.Item,{onSelect(){d([]),a("")},children:[(0,s.jsx)(X.Z,{})," Reset"]}),(0,s.jsx)(Q.mY.Separator,{}),(0,s.jsxs)(Q.mY.Group,{heading:"Navigation",children:[(0,s.jsx)(Q.mY.Item,{onSelect:()=>u("/"),children:"Dashboard"}),(0,s.jsx)(Q.mY.Item,{onSelect:()=>u("/project"),children:"Projects & apps"}),(0,s.jsx)(Q.mY.Item,{onSelect:()=>u("/build"),children:"Builds & deploys"}),(0,s.jsx)(Q.mY.Item,{onSelect:()=>u("/framework"),children:"Frameworks"}),(0,s.jsx)(Q.mY.Item,{onSelect:()=>u("/git"),children:"Git Providers"}),(0,s.jsx)(Q.mY.Item,{onSelect:()=>u("/cronjob"),children:"Cronjobs"}),(0,s.jsx)(Q.mY.Item,{onSelect:()=>u("/monitor/node"),children:"Monitoring ≫ Nodes"}),(0,s.jsx)(Q.mY.Item,{onSelect:()=>u("/monitor/namespace"),children:"Monitoring ≫ Namespaces"}),(0,s.jsx)(Q.mY.Item,{onSelect:()=>u("/monitor/service"),children:"Monitoring ≫ Services"}),(0,s.jsx)(Q.mY.Item,{onSelect:()=>u("/monitor/ingress"),children:"Monitoring ≫ Ingresses"}),(0,s.jsx)(Q.mY.Item,{onSelect:()=>u("/monitor/deployment"),children:"Monitoring ≫ Deployments"}),(0,s.jsx)(Q.mY.Item,{onSelect:()=>u("/monitor/pod"),children:"Monitoring ≫ Pods"}),(0,s.jsx)(Q.mY.Item,{onSelect:()=>u("/infrastructure/cloud-provider"),children:"Infrastructure ≫ Cloud Providers"}),(0,s.jsx)(Q.mY.Item,{onSelect:()=>u("/infrastructure/cluster"),children:"Infrastructure ≫ K8S Clusters"}),(0,s.jsx)(Q.mY.Item,{onSelect:()=>u("/infrastructure/database"),children:"Infrastructure ≫ Databases"}),(0,s.jsx)(Q.mY.Item,{onSelect:()=>u("/infrastructure/registry"),children:"Infrastructure ≫ Container Registries"}),(0,s.jsx)(Q.mY.Item,{onSelect:()=>u("/workspace/users"),children:"Workspace ≫ Users"}),(0,s.jsx)(Q.mY.Item,{onSelect:()=>u("/workspace/teams"),children:"Workspace ≫ Teams"}),(0,s.jsx)(Q.mY.Item,{onSelect:()=>u("/workspace/roles"),children:"Workspace ≫ Roles"})]})]})]})};var J=t(8462),$=t(18315),ee=t(55174),el=t(55915),et=t(28842),en=t(10684),es=t(50002),ei=t(80042);let eo=e=>{let{app:l,env:t,next:n}=e,[i,o]=(0,W.mv)({filter:{slug:l}}),a=async e=>{console.log("Success:",e);let l=[e.domain],s=await i({domains:l,env:t});console.log("response :>> ",s),n&&n()},r=e=>{console.log("Failed:",e)};return(0,s.jsxs)(es.Z,{name:"add-domains",style:{maxWidth:600},layout:"vertical",onFinish:a,onFinishFailed:r,autoComplete:"off",preserve:!1,children:[(0,s.jsx)(es.Z.Item,{label:"Domain",name:"domain",rules:[{required:!0,message:"Please input your domain."}],children:(0,s.jsx)(ei.Z,{prefix:(0,s.jsx)(et.Z,{}),placeholder:"Your domain"})}),(0,s.jsx)(es.Z.Item,{children:(0,s.jsx)(N.ZP,{type:"primary",htmlType:"submit",icon:"success"===o?(0,s.jsx)(en.Z,{}):(0,s.jsx)(C.Z,{}),loading:"loading"===o,children:"Submit"})})]})};var ea=t(32105),er=t(38101),ed=t(59850),ec=t(66599),eu=t(75616),ep=t(476),em=t(3748),ex=t(54695),eh=t(41507);let ej=e=>{var l,t,n,i,o,a;let{className:r=""}=e,d=(0,M.useRouter)(),{token:{colorBgContainer:c}}=eu.Z.useToken(),[u]=es.Z.useForm(),[p,{setQuery:m}]=(0,J.o)(),{sshUrl:x,branch:h}=p,[j,v]=(0,R.useState)(),{data:{list:g=[]}={},status:y}=(0,V.Zz)({populate:"owner",pagination:{page:1,size:100}}),{data:{list:f}={},status:Z}=(0,eh.y3)(),{data:{list:k}={},status:b}=(0,ex.Dh)(),[S,C]=(0,W.TW)(),w=async l=>{console.log("Submit:",l),S({name:l.name,project:l.project,gitProvider:l.gitProvider,framework:j,shouldCreateGitRepo:!0}).then(l=>{console.log("res.data :>> ",l.data),(null==e?void 0:e.onDone)&&e.onDone(),l.status?(null==e?void 0:e.onSuccess)&&(null==e||e.onSuccess(l.data)):(null==e?void 0:e.onFailure)&&(null==e||e.onFailure(l.messages.join(".")))}).catch(l=>{(null==e?void 0:e.onFailure)&&(null==e||e.onFailure("Unable to create new app: ".concat(l,".")))})},_=e=>{console.log("Failed:",e)};return(0,s.jsxs)(ep.Z,{bordered:!1,className:"min-w-[350px]",title:(0,s.jsx)(P.Z.Title,{level:4,className:"!mb-0 text-center",children:"success"===C?"Congrats!":"loading"===C?"Processing...":"Create new app"}),children:["loading"===C&&(0,s.jsx)("div",{className:"p-4 text-center",children:(0,s.jsx)(ea.Z,{})}),"success"===C&&(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"mb-5 text-center text-3xl text-green-500",children:(0,s.jsx)(er.Z,{})}),(0,s.jsx)(N.ZP,{icon:(0,s.jsx)(ed.Z,{}),size:"large",shape:"round",onClick:()=>(null==e?void 0:e.onClose)?e.onClose():d.push("/project"),children:"Back to projects & apps"})]}),"success"!==C&&"loading"!==C?(0,s.jsxs)(es.Z,{className:["h-full","overflow-x-hidden",r].join(" "),layout:"vertical",form:u,onFinish:w,onFinishFailed:_,autoComplete:"off",preserve:!1,children:[(0,s.jsx)(es.Z.Item,{name:"name",rules:[{required:!0,message:"App's name is required."}],children:(0,s.jsx)(ei.Z,{placeholder:"App's name",autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",size:"large",tabIndex:0,autoFocus:!0})}),(0,s.jsx)(es.Z.Item,{name:"project",rules:[{required:!0,message:"Please select project."}],className:"mb-2",initialValue:null===(l=(g||[])[0])||void 0===l?void 0:l._id,children:(0,s.jsx)(em.Z,{placeholder:"Select parent project",showSearch:!0,filterOption:(e,l)=>(null!==(i=null==l?void 0:l.label)&&void 0!==i?i:"").toLowerCase().includes(e.toLowerCase()),options:null==g?void 0:g.map(e=>({label:e.name,value:e._id}))})}),(0,s.jsx)(es.Z.Item,{name:"gitProvider",rules:[{required:!0,message:"Please select git provider."}],className:"mb-2",initialValue:null===(t=(f||[])[0])||void 0===t?void 0:t._id,children:(0,s.jsx)(em.Z,{placeholder:"Select git provider for this app",showSearch:!0,filterOption:(e,l)=>(null!==(o=null==l?void 0:l.label)&&void 0!==o?o:"").toLowerCase().includes(e.toLowerCase()),options:null==f?void 0:f.map(e=>({label:e.name,value:e._id}))})}),(0,s.jsx)(es.Z.Item,{name:"framework",rules:[{required:!0,message:"Please select framework."}],className:"mb-2",initialValue:null===(n=(k||[])[0])||void 0===n?void 0:n._id,children:(0,s.jsx)(em.Z,{placeholder:"Select git provider for this app",showSearch:!0,filterOption:(e,l)=>(null!==(a=null==l?void 0:l.label)&&void 0!==a?a:"").toLowerCase().includes(e.toLowerCase()),options:null==k?void 0:k.map(e=>({label:e.name,value:e._id})),onSelect:e=>v(null==k?void 0:k.find(l=>l._id===e))})}),(0,s.jsx)(es.Z.Item,{style:{marginBottom:0},className:"text-center",children:(0,s.jsx)(N.ZP,{type:"primary",htmlType:"submit",icon:(0,s.jsx)(ec.Z,{}),size:"large",shape:"round",children:"Create"})})]}):(0,s.jsx)(s.Fragment,{})]})},ev=t(64814),eg=t(54498);O().extend(eg),O().extend(ev);let ey=null!==(n=el.XL.tableConfig.defaultPageSize)&&void 0!==n?n:20,ef=()=>{let e=(0,M.useRouter)(),[l,{setQuery:t}]=(0,J.o)(),{responsive:n}=(0,$.Jl)(),{modal:i}=(0,ee.f9)(),[D,q]=(0,R.useState)(l.page?parseInt(l.page,10):1),X=(0,w.NL)(),{data:Q,status:el,refetch:et}=(0,V.BT)({populate:"owner",pagination:{page:D,size:ey}}),{list:en,pagination:es}=Q||{},{total_pages:ei,total_items:ea}=es||{},er=[{title:"Project/app",width:(null==n?void 0:n.md)?60:40,dataIndex:"name",key:"name",fixed:(null==n?void 0:n.md)?"left":void 0,filterSearch:!0,filters:null==en?void 0:en.map(e=>({text:(null==e?void 0:e.slug)||"",value:(null==e?void 0:e.slug)||""})),onFilter:(e,l)=>null==l||!l.slug||(null==l?void 0:l.slug.indexOf(e.toString()))>-1,render(e,l){var n,i;return"project"===l.type?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(z(),{href:"/apps?project=".concat(l.slug),children:(0,s.jsx)("strong",{children:l.name})})," ",(0,s.jsx)(I.Z,{children:l.slug})]}):"app"===l.type?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:"cursor-pointer text-purple-300 transition-colors hover:text-purple-500 hover:transition-colors",onClick:()=>t({lv1:"edit",type:"app",app:l.slug}),children:l.name})," ",(0,s.jsx)(I.Z,{children:l.slug}),(0,s.jsx)(z(),{href:(null===(n=l.git)||void 0===n?void 0:n.repoURL)||"#",target:"_blank",children:(0,s.jsx)(I.Z,{color:"cyan",children:null===(i=l.git)||void 0===i?void 0:i.provider})})]}):e}},{title:"Cluster",width:30,dataIndex:"cluster",key:"cluster",render:e=>(0,s.jsx)(N.ZP,{type:"link",style:{padding:0},children:e}),filterSearch:!0,filters:[{text:"goon",value:"goon"}],onFilter:(e,l)=>l.cluster&&l.cluster.indexOf(e.toString())>-1||!0},{title:"Status",dataIndex:"status",key:"status",width:(null==n?void 0:n.md)?20:15,filters:[{text:"archived",value:"archived"},{text:"healthy",value:"healthy"},{text:"undeployed",value:"undeployed"},{text:"partial_healthy",value:"partial_healthy"},{text:"failed",value:"failed"},{text:"crashed",value:"crashed"},{text:"unknown",value:"unknown"}],filterSearch:!0,onFilter:(e,l)=>"archived"===e?void 0!==l.archivedAt:"project"===l.type||"app"===l.type||(console.log("record.status === value :>> ",l.status,e),!!l.status&&l.status===e),render(e,l){let t=e;return l.type,(null==l?void 0:l.archivedAt)&&(t="archived"),(0,s.jsx)(I.Z,{color:"healthy"===e?"success":"undeployed"===e?"pink":"default",icon:(0,s.jsx)(o.Z,{className:"align-middle"}),children:t})}},{title:"Last updated by",dataIndex:"lastUpdatedBy",key:"lastUpdatedBy",width:35,filterSearch:!0,render(e,l){var t;return(0,s.jsx)(s.Fragment,{children:e||(null===(t=l.owner)||void 0===t?void 0:t.name)})}},{title:"Last updated",dataIndex:"updatedAt",key:"updatedAt",width:30,render:e=>(0,s.jsx)(B.q,{date:e}),sorter:(e,l)=>O()(e.updatedAt).diff(O()(l.updatedAt))},{title:"Created at",dataIndex:"createdAt",key:"createdAt",width:30,render:e=>(0,s.jsx)(B.q,{date:e}),sorter:(e,l)=>O()(e.createdAt).diff(O()(l.createdAt))},{title:(0,s.jsx)(P.Z.Text,{className:"text-xs md:text-sm",children:"Action"}),key:"action",fixed:"right",width:(null==n?void 0:n.md)?18:13,dataIndex:"action",render:(e,l)=>l.actions}],[ed,ec]=(0,V.E_)(),[eu,ep]=(0,W._M)(),[em,ex]=(0,W.rg)(),[eh,ev]=(0,W.WK)(),[eg,ef]=(0,W.md)(),[eZ,ek]=(0,K.rA)(),[eb,eS]=(0,K.fg)(),[eC,ew]=(0,W.yq)(),[e_,eI]=(0,W.wt)(),[eN,eP]=(0,W.kK)(),eY=(e,l)=>{console.log("env :>> ",l);let t=null==i?void 0:i.info({title:"Add new domains",icon:(0,s.jsx)(a.Z,{}),content:(0,s.jsx)(eo,{app:e,env:l,next(){null==t||t.destroy(),Y.Z.success({message:"Congrats!",description:"New domain was added successfully!"})}}),footer:null,closable:!0,maskClosable:!0,onOk(){}})},eA=()=>{let e=null==i?void 0:i.info({className:"!p-0",style:{padding:0},bodyStyle:{padding:0},icon:null,content:(0,s.jsx)(ej,{onClose:()=>null==e?void 0:e.destroy()}),footer:null,closable:!0,maskClosable:!0,onOk(){}})},eF=(e,l,n)=>{t({lv1:"build",project:e,app:l})},eT=(e,l,n)=>{t({lv1:"release",project:e,app:l,env:n})},eE=(e,l,n)=>{t({lv1:"env_vars",project:e,app:l,env:n})},eL=async e=>{let l=await ed({_id:e});console.log("[deleteProject] result :>> ",l)},eD=async e=>{let l=await eu({_id:e});et(),console.log("[deleteApp] result :>> ",l)},eO=async(e,l)=>{let t=await em({_id:e,env:l});console.log("[deleteEnvironment] result :>> ",t),X.invalidateQueries({queryKey:["projects","list"]}),X.invalidateQueries({queryKey:["apps","list"]})};(0,R.useEffect)(()=>{if(!e.isReady)return;let t=l.page?parseInt(l.page.toString(),10):1;q(t)},[l.page]);let eU=null==en?void 0:en.map(l=>({...l,type:"project",actions:(0,s.jsx)(A.Z.Compact,{children:(0,s.jsx)(F.Z,{title:"Are you sure to delete this project?",description:(0,s.jsx)("span",{className:"text-red-500",children:"Caution: all of the related apps & deployed environments will be also deleted."}),onConfirm:()=>eL(l._id),okText:"Yes",cancelText:"No",children:(0,s.jsx)(N.ZP,{icon:(0,s.jsx)(r.Z,{})})})}),key:l._id,id:l._id,status:"N/A",children:l.apps?l.apps.map(n=>{var i;let o=Object.keys(null!==(i=n.deployEnvironment)&&void 0!==i?i:{}),a=o.map(i=>{var o,a,f;let Z=(n.deployEnvironment||{})[i]||{},k="https://".concat(null===(o=Z.domains)||void 0===o?void 0:o[0]),b={name:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(T.Z,{title:(null===(a=Z.domains)||void 0===a?void 0:a.map(e=>(0,s.jsx)("ul",{style:{listStyleType:"disc"},children:(0,s.jsx)("li",{style:{listStyleType:"disc",display:"list-item"},children:(0,s.jsxs)(z(),{href:"https://".concat(e),target:"_blank",children:["https://",e]})})},e)))||"No domains",children:(0,s.jsx)(z(),{href:k,target:"_blank",children:(0,s.jsx)(d.Z,{})},k)}),(0,s.jsx)(N.ZP,{type:"link",onClick:()=>t({lv1:"deploy_environment",project:l.slug,app:n.slug,env:i}),children:i.toUpperCase()}),(0,s.jsxs)(I.Z,{color:"green",children:["Namespace: ",Z.namespace]})]}),key:"".concat(l.slug,"-").concat(n.slug,"-").concat(i),id:i,slug:i,projectSlug:l.slug,appSlug:n.slug,type:"prod"!==i?"env":"env-prod",url:Z.domains?"https://".concat(Z.domains[0]):"",prereleaseUrl:"prod"===i?null!==(f=Z.prereleaseUrl)&&void 0!==f?f:"https://".concat(n.slug,".prerelease.diginext.site").toLowerCase():"",...Z};return b.actions="prod"===i?(0,s.jsxs)(A.Z.Compact,{children:[(0,s.jsx)(T.Z,{title:"Preview pre-release site",children:(0,s.jsx)(N.ZP,{icon:(0,s.jsx)(c.Z,{}),href:b.prereleaseUrl,target:"_blank",disabled:(0,U.isEmpty)(b.prereleaseUrl)})}),(0,s.jsx)(T.Z,{title:"View live website",children:(0,s.jsx)(N.ZP,{icon:(0,s.jsx)(u.Z,{}),href:b.url,target:"_blank",disabled:(0,U.isEmpty)(b.url)})}),(0,s.jsx)(E.Z,{menu:{items:[{label:"Deploy now",key:"deploy-now",icon:(0,s.jsx)(p.Z,{}),onClick(){let l="/deploy?app=".concat(n.slug,"&env=").concat(i);Z.registry&&(l+="&registry=".concat(Z.registry)),Z.cluster&&(l+="&cluster=".concat(Z.cluster)),Z.port&&(l+="&port=".concat(Z.port)),e.push(l)}},{label:"List of builds",key:"list-of-builds",icon:(0,s.jsx)(m.Z,{}),onClick:()=>eF(b.projectSlug,b.appSlug,b.id)},{label:"List of releases",key:"list-of-releases",icon:(0,s.jsx)(p.Z,{}),onClick:()=>eT(b.projectSlug,b.appSlug,i)},{label:"Modify environment variables",key:"env-vars",icon:(0,s.jsx)(x.Z,{}),onClick:()=>eE(b.projectSlug,b.appSlug,i)},{label:"Add domains",key:"add-domains",icon:(0,s.jsx)(h.Z,{}),onClick:()=>eY(b.appSlug,i)},{label:"Sleep",key:"sleep",icon:(0,s.jsx)(j.Z,{}),onClick:()=>eC({slug:b.appSlug,env:i})},{label:"Awake",key:"awake",icon:(0,s.jsx)(v.Z,{}),onClick:()=>e_({slug:b.appSlug,env:i})},{label:"Take down",key:"take-down",icon:(0,s.jsx)(g.Z,{}),onClick:()=>eN({slug:b.appSlug,env:i})}]},children:(0,s.jsx)(N.ZP,{style:{padding:"4px 4px"},children:(0,s.jsx)(y.Z,{})})}),(0,s.jsx)(F.Z,{title:"Are you sure to delete this environment?",description:(0,s.jsx)("span",{className:"text-red-500",children:"Caution: this is permanent and cannot be rolled back (excepts re-deploying)."}),onConfirm:()=>eO(n._id,i),okText:"Yes",cancelText:"No",children:(0,s.jsx)(N.ZP,{icon:(0,s.jsx)(r.Z,{})})})]}):(0,s.jsxs)(A.Z.Compact,{children:[(0,s.jsx)(T.Z,{title:"View website",children:(0,s.jsx)(N.ZP,{icon:(0,s.jsx)(c.Z,{}),href:b.url,target:"_blank",disabled:(0,U.isEmpty)(b.url)})}),(0,s.jsx)(E.Z,{menu:{items:[{label:"Deploy now",key:"deploy-now",icon:(0,s.jsx)(p.Z,{}),onClick:()=>e.push("/deploy?app=".concat(n.slug,"&env=").concat(i,"&registry=").concat(Z.registry,"&cluster=").concat(Z.cluster))},{label:"List of builds",key:"list-of-builds",icon:(0,s.jsx)(m.Z,{}),onClick:()=>eF(b.projectSlug,b.appSlug,b.id)},{label:"Modify environment variables",key:"env-vars",icon:(0,s.jsx)(x.Z,{}),onClick:()=>eE(b.projectSlug,b.appSlug,i)},{label:"Add domains",key:"add-domains",icon:(0,s.jsx)(h.Z,{}),onClick:()=>eY(b.appSlug,i)},{label:"Sleep",key:"sleep",icon:(0,s.jsx)(j.Z,{}),onClick:()=>eC({slug:b.appSlug,env:i})},{label:"Awake",key:"awake",icon:(0,s.jsx)(v.Z,{}),onClick:()=>e_({slug:b.appSlug,env:i})},{label:"Take down",key:"take-down",icon:(0,s.jsx)(g.Z,{}),onClick:()=>eN({slug:b.appSlug,env:i})}]},children:(0,s.jsx)(N.ZP,{style:{padding:"4px 4px"},children:(0,s.jsx)(y.Z,{})})}),(0,s.jsx)(F.Z,{title:"Are you sure to delete this environment?",description:(0,s.jsx)("span",{className:"text-red-500",children:"Caution: this is permanent and cannot be rolled back (excepts re-deploying)."}),onConfirm:()=>eO(n._id,i),okText:"Yes",cancelText:"No",children:(0,s.jsx)(N.ZP,{icon:(0,s.jsx)(r.Z,{})})})]}),b});return{...n,key:n._id,id:n._id,type:"app",children:a,actions:(0,s.jsxs)(A.Z.Compact,{children:[(0,s.jsx)(T.Z,{title:"Edit app",children:(0,s.jsx)(N.ZP,{icon:(0,s.jsx)(f.Z,{}),onClick:()=>t({lv1:"edit",type:"app",app:n.slug})})}),(0,s.jsx)(T.Z,{title:void 0!==n.archiveAt?"Unarchive":"Archive",children:(0,s.jsx)(N.ZP,{icon:void 0!==n.archiveAt?(0,s.jsx)(Z.Z,{}):(0,s.jsx)(k.Z,{}),onClick(){var e,l;return void 0!==n.archiveAt?null===(e=eg({_id:n._id}))||void 0===e?void 0:e.then(()=>et()):null===(l=eh({_id:n._id}))||void 0===l?void 0:l.then(()=>et())}})}),(0,s.jsx)(F.Z,{title:"Are you sure to delete this app?",description:(0,s.jsx)("span",{className:"text-red-500",children:"Caution: all of the related deployed environments will be also deleted."}),onConfirm:()=>eD(n._id),okText:"Yes",cancelText:"No",children:(0,s.jsx)(N.ZP,{icon:(0,s.jsx)(r.Z,{})})})]})}}):[]})),eq=e=>{let{current:l}=e;t({page:null!=l?l:1})},ez=(0,R.useRef)(null),eM=(0,_.Z)(ez);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(H,{commands:null==en?void 0:en.map(e=>{var l;return{label:"".concat(e.name," (").concat(e.slug,")"),value:e,children:null===(l=e.apps)||void 0===l?void 0:l.map(l=>({value:l,label:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(I.Z,{children:e.slug}),"≫",(0,s.jsx)(I.Z,{children:l.slug})]}),children:Object.keys(l.deployEnvironment||{}).map(n=>({label:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(b.Z,{}),"Deploy environment ≫ ".concat(n.toUpperCase())]}),value:(l.deployEnvironment||{})[n],onSelect:s=>t({lv1:"deploy_environment",project:e.slug,app:l.slug,env:n})}))}))}})}),(0,s.jsx)(G.V,{title:"Projects & apps",breadcrumbs:[{name:"Workspace"}],actions:[(0,s.jsx)(N.ZP,{icon:(0,s.jsx)(S.Z,{className:"align-middle"}),href:"/import",children:"Import"},"import-btn"),(0,s.jsx)(N.ZP,{icon:(0,s.jsx)(C.Z,{className:"align-middle"}),onClick:()=>eA(),children:"Create app"},"create-app-btn")]}),(0,s.jsx)("div",{className:"h-full flex-auto overflow-hidden",ref:ez,children:(0,s.jsx)(L.Z,{size:"small",loading:"loading"===el,columns:er,dataSource:eU,scroll:{x:(null==n?void 0:n.md)?1600:1200,y:void 0!==(null==eM?void 0:eM.height)?eM.height-120:void 0},sticky:{offsetHeader:0},pagination:{showSizeChanger:!0,current:D,defaultPageSize:ey,total:ea,position:["bottomCenter"]},onChange:eq})})]})};var eZ=t(70011),ek=t(77736);let eb=()=>(0,s.jsx)(i.Wk,{children:(0,s.jsx)(eZ.o,{meta:(0,s.jsx)(ek.h,{title:"Projects",description:"Manage builds & deployments of your projects / apps "}),children:(0,s.jsx)(ef,{})})});var eS=eb}},function(e){e.O(0,[8201,2967,5742,9822,2728,9774,2888,179],function(){return e(e.s=43921)}),_N_E=e.O()}]);