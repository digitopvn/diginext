(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[956],{5433:function(e,t,n){"use strict";var a=n(71746),i=n(50959),r=n(72096),o=n(19589),l=n(89107);let s=null,c=e=>e(),d=[],u={},m=i.forwardRef((e,t)=>{let[n,a]=i.useState(),[o,s]=i.useState(),[c,d]=i.useState(),[m,f]=i.useState(),[v,h]=i.useState(),[x,p]=i.useState(),[g,j]=(0,l.k)({prefixCls:n,getContainer:()=>o,maxCount:c,rtl:m,top:v,bottom:x}),y=(0,r.w6)(),N=y.getRootPrefixCls(),k=y.getIconPrefixCls(),S=()=>{let{prefixCls:e,container:t,maxCount:n,rtl:i,top:o,bottom:l}=function(){let{prefixCls:e,getContainer:t,rtl:n,maxCount:a,top:i,bottom:o}=u,l=null!=e?e:(0,r.w6)().getPrefixCls("notification"),s=(null==t?void 0:t())||document.body;return{prefixCls:l,container:s,rtl:n,maxCount:a,top:i,bottom:o}}();a(e),s(t),d(n),f(i),h(o),p(l)};return i.useEffect(S,[]),i.useImperativeHandle(t,()=>{let e=Object.assign({},g);return Object.keys(e).forEach(t=>{e[t]=function(){return S(),g[t].apply(g,arguments)}}),{instance:e,sync:S}}),i.createElement(r.ZP,{prefixCls:N,iconPrefixCls:k},j)});function f(){if(!s){let e=document.createDocumentFragment(),t={fragment:e};s=t,c(()=>{(0,a.s)(i.createElement(m,{ref:e=>{let{instance:n,sync:a}=e||{};Promise.resolve().then(()=>{!t.instance&&n&&(t.instance=n,t.sync=a,f())})}}),e)});return}s.instance&&(d.forEach(e=>{switch(e.type){case"open":c(()=>{s.instance.open(Object.assign(Object.assign({},u),e.config))});break;case"destroy":c(()=>{null==s||s.instance.destroy(e.key)})}}),d=[])}function v(e){d.push({type:"open",config:e}),f()}let h={open:v,destroy:function(e){d.push({type:"destroy",key:e}),f()},config:function(e){u=Object.assign(Object.assign({},u),e),c(()=>{var e;null===(e=null==s?void 0:s.sync)||void 0===e||e.call(s)})},useNotification:l.Z,_InternalPanelDoNotUseOrYouWillBeFired:o.ZP},x=h;["success","info","warning","error"].forEach(e=>{x[e]=t=>v(Object.assign(Object.assign({},t),{type:e}))}),t.Z=x},37154:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/monitor/namespace",function(){return n(15814)}])},15814:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return _}});var a=n(11527),i=n(77665),r=n(13740),o=n(67918);n(5433);var l=n(58699),s=n(31620),c=n(36865),d=n(61663),u=n(40083),m=n(74637),f=n.n(m),v=n(50959),h=n(58828),x=n(22859);let p=e=>(0,x.wz)(["monitor-namespace","list"],"/api/v1/monitor/namespaces",e);var g=n(24483),j=n(59823),y=n(44064),N=n(10340),k=n(65438);let S=n(64814),C=n(54498);f().extend(C),f().extend(S);let b=()=>{var e;let{responsive:t}=(0,k.Jl)(),{data:n,status:i}=(0,h.x7)(),{list:m=[]}=n||{},[x,S]=(0,v.useState)(0),[C,b]=(0,v.useState)(1),{data:w,status:O}=p({filter:{clusterShortName:""}}),{list:Z,pagination:_}=w||{},{total_items:E}=_||{},[P]=(0,g.kZ)(),[T,{setQuery:I}]=(0,N.o)(),F=(e,t)=>{var n,a;let{current:i}=e;S(null!==(a=null===(n=t.currentDataSource)||void 0===n?void 0:n.length)&&void 0!==a?a:0),i&&b(i)};(0,v.useEffect)(()=>S(null!==(e=null==Z?void 0:Z.length)&&void 0!==e?e:0),[Z]);let A=[{title:"Name",width:60,dataIndex:"name",key:"name",fixed:(null==t?void 0:t.md)?"left":void 0,filterSearch:!0,render:(e,t)=>{var n;return null===(n=t.metadata)||void 0===n?void 0:n.name},filters:null==Z?void 0:Z.map(e=>{var t,n;return{text:(null===(t=e.metadata)||void 0===t?void 0:t.name)||"",value:(null===(n=e.metadata)||void 0===n?void 0:n.name)||""}}),onFilter:(e,t)=>{var n,a;return null===(n=t.metadata)||void 0===n||!n.name||(null===(a=t.metadata)||void 0===a?void 0:a.name.indexOf(e.toString()))>-1}},{title:"Cluster",dataIndex:"clusterShortName",key:"clusterShortName",width:30,render:e=>(0,a.jsx)(l.ZP,{type:"link",style:{padding:0},children:e}),filterSearch:!0,filters:m.map(e=>({text:e.shortName||"",value:e.shortName||""})),onFilter:(e,t)=>!t.clusterShortName||t.clusterShortName.indexOf(e.toString())>-1},{title:"Created at",dataIndex:"createdAt",key:"createdAt",width:30,render:(e,t)=>{var n;return(0,a.jsx)(j.q,{date:null===(n=t.metadata)||void 0===n?void 0:n.creationTimestamp})},sorter:(e,t)=>{var n,a;return f()(null===(n=e.metadata)||void 0===n?void 0:n.creationTimestamp).diff(f()(null===(a=t.metadata)||void 0===a?void 0:a.creationTimestamp))}},{title:(0,a.jsx)(s.Z.Text,{className:"text-xs md:text-sm",children:"Action"}),key:"action",fixed:"right",width:(null==t?void 0:t.md)?30:26,render:(e,t)=>t.actions}],z=(null==Z?void 0:Z.map((e,t)=>({...e,key:"ns-".concat(t),actions:(0,a.jsx)(c.Z.Compact,{children:(0,a.jsx)(d.Z,{title:"Are you sure to delete this item?",description:(0,a.jsx)("span",{className:"text-red-500",children:"Caution: this is permanent and cannot be rolled back."}),okText:"Yes",cancelText:"No",children:(0,a.jsx)(l.ZP,{icon:(0,a.jsx)(r.Z,{})})})})})))||[],D=(0,v.useRef)(null),R=(0,o.Z)(D);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(y.V,{title:"Namespaces (".concat(x,")"),breadcrumbs:[{name:"Workspace"}],actions:[]}),(0,a.jsx)("div",{className:"h-full flex-auto overflow-hidden",ref:D,children:(0,a.jsx)(u.Z,{sticky:!0,size:"small",loading:"loading"===O,columns:A,dataSource:z,scroll:{x:1e3,y:void 0!==(null==R?void 0:R.height)?R.height-100:void 0},pagination:{pageSize:200,position:["bottomCenter"]},onChange:(e,t,n,a)=>F(e,a)})})]})};var w=n(42789),O=n(13179);let Z=()=>(0,a.jsx)(i.Wk,{children:(0,a.jsx)(w.o,{meta:(0,a.jsx)(O.h,{title:"Namespaces",description:"List of namespaces."}),children:(0,a.jsx)(b,{})})});var _=Z}},function(e){e.O(0,[201,967,422,160,774,888,179],function(){return e(e.s=37154)}),_N_E=e.O()}]);