(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1956],{30317:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/monitor/namespace",function(){return a(491)}])},491:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return Z}});var n=a(11527),i=a(2154),l=a(13740),r=a(30388),d=a(58699),o=a(46457),s=a(36865),u=a(61663),c=a(5489),m=a(74637),v=a.n(m),x=a(50959),h=a(73621),p=a(19005);let f=e=>(0,p.wz)(["monitor-namespace","list"],"/api/v1/monitor/namespaces",e),g=e=>(0,p.TV)(["monitor-namespace","delete"],"/api/v1/monitor/namespaces",e);var j=a(58012),k=a(97591),S=a(90400);let w=a(64814),N=a(54498);v().extend(N),v().extend(w);let _=()=>{var e;let{responsive:t}=(0,S.Jl)(),{data:a,status:i}=(0,h.x7)(),{list:m=[]}=a||{},[p,w]=(0,x.useState)(0),[N,_]=(0,x.useState)(1),{data:y,status:C}=f({filter:{cluster:""}}),{list:T,pagination:Z}=y||{},{total_items:b}=Z||{},[E,A]=g(),O=(e,t)=>{var a,n;let{current:i}=e;w(null!==(n=null===(a=t.currentDataSource)||void 0===a?void 0:a.length)&&void 0!==n?n:0),i&&_(i)};(0,x.useEffect)(()=>w(null!==(e=null==T?void 0:T.length)&&void 0!==e?e:0),[T]);let P=[{title:"Name",width:60,dataIndex:"name",key:"name",fixed:(null==t?void 0:t.md)?"left":void 0,filterSearch:!0,render(e,t){var a;return null===(a=t.metadata)||void 0===a?void 0:a.name},filters:null==T?void 0:T.map(e=>{var t,a;return{text:(null===(t=e.metadata)||void 0===t?void 0:t.name)||"",value:(null===(a=e.metadata)||void 0===a?void 0:a.name)||""}}),onFilter(e,t){var a,n;return null===(a=t.metadata)||void 0===a||!a.name||(null===(n=t.metadata)||void 0===n?void 0:n.name.indexOf(e.toString()))>-1}},{title:"Cluster",dataIndex:"clusterSlug",key:"clusterSlug",width:30,render:e=>(0,n.jsx)(d.ZP,{type:"link",style:{padding:0},children:e}),filterSearch:!0,filters:m.map(e=>({text:e.slug||"",value:e.slug||""})),onFilter:(e,t)=>!t.clusterSlug||t.clusterSlug.indexOf(e.toString())>-1},{title:"Created at",dataIndex:"createdAt",key:"createdAt",width:30,render(e,t){var a;return(0,n.jsx)(j.q,{date:null===(a=t.metadata)||void 0===a?void 0:a.creationTimestamp})},sorter(e,t){var a,n;return v()(null===(a=e.metadata)||void 0===a?void 0:a.creationTimestamp).diff(v()(null===(n=t.metadata)||void 0===n?void 0:n.creationTimestamp))}},{title:(0,n.jsx)(o.Z.Text,{className:"text-xs md:text-sm",children:"Action"}),key:"action",fixed:"right",width:(null==t?void 0:t.md)?30:26,render:(e,t)=>t.actions}],z=(null==T?void 0:T.map((e,t)=>({...e,key:"ns-".concat(t),actions:(0,n.jsx)(s.Z.Compact,{children:(0,n.jsx)(u.Z,{title:"Are you sure to delete this item?",description:(0,n.jsx)("span",{className:"text-red-500",children:"Caution: this is permanent and cannot be rolled back."}),onConfirm(){var t;return E({cluster:e.cluster,name:null===(t=e.metadata)||void 0===t?void 0:t.name})},okText:"Yes",cancelText:"No",children:(0,n.jsx)(d.ZP,{icon:(0,n.jsx)(l.Z,{})})})})})))||[],F=(0,x.useRef)(null),I=(0,r.Z)(F);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(k.V,{title:"Namespaces (".concat(p,")"),breadcrumbs:[{name:"Workspace"}],actions:[]}),(0,n.jsx)("div",{className:"h-full flex-auto overflow-hidden",ref:F,children:(0,n.jsx)(c.Z,{sticky:!0,size:"small",loading:"loading"===C,columns:P,dataSource:z,scroll:{x:1e3,y:void 0!==(null==I?void 0:I.height)?I.height-140:void 0},pagination:{pageSize:200,position:["bottomCenter"]},onChange:(e,t,a,n)=>O(e,n)})})]})};var y=a(26697),C=a(24810);let T=()=>(0,n.jsx)(i.Wk,{children:(0,n.jsx)(y.o,{meta:(0,n.jsx)(C.h,{title:"Namespaces",description:"List of namespaces."}),children:(0,n.jsx)(_,{})})});var Z=T}},function(e){e.O(0,[8201,2967,1187,7655,9774,2888,179],function(){return e(e.s=30317)}),_N_E=e.O()}]);