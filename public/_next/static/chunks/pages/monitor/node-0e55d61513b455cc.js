(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7018],{18639:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return node}});var r,i=n(22598),o=n(59499);n(50029);var a=n(16835);n(87794);var l=n(48689),c=n(84213),s=n(71471),d=n(66309),u=n(73318),v=n(71230),f=n(15746),x=n(38703);n(26855);var h=n(78957),p=n(86738),m=n(44973),j=n(27484),g=n.n(j),y=n(96486),b=n(67294),Z=n(47859),w=n(11778),O=n(15832),k=n(61123),S=n(90447),P=n(56832),C=n(3669),_=n(55611),N=n(85893);function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){(0,o.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var T=n(56176),E=n(84110);g().extend(E),g().extend(T);var I=null!==(r=_.XL.tableConfig.defaultPageSize)&&void 0!==r?r:20,NodeList=function(){var e=(0,C.Jl)().responsive,t=(0,Z.x7)(),n=t.data;t.status;var r=(n||{}).list,i=[{title:"Name",width:60,dataIndex:"name",key:"name",fixed:null!=e&&e.md?"left":void 0,filterSearch:!0,render:function(e,t){var n,r,i,o,a,l,c;return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(s.Z.Text,{strong:!0,className:"leading-8",children:null===(n=t.metadata)||void 0===n?void 0:n.name}),(0,N.jsx)("br",{}),(0,N.jsx)(d.Z,{color:"cyan",children:null===(r=t.status.nodeInfo)||void 0===r?void 0:r.osImage}),(0,N.jsx)(d.Z,{color:"cyan",children:null===(i=t.status.nodeInfo)||void 0===i?void 0:i.architecture}),(0,N.jsxs)(d.Z,{color:"cyan",children:["CPU: ",null===(o=t.status.capacity)||void 0===o?void 0:o.cpu]}),(0,N.jsxs)(d.Z,{color:"cyan",children:["MEM: ",(0,y.round)((0,y.toInteger)(null===(a=t.status.capacity)||void 0===a?void 0:null===(l=a.memory)||void 0===l?void 0:l.replace("Ki",""))/1024/1024),"Gb"]}),(0,N.jsxs)(d.Z,{color:"cyan",children:["Pods: ",t.podCount,"/",null===(c=t.status.capacity)||void 0===c?void 0:c.pods]})]})},onFilter:function(e,t){var n,r;return null===(n=t.metadata)||void 0===n||!n.name||(null===(r=t.metadata)||void 0===r?void 0:r.name.indexOf(e.toString()))>-1}},{title:"Cluster",dataIndex:"clusterSlug",key:"clusterSlug",width:30,render:function(e){return(0,N.jsx)(u.ZP,{type:"link",style:{padding:0},children:e})},filterSearch:!0,filters:(void 0===r?[]:r).map(function(e){return{text:e.slug||"",value:e.slug||""}}),onFilter:function(e,t){return!t.clusterSlug||t.clusterSlug.indexOf(e.toString())>-1}},{title:"Capacity",dataIndex:"capacity",key:"capacity",width:35,render:function(e,t){var n,r,i=(0,y.toInteger)(null===(n=t.cpuPercent)||void 0===n?void 0:n.replace("%","")),o=(0,y.toInteger)(null===(r=t.memoryPercent)||void 0===r?void 0:r.replace("%",""));return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsxs)(v.Z,{gutter:[0,0],children:[(0,N.jsx)(f.Z,{children:(0,N.jsx)(d.Z,{style:{width:44,textAlign:"center"},children:"CPU"})}),(0,N.jsx)(f.Z,{flex:"auto",children:(0,N.jsx)(x.Z,{percent:i,size:"small",strokeColor:i>90?"red":i>70?"orange":"#1668dc"})})]}),(0,N.jsxs)(v.Z,{gutter:[0,0],children:[(0,N.jsx)(f.Z,{children:(0,N.jsx)(d.Z,{children:"MEM"})}),(0,N.jsx)(f.Z,{flex:"auto",children:(0,N.jsx)(x.Z,{percent:o>99?99:o,size:"small",strokeColor:o>90?"red":o>70?"orange":"#1668dc"})})]})]})}},{title:"Created at",dataIndex:"createdAt",key:"createdAt",width:30,render:function(e,t){var n;return(0,N.jsx)(k.q,{date:null===(n=t.metadata)||void 0===n?void 0:n.creationTimestamp})},sorter:function(e,t){var n,r;return g()(null===(n=e.metadata)||void 0===n?void 0:n.creationTimestamp).diff(g()(null===(r=t.metadata)||void 0===r?void 0:r.creationTimestamp))}},{title:(0,N.jsx)(s.Z.Text,{className:"text-xs md:text-sm",children:"Action"}),key:"action",fixed:"right",width:null!=e&&e.md?30:26,render:function(e,t){return t.actions}}],o=(0,b.useState)(0),j=o[0],_=o[1],T=(0,b.useState)(1),E=(T[0],T[1]),z=(0,w.wz)(["monitor-node","list"],"/api/v1/monitor/nodes",{filter:{cluster:""}}),A=z.data,D=z.status,F=A||{},K=F.list;(F.pagination||{}).total_items;var L=(0,O.kZ)();(0,a.Z)(L,1)[0];var M=(0,P.o)(),X=(0,a.Z)(M,2);X[0],X[1].setQuery;var onTableChange=function(e,t){var n,r,i=e.current;_(null!==(n=null===(r=t.currentDataSource)||void 0===r?void 0:r.length)&&void 0!==n?n:0),i&&E(i)};(0,b.useEffect)(function(){var e;return _(null!==(e=null==K?void 0:K.length)&&void 0!==e?e:0)},[K]);var U=(null==K?void 0:K.map(function(e,t){return _objectSpread(_objectSpread({},e),{},{key:"ns-".concat(t),actions:(0,N.jsx)(h.Z.Compact,{children:(0,N.jsx)(p.Z,{title:"Are you sure to delete this item?",description:(0,N.jsx)("span",{className:"text-red-500",children:"Caution: this is permanent and cannot be rolled back."}),okText:"Yes",cancelText:"No",children:(0,N.jsx)(u.ZP,{icon:(0,N.jsx)(l.Z,{})})})})})}))||[],W=(0,b.useRef)(null),q=(0,c.Z)(W);return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(S.V,{title:"Nodes (".concat(j,")"),breadcrumbs:[{name:"Workspace"}],actions:[]}),(0,N.jsx)("div",{className:"h-full flex-auto overflow-hidden",ref:W,children:(0,N.jsx)(m.Z,{sticky:!0,size:"small",loading:"loading"===D,columns:i,dataSource:U,scroll:{x:1e3,y:void 0!==(null==q?void 0:q.height)?q.height-140:void 0},pagination:{pageSize:I,position:["bottomCenter"]},onChange:function(e,t,n,r){return onTableChange(e,r)}})})]})},z=n(6761),A=n(1071),node=function(){return(0,N.jsx)(i.Wk,{children:(0,N.jsx)(z.o,{meta:(0,N.jsx)(A.h,{title:"Nodes",description:"List of cluster's nodes."}),children:(0,N.jsx)(NodeList,{})})})}},71035:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/monitor/node",function(){return n(18639)}])}},function(e){e.O(0,[3662,5877,8703,3945,9774,2888,179],function(){return e(e.s=71035)}),_N_E=e.O()}]);