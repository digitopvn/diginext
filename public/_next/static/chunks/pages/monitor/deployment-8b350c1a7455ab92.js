(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5722],{8357:function(e,t,r){"use strict";var n=r(45645),a=r(50959),l=r(54709),i=r(94590),o=function(e,t){return a.createElement(i.Z,(0,n.Z)((0,n.Z)({},e),{},{ref:t,icon:l.Z}))};o.displayName="EllipsisOutlined",t.Z=a.forwardRef(o)},59850:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});var n=r(45645),a=r(50959),l={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M946.5 505L560.1 118.8l-25.9-25.9a31.5 31.5 0 00-44.4 0L77.5 505a63.9 63.9 0 00-18.8 46c.4 35.2 29.7 63.3 64.9 63.3h42.5V940h691.8V614.3h43.4c17.1 0 33.2-6.7 45.3-18.8a63.6 63.6 0 0018.7-45.3c0-17-6.7-33.1-18.8-45.2zM568 868H456V664h112v204zm217.9-325.7V868H632V640c0-22.1-17.9-40-40-40H432c-22.1 0-40 17.9-40 40v228H238.1V542.3h-96l370-369.7 23.1 23.1L882 542.3h-96.1z"}}]},name:"home",theme:"outlined"},i=r(94590),o=function(e,t){return a.createElement(i.Z,(0,n.Z)((0,n.Z)({},e),{},{ref:t,icon:l}))};o.displayName="HomeOutlined";var s=a.forwardRef(o)},70802:function(e,t,r){"use strict";r.d(t,{Z:function(){return Z}});var n=r(21963),a=r(84875),l=r.n(a),i=r(22306),o=r(50959),s=r(94843),c=r(9036),d=r(40150),u=r(59796),m=r(85493),p=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&0>t.indexOf(n)&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)0>t.indexOf(n[a])&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r};let v=e=>{let t;let{prefixCls:r,separator:n="/",children:a,menu:l,overlay:i,dropdownProps:c}=e,d=p(e,["prefixCls","separator","children","menu","overlay","dropdownProps"]),{getPrefixCls:v}=o.useContext(s.E_),f=v("breadcrumb",r);return(t=(t=>{if(l||i){let r=Object.assign({},c);return"overlay"in e&&(r.overlay=i),o.createElement(m.Z,Object.assign({menu:l,placement:"bottom"},r),o.createElement("span",{className:`${f}-overlay-link`},t,o.createElement(u.Z,null)))}return t})(t="href"in d?o.createElement("a",Object.assign({className:`${f}-link`},d),a):o.createElement("span",Object.assign({className:`${f}-link`},d),a)),null!=a)?o.createElement("li",null,t,n&&o.createElement("span",{className:`${f}-separator`},n)):null};v.__ANT_BREADCRUMB_ITEM=!0;let f=e=>{let{children:t}=e,{getPrefixCls:r}=o.useContext(s.E_),n=r("breadcrumb");return o.createElement("span",{className:`${n}-separator`},t||"/")};f.__ANT_BREADCRUMB_SEPARATOR=!0;var b=r(81520),x=r(44362),h=r(6290);let g=e=>{let{componentCls:t,iconCls:r}=e;return{[t]:Object.assign(Object.assign({},(0,h.Wf)(e)),{color:e.breadcrumbBaseColor,fontSize:e.breadcrumbFontSize,[r]:{fontSize:e.breadcrumbIconFontSize},ol:{display:"flex",flexWrap:"wrap",margin:0,padding:0,listStyle:"none"},a:Object.assign({color:e.breadcrumbLinkColor,transition:`color ${e.motionDurationMid}`,padding:`0 ${e.paddingXXS}px`,borderRadius:e.borderRadiusSM,height:e.lineHeight*e.fontSize,display:"inline-block",marginInline:-e.marginXXS,"&:hover":{color:e.breadcrumbLinkColorHover,backgroundColor:e.colorBgTextHover}},(0,h.Qy)(e)),"li:last-child":{color:e.breadcrumbLastItemColor,[`& > ${t}-separator`]:{display:"none"}},[`${t}-separator`]:{marginInline:e.breadcrumbSeparatorMargin,color:e.breadcrumbSeparatorColor},[`${t}-link`]:{[`
          > ${r} + span,
          > ${r} + a
        `]:{marginInlineStart:e.marginXXS}},[`${t}-overlay-link`]:{borderRadius:e.borderRadiusSM,height:e.lineHeight*e.fontSize,display:"inline-block",padding:`0 ${e.paddingXXS}px`,marginInline:-e.marginXXS,[`> ${r}`]:{marginInlineStart:e.marginXXS,fontSize:e.fontSizeIcon},"&:hover":{color:e.breadcrumbLinkColorHover,backgroundColor:e.colorBgTextHover,a:{color:e.breadcrumbLinkColorHover}},a:{"&:hover":{backgroundColor:"transparent"}}},[`&${e.componentCls}-rtl`]:{direction:"rtl"}})}};var y=(0,b.Z)("Breadcrumb",e=>{let t=(0,x.TS)(e,{breadcrumbBaseColor:e.colorTextDescription,breadcrumbFontSize:e.fontSize,breadcrumbIconFontSize:e.fontSize,breadcrumbLinkColor:e.colorTextDescription,breadcrumbLinkColorHover:e.colorText,breadcrumbLastItemColor:e.colorText,breadcrumbSeparatorMargin:e.marginXS,breadcrumbSeparatorColor:e.colorTextDescription});return[g(t)]}),j=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&0>t.indexOf(n)&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)0>t.indexOf(n[a])&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r};function S(e,t,r,n){let a=r.indexOf(e)===r.length-1,l=function(e,t){if(!e.breadcrumbName)return null;let r=Object.keys(t).join("|"),n=e.breadcrumbName.replace(RegExp(`:(${r})`,"g"),(e,r)=>t[r]||e);return n}(e,t);return a?o.createElement("span",null,l):o.createElement("a",{href:`#/${n.join("/")}`},l)}let k=(e,t)=>(e=(e||"").replace(/^\//,""),Object.keys(t).forEach(r=>{e=e.replace(`:${r}`,t[r])}),e),C=(e,t,r)=>{let a=(0,n.Z)(e),l=k(t||"",r);return l&&a.push(l),a},O=e=>{let t;var{prefixCls:r,separator:n="/",style:a,className:u,rootClassName:m,routes:p,children:f,itemRender:b=S,params:x={}}=e,h=j(e,["prefixCls","separator","style","className","rootClassName","routes","children","itemRender","params"]);let{getPrefixCls:g,direction:O}=o.useContext(s.E_),Z=g("breadcrumb",r),[w,E]=y(Z);if(p&&p.length>0){let e=[];t=p.map(t=>{let r;let a=k(t.path,x);a&&e.push(a),t.children&&t.children.length&&(r=o.createElement(c.Z,{items:t.children.map(t=>({key:t.path||t.breadcrumbName,label:b(t,x,p,C(e,t.path,x))}))}));let l={separator:n};return r&&(l.overlay=r),o.createElement(v,Object.assign({},l,{key:a||t.breadcrumbName}),b(t,x,p,e))})}else f&&(t=(0,i.Z)(f).map((e,t)=>e?(0,d.Tm)(e,{separator:n,key:t}):e));let N=l()(Z,{[`${Z}-rtl`]:"rtl"===O},u,m,E);return w(o.createElement("nav",Object.assign({className:N,style:a},h),o.createElement("ol",null,t)))};O.Item=v,O.Separator=f;var Z=O},5433:function(e,t,r){"use strict";var n=r(71746),a=r(50959),l=r(72096),i=r(19589),o=r(89107);let s=null,c=e=>e(),d=[],u={},m=a.forwardRef((e,t)=>{let[r,n]=a.useState(),[i,s]=a.useState(),[c,d]=a.useState(),[m,p]=a.useState(),[v,f]=a.useState(),[b,x]=a.useState(),[h,g]=(0,o.k)({prefixCls:r,getContainer:()=>i,maxCount:c,rtl:m,top:v,bottom:b}),y=(0,l.w6)(),j=y.getRootPrefixCls(),S=y.getIconPrefixCls(),k=()=>{let{prefixCls:e,container:t,maxCount:r,rtl:a,top:i,bottom:o}=function(){let{prefixCls:e,getContainer:t,rtl:r,maxCount:n,top:a,bottom:i}=u,o=null!=e?e:(0,l.w6)().getPrefixCls("notification"),s=(null==t?void 0:t())||document.body;return{prefixCls:o,container:s,rtl:r,maxCount:n,top:a,bottom:i}}();n(e),s(t),d(r),p(a),f(i),x(o)};return a.useEffect(k,[]),a.useImperativeHandle(t,()=>{let e=Object.assign({},h);return Object.keys(e).forEach(t=>{e[t]=function(){return k(),h[t].apply(h,arguments)}}),{instance:e,sync:k}}),a.createElement(l.ZP,{prefixCls:j,iconPrefixCls:S},g)});function p(){if(!s){let e=document.createDocumentFragment(),t={fragment:e};s=t,c(()=>{(0,n.s)(a.createElement(m,{ref:e=>{let{instance:r,sync:n}=e||{};Promise.resolve().then(()=>{!t.instance&&r&&(t.instance=r,t.sync=n,p())})}}),e)});return}s.instance&&(d.forEach(e=>{switch(e.type){case"open":c(()=>{s.instance.open(Object.assign(Object.assign({},u),e.config))});break;case"destroy":c(()=>{null==s||s.instance.destroy(e.key)})}}),d=[])}function v(e){d.push({type:"open",config:e}),p()}let f={open:v,destroy:function(e){d.push({type:"destroy",key:e}),p()},config:function(e){u=Object.assign(Object.assign({},u),e),c(()=>{var e;null===(e=null==s?void 0:s.sync)||void 0===e||e.call(s)})},useNotification:o.Z,_InternalPanelDoNotUseOrYouWillBeFired:i.ZP},b=f;["success","info","warning","error"].forEach(e=>{b[e]=t=>v(Object.assign(Object.assign({},t),{type:e}))}),t.Z=b},36486:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/monitor/deployment",function(){return r(8147)}])},44064:function(e,t,r){"use strict";r.d(t,{D:function(){return p},V:function(){return v}});var n=r(11527),a=r(68834),l=r(8357),i=r(59850),o=r(75616),s=r(58699),c=r(70802),d=r(36865),u=r(7094),m=r(89335);function p(e){let{token:{colorTextHeading:t}}=o.Z.useToken(),{isDarkMode:r}=(0,m.vs)(),{color:a=r?"white":"black",value:l}=e;return(0,n.jsx)("h1",{className:"my-0 grow py-0 pt-2 text-xl font-bold",style:{color:a},children:l})}let v=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,u.useRouter)(),{children:r,breadcrumbs:m=[],title:v="Page Title",actions:f=[(0,n.jsx)(s.ZP,{type:"default",icon:(0,n.jsx)(a.Z,{className:"align-middle"}),children:"Settings"},"workspace-setting-btn"),(0,n.jsx)(s.ZP,{type:"default",icon:(0,n.jsx)(l.Z,{className:"align-middle"})},"more-btn")]}=e,{token:{colorTextHeading:b}}=o.Z.useToken();return(0,n.jsxs)("div",{className:"border-b border-gray-300 px-6 py-4",children:[(0,n.jsxs)(c.Z,{children:[(0,n.jsx)(c.Z.Item,{href:"".concat(t.basePath,"/"),children:(0,n.jsx)(i.Z,{})},"breadcrumb-home"),m.map((e,t)=>(0,n.jsxs)(c.Z.Item,{href:e.url,children:[e.icon,(0,n.jsx)("span",{children:e.name})]},"breadcrumb-".concat(t)))]}),(0,n.jsxs)("div",{className:" flex w-full flex-col md:flex-row",children:[(0,n.jsx)(p,{value:v}),(0,n.jsx)("div",{children:(0,n.jsx)(d.Z,{wrap:!0,children:f})})]}),r]})}},8147:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return T}});var n=r(11527),a=r(77665),l=r(13740);r(5433);var i=r(36865),o=r(61663),s=r(58699),c=r(85273),d=r(88158),u=r(31620),m=r(40083),p=r(74637),v=r.n(p),f=r(32699),b=r(62973),x=r.n(b),h=r(50959),g=r(58828),y=r(22859);let j=e=>(0,y.wz)(["monitor-deployment","list"],"/api/v1/monitor/deployments",e);var S=r(24483),k=r(59823),C=r(44064),O=r(10340),Z=r(65438);let w=r(64814),E=r(54498);v().extend(E),v().extend(w);let N=()=>{let{responsive:e}=(0,Z.Jl)(),{data:t,status:r}=(0,g.x7)(),{list:a=[]}=t||{},[p,b]=(0,h.useState)(0),[y,w]=(0,h.useState)(1),{data:E,status:N}=j({filter:{clusterShortName:""}}),{list:I,pagination:R}=E||{},{total_items:P}=R||{},[T]=(0,S.kZ)(),[_,{setQuery:A}]=(0,O.o)(),$=e=>{let{current:t}=e;t&&w(t)},z=(null==I?void 0:I.map((e,t)=>({...e,key:"ns-".concat(t),actions:(0,n.jsx)(i.Z.Compact,{children:(0,n.jsx)(o.Z,{title:"Are you sure to delete this item?",description:(0,n.jsx)("span",{className:"text-red-500",children:"Caution: this is permanent and cannot be rolled back."}),okText:"Yes",cancelText:"No",children:(0,n.jsx)(s.ZP,{icon:(0,n.jsx)(l.Z,{})})})})})))||[],M=null==I?void 0:I.map(e=>{var t,r;return{text:(null===(t=e.metadata)||void 0===t?void 0:t.name)||"",value:(null===(r=e.metadata)||void 0===r?void 0:r.name)||""}}).filter(e=>""!==e.value).filter((e,t,r)=>t===r.findIndex(t=>t.text===e.text)),F=null==I?void 0:I.map(e=>{var t,r;return{text:(null===(t=e.metadata)||void 0===t?void 0:t.namespace)||"",value:(null===(r=e.metadata)||void 0===r?void 0:r.namespace)||""}}).filter(e=>""!==e.value).filter((e,t,r)=>t===r.findIndex(t=>t.text===e.text)),H=[{title:"Name",width:60,dataIndex:"name",key:"name",fixed:(null==e?void 0:e.md)?"left":void 0,filterSearch:!0,render:(e,t)=>{var r;return null===(r=t.metadata)||void 0===r?void 0:r.name},filters:M,onFilter:(e,t)=>{var r,n;return null===(r=t.metadata)||void 0===r||!r.name||(null===(n=t.metadata)||void 0===n?void 0:n.name.indexOf(e.toString()))>-1}},{title:"Pods",dataIndex:"pods",key:"pods",width:15,render:(e,t)=>{var r,a,l,i,o,s,d,u,m,p;let v=null!==(m=null!==(s=null===(r=t.status)||void 0===r?void 0:r.availableReplicas)&&void 0!==s?s:null===(a=t.status)||void 0===a?void 0:a.readyReplicas)&&void 0!==m?m:(null!==(d=null===(l=t.status)||void 0===l?void 0:l.replicas)&&void 0!==d?d:0)-(null!==(u=null===(i=t.status)||void 0===i?void 0:i.unavailableReplicas)&&void 0!==u?u:0),f=null!==(p=null===(o=t.status)||void 0===o?void 0:o.replicas)&&void 0!==p?p:0;return(0,n.jsxs)(c.Z,{color:0===v?"error":v<f?"warning":"default",children:[v,"/",f]})},filterSearch:!0,filters:[{text:"Ready",value:"ready"},{text:"Partial",value:"partial"},{text:"Failed",value:"failed"}],onFilter:(e,t)=>{var r,n,a,l,i,o,s,c,d,u;let m=null!==(d=null!==(o=null===(r=t.status)||void 0===r?void 0:r.availableReplicas)&&void 0!==o?o:null===(n=t.status)||void 0===n?void 0:n.readyReplicas)&&void 0!==d?d:(null!==(s=null===(a=t.status)||void 0===a?void 0:a.replicas)&&void 0!==s?s:0)-(null!==(c=null===(l=t.status)||void 0===l?void 0:l.unavailableReplicas)&&void 0!==c?c:0),p=null!==(u=null===(i=t.status)||void 0===i?void 0:i.replicas)&&void 0!==u?u:0;return"failed"===e?0===m:"partial"===e?m>0&&m<p:m===p}},{title:"CPU",dataIndex:"cpu",key:"cpu",width:17,render:(e,t)=>{var r,a;let l=(0,f.toInteger)(null===(r=t.cpuAvg)||void 0===r?void 0:r.replace("m",""))||0,i=(0,f.toInteger)(null===(a=t.cpuCapacity)||void 0===a?void 0:a.replace("m",""))||0;return 0===i?(0,n.jsx)(d.Z,{overlay:(0,n.jsxs)(n.Fragment,{children:["Recommend: ",t.cpuRecommend]}),children:(0,n.jsx)(c.Z,{color:0===i?"default":l>.8*i?"warning":"success",children:t.cpuAvg})}):(0,n.jsx)(c.Z,{color:0===i?"default":l>.8*i?"warning":"success",children:t.cpuAvg})},sorter:(e,t)=>{var r,n;return(0,f.toInteger)(null===(r=e.cpuAvg)||void 0===r?void 0:r.replace("m",""))-(0,f.toInteger)(null===(n=t.cpuAvg)||void 0===n?void 0:n.replace("m",""))}},{title:"MEM",dataIndex:"memory",key:"memory",width:17,render:(e,t)=>{var r,a;let l=(0,f.toInteger)(null===(r=t.memoryAvg)||void 0===r?void 0:r.replace("Mi",""))||0,i=(0,f.toInteger)(null===(a=t.memoryCapacity)||void 0===a?void 0:a.replace("Mi",""))||0;return 0===i?(0,n.jsx)(d.Z,{overlay:(0,n.jsxs)(n.Fragment,{children:["Recommend: ",t.memoryRecommend]}),children:(0,n.jsx)(c.Z,{color:0===i?"default":l>.8*i?"warning":"success",children:t.memoryAvg})}):(0,n.jsx)(c.Z,{color:0===i?"default":l>.8*i?"warning":"success",children:t.memoryAvg})},sorter:(e,t)=>{var r,n;return(0,f.toInteger)(null===(r=e.memoryAvg)||void 0===r?void 0:r.replace("Mi",""))-(0,f.toInteger)(null===(n=t.memoryAvg)||void 0===n?void 0:n.replace("Mi",""))}},{title:"Namespace",dataIndex:"namespace",key:"namespace",width:30,render:(e,t)=>{var r;return(0,n.jsx)(x(),{href:"#",children:null===(r=t.metadata)||void 0===r?void 0:r.namespace})},filterSearch:!0,filters:F,onFilter:(e,t)=>{var r,n;return null===(r=t.metadata)||void 0===r||!r.namespace||(null===(n=t.metadata)||void 0===n?void 0:n.namespace.indexOf(e.toString()))>-1}},{title:"Cluster",dataIndex:"clusterShortName",key:"clusterShortName",width:30,render:e=>(0,n.jsx)(s.ZP,{type:"link",style:{padding:0},children:e}),filterSearch:!0,filters:a.map(e=>({text:e.shortName||"",value:e.shortName||""})),onFilter:(e,t)=>!t.clusterShortName||t.clusterShortName.indexOf(e.toString())>-1},{title:"Created at",dataIndex:"createdAt",key:"createdAt",width:30,render:(e,t)=>{var r;return(0,n.jsx)(k.q,{date:null===(r=t.metadata)||void 0===r?void 0:r.creationTimestamp})},sorter:(e,t)=>{var r,n;return v()(null===(r=e.metadata)||void 0===r?void 0:r.creationTimestamp).diff(v()(null===(n=t.metadata)||void 0===n?void 0:n.creationTimestamp))}},{title:(0,n.jsx)(u.Z.Text,{className:"text-xs md:text-sm",children:"Action"}),key:"action",fixed:"right",width:(null==e?void 0:e.md)?30:26,render:(e,t)=>t.actions}];return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(C.V,{title:"Deployments (".concat(p,")"),breadcrumbs:[{name:"Workspace"}],actions:[]}),(0,n.jsx)("div",{children:(0,n.jsx)(m.Z,{loading:"loading"===N,columns:H,dataSource:z,scroll:{x:1e3},sticky:{offsetHeader:48},pagination:{pageSize:200,total:P,showTotal:e=>(b(e),(0,n.jsxs)(n.Fragment,{children:[e," items"]}))},onChange:$})})]})};var I=r(42789),R=r(13179);let P=()=>(0,n.jsx)(a.Wk,{children:(0,n.jsx)(I.o,{meta:(0,n.jsx)(R.h,{title:"Deployments",description:"List of deployments."}),children:(0,n.jsx)(N,{})})});var T=P}},function(e){e.O(0,[8201,2967,3859,8160,9774,2888,179],function(){return e(e.s=36486)}),_N_E=e.O()}]);