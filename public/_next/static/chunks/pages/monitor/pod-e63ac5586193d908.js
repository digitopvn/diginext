(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3479],{90087:function(e,t,n){"use strict";n.d(t,{u:function(){return PodList}});var r=n(59499),i=n(16835),a=n(48689),o=n(84213),u=n(78957),d=n(86738),l=n(73318),c=n(66309),s=n(71471),v=n(44973),f=n(27484),m=n.n(f),p=n(96486),h=n(41664),x=n.n(h),g=n(67294),j=n(47859),y=n(11778),b=n(61123),S=n(90447),w=n(56832),k=n(3669),O=n(85893);function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var _=n(56176),C=n(84110);m().extend(C),m().extend(_);var PodList=function(e){var t=(0,k.Jl)().responsive,n=(0,w.o)(),r=(0,i.Z)(n,2),f=r[0],h=r[1].setQuery,_=f.namespace,C=f.cluster,P=(0,j.x7)(),I=P.data;P.status;var Z=(I||{}).list,N=(0,g.useState)(0),T=N[0],E=N[1],F=(0,g.useState)(1),D=(F[0],F[1]),A=(0,y.wz)(["monitor-pod","list"],"/api/v1/monitor/pods",{filter:{cluster:C,namespace:_}}),M=A.data,z=A.status,H=M||{},K=H.list;(H.pagination||{}).total_items;var L=(0,y.TV)(["monitor-pod","delete"],"/api/v1/monitor/pods",void 0),R=(0,i.Z)(L,2),V=R[0];R[1];var onTableChange=function(e,t){var n,r,i=e.current;E(null!==(n=null===(r=t.currentDataSource)||void 0===r?void 0:r.length)&&void 0!==n?n:0),i&&D(i)};(0,g.useEffect)(function(){var e;return E(null!==(e=null==K?void 0:K.length)&&void 0!==e?e:0)},[K]);var W=(null==K?void 0:K.map(function(e,t){return _objectSpread(_objectSpread({},e),{},{key:"ns-".concat(t),actions:(0,O.jsx)(u.Z.Compact,{children:(0,O.jsx)(d.Z,{title:"Are you sure to delete this item?",description:(0,O.jsx)("span",{className:"text-red-500",children:"Caution: this is permanent and cannot be rolled back."}),onConfirm:function(){return V({cluster:e.cluster,namespace:e.metadata.namespace,name:e.metadata.name})},okText:"Yes",cancelText:"No",children:(0,O.jsx)(l.ZP,{icon:(0,O.jsx)(a.Z,{})})})})})}))||[],X=null==K?void 0:K.map(function(e){var t,n;return{text:(null===(t=e.metadata)||void 0===t?void 0:t.name)||"",value:(null===(n=e.metadata)||void 0===n?void 0:n.name)||""}}).filter(function(e){return""!==e.value}).filter(function(e,t,n){return t===n.findIndex(function(t){return t.text===e.text})}),q=null==K?void 0:K.map(function(e){var t,n;return{text:(null===(t=e.metadata)||void 0===t?void 0:t.namespace)||"",value:(null===(n=e.metadata)||void 0===n?void 0:n.namespace)||""}}).filter(function(e){return""!==e.value}).filter(function(e,t,n){return t===n.findIndex(function(t){return t.text===e.text})}),J=null==K?void 0:K.map(function(e){var t,n,r,i=null!==(t=e.status)&&void 0!==t&&null!==(n=t.containerStatuses)&&void 0!==n&&n.find(function(e){return!1===e.ready})?"Crashed":null===(r=e.status)||void 0===r?void 0:r.phase;return{text:i||"",value:i||""}}).filter(function(e){return""!==e.value}).filter(function(e,t,n){return t===n.findIndex(function(t){return t.text===e.text})}),Q=[{title:"Name",width:60,dataIndex:"name",key:"name",fixed:null!=t&&t.md?"left":void 0,filterSearch:!0,render:function(e,t){var n;return null===(n=t.metadata)||void 0===n?void 0:n.name},filters:X,onFilter:function(e,t){var n,r;return null===(n=t.metadata)||void 0===n||!n.name||(null===(r=t.metadata)||void 0===r?void 0:r.name.indexOf(e.toString()))>-1}},{title:"Status",dataIndex:"phase",key:"phase",width:18,render:function(e,t){var n,r,i,a=null!==(n=t.status)&&void 0!==n&&null!==(r=n.containerStatuses)&&void 0!==r&&r.find(function(e){return!1===e.ready})?"Crashed":null===(i=t.status)||void 0===i?void 0:i.phase;return(0,O.jsx)(c.Z,{color:"Running"===a||"Succeeded"===a?"success":"Crashed"===a||"Failed"===a?"error":"blue",children:a})},filterSearch:!0,filters:J,onFilter:function(e,t){var n,r,i;return e===(null!==(n=t.status)&&void 0!==n&&null!==(r=n.containerStatuses)&&void 0!==r&&r.find(function(e){return!1===e.ready})?"Crashed":null===(i=t.status)||void 0===i?void 0:i.phase)}},{title:"CPU",dataIndex:"cpu",key:"cpu",width:17,render:function(e,t){return(0,O.jsx)(c.Z,{children:t.cpu})},sorter:function(e,t){var n,r;return(0,p.toInteger)(null===(n=e.cpu)||void 0===n?void 0:n.replace("m",""))-(0,p.toInteger)(null===(r=t.cpu)||void 0===r?void 0:r.replace("m",""))}},{title:"MEM",dataIndex:"memory",key:"memory",width:17,render:function(e,t){return(0,O.jsx)(c.Z,{children:t.memory})},sorter:function(e,t){var n,r;return(0,p.toInteger)(null===(n=e.memory)||void 0===n?void 0:n.replace("Mi",""))-(0,p.toInteger)(null===(r=t.memory)||void 0===r?void 0:r.replace("Mi",""))}},{title:"Namespace",dataIndex:"namespace",key:"namespace",width:25,render:function(e,t){var n;return(0,O.jsx)(x(),{href:"#",onClick:function(e){var n;e.preventDefault(),h(_objectSpread(_objectSpread({},f),{},{namespace:null===(n=t.metadata)||void 0===n?void 0:n.namespace}))},children:null===(n=t.metadata)||void 0===n?void 0:n.namespace})},filterSearch:!0,filters:q,onFilter:function(e,t){var n,r;return null===(n=t.metadata)||void 0===n||!n.namespace||(null===(r=t.metadata)||void 0===r?void 0:r.namespace.indexOf(e.toString()))>-1}},{title:"Node",dataIndex:"node",key:"node",width:25,render:function(e,t){var n;return(0,O.jsx)(x(),{href:"#",children:null===(n=t.spec)||void 0===n?void 0:n.nodeName})}},{title:"Cluster",dataIndex:"clusterSlug",key:"clusterSlug",width:25,render:function(e){return(0,O.jsx)(l.ZP,{type:"link",style:{padding:0},onClick:function(t){h(_objectSpread(_objectSpread({},f),{},{cluster:e}))},children:e})},filterSearch:!0,filters:(void 0===Z?[]:Z).map(function(e){return{text:e.slug||"",value:e.slug||""}}),onFilter:function(e,t){return!t.clusterSlug||t.clusterSlug.indexOf(e.toString())>-1}},{title:"Created at",dataIndex:"createdAt",key:"createdAt",width:25,render:function(e,t){var n;return(0,O.jsx)(b.q,{date:null===(n=t.metadata)||void 0===n?void 0:n.creationTimestamp})},sorter:function(e,t){var n,r;return m()(null===(n=e.metadata)||void 0===n?void 0:n.creationTimestamp).diff(m()(null===(r=t.metadata)||void 0===r?void 0:r.creationTimestamp))}},{title:(0,O.jsx)(s.Z.Text,{className:"text-xs md:text-sm",children:"Action"}),key:"action",fixed:"right",width:null!=t&&t.md?22:18,render:function(e,t){return t.actions}}],U=(0,g.useRef)(null),Y=(0,o.Z)(U),B=null!=e&&e.autoHeight?"flex-auto h-auto":"h-full flex-auto overflow-hidden",G=null!=e&&e.autoHeight?void 0:void 0!==(null==Y?void 0:Y.height)?Y.height-140:void 0;return(0,O.jsxs)(O.Fragment,{children:[null!=e&&e.hideHeader?(0,O.jsx)(O.Fragment,{}):(0,O.jsx)(S.V,{title:"Pods (".concat(T,")"),breadcrumbs:[{name:"Workspace"}],actions:[]}),(0,O.jsx)("div",{className:B,ref:U,children:(0,O.jsx)(v.Z,{sticky:!0,size:"small",loading:"loading"===z,columns:Q,dataSource:W,scroll:{x:1e3,y:G},pagination:{pageSize:200,position:["bottomCenter"],hideOnSinglePage:!0},onChange:function(e,t,n,r){return onTableChange(e,r)}})})]})}},50173:function(e,t,n){"use strict";n.r(t);var r=n(22598),i=n(90087),a=n(6761),o=n(1071),u=n(85893);t.default=function(){return(0,u.jsx)(r.Wk,{children:(0,u.jsx)(a.o,{meta:(0,u.jsx)(o.h,{title:"Pods",description:"List of pods."}),children:(0,u.jsx)(i.u,{})})})}},26596:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/monitor/pod",function(){return n(50173)}])}},function(e){e.O(0,[3662,5877,3945,9774,2888,179],function(){return e(e.s=26596)}),_N_E=e.O()}]);