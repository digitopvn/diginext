(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7018],{90802:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/monitor/node",function(){return n(43466)}])},43466:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return O}});var l,i=n(11527),r=n(14367),a=n(13740),d=n(30388),o=n(46457),s=n(85273),c=n(58699),u=n(87078),x=n(2401),v=n(8584);n(5433);var h=n(36865),m=n(61663),j=n(5489),p=n(74637),f=n.n(p),g=n(32699),y=n(50959),Z=n(58436),k=n(28731);let C=e=>(0,k.wz)(["monitor-node","list"],"/api/v1/monitor/nodes",e);var w=n(99535),N=n(51959),S=n(42149),_=n(8462),b=n(18315),I=n(55915);let P=n(64814),T=n(54498);f().extend(T),f().extend(P);let E=null!==(l=I.XL.tableConfig.defaultPageSize)&&void 0!==l?l:20,z=()=>{var e;let{responsive:t}=(0,b.Jl)(),{data:n,status:l}=(0,Z.x7)(),{list:r=[]}=n||{},p=[{title:"Name",width:60,dataIndex:"name",key:"name",fixed:(null==t?void 0:t.md)?"left":void 0,filterSearch:!0,render(e,t){var n,l,r,a,d,c,u;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(o.Z.Text,{strong:!0,className:"leading-8",children:null===(n=t.metadata)||void 0===n?void 0:n.name}),(0,i.jsx)("br",{}),(0,i.jsx)(s.Z,{color:"cyan",children:null===(l=t.status.nodeInfo)||void 0===l?void 0:l.osImage}),(0,i.jsx)(s.Z,{color:"cyan",children:null===(r=t.status.nodeInfo)||void 0===r?void 0:r.architecture}),(0,i.jsxs)(s.Z,{color:"cyan",children:["CPU: ",null===(a=t.status.capacity)||void 0===a?void 0:a.cpu]}),(0,i.jsxs)(s.Z,{color:"cyan",children:["MEM: ",(0,g.round)((0,g.toInteger)(null===(d=t.status.capacity)||void 0===d?void 0:null===(c=d.memory)||void 0===c?void 0:c.replace("Ki",""))/1024/1024),"Gb"]}),(0,i.jsxs)(s.Z,{color:"cyan",children:["Pods: ",t.podCount,"/",null===(u=t.status.capacity)||void 0===u?void 0:u.pods]})]})},onFilter(e,t){var n,l;return null===(n=t.metadata)||void 0===n||!n.name||(null===(l=t.metadata)||void 0===l?void 0:l.name.indexOf(e.toString()))>-1}},{title:"Cluster",dataIndex:"clusterSlug",key:"clusterSlug",width:30,render:e=>(0,i.jsx)(c.ZP,{type:"link",style:{padding:0},children:e}),filterSearch:!0,filters:r.map(e=>({text:e.slug||"",value:e.slug||""})),onFilter:(e,t)=>!t.clusterSlug||t.clusterSlug.indexOf(e.toString())>-1},{title:"Capacity",dataIndex:"capacity",key:"capacity",width:35,render(e,t){var n,l;let r=(0,g.toInteger)(null===(n=t.cpuPercent)||void 0===n?void 0:n.replace("%","")),a=(0,g.toInteger)(null===(l=t.memoryPercent)||void 0===l?void 0:l.replace("%",""));return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(u.Z,{gutter:[0,0],children:[(0,i.jsx)(x.Z,{children:(0,i.jsx)(s.Z,{style:{width:44,textAlign:"center"},children:"CPU"})}),(0,i.jsx)(x.Z,{flex:"auto",children:(0,i.jsx)(v.Z,{percent:r,size:"small",strokeColor:r>90?"red":r>70?"orange":"#1668dc"})})]}),(0,i.jsxs)(u.Z,{gutter:[0,0],children:[(0,i.jsx)(x.Z,{children:(0,i.jsx)(s.Z,{children:"MEM"})}),(0,i.jsx)(x.Z,{flex:"auto",children:(0,i.jsx)(v.Z,{percent:a>99?99:a,size:"small",strokeColor:a>90?"red":a>70?"orange":"#1668dc"})})]})]})}},{title:"Created at",dataIndex:"createdAt",key:"createdAt",width:30,render(e,t){var n;return(0,i.jsx)(N.q,{date:null===(n=t.metadata)||void 0===n?void 0:n.creationTimestamp})},sorter(e,t){var n,l;return f()(null===(n=e.metadata)||void 0===n?void 0:n.creationTimestamp).diff(f()(null===(l=t.metadata)||void 0===l?void 0:l.creationTimestamp))}},{title:(0,i.jsx)(o.Z.Text,{className:"text-xs md:text-sm",children:"Action"}),key:"action",fixed:"right",width:(null==t?void 0:t.md)?30:26,render:(e,t)=>t.actions}],[k,I]=(0,y.useState)(0),[P,T]=(0,y.useState)(1),{data:z,status:A}=C({filter:{cluster:""}}),{list:F,pagination:M}=z||{},{total_items:O}=M||{},[X]=(0,w.kZ)(),[L,{setQuery:U}]=(0,_.o)(),W=(e,t)=>{var n,l;let{current:i}=e;I(null!==(l=null===(n=t.currentDataSource)||void 0===n?void 0:n.length)&&void 0!==l?l:0),i&&T(i)};(0,y.useEffect)(()=>I(null!==(e=null==F?void 0:F.length)&&void 0!==e?e:0),[F]);let q=(null==F?void 0:F.map((e,t)=>({...e,key:"ns-".concat(t),actions:(0,i.jsx)(h.Z.Compact,{children:(0,i.jsx)(m.Z,{title:"Are you sure to delete this item?",description:(0,i.jsx)("span",{className:"text-red-500",children:"Caution: this is permanent and cannot be rolled back."}),okText:"Yes",cancelText:"No",children:(0,i.jsx)(c.ZP,{icon:(0,i.jsx)(a.Z,{})})})})})))||[],D=(0,y.useRef)(null),G=(0,d.Z)(D);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(S.V,{title:"Nodes (".concat(k,")"),breadcrumbs:[{name:"Workspace"}],actions:[]}),(0,i.jsx)("div",{className:"h-full flex-auto overflow-hidden",ref:D,children:(0,i.jsx)(j.Z,{sticky:!0,size:"small",loading:"loading"===A,columns:p,dataSource:q,scroll:{x:1e3,y:void 0!==(null==G?void 0:G.height)?G.height-140:void 0},pagination:{pageSize:E,position:["bottomCenter"]},onChange:(e,t,n,l)=>W(e,l)})})]})};var A=n(27558),F=n(77736);let M=()=>(0,i.jsx)(r.Wk,{children:(0,i.jsx)(A.o,{meta:(0,i.jsx)(F.h,{title:"Nodes",description:"List of cluster's nodes."}),children:(0,i.jsx)(z,{})})});var O=M}},function(e){e.O(0,[8201,2967,8751,8584,1740,9774,2888,179],function(){return e(e.s=90802)}),_N_E=e.O()}]);