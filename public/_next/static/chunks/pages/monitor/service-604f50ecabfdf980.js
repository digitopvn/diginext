(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8018],{32381:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/monitor/service",function(){return a(43139)}])},54585:function(e,t,a){"use strict";a.d(t,{$:function(){return N}});var n=a(11527),i=a(13740),l=a(30388),r=a(36865),d=a(61663),o=a(58699),s=a(46457),u=a(5489),c=a(74637),v=a.n(c),m=a(25698),x=a.n(m),f=a(50959),h=a(58436),p=a(28731);let g=e=>(0,p.wz)(["monitor-service","list"],"/api/v1/monitor/services",e),S=e=>(0,p.TV)(["monitor-service","delete"],"/api/v1/monitor/services",e);var j=a(51959),k=a(42149),w=a(8462),_=a(18315);let y=a(64814),C=a(54498);v().extend(C),v().extend(y);let N=e=>{var t;let{responsive:a}=(0,_.Jl)(),[c,{setQuery:m}]=(0,w.o)(),{namespace:p,cluster:y}=c,{data:C,status:N}=(0,h.x7)(),{list:T=[]}=C||{},[Z,b]=(0,f.useState)(0),[E,I]=(0,f.useState)(1),{data:O,status:F}=g({filter:{cluster:y,namespace:p}}),{list:P,pagination:A}=O||{},{total_items:z}=A||{},[H,D]=S(),V=(e,t)=>{var a,n;let{current:i}=e;b(null!==(n=null===(a=t.currentDataSource)||void 0===a?void 0:a.length)&&void 0!==n?n:0),i&&I(i)};(0,f.useEffect)(()=>b(null!==(t=null==P?void 0:P.length)&&void 0!==t?t:0),[P]);let W=(null==P?void 0:P.map((e,t)=>({...e,key:"ns-".concat(t),actions:(0,n.jsx)(r.Z.Compact,{children:(0,n.jsx)(d.Z,{title:"Are you sure to delete this item?",description:(0,n.jsx)("span",{className:"text-red-500",children:"Caution: this is permanent and cannot be rolled back."}),onConfirm(){var t,a;return H({cluster:e.clusterSlug,namespace:null===(t=e.metadata)||void 0===t?void 0:t.namespace,name:null===(a=e.metadata)||void 0===a?void 0:a.name})},okText:"Yes",cancelText:"No",children:(0,n.jsx)(o.ZP,{icon:(0,n.jsx)(i.Z,{})})})})})))||[],X=null==P?void 0:P.map(e=>{var t,a;return{text:(null===(t=e.metadata)||void 0===t?void 0:t.name)||"",value:(null===(a=e.metadata)||void 0===a?void 0:a.name)||""}}).filter(e=>""!==e.value).filter((e,t,a)=>t===a.findIndex(t=>t.text===e.text)),$=null==P?void 0:P.map(e=>{var t,a;return{text:(null===(t=e.metadata)||void 0===t?void 0:t.namespace)||"",value:(null===(a=e.metadata)||void 0===a?void 0:a.namespace)||""}}).filter(e=>""!==e.value).filter((e,t,a)=>t===a.findIndex(t=>t.text===e.text)),q=[{title:"Name",width:60,dataIndex:"name",key:"name",fixed:(null==a?void 0:a.md)?"left":void 0,filterSearch:!0,render(e,t){var a;return null===(a=t.metadata)||void 0===a?void 0:a.name},filters:X,onFilter(e,t){var a,n;return null===(a=t.metadata)||void 0===a||!a.name||(null===(n=t.metadata)||void 0===n?void 0:n.name.indexOf(e.toString()))>-1}},{title:"Namespace",dataIndex:"namespace",key:"namespace",width:30,render(e,t){var a;return(0,n.jsx)(x(),{href:"#",onClick(e){var a;e.preventDefault(),m({...c,namespace:null===(a=t.metadata)||void 0===a?void 0:a.namespace})},children:null===(a=t.metadata)||void 0===a?void 0:a.namespace})},filterSearch:!0,filters:$,onFilter(e,t){var a,n;return null===(a=t.metadata)||void 0===a||!a.namespace||(null===(n=t.metadata)||void 0===n?void 0:n.namespace.indexOf(e.toString()))>-1}},{title:"Cluster",dataIndex:"clusterSlug",key:"clusterSlug",width:30,render:e=>(0,n.jsx)(o.ZP,{type:"link",style:{padding:0},onClick(t){m({...c,cluster:e})},children:e}),filterSearch:!0,filters:T.map(e=>({text:e.slug||"",value:e.slug||""})),onFilter:(e,t)=>!t.clusterSlug||t.clusterSlug.indexOf(e.toString())>-1},{title:"Created at",dataIndex:"createdAt",key:"createdAt",width:30,render(e,t){var a;return(0,n.jsx)(j.q,{date:null===(a=t.metadata)||void 0===a?void 0:a.creationTimestamp})},sorter(e,t){var a,n;return v()(null===(a=e.metadata)||void 0===a?void 0:a.creationTimestamp).diff(v()(null===(n=t.metadata)||void 0===n?void 0:n.creationTimestamp))}},{title:(0,n.jsx)(s.Z.Text,{className:"text-xs md:text-sm",children:"Action"}),key:"action",fixed:"right",width:(null==a?void 0:a.md)?30:26,render:(e,t)=>t.actions}],J=(0,f.useRef)(null),L=(0,l.Z)(J),R=(null==e?void 0:e.autoHeight)?"flex-auto":"h-full flex-auto overflow-hidden",Y=(null==e?void 0:e.autoHeight)?void 0:void 0!==(null==L?void 0:L.height)?L.height-140:void 0;return(0,n.jsxs)(n.Fragment,{children:[(null==e?void 0:e.hideHeader)?(0,n.jsx)(n.Fragment,{}):(0,n.jsx)(k.V,{title:"Services (".concat(Z,")"),breadcrumbs:[{name:"Workspace"}],actions:[]}),(0,n.jsx)("div",{className:R,ref:J,children:(0,n.jsx)(u.Z,{sticky:!0,size:"small",loading:"loading"===F,columns:q,dataSource:W,scroll:{x:1e3,y:Y},pagination:{pageSize:200,position:["bottomCenter"],hideOnSinglePage:!0},onChange:(e,t,a,n)=>V(e,n)})})]})}},43139:function(e,t,a){"use strict";a.r(t);var n=a(11527),i=a(14367),l=a(54585),r=a(70011),d=a(77736);let o=()=>(0,n.jsx)(i.Wk,{children:(0,n.jsx)(r.o,{meta:(0,n.jsx)(d.h,{title:"Services",description:"List of services."}),children:(0,n.jsx)(l.$,{})})});t.default=o}},function(e){e.O(0,[8201,2967,6517,2728,9774,2888,179],function(){return e(e.s=32381)}),_N_E=e.O()}]);