(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1956],{18616:function(e,t,n){"use strict";n.d(t,{T:function(){return useMonitorNamespaceApi},Y:function(){return useMonitorNamespaceDeleteApi}});var r=n(11778),useMonitorNamespaceApi=function(e){return(0,r.wz)(["monitor-namespace","list"],"/api/v1/monitor/namespaces",e)},useMonitorNamespaceDeleteApi=function(e){return(0,r.TV)(["monitor-namespace","delete"],"/api/v1/monitor/namespaces",e)}},18289:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return namespace}});var r=n(22598),a=n(59499),i=n(16835),o=n(48689),c=n(84213),s=n(73318),u=n(71471),l=n(78957),d=n(86738),m=n(44973),p=n(27484),f=n.n(p),v=n(41664),h=n.n(v),x=n(67294),j=n(47859),g=n(18616),b=n(61123),y=n(90447),w=n(56832),O=n(3669),S=n(85893);function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){(0,a.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var N=n(56176),_=n(84110);f().extend(_),f().extend(N);var NamespaceList=function(){var e=(0,O.Jl)().responsive,t=(0,w.o)(),n=(0,i.Z)(t,2),r=n[0],a=n[1].setQuery,p=r.cluster,v=(0,j.x7)(),N=v.data;v.status;var _=(N||{}).list,k=(0,x.useState)(0),T=k[0],C=k[1],P=(0,x.useState)(1),Z=(P[0],P[1]),A=(0,g.T)({filter:{cluster:p}}),E=A.data,D=A.status,M=E||{},z=M.list;(M.pagination||{}).total_items;var F=(0,g.Y)(),I=(0,i.Z)(F,2),K=I[0];I[1];var onTableChange=function(e,t){var n,r,a=e.current;C(null!==(n=null===(r=t.currentDataSource)||void 0===r?void 0:r.length)&&void 0!==n?n:0),a&&Z(a)};(0,x.useEffect)(function(){var e;return C(null!==(e=null==z?void 0:z.length)&&void 0!==e?e:0)},[z]);var L=[{title:"Name",width:60,dataIndex:"name",key:"name",fixed:null!=e&&e.md?"left":void 0,filterSearch:!0,render:function(e,t){var n,r;return(0,S.jsx)(h(),{href:"/monitor/namespace/resources?cluster=".concat(t.clusterSlug,"&namespace=").concat(null===(n=t.metadata)||void 0===n?void 0:n.name),children:null===(r=t.metadata)||void 0===r?void 0:r.name})},filters:null==z?void 0:z.map(function(e){var t,n;return{text:(null===(t=e.metadata)||void 0===t?void 0:t.name)||"",value:(null===(n=e.metadata)||void 0===n?void 0:n.name)||""}}),onFilter:function(e,t){var n,r;return null===(n=t.metadata)||void 0===n||!n.name||(null===(r=t.metadata)||void 0===r?void 0:r.name.indexOf(e.toString()))>-1}},{title:"Cluster",dataIndex:"clusterSlug",key:"clusterSlug",width:30,render:function(e){return(0,S.jsx)(s.ZP,{type:"link",style:{padding:0},onClick:function(t){a(_objectSpread(_objectSpread({},r),{},{cluster:e}))},children:e})},filterSearch:!0,filters:(void 0===_?[]:_).map(function(e){return{text:e.slug||"",value:e.slug||""}}),onFilter:function(e,t){return!t.clusterSlug||t.clusterSlug.indexOf(e.toString())>-1}},{title:"Created at",dataIndex:"createdAt",key:"createdAt",width:30,render:function(e,t){var n;return(0,S.jsx)(b.q,{date:null===(n=t.metadata)||void 0===n?void 0:n.creationTimestamp})},sorter:function(e,t){var n,r;return f()(null===(n=e.metadata)||void 0===n?void 0:n.creationTimestamp).diff(f()(null===(r=t.metadata)||void 0===r?void 0:r.creationTimestamp))}},{title:(0,S.jsx)(u.Z.Text,{className:"text-xs md:text-sm",children:"Action"}),key:"action",fixed:"right",width:null!=e&&e.md?30:26,render:function(e,t){return t.actions}}],Y=(null==z?void 0:z.map(function(e,t){return _objectSpread(_objectSpread({},e),{},{key:"ns-".concat(t),actions:(0,S.jsx)(l.Z.Compact,{children:(0,S.jsx)(d.Z,{title:"Are you sure to delete this item?",description:(0,S.jsx)("span",{className:"text-red-500",children:"Caution: this is permanent and cannot be rolled back."}),onConfirm:function(){var t;return K({cluster:e.cluster,name:null===(t=e.metadata)||void 0===t?void 0:t.name})},okText:"Yes",cancelText:"No",children:(0,S.jsx)(s.ZP,{icon:(0,S.jsx)(o.Z,{})})})})})}))||[],V=(0,x.useRef)(null),W=(0,c.Z)(V);return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(y.V,{title:"Namespaces (".concat(T,")"),breadcrumbs:[{name:"Workspace"}],actions:[]}),(0,S.jsx)("div",{className:"h-full flex-auto overflow-hidden",ref:V,children:(0,S.jsx)(m.Z,{sticky:!0,size:"small",loading:"loading"===D,columns:L,dataSource:Y,scroll:{x:1e3,y:void 0!==(null==W?void 0:W.height)?W.height-140:void 0},pagination:{pageSize:200,position:["bottomCenter"]},onChange:function(e,t,n,r){return onTableChange(e,r)}})})]})},k=n(6761),T=n(1071),namespace=function(){return(0,S.jsx)(r.Wk,{children:(0,S.jsx)(k.o,{meta:(0,S.jsx)(T.h,{title:"Namespaces",description:"List of namespaces."}),children:(0,S.jsx)(NamespaceList,{})})})}},55086:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/monitor/namespace",function(){return n(18289)}])}},function(e){e.O(0,[3662,5877,3945,9774,2888,179],function(){return e(e.s=55086)}),_N_E=e.O()}]);