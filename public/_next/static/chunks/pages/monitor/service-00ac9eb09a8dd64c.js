(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8018],{25686:function(e,t,n){"use strict";n.d(t,{$:function(){return ServiceList}});var r=n(59499),a=n(16835),i=n(48689),o=n(84213),l=n(78957),u=n(86738),c=n(73318),d=n(71471),s=n(44973),v=n(27484),f=n.n(v),m=n(41664),p=n.n(m),x=n(67294),h=n(47859),g=n(11778),j=n(61123),b=n(90447),S=n(56832),y=n(3669),O=n(85893);function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var w=n(56176),_=n(84110);f().extend(_),f().extend(w);var ServiceList=function(e){var t=(0,y.Jl)().responsive,n=(0,S.o)(),r=(0,a.Z)(n,2),v=r[0],m=r[1].setQuery,w=v.namespace,_=v.cluster,k=(0,h.x7)(),C=k.data;k.status;var P=(C||{}).list,N=(0,x.useState)(0),T=N[0],Z=N[1],E=(0,x.useState)(1),D=(E[0],E[1]),I=(0,g.wz)(["monitor-service","list"],"/api/v1/monitor/services",{filter:{cluster:_,namespace:w}}),F=I.data,A=I.status,z=F||{},H=z.list;(z.pagination||{}).total_items;var K=(0,g.TV)(["monitor-service","delete"],"/api/v1/monitor/services",void 0),L=(0,a.Z)(K,2),V=L[0];L[1];var onTableChange=function(e,t){var n,r,a=e.current;Z(null!==(n=null===(r=t.currentDataSource)||void 0===r?void 0:r.length)&&void 0!==n?n:0),a&&D(a)};(0,x.useEffect)(function(){var e;return Z(null!==(e=null==H?void 0:H.length)&&void 0!==e?e:0)},[H]);var W=(null==H?void 0:H.map(function(e,t){return _objectSpread(_objectSpread({},e),{},{key:"ns-".concat(t),actions:(0,O.jsx)(l.Z.Compact,{children:(0,O.jsx)(u.Z,{title:"Are you sure to delete this item?",description:(0,O.jsx)("span",{className:"text-red-500",children:"Caution: this is permanent and cannot be rolled back."}),onConfirm:function(){var t,n;return V({cluster:e.clusterSlug,namespace:null===(t=e.metadata)||void 0===t?void 0:t.namespace,name:null===(n=e.metadata)||void 0===n?void 0:n.name})},okText:"Yes",cancelText:"No",children:(0,O.jsx)(c.ZP,{icon:(0,O.jsx)(i.Z,{})})})})})}))||[],X=null==H?void 0:H.map(function(e){var t,n;return{text:(null===(t=e.metadata)||void 0===t?void 0:t.name)||"",value:(null===(n=e.metadata)||void 0===n?void 0:n.name)||""}}).filter(function(e){return""!==e.value}).filter(function(e,t,n){return t===n.findIndex(function(t){return t.text===e.text})}),$=null==H?void 0:H.map(function(e){var t,n;return{text:(null===(t=e.metadata)||void 0===t?void 0:t.namespace)||"",value:(null===(n=e.metadata)||void 0===n?void 0:n.namespace)||""}}).filter(function(e){return""!==e.value}).filter(function(e,t,n){return t===n.findIndex(function(t){return t.text===e.text})}),q=[{title:"Name",width:60,dataIndex:"name",key:"name",fixed:null!=t&&t.md?"left":void 0,filterSearch:!0,render:function(e,t){var n;return null===(n=t.metadata)||void 0===n?void 0:n.name},filters:X,onFilter:function(e,t){var n,r;return null===(n=t.metadata)||void 0===n||!n.name||(null===(r=t.metadata)||void 0===r?void 0:r.name.indexOf(e.toString()))>-1}},{title:"Namespace",dataIndex:"namespace",key:"namespace",width:30,render:function(e,t){var n;return(0,O.jsx)(p(),{href:"#",onClick:function(e){var n;e.preventDefault(),m(_objectSpread(_objectSpread({},v),{},{namespace:null===(n=t.metadata)||void 0===n?void 0:n.namespace}))},children:null===(n=t.metadata)||void 0===n?void 0:n.namespace})},filterSearch:!0,filters:$,onFilter:function(e,t){var n,r;return null===(n=t.metadata)||void 0===n||!n.namespace||(null===(r=t.metadata)||void 0===r?void 0:r.namespace.indexOf(e.toString()))>-1}},{title:"Cluster",dataIndex:"clusterSlug",key:"clusterSlug",width:30,render:function(e){return(0,O.jsx)(c.ZP,{type:"link",style:{padding:0},onClick:function(t){m(_objectSpread(_objectSpread({},v),{},{cluster:e}))},children:e})},filterSearch:!0,filters:(void 0===P?[]:P).map(function(e){return{text:e.slug||"",value:e.slug||""}}),onFilter:function(e,t){return!t.clusterSlug||t.clusterSlug.indexOf(e.toString())>-1}},{title:"Created at",dataIndex:"createdAt",key:"createdAt",width:30,render:function(e,t){var n;return(0,O.jsx)(j.q,{date:null===(n=t.metadata)||void 0===n?void 0:n.creationTimestamp})},sorter:function(e,t){var n,r;return f()(null===(n=e.metadata)||void 0===n?void 0:n.creationTimestamp).diff(f()(null===(r=t.metadata)||void 0===r?void 0:r.creationTimestamp))}},{title:(0,O.jsx)(d.Z.Text,{className:"text-xs md:text-sm",children:"Action"}),key:"action",fixed:"right",width:null!=t&&t.md?30:26,render:function(e,t){return t.actions}}],J=(0,x.useRef)(null),Q=(0,o.Z)(J),R=null!=e&&e.autoHeight?"flex-auto":"h-full flex-auto overflow-hidden",Y=null!=e&&e.autoHeight?void 0:void 0!==(null==Q?void 0:Q.height)?Q.height-140:void 0;return(0,O.jsxs)(O.Fragment,{children:[null!=e&&e.hideHeader?(0,O.jsx)(O.Fragment,{}):(0,O.jsx)(b.V,{title:"Services (".concat(T,")"),breadcrumbs:[{name:"Workspace"}],actions:[]}),(0,O.jsx)("div",{className:R,ref:J,children:(0,O.jsx)(s.Z,{sticky:!0,size:"small",loading:"loading"===A,columns:q,dataSource:W,scroll:{x:1e3,y:Y},pagination:{pageSize:200,position:["bottomCenter"],hideOnSinglePage:!0},onChange:function(e,t,n,r){return onTableChange(e,r)}})})]})}},89457:function(e,t,n){"use strict";n.r(t);var r=n(22598),a=n(25686),i=n(6761),o=n(1071),l=n(85893);t.default=function(){return(0,l.jsx)(r.Wk,{children:(0,l.jsx)(i.o,{meta:(0,l.jsx)(o.h,{title:"Services",description:"List of services."}),children:(0,l.jsx)(a.$,{})})})}},91862:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/monitor/service",function(){return n(89457)}])}},function(e){e.O(0,[3662,5877,3945,9774,2888,179],function(){return e(e.s=91862)}),_N_E=e.O()}]);