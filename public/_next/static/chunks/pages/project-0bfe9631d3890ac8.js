(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8512],{43921:function(e,l,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/project",function(){return t(42092)}])},54579:function(e,l,t){"use strict";t.d(l,{BT:function(){return o},E_:function(){return i},Zz:function(){return s}});var n=t(28731);let s=e=>(0,n.wz)(["projects","list"],"/api/v1/project",e),o=e=>(0,n.wz)(["projects","list"],"/api/v1/project/with-apps",e),i=()=>(0,n.TV)(["projects","delete"],"/api/v1/project")},42092:function(e,l,t){"use strict";t.r(l),t.d(l,{default:function(){return ek}});var n,s=t(11527),o=t(14367),i=t(86218),a=t(4651),r=t(13740),d=t(10544),c=t(76332),u=t(76068),p=t(34380),m=t(14989),x=t(66396),h=t(34282),j=t(63626),v=t(91446),g=t(84765),y=t(35396),f=t(58254),Z=t(5029),k=t(70759),b=t(48424),S=t(78177),w=t(30388),C=t(85273),I=t(58699),_=t(46457),P=t(5433),N=t(36865),Y=t(61663),A=t(88158),F=t(34153),T=t(5489),E=t(74637),L=t.n(E),z=t(32699),D=t(25698),O=t.n(D),M=t(39445),U=t(50959),R=t(54389),q=t(31211),B=t(54579),V=t(51959),W=t(42149),G=t(92810),K=t(74190);let X=e=>{var l;let t=(0,M.useRouter)(),[n,o]=U.useState(!1),[i,a]=U.useState(""),[r,d]=U.useState([]),c=r[r.length-1],u=e=>{t.push(e),o(!1)};return U.useEffect(()=>{let e=e=>{"k"===e.key&&(e.metaKey||e.ctrlKey)&&(e.preventDefault(),o(e=>!e))};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[]),(0,s.jsxs)(K.mY.Dialog,{open:n,onOpenChange:o,label:"Global Command Menu",children:[(0,s.jsx)(K.mY.Input,{value:i,onValueChange:a}),(0,s.jsxs)(K.mY.List,{children:[(0,s.jsx)(K.mY.Empty,{children:"No results found."}),null===(l=c?c.children:null==e?void 0:e.commands)||void 0===l?void 0:l.map((e,l)=>e.children?(0,s.jsx)(K.mY.Group,{heading:e.label,children:e.children.map((e,l)=>(0,s.jsx)(K.mY.Item,{onSelect(){e.children?(a(""),d([...r,e])):(o(!1),e.onSelect&&e.onSelect(e.value))},children:e.label},"subcmd-".concat(e.label,"-").concat(l)))},"cmdgroup-".concat(l)):(0,s.jsx)(K.mY.Item,{onSelect(){o(!1),e.onSelect&&e.onSelect(e.value)},children:e.label},"cmd-".concat(l))),c&&(0,s.jsxs)(K.mY.Item,{onSelect(){d([]),a("")},children:[(0,s.jsx)(G.Z,{})," Reset"]}),(0,s.jsx)(K.mY.Separator,{}),(0,s.jsxs)(K.mY.Group,{heading:"Navigation",children:[(0,s.jsx)(K.mY.Item,{onSelect:()=>u("/"),children:"Dashboard"}),(0,s.jsx)(K.mY.Item,{onSelect:()=>u("/project"),children:"Projects & apps"}),(0,s.jsx)(K.mY.Item,{onSelect:()=>u("/build"),children:"Builds & deploys"}),(0,s.jsx)(K.mY.Item,{onSelect:()=>u("/framework"),children:"Frameworks"}),(0,s.jsx)(K.mY.Item,{onSelect:()=>u("/git"),children:"Git Providers"}),(0,s.jsx)(K.mY.Item,{onSelect:()=>u("/cronjob"),children:"Cronjobs"}),(0,s.jsx)(K.mY.Item,{onSelect:()=>u("/monitor/node"),children:"Monitoring ≫ Nodes"}),(0,s.jsx)(K.mY.Item,{onSelect:()=>u("/monitor/namespace"),children:"Monitoring ≫ Namespaces"}),(0,s.jsx)(K.mY.Item,{onSelect:()=>u("/monitor/service"),children:"Monitoring ≫ Services"}),(0,s.jsx)(K.mY.Item,{onSelect:()=>u("/monitor/ingress"),children:"Monitoring ≫ Ingresses"}),(0,s.jsx)(K.mY.Item,{onSelect:()=>u("/monitor/deployment"),children:"Monitoring ≫ Deployments"}),(0,s.jsx)(K.mY.Item,{onSelect:()=>u("/monitor/pod"),children:"Monitoring ≫ Pods"}),(0,s.jsx)(K.mY.Item,{onSelect:()=>u("/infrastructure/cloud-provider"),children:"Infrastructure ≫ Cloud Providers"}),(0,s.jsx)(K.mY.Item,{onSelect:()=>u("/infrastructure/cluster"),children:"Infrastructure ≫ K8S Clusters"}),(0,s.jsx)(K.mY.Item,{onSelect:()=>u("/infrastructure/database"),children:"Infrastructure ≫ Databases"}),(0,s.jsx)(K.mY.Item,{onSelect:()=>u("/infrastructure/registry"),children:"Infrastructure ≫ Container Registries"}),(0,s.jsx)(K.mY.Item,{onSelect:()=>u("/workspace/users"),children:"Workspace ≫ Users"}),(0,s.jsx)(K.mY.Item,{onSelect:()=>u("/workspace/teams"),children:"Workspace ≫ Teams"}),(0,s.jsx)(K.mY.Item,{onSelect:()=>u("/workspace/roles"),children:"Workspace ≫ Roles"})]})]})]})};var H=t(8462),J=t(18315),Q=t(55174),$=t(55915),ee=t(28842),el=t(10684),et=t(50002),en=t(80042);let es=e=>{let{app:l,env:t,next:n}=e,[o,i]=(0,R.mv)({filter:{slug:l}}),a=async e=>{console.log("Success:",e);let l=[e.domain],s=await o({domains:l,env:t});console.log("response :>> ",s),n&&n()},r=e=>{console.log("Failed:",e)};return(0,s.jsxs)(et.Z,{name:"add-domains",style:{maxWidth:600},layout:"vertical",onFinish:a,onFinishFailed:r,autoComplete:"off",preserve:!1,children:[(0,s.jsx)(et.Z.Item,{label:"Domain",name:"domain",rules:[{required:!0,message:"Please input your domain."}],children:(0,s.jsx)(en.Z,{prefix:(0,s.jsx)(ee.Z,{}),placeholder:"Your domain"})}),(0,s.jsx)(et.Z.Item,{children:(0,s.jsx)(I.ZP,{type:"primary",htmlType:"submit",icon:"success"===i?(0,s.jsx)(el.Z,{}):(0,s.jsx)(S.Z,{}),loading:"loading"===i,children:"Submit"})})]})};var eo=t(32105),ei=t(38101),ea=t(59850),er=t(66599),ed=t(75616),ec=t(476),eu=t(3748),ep=t(54695),em=t(41507);let ex=e=>{var l,t,n,o,i,a;let{className:r=""}=e,d=(0,M.useRouter)(),{token:{colorBgContainer:c}}=ed.Z.useToken(),[u]=et.Z.useForm(),[p,{setQuery:m}]=(0,H.o)(),{sshUrl:x,branch:h}=p,[j,v]=(0,U.useState)(),{data:{list:g=[]}={},status:y}=(0,B.Zz)({populate:"owner",pagination:{page:1,size:100}}),{data:{list:f}={},status:Z}=(0,em.y3)(),{data:{list:k}={},status:b}=(0,ep.Dh)(),[S,w]=(0,R.TW)(),C=async l=>{console.log("Submit:",l),S({name:l.name,project:l.project,gitProvider:l.gitProvider,framework:j,shouldCreateGitRepo:!0}).then(l=>{console.log("res.data :>> ",l.data),(null==e?void 0:e.onDone)&&e.onDone(),l.status?(null==e?void 0:e.onSuccess)&&(null==e||e.onSuccess(l.data)):(null==e?void 0:e.onFailure)&&(null==e||e.onFailure(l.messages.join(".")))}).catch(l=>{(null==e?void 0:e.onFailure)&&(null==e||e.onFailure("Unable to create new app: ".concat(l,".")))})},P=e=>{console.log("Failed:",e)};return(0,s.jsxs)(ec.Z,{bordered:!1,className:"min-w-[350px]",title:(0,s.jsx)(_.Z.Title,{level:4,className:"!mb-0 text-center",children:"success"===w?"Congrats!":"loading"===w?"Processing...":"Create new app"}),children:["loading"===w&&(0,s.jsx)("div",{className:"p-4 text-center",children:(0,s.jsx)(eo.Z,{})}),"success"===w&&(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"mb-5 text-center text-3xl text-green-500",children:(0,s.jsx)(ei.Z,{})}),(0,s.jsx)(I.ZP,{icon:(0,s.jsx)(ea.Z,{}),size:"large",shape:"round",onClick:()=>(null==e?void 0:e.onClose)?e.onClose():d.push("/project"),children:"Back to projects & apps"})]}),"success"!==w&&"loading"!==w?(0,s.jsxs)(et.Z,{className:["h-full","overflow-x-hidden",r].join(" "),layout:"vertical",form:u,onFinish:C,onFinishFailed:P,autoComplete:"off",preserve:!1,children:[(0,s.jsx)(et.Z.Item,{name:"name",rules:[{required:!0,message:"App's name is required."}],children:(0,s.jsx)(en.Z,{placeholder:"App's name",autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",size:"large",tabIndex:0,autoFocus:!0})}),(0,s.jsx)(et.Z.Item,{name:"project",rules:[{required:!0,message:"Please select project."}],className:"mb-2",initialValue:null===(l=(g||[])[0])||void 0===l?void 0:l._id,children:(0,s.jsx)(eu.Z,{placeholder:"Select parent project",showSearch:!0,filterOption:(e,l)=>(null!==(o=null==l?void 0:l.label)&&void 0!==o?o:"").toLowerCase().includes(e.toLowerCase()),options:null==g?void 0:g.map(e=>({label:e.name,value:e._id}))})}),(0,s.jsx)(et.Z.Item,{name:"gitProvider",rules:[{required:!0,message:"Please select git provider."}],className:"mb-2",initialValue:null===(t=(f||[])[0])||void 0===t?void 0:t._id,children:(0,s.jsx)(eu.Z,{placeholder:"Select git provider for this app",showSearch:!0,filterOption:(e,l)=>(null!==(i=null==l?void 0:l.label)&&void 0!==i?i:"").toLowerCase().includes(e.toLowerCase()),options:null==f?void 0:f.map(e=>({label:e.name,value:e._id}))})}),(0,s.jsx)(et.Z.Item,{name:"framework",rules:[{required:!0,message:"Please select framework."}],className:"mb-2",initialValue:null===(n=(k||[])[0])||void 0===n?void 0:n._id,children:(0,s.jsx)(eu.Z,{placeholder:"Select git provider for this app",showSearch:!0,filterOption:(e,l)=>(null!==(a=null==l?void 0:l.label)&&void 0!==a?a:"").toLowerCase().includes(e.toLowerCase()),options:null==k?void 0:k.map(e=>({label:e.name,value:e._id})),onSelect:e=>v(null==k?void 0:k.find(l=>l._id===e))})}),(0,s.jsx)(et.Z.Item,{style:{marginBottom:0},className:"text-center",children:(0,s.jsx)(I.ZP,{type:"primary",htmlType:"submit",icon:(0,s.jsx)(er.Z,{}),size:"large",shape:"round",children:"Create"})})]}):(0,s.jsx)(s.Fragment,{})]})},eh=t(64814),ej=t(54498);L().extend(ej),L().extend(eh);let ev=null!==(n=$.XL.tableConfig.defaultPageSize)&&void 0!==n?n:20,eg=()=>{let e=(0,M.useRouter)(),[l,{setQuery:t}]=(0,H.o)(),{responsive:n}=(0,J.Jl)(),{modal:o}=(0,Q.f9)(),[E,D]=(0,U.useState)(l.page?parseInt(l.page,10):1),{data:G,status:K,refetch:$}=(0,B.BT)({populate:"owner",pagination:{page:E,size:ev}}),{list:ee,pagination:el}=G||{},{total_pages:et,total_items:en}=el||{},eo=[{title:"Project/app",width:(null==n?void 0:n.md)?60:40,dataIndex:"name",key:"name",fixed:(null==n?void 0:n.md)?"left":void 0,filterSearch:!0,filters:null==ee?void 0:ee.map(e=>({text:(null==e?void 0:e.slug)||"",value:(null==e?void 0:e.slug)||""})),onFilter:(e,l)=>null==l||!l.slug||(null==l?void 0:l.slug.indexOf(e.toString()))>-1,render(e,l){var n;return"project"===l.type?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(O(),{href:"/apps?project=".concat(l.slug),children:(0,s.jsx)("strong",{children:l.name})})," ",(0,s.jsx)(C.Z,{children:l.slug})]}):"app"===l.type?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:"cursor-pointer text-purple-300 transition-colors hover:text-purple-500 hover:transition-colors",onClick:()=>t({lv1:"edit",type:"app",app:l.slug}),children:l.name})," ",(0,s.jsx)(C.Z,{children:l.slug}),(0,s.jsx)(C.Z,{color:"cyan",children:null===(n=l.git)||void 0===n?void 0:n.provider})]}):e}},{title:"Cluster",width:30,dataIndex:"cluster",key:"cluster",render:e=>(0,s.jsx)(I.ZP,{type:"link",style:{padding:0},children:e}),filterSearch:!0,filters:[{text:"goon",value:"goon"}],onFilter:(e,l)=>l.cluster&&l.cluster.indexOf(e.toString())>-1||!0},{title:"Ready",width:20,dataIndex:"readyCount",key:"readyCount",render:(e,l)=>e&&l.replicas?(0,s.jsxs)(C.Z,{children:[e,"/",l.replicas]}):(0,s.jsx)(s.Fragment,{})},{title:"Last updated by",dataIndex:"lastUpdatedBy",key:"lastUpdatedBy",width:35,filterSearch:!0,render(e,l){var t;return(0,s.jsx)(s.Fragment,{children:e||(null===(t=l.owner)||void 0===t?void 0:t.name)})}},{title:"Last updated",dataIndex:"updatedAt",key:"updatedAt",width:30,render:e=>(0,s.jsx)(V.q,{date:e}),sorter:(e,l)=>L()(e.updatedAt).diff(L()(l.updatedAt))},{title:"Created at",dataIndex:"createdAt",key:"createdAt",width:30,render:e=>(0,s.jsx)(V.q,{date:e}),sorter:(e,l)=>L()(e.createdAt).diff(L()(l.createdAt))},{title:"Status",dataIndex:"status",fixed:(null==n?void 0:n.md)?"right":void 0,key:"status",width:(null==n?void 0:n.md)?20:15,filters:[{text:"archived",value:"archived"},{text:"healthy",value:"healthy"},{text:"undeployed",value:"undeployed"},{text:"partial_healthy",value:"partial_healthy"},{text:"failed",value:"failed"},{text:"crashed",value:"crashed"},{text:"unknown",value:"unknown"}],filterSearch:!0,onFilter:(e,l)=>"archived"===e?void 0!==l.archivedAt:"project"===l.type||"app"===l.type||(console.log("record.status === value :>> ",l.status,e),!!l.status&&l.status===e),render(e,l){let t=e;return l.type,(null==l?void 0:l.archivedAt)&&(t="archived"),(0,s.jsx)(C.Z,{color:"healthy"===e?"success":"undeployed"===e?"pink":"default",icon:(0,s.jsx)(i.Z,{className:"align-middle"}),children:t})}},{title:(0,s.jsx)(_.Z.Text,{className:"text-xs md:text-sm",children:"Action"}),key:"action",fixed:"right",width:(null==n?void 0:n.md)?18:13,dataIndex:"action",render:(e,l)=>l.actions}],[ei,ea]=(0,B.E_)(),[er,ed]=(0,R._M)(),[ec,eu]=(0,R.Bm)(),[ep,em]=(0,R.WK)(),[eh,ej]=(0,R.md)(),[eg,ey]=(0,q.rA)(),[ef,eZ]=(0,q.fg)(),[ek,eb]=(0,R.yq)(),[eS,ew]=(0,R.wt)(),[eC,eI]=(0,R.kK)(),e_=(e,l)=>{console.log("env :>> ",l);let t=null==o?void 0:o.info({title:"Add new domains",icon:(0,s.jsx)(a.Z,{}),content:(0,s.jsx)(es,{app:e,env:l,next(){null==t||t.destroy(),P.Z.success({message:"Congrats!",description:"New domain was added successfully!"})}}),footer:null,closable:!0,maskClosable:!0,onOk(){}})},eP=()=>{let e=null==o?void 0:o.info({className:"!p-0",style:{padding:0},bodyStyle:{padding:0},icon:null,content:(0,s.jsx)(ex,{onClose:()=>null==e?void 0:e.destroy()}),footer:null,closable:!0,maskClosable:!0,onOk(){}})},eN=(e,l,n)=>{t({lv1:"build",project:e,app:l})},eY=(e,l,n)=>{t({lv1:"release",project:e,app:l,env:n})},eA=(e,l,n)=>{t({lv1:"env_vars",project:e,app:l,env:n})},eF=async e=>{let l=await ei({_id:e});console.log("[deleteProject] result :>> ",l)},eT=async e=>{let l=await er({_id:e});$(),console.log("[deleteApp] result :>> ",l)},eE=async(e,l)=>{let t=await ec({_id:e,env:l});console.log("[deleteEnvironment] result :>> ",t)};(0,U.useEffect)(()=>{if(!e.isReady)return;let t=l.page?parseInt(l.page.toString(),10):1;D(t)},[l.page]);let eL=null==ee?void 0:ee.map(l=>({...l,type:"project",actions:(0,s.jsx)(N.Z.Compact,{children:(0,s.jsx)(Y.Z,{title:"Are you sure to delete this project?",description:(0,s.jsx)("span",{className:"text-red-500",children:"Caution: all of the related apps & deployed environments will be also deleted."}),onConfirm:()=>eF(l._id),okText:"Yes",cancelText:"No",children:(0,s.jsx)(I.ZP,{icon:(0,s.jsx)(r.Z,{})})})}),key:l._id,id:l._id,status:"N/A",children:l.apps?l.apps.map(n=>{var o;let i=Object.keys(null!==(o=n.deployEnvironment)&&void 0!==o?o:{}),a=i.map(o=>{var i;let a=(n.deployEnvironment||{})[o]||{},y={name:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(I.ZP,{type:"link",onClick:()=>t({lv1:"deploy_environment",project:l.slug,app:n.slug,env:o}),children:o.toUpperCase()}),(0,s.jsxs)(C.Z,{color:"green",children:["Namespace: ",a.namespace]})]}),key:"".concat(l.slug,"-").concat(n.slug,"-").concat(o),id:o,slug:o,projectSlug:l.slug,appSlug:n.slug,type:"prod"!==o?"env":"env-prod",status:"N/A",url:a.domains?"https://".concat(a.domains[0]):"",prereleaseUrl:"prod"===o?null!==(i=a.prereleaseUrl)&&void 0!==i?i:"https://".concat(n.slug,".prerelease.diginext.site").toLowerCase():"",...a};return y.actions="prod"===o?(0,s.jsxs)(N.Z.Compact,{children:[(0,s.jsx)(A.Z,{title:"Preview pre-release site",children:(0,s.jsx)(I.ZP,{icon:(0,s.jsx)(d.Z,{}),href:y.prereleaseUrl,target:"_blank",disabled:(0,z.isEmpty)(y.prereleaseUrl)})}),(0,s.jsx)(A.Z,{title:"View live website",children:(0,s.jsx)(I.ZP,{icon:(0,s.jsx)(c.Z,{}),href:y.url,target:"_blank",disabled:(0,z.isEmpty)(y.url)})}),(0,s.jsx)(F.Z,{menu:{items:[{label:"Deploy now",key:"deploy-now",icon:(0,s.jsx)(u.Z,{}),onClick(){let l="/deploy?app=".concat(n.slug,"&env=").concat(o);a.registry&&(l+="&registry=".concat(a.registry)),a.cluster&&(l+="&cluster=".concat(a.cluster)),a.port&&(l+="&port=".concat(a.port)),e.push(l)}},{label:"List of builds",key:"list-of-builds",icon:(0,s.jsx)(p.Z,{}),onClick:()=>eN(y.projectSlug,y.appSlug,y.id)},{label:"List of releases",key:"list-of-releases",icon:(0,s.jsx)(u.Z,{}),onClick:()=>eY(y.projectSlug,y.appSlug,o)},{label:"Modify environment variables",key:"env-vars",icon:(0,s.jsx)(m.Z,{}),onClick:()=>eA(y.projectSlug,y.appSlug,o)},{label:"Add domains",key:"add-domains",icon:(0,s.jsx)(x.Z,{}),onClick:()=>e_(y.appSlug,o)},{label:"Sleep",key:"sleep",icon:(0,s.jsx)(h.Z,{}),onClick:()=>ek({slug:y.appSlug,env:o})},{label:"Awake",key:"awake",icon:(0,s.jsx)(j.Z,{}),onClick:()=>eS({slug:y.appSlug,env:o})},{label:"Take down",key:"take-down",icon:(0,s.jsx)(v.Z,{}),onClick:()=>eC({slug:y.appSlug,env:o})}]},children:(0,s.jsx)(I.ZP,{style:{padding:"4px 4px"},children:(0,s.jsx)(g.Z,{})})}),(0,s.jsx)(Y.Z,{title:"Are you sure to delete this environment?",description:(0,s.jsx)("span",{className:"text-red-500",children:"Caution: this is permanent and cannot be rolled back (excepts re-deploying)."}),onConfirm:()=>eE(n._id,o),okText:"Yes",cancelText:"No",children:(0,s.jsx)(I.ZP,{icon:(0,s.jsx)(r.Z,{})})})]}):(0,s.jsxs)(N.Z.Compact,{children:[(0,s.jsx)(A.Z,{title:"View website",children:(0,s.jsx)(I.ZP,{icon:(0,s.jsx)(d.Z,{}),href:y.url,target:"_blank",disabled:(0,z.isEmpty)(y.url)})}),(0,s.jsx)(F.Z,{menu:{items:[{label:"Deploy now",key:"deploy-now",icon:(0,s.jsx)(u.Z,{}),onClick:()=>e.push("/deploy?app=".concat(n.slug,"&env=").concat(o,"&registry=").concat(a.registry,"&cluster=").concat(a.cluster))},{label:"List of builds",key:"list-of-builds",icon:(0,s.jsx)(p.Z,{}),onClick:()=>eN(y.projectSlug,y.appSlug,y.id)},{label:"Modify environment variables",key:"env-vars",icon:(0,s.jsx)(m.Z,{}),onClick:()=>eA(y.projectSlug,y.appSlug,o)},{label:"Add domains",key:"add-domains",icon:(0,s.jsx)(x.Z,{}),onClick:()=>e_(y.appSlug,o)},{label:"Sleep",key:"sleep",icon:(0,s.jsx)(h.Z,{}),onClick:()=>ek({slug:y.appSlug,env:o})},{label:"Awake",key:"awake",icon:(0,s.jsx)(j.Z,{}),onClick:()=>eS({slug:y.appSlug,env:o})},{label:"Take down",key:"take-down",icon:(0,s.jsx)(v.Z,{}),onClick:()=>eC({slug:y.appSlug,env:o})}]},children:(0,s.jsx)(I.ZP,{style:{padding:"4px 4px"},children:(0,s.jsx)(g.Z,{})})}),(0,s.jsx)(Y.Z,{title:"Are you sure to delete this environment?",description:(0,s.jsx)("span",{className:"text-red-500",children:"Caution: this is permanent and cannot be rolled back (excepts re-deploying)."}),onConfirm:()=>eE(n._id,o),okText:"Yes",cancelText:"No",children:(0,s.jsx)(I.ZP,{icon:(0,s.jsx)(r.Z,{})})})]}),y});return{...n,key:n._id,id:n._id,type:"app",children:a,actions:(0,s.jsxs)(N.Z.Compact,{children:[(0,s.jsx)(A.Z,{title:"Edit app",children:(0,s.jsx)(I.ZP,{icon:(0,s.jsx)(y.Z,{}),onClick:()=>t({lv1:"edit",type:"app",app:n.slug})})}),(0,s.jsx)(A.Z,{title:void 0!==n.archiveAt?"Unarchive":"Archive",children:(0,s.jsx)(I.ZP,{icon:void 0!==n.archiveAt?(0,s.jsx)(f.Z,{}):(0,s.jsx)(Z.Z,{}),onClick(){var e,l;return void 0!==n.archiveAt?null===(e=eh({_id:n._id}))||void 0===e?void 0:e.then(()=>$()):null===(l=ep({_id:n._id}))||void 0===l?void 0:l.then(()=>$())}})}),(0,s.jsx)(Y.Z,{title:"Are you sure to delete this app?",description:(0,s.jsx)("span",{className:"text-red-500",children:"Caution: all of the related deployed environments will be also deleted."}),onConfirm:()=>eT(n._id),okText:"Yes",cancelText:"No",children:(0,s.jsx)(I.ZP,{icon:(0,s.jsx)(r.Z,{})})})]})}}):[]})),ez=e=>{let{current:l}=e;t({page:null!=l?l:1})},eD=(0,U.useRef)(null),eO=(0,w.Z)(eD);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(X,{commands:null==ee?void 0:ee.map(e=>{var l;return{label:"".concat(e.name," (").concat(e.slug,")"),value:e,children:null===(l=e.apps)||void 0===l?void 0:l.map(l=>({value:l,label:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(C.Z,{children:e.slug}),"≫",(0,s.jsx)(C.Z,{children:l.slug})]}),children:Object.keys(l.deployEnvironment||{}).map(n=>({label:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(k.Z,{}),"Deploy environment ≫ ".concat(n.toUpperCase())]}),value:(l.deployEnvironment||{})[n],onSelect:s=>t({lv1:"deploy_environment",project:e.slug,app:l.slug,env:n})}))}))}})}),(0,s.jsx)(W.V,{title:"Projects & apps",breadcrumbs:[{name:"Workspace"}],actions:[(0,s.jsx)(I.ZP,{icon:(0,s.jsx)(b.Z,{className:"align-middle"}),href:"/import",children:"Import"},"import-btn"),(0,s.jsx)(I.ZP,{icon:(0,s.jsx)(S.Z,{className:"align-middle"}),onClick:()=>eP(),children:"Create app"},"create-app-btn")]}),(0,s.jsx)("div",{className:"h-full flex-auto overflow-hidden",ref:eD,children:(0,s.jsx)(T.Z,{size:"small",loading:"loading"===K,columns:eo,dataSource:eL,scroll:{x:(null==n?void 0:n.md)?1600:1200,y:void 0!==(null==eO?void 0:eO.height)?eO.height-120:void 0},sticky:{offsetHeader:0},pagination:{showSizeChanger:!0,current:E,defaultPageSize:ev,total:en,position:["bottomCenter"]},onChange:ez})})]})};var ey=t(1242),ef=t(77736);let eZ=()=>(0,s.jsx)(o.Wk,{children:(0,s.jsx)(ey.o,{meta:(0,s.jsx)(ef.h,{title:"Projects",description:"Manage builds & deployments of your projects / apps "}),children:(0,s.jsx)(eg,{})})});var ek=eZ}},function(e){e.O(0,[8201,2967,9001,9507,8874,9774,2888,179],function(){return e(e.s=43921)}),_N_E=e.O()}]);