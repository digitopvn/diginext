(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[512],{26860:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/project",function(){return n(92720)}])},1940:function(e,t,n){"use strict";n.d(t,{BT:function(){return l},E_:function(){return a},Zz:function(){return i}});var s=n(83360);let i=e=>(0,s.wz)(["projects","list"],"/api/v1/project",e),l=e=>(0,s.wz)(["projects","list"],"/api/v1/project/with-apps",e),a=()=>(0,s.TV)(["projects","delete"],"/api/v1/project")},81289:function(e,t,n){"use strict";n.d(t,{D:function(){return x},V:function(){return h}});var s=n(11527),i=n(95752),l=n(99513),a=n(18467),r=n(515),o=n(82129),c=n(8290),d=n(20193),p=n(95954),u=n(85276);function x(e){let{token:{colorTextHeading:t}}=r.Z.useToken(),{isDarkMode:n}=(0,u.vs)(),{color:i=n?"white":"black",value:l}=e;return(0,s.jsx)("h1",{className:"my-0 grow py-0 pt-2 text-xl font-bold",style:{color:i},children:l})}let h=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,p.useRouter)(),{breadcrumbs:n=[],title:u="Page Title",actions:h=[(0,s.jsx)(o.ZP,{type:"default",icon:(0,s.jsx)(i.Z,{className:"align-middle"}),children:"Settings"},"workspace-setting-btn"),(0,s.jsx)(o.ZP,{type:"default",icon:(0,s.jsx)(l.Z,{className:"align-middle"})},"more-btn")]}=e,{token:{colorTextHeading:j}}=r.Z.useToken();return(0,s.jsxs)("div",{className:"border-b border-gray-300 px-6 py-4",children:[(0,s.jsxs)(c.Z,{children:[(0,s.jsx)(c.Z.Item,{href:"".concat(t.basePath,"/"),children:(0,s.jsx)(a.Z,{})},"breadcrumb-home"),n.map((e,t)=>(0,s.jsxs)(c.Z.Item,{href:e.url,children:[e.icon,(0,s.jsx)("span",{children:e.name})]},"breadcrumb-".concat(t)))]}),(0,s.jsxs)("div",{className:" flex w-full flex-row",children:[(0,s.jsx)(x,{value:u}),(0,s.jsx)("div",{children:(0,s.jsx)(d.Z,{children:h})})]})]})}},92720:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return $}});var s,i=n(11527),l=n(66109),a=n(81289),r=n(48409),o=n(79781),c=n(79908),d=n(5962),p=n(59140),u=n(85718),x=n(37537),h=n(23407),j=n(63072),m=n(79560),g=n(44792),f=n(82129),y=n(3741),Z=n(69766),v=n(25857),k=n(20193),b=n(14354),w=n(42741),_=n(38833),C=n(39658),P=n(74637),S=n.n(P),N=n(32699),A=n(94603),T=n.n(A),E=n(95954),I=n(50959),F=n(10891),L=n(1940),z=n(1830),O=n(32365),U=n(74883),X=n(53468),M=n(73875),R=n(96430),V=n(31326),Y=n(78007);let B=e=>{let{app:t,env:n,next:s}=e,[l,a]=(0,F.mv)({filter:{slug:t}}),r=async e=>{console.log("Success:",e);let t=[e.domain],i=await l({domains:t,env:n});console.log("response :>> ",i),s&&s()},o=e=>{console.log("Failed:",e)};return(0,i.jsxs)(V.Z,{name:"add-domains",style:{maxWidth:600},layout:"vertical",onFinish:r,onFinishFailed:o,autoComplete:"off",children:[(0,i.jsx)(V.Z.Item,{label:"Domain",name:"domain",rules:[{required:!0,message:"Please input your domain."}],children:(0,i.jsx)(Y.Z,{prefix:(0,i.jsx)(X.Z,{}),placeholder:"Your domain"})}),(0,i.jsx)(V.Z.Item,{children:(0,i.jsx)(f.ZP,{type:"primary",htmlType:"submit",icon:"success"===a?(0,i.jsx)(M.Z,{}):(0,i.jsx)(R.Z,{}),loading:"loading"===a,children:"Submit"})})]})},q=n(64814),W=n(54498);S().extend(W),S().extend(q);let D=[{title:"Project/app",width:70,dataIndex:"name",key:"name",fixed:"left",render:(e,t)=>"project"===t.type?(0,i.jsx)(T(),{href:"/apps?project=".concat(t.slug),children:(0,i.jsx)("strong",{children:t.slug})}):"app"===t.type?(0,i.jsx)(i.Fragment,{children:t.slug}):e},{title:"Cluster",width:40,dataIndex:"cluster",key:"cluster",render:e=>(0,i.jsx)(f.ZP,{type:"link",style:{padding:0},children:e}),filterSearch:!0,filters:[{text:"goon",value:"goon"}],onFilter:(e,t)=>t.cluster&&t.cluster.indexOf(e.toString())>-1||!0},{title:"Ready",width:20,dataIndex:"readyCount",key:"readyCount",render:(e,t)=>e&&t.replicas?(0,i.jsxs)(y.Z,{children:[e,"/",t.replicas]}):(0,i.jsx)(i.Fragment,{})},{title:"Last updated by",dataIndex:"owner",key:"owner",width:45,filterSearch:!0,filters:[{text:"goon",value:"goon"}],onFilter:(e,t)=>t.owner&&t.owner.indexOf(e.toString())>-1||!0,render:e=>(0,i.jsx)(i.Fragment,{children:null==e?void 0:e.name})},{title:"Last updated",dataIndex:"updatedAt",key:"updatedAt",width:40,render:e=>(0,i.jsx)(z.q,{date:e}),sorter:(e,t)=>S()(e.updatedAt).diff(S()(t.updatedAt))},{title:"Created at",dataIndex:"createdAt",key:"createdAt",width:40,render:e=>(0,i.jsx)(z.q,{date:e}),sorter:(e,t)=>S()(e.createdAt).diff(S()(t.createdAt))},{title:"Status",dataIndex:"status",fixed:"right",key:"status",width:35,filters:[{text:"healthy",value:"healthy"},{text:"undeployed",value:"undeployed"},{text:"partial_healthy",value:"partial_healthy"},{text:"failed",value:"failed"},{text:"crashed",value:"crashed"},{text:"unknown",value:"unknown"}],filterSearch:!0,onFilter:(e,t)=>"project"===t.type||"app"===t.type||(console.log("record.status === value :>> ",t.status,e),!!t.status&&t.status===e),render:e=>(0,i.jsx)(y.Z,{color:"healthy"===e?"success":"undeployed"===e?"pink":"default",icon:(0,i.jsx)(r.Z,{className:"align-middle"}),children:e})},{title:"Action",key:"action",fixed:"right",width:70,dataIndex:"action",render:(e,t)=>t.actions}],G=null!==(s=U.XL.tableConfig.defaultPageSize)&&void 0!==s?s:20,H=()=>{let e=(0,E.useRouter)(),[t,{setQuery:n}]=(0,O.o)(),[s,l]=(0,I.useState)(t.page?parseInt(t.page,10):1),{data:a}=(0,L.BT)({populate:"owner",pagination:{page:s,size:G}}),{list:r,pagination:y}=a||{},{total_pages:P,total_items:S}=y||{},[A,T]=(0,L.E_)(),[z,U]=(0,F._M)(),[X,M]=(0,F.Bm)(),[R,V]=Z.Z.useModal(),Y=(e,t)=>{console.log("env :>> ",t);let n=R.info({title:"Add new domains",icon:(0,i.jsx)(o.Z,{}),content:(0,i.jsx)(B,{app:e,env:t,next:()=>{n.destroy(),v.Z.success({message:"Congrats!",description:"New domain was added successfully!"})}}),footer:null,closable:!0,maskClosable:!0,onOk(){}})},q=(e,t,s)=>{n({lv1:"build",project:e,app:t,env:s})},W=(e,t,s)=>{n({lv1:"release",project:e,app:t,env:s})},H=(e,t,s)=>{n({lv1:"env_vars",project:e,app:t,env:s})},J=async e=>{let t=await A({_id:e});console.log("[deleteProject] result :>> ",t)},K=async e=>{let t=await z({_id:e});console.log("[deleteApp] result :>> ",t)},Q=async(e,t)=>{let n=await X({_id:e,env:t});console.log("[deleteEnvironment] result :>> ",n)};(0,I.useEffect)(()=>{if(!e.isReady)return;let n=t.page?parseInt(t.page.toString(),10):1;l(n)},[t.page]);let $=null==r?void 0:r.map(e=>({...e,type:"project",actions:(0,i.jsxs)(k.Z.Compact,{children:[(0,i.jsx)(b.Z,{title:"Edit project",children:(0,i.jsx)(f.ZP,{icon:(0,i.jsx)(c.Z,{})})}),(0,i.jsx)(w.Z,{title:"Are you sure to delete this project?",description:(0,i.jsx)("span",{className:"text-red-500",children:"Caution: all of the related apps & deployed environments will be also deleted."}),onConfirm:()=>J(e._id),okText:"Yes",cancelText:"No",children:(0,i.jsx)(f.ZP,{icon:(0,i.jsx)(d.Z,{})})})]}),key:e._id,id:e._id,status:"N/A",children:e.apps?e.apps.map(t=>{var s;let l=Object.keys(null!==(s=t.deployEnvironment)&&void 0!==s?s:{}),a=l.map(s=>{var l;let a=(t.deployEnvironment||{})[s]||{},r={name:(0,i.jsx)(f.ZP,{type:"link",onClick:()=>n({lv1:"deploy_environment",project:e.slug,app:t.slug,env:s}),children:s.toUpperCase()}),key:"".concat(e.slug,"-").concat(t.slug,"-").concat(s),id:s,slug:s,projectSlug:e.slug,appSlug:t.slug,type:"prod"!==s?"env":"env-prod",status:"N/A",url:a.domains?"https://".concat(a.domains[0]):"",prereleaseUrl:"prod"===s?null!==(l=a.prereleaseUrl)&&void 0!==l?l:"https://".concat(t.slug,".prerelease.diginext.site").toLowerCase():"",...a};return r.actions="prod"===s?(0,i.jsxs)(k.Z.Compact,{children:[(0,i.jsx)(b.Z,{title:"Preview pre-release site",children:(0,i.jsx)(f.ZP,{icon:(0,i.jsx)(p.Z,{}),href:r.prereleaseUrl,target:"_blank",disabled:(0,N.isEmpty)(r.prereleaseUrl)})}),(0,i.jsx)(b.Z,{title:"View live website",children:(0,i.jsx)(f.ZP,{icon:(0,i.jsx)(u.Z,{}),href:r.url,target:"_blank",disabled:(0,N.isEmpty)(r.url)})}),(0,i.jsx)(_.Z,{menu:{items:[{label:"List of builds",key:"list-of-builds",icon:(0,i.jsx)(x.Z,{}),onClick:()=>q(r.projectSlug,r.appSlug,r.id)},{label:"List of releases",key:"list-of-releases",icon:(0,i.jsx)(h.Z,{}),onClick:()=>W(r.projectSlug,r.appSlug,s)},{label:"Modify environment variables",key:"env-vars",icon:(0,i.jsx)(j.Z,{}),onClick:()=>H(r.projectSlug,r.appSlug,s)},{label:"Add domains",key:"add-domains",icon:(0,i.jsx)(m.Z,{}),onClick:()=>Y(r.appSlug,s)}]},children:(0,i.jsx)(f.ZP,{style:{padding:"4px 4px"},children:(0,i.jsx)(g.Z,{})})}),(0,i.jsx)(w.Z,{title:"Are you sure to delete this environment?",description:(0,i.jsx)("span",{className:"text-red-500",children:"Caution: this is permanent and cannot be rolled back (excepts re-deploying)."}),onConfirm:()=>Q(t._id,s),okText:"Yes",cancelText:"No",children:(0,i.jsx)(f.ZP,{icon:(0,i.jsx)(d.Z,{})})})]}):(0,i.jsxs)(k.Z.Compact,{children:[(0,i.jsx)(b.Z,{title:"View website",children:(0,i.jsx)(f.ZP,{icon:(0,i.jsx)(p.Z,{}),href:r.url,target:"_blank",disabled:(0,N.isEmpty)(r.url)})}),(0,i.jsx)(_.Z,{menu:{items:[{label:"List of builds",key:"list-of-builds",icon:(0,i.jsx)(x.Z,{}),onClick:()=>q(r.projectSlug,r.appSlug,r.id)},{label:"Modify environment variables",key:"env-vars",icon:(0,i.jsx)(j.Z,{}),onClick:()=>H(r.projectSlug,r.appSlug,s)},{label:"Add domains",key:"add-domains",icon:(0,i.jsx)(m.Z,{}),onClick:()=>Y(r.appSlug,s)}]},children:(0,i.jsx)(f.ZP,{style:{padding:"4px 4px"},children:(0,i.jsx)(g.Z,{})})}),(0,i.jsx)(w.Z,{title:"Are you sure to delete this environment?",description:(0,i.jsx)("span",{className:"text-red-500",children:"Caution: this is permanent and cannot be rolled back (excepts re-deploying)."}),onConfirm:()=>Q(t._id,s),okText:"Yes",cancelText:"No",children:(0,i.jsx)(f.ZP,{icon:(0,i.jsx)(d.Z,{})})})]}),r});return{...t,key:t._id,id:t._id,status:"N/A",type:"app",children:a,actions:(0,i.jsxs)(k.Z.Compact,{children:[(0,i.jsx)(b.Z,{title:"Edit app",children:(0,i.jsx)(f.ZP,{icon:(0,i.jsx)(c.Z,{})})}),(0,i.jsx)(w.Z,{title:"Are you sure to delete this app?",description:(0,i.jsx)("span",{className:"text-red-500",children:"Caution: all of the related deployed environments will be also deleted."}),onConfirm:()=>K(t._id),okText:"Yes",cancelText:"No",children:(0,i.jsx)(f.ZP,{icon:(0,i.jsx)(d.Z,{})})})]})}}):[]})),ee=e=>{let{current:t}=e;n({page:null!=t?t:1})};return(0,i.jsxs)("div",{children:[(0,i.jsx)(C.Z,{columns:D,dataSource:$,scroll:{x:1600},sticky:{offsetHeader:48},pagination:{showSizeChanger:!0,current:s,defaultPageSize:G,total:S},onChange:ee}),V]})};var J=n(97428),K=n(96861);let Q=()=>(0,i.jsx)(l.Wk,{children:(0,i.jsxs)(J.o,{meta:(0,i.jsx)(K.h,{title:"Projects",description:"Manage builds & deployments of your projects / apps "}),children:[(0,i.jsx)(a.V,{title:"Projects",breadcrumbs:[{name:"Workspace"}]}),(0,i.jsx)(H,{})]})});var $=Q},96861:function(e,t,n){"use strict";n.d(t,{h:function(){return c}});var s=n(11527),i=n(67559),l=n.n(i),a=n(95954),r=n(68449),o=n(74883);let c=e=>{let t=(0,a.useRouter)();return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(l(),{children:[(0,s.jsx)("meta",{charSet:"UTF-8"},"charset"),(0,s.jsx)("meta",{name:"viewport",content:"width=device-width,initial-scale=1"},"viewport"),(0,s.jsx)("link",{rel:"apple-touch-icon",href:"".concat(t.basePath,"/apple-touch-icon.png")},"apple"),(0,s.jsx)("link",{rel:"icon",type:"image/png",sizes:"32x32",href:"".concat(t.basePath,"/favicon-32x32.png")},"icon32"),(0,s.jsx)("link",{rel:"icon",type:"image/png",sizes:"16x16",href:"".concat(t.basePath,"/favicon-16x16.png")},"icon16"),(0,s.jsx)("link",{rel:"icon",href:"".concat(t.basePath,"/favicon.ico")},"favicon")]}),(0,s.jsx)(r.PB,{title:"".concat(e.title," | ").concat(o.XL.site_name),description:e.description,canonical:e.canonical,openGraph:{title:e.title,description:e.description,url:e.canonical,locale:o.XL.locale,site_name:o.XL.site_name}}),(0,s.jsx)("link",{href:"https://cdn.jsdelivr.net/npm/remixicon@2.5.0/fonts/remixicon.css",rel:"stylesheet"})]})}}},function(e){e.O(0,[201,967,938,555,215,774,888,179],function(){return e(e.s=26860)}),_N_E=e.O()}]);