"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9363],{49363:function(e,t,r){r.r(t),r.d(t,{commonmarkLanguage:function(){return p},deleteMarkupBackward:function(){return v},insertNewlineContinueMarkup:function(){return L},markdown:function(){return I},markdownKeymap:function(){return y},markdownLanguage:function(){return k}});var n=r(14806),o=r(89730),l=r(68935),i=r(69716),f=r(74962),s=r(57600);let a=(0,l.kU)({commentTokens:{block:{open:"<!--",close:"-->"}}}),m=new s.md,u=i.E2.configure({props:[l.x0.add(e=>!e.is("Block")||e.is("Document")||null!=c(e)?void 0:(e,t)=>({from:t.doc.lineAt(e.from).to,to:e.to})),m.add(c),l.uj.add({Document:()=>null}),l.pp.add({Document:a})]});function c(e){let t=/^(?:ATX|Setext)Heading(\d)$/.exec(e.name);return t?+t[1]:void 0}let h=l.rs.of((e,t,r)=>{for(let n=(0,l.qz)(e).resolveInner(r,-1);n&&!(n.from<t);n=n.parent){let o=n.type.prop(m);if(null==o)continue;let i=function(e,t){let r=e;for(;;){let n=r.nextSibling,o;if(!n||null!=(o=c(n.type))&&o<=t)break;r=n}return r.to}(n,o);if(i>r)return{from:r,to:i}}return null});function g(e){return new l.SQ(a,e,[h],"markdown")}let p=g(u),d=u.configure([i.z7,i.ar,i.$2,i.dy]),k=g(d);class x{constructor(e,t,r,n,o,l,i){this.node=e,this.from=t,this.to=r,this.spaceBefore=n,this.spaceAfter=o,this.type=l,this.item=i}blank(e,t=!0){let r=this.spaceBefore+("Blockquote"==this.node.name?">":"");if(null!=e){for(;r.length<e;)r+=" ";return r}for(let n=this.to-this.from-r.length-this.spaceAfter.length;n>0;n--)r+=" ";return r+(t?this.spaceAfter:"")}marker(e,t){let r="OrderedList"==this.node.name?String(+A(this.item,e)[2]+t):"";return this.spaceBefore+r+this.type+this.spaceAfter}}function w(e,t){let r=[];for(let n=e;n&&"Document"!=n.name;n=n.parent)("ListItem"==n.name||"Blockquote"==n.name||"FencedCode"==n.name)&&r.push(n);let o=[];for(let l=r.length-1;l>=0;l--){let i=r[l],f,s=t.lineAt(i.from),a=i.from-s.from;if("FencedCode"==i.name)o.push(new x(i,a,a,"","","",null));else if("Blockquote"==i.name&&(f=/^[ \t]*>( ?)/.exec(s.text.slice(a))))o.push(new x(i,a,a+f[0].length,"",f[1],">",null));else if("ListItem"==i.name&&"OrderedList"==i.parent.name&&(f=/^([ \t]*)\d+([.)])([ \t]*)/.exec(s.text.slice(a)))){let m=f[3],u=f[0].length;m.length>=4&&(m=m.slice(0,m.length-4),u-=4),o.push(new x(i.parent,a,a+u,f[1],m,f[2],i))}else if("ListItem"==i.name&&"BulletList"==i.parent.name&&(f=/^([ \t]*)([-+*])([ \t]{1,4}\[[ xX]\])?([ \t]+)/.exec(s.text.slice(a)))){let c=f[4],h=f[0].length;c.length>4&&(c=c.slice(0,c.length-4),h-=4);let g=f[2];f[3]&&(g+=f[3].replace(/[xX]/," ")),o.push(new x(i.parent,a,a+h,f[1],c,g,i))}}return o}function A(e,t){return/^(\s*)(\d+)(?=[.)])/.exec(t.sliceString(e.from,e.from+10))}function B(e,t,r,n=0){for(let o=-1,l=e;;){if("ListItem"==l.name){let i=A(l,t),f=+i[2];if(o>=0){if(f!=o+1)return;r.push({from:l.from+i[1].length,to:l.from+i[0].length,insert:String(o+2+n)})}o=f}let s=l.nextSibling;if(!s)break;l=s}}let L=({state:e,dispatch:t})=>{let r=(0,l.qz)(e),{doc:o}=e,i=null,f=e.changeByRange(t=>{if(!t.empty||!k.isActiveAt(e,t.from))return i={range:t};let l=t.from,f=o.lineAt(l),s=w(r.resolveInner(l,-1),o);for(;s.length&&s[s.length-1].from>l-f.from;)s.pop();if(!s.length)return i={range:t};let a=s[s.length-1];if(a.to-a.spaceAfter.length>l-f.from)return i={range:t};let m=l>=a.to-a.spaceAfter.length&&!/\S/.test(f.text.slice(a.to));if(a.item&&m){if(a.node.firstChild.to>=l||f.from>0&&!/[^\s>]/.test(o.lineAt(f.from-1).text)){let u=s.length>1?s[s.length-2]:null,c,h="";u&&u.item?(c=f.from+u.from,h=u.marker(o,1)):c=f.from+(u?u.to:0);let g=[{from:c,to:l,insert:h}];return"OrderedList"==a.node.name&&B(a.item,o,g,-2),u&&"OrderedList"==u.node.name&&B(u.item,o,g),{range:n.jT.cursor(c+h.length),changes:g}}{let p="";for(let d=0,x=s.length-2;d<=x;d++)p+=s[d].blank(d<x?s[d+1].from-p.length:null,d<x);return p+=e.lineBreak,{range:n.jT.cursor(l+p.length),changes:{from:f.from,insert:p}}}}if("Blockquote"==a.node.name&&m&&f.from){let A=o.lineAt(f.from-1),L=/>\s*$/.exec(A.text);if(L&&L.index==a.from){let b=e.changes([{from:A.from+L.index,to:A.to},{from:f.from+a.from,to:f.to}]);return{range:t.map(b),changes:b}}}let v=[];"OrderedList"==a.node.name&&B(a.item,o,v);let y=a.item&&a.item.from<f.from,S="";if(!y||/^[\s\d.)\-+*>]*/.exec(f.text)[0].length>=a.to)for(let I=0,C=s.length-1;I<=C;I++)S+=I!=C||y?s[I].blank(I<C?s[I+1].from-S.length:null):s[I].marker(o,1);let T=l;for(;T>f.from&&/\s/.test(f.text.charAt(T-f.from-1));)T--;return S=e.lineBreak+S,v.push({from:T,to:l,insert:S}),{range:n.jT.cursor(T+S.length),changes:v}});return!i&&(t(e.update(f,{scrollIntoView:!0,userEvent:"input"})),!0)};function b(e){return"QuoteMark"==e.name||"ListMark"==e.name}let v=({state:e,dispatch:t})=>{let r=(0,l.qz)(e),o=null,i=e.changeByRange(t=>{let l=t.from,{doc:i}=e;if(t.empty&&k.isActiveAt(e,t.from)){let f=i.lineAt(l),s=w(function(e,t){let r=e.resolveInner(t,-1),n=t;b(r)&&(n=r.from,r=r.parent);for(let o;o=r.childBefore(n);)if(b(o))n=o.from;else if("OrderedList"==o.name||"BulletList"==o.name)n=(r=o.lastChild).to;else break;return r}(r,l),i);if(s.length){let a=s[s.length-1],m=a.to-a.spaceAfter.length+(a.spaceAfter?1:0);if(l-f.from>m&&!/\S/.test(f.text.slice(m,l-f.from)))return{range:n.jT.cursor(f.from+m),changes:{from:f.from+m,to:l}};if(l-f.from==m&&(!a.item||f.from<=a.item.from||!/\S/.test(f.text.slice(0,a.to)))){let u=f.from+a.from;if(a.item&&a.node.from<a.item.from&&/\S/.test(f.text.slice(a.from,a.to)))return{range:t,changes:{from:u,to:f.from+a.to,insert:a.blank(a.to-a.from)}};if(u<l)return{range:n.jT.cursor(u),changes:{from:u,to:l}}}}}return o={range:t}});return!o&&(t(e.update(i,{scrollIntoView:!0,userEvent:"delete"})),!0)},y=[{key:"Enter",run:L},{key:"Backspace",run:v}],S=(0,f.html)({matchClosingTags:!1});function I(e={}){var t;let{codeLanguages:r,defaultCodeLanguage:f,addKeymap:s=!0,base:{parser:a}=p}=e;if(!(a instanceof i.xj))throw RangeError("Base parser provided to `markdown` should be a Markdown parser");let m=e.extensions?[e.extensions]:[],u=[S.support],c;f instanceof l.ri?(u.push(f.support),c=f.language):f&&(c=f);let h=r||c?(t=c,e=>{if(e&&r){let n=null;if(e=/\S*/.exec(e)[0],(n="function"==typeof r?r(e):l.c6.matchLanguageName(r,e,!0))instanceof l.c6)return n.support?n.support.language.parser:l.Be.getSkippingParser(n.load());if(n)return n.parser}return t?t.parser:null}):void 0;return m.push((0,i.zY)({codeParser:h,htmlParser:S.language.parser})),s&&u.push(n.Wl.high(o.$f.of(y))),new l.ri(g(a.configure(m)),u)}}}]);